/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/call/page";
exports.ids = ["app/call/page"];
exports.modules = {

/***/ "./action-async-storage.external":
/*!****************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external" ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external");

/***/ }),

/***/ "./request-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist\\client\\components\\action-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist\\client\\components\\request-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!*********************************************************************************************!*\
  !*** external "next/dist\\client\\components\\static-generation-async-storage.external.js" ***!
  \*********************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\static-generation-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?9990":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?425e":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fcall%2Fpage&page=%2Fcall%2Fpage&appPaths=%2Fcall%2Fpage&pagePath=private-next-app-dir%2Fcall%2Fpage.tsx&appDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fcall%2Fpage&page=%2Fcall%2Fpage&appPaths=%2Fcall%2Fpage&pagePath=private-next-app-dir%2Fcall%2Fpage.tsx&appDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-page/module.compiled */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/module.compiled.js?c7e6\");\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"originalPathname\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\"TURBOPACK { transition: next-ssr }\";\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'call',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/call/page.tsx */ \"(rsc)/./app/call/page.tsx\")), \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\apps\\\\next\\\\app\\\\call\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/layout.tsx */ \"(rsc)/./app/layout.tsx\")), \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\apps\\\\next\\\\app\\\\layout.tsx\"],\n'not-found': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/not-found-error.js\", 23)), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"E:\\\\Code\\\\Nodejs\\\\Zola\\\\apps\\\\next\\\\app\\\\call\\\\page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst originalPathname = \"/call/page\";\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/call/page\",\n        pathname: \"/call\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMC40X0BiYWJlbCtjb3JlQDcuMl9lNTFjOTRlMzk3YmQyZTIxOWUxOTEyZDQ0NmExN2ZmNi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZjYWxsJTJGcGFnZSZwYWdlPSUyRmNhbGwlMkZwYWdlJmFwcFBhdGhzPSUyRmNhbGwlMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGY2FsbCUyRnBhZ2UudHN4JmFwcERpcj1FJTNBJTVDQ29kZSU1Q05vZGVqcyU1Q1pvbGElNUNhcHBzJTVDbmV4dCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RSUzQSU1Q0NvZGUlNUNOb2RlanMlNUNab2xhJTVDYXBwcyU1Q25leHQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxhQUFhLHNCQUFzQjtBQUNpRTtBQUNyQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMsdUJBQXVCLGtKQUE0RjtBQUNuSDtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHlCQUF5Qiw0SUFBd0Y7QUFDakgsb0JBQW9CLDhTQUFnRjtBQUNwRztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDdUI7QUFDNkQ7QUFDcEYsNkJBQTZCLG1CQUFtQjtBQUNoRDtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDdUQ7QUFDdkQ7QUFDTyx3QkFBd0IsOEdBQWtCO0FBQ2pEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3pvbGEtd2ViLz9jOGI4Il0sInNvdXJjZXNDb250ZW50IjpbIlwiVFVSQk9QQUNLIHsgdHJhbnNpdGlvbjogbmV4dC1zc3IgfVwiO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXBhZ2UvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuLy8gV2UgaW5qZWN0IHRoZSB0cmVlIGFuZCBwYWdlcyBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgdHJlZSA9IHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJycsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJ2NhbGwnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbJ19fUEFHRV9fJywge30sIHtcbiAgICAgICAgICBwYWdlOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJFOlxcXFxDb2RlXFxcXE5vZGVqc1xcXFxab2xhXFxcXGFwcHNcXFxcbmV4dFxcXFxhcHBcXFxcY2FsbFxcXFxwYWdlLnRzeFwiKSwgXCJFOlxcXFxDb2RlXFxcXE5vZGVqc1xcXFxab2xhXFxcXGFwcHNcXFxcbmV4dFxcXFxhcHBcXFxcY2FsbFxcXFxwYWdlLnRzeFwiXSxcbiAgICAgICAgICBcbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiRTpcXFxcQ29kZVxcXFxOb2RlanNcXFxcWm9sYVxcXFxhcHBzXFxcXG5leHRcXFxcYXBwXFxcXGxheW91dC50c3hcIiksIFwiRTpcXFxcQ29kZVxcXFxOb2RlanNcXFxcWm9sYVxcXFxhcHBzXFxcXG5leHRcXFxcYXBwXFxcXGxheW91dC50c3hcIl0sXG4nbm90LWZvdW5kJzogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL25vdC1mb3VuZC1lcnJvclwiKSwgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCJdLFxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIF1cbiAgICAgIH0uY2hpbGRyZW47XG5jb25zdCBwYWdlcyA9IFtcIkU6XFxcXENvZGVcXFxcTm9kZWpzXFxcXFpvbGFcXFxcYXBwc1xcXFxuZXh0XFxcXGFwcFxcXFxjYWxsXFxcXHBhZ2UudHN4XCJdO1xuZXhwb3J0IHsgdHJlZSwgcGFnZXMgfTtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgR2xvYmFsRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5XCI7XG5jb25zdCBfX25leHRfYXBwX3JlcXVpcmVfXyA9IF9fd2VicGFja19yZXF1aXJlX19cbmNvbnN0IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcbmV4cG9ydCBjb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvY2FsbC9wYWdlXCI7XG5leHBvcnQgY29uc3QgX19uZXh0X2FwcF9fID0ge1xuICAgIHJlcXVpcmU6IF9fbmV4dF9hcHBfcmVxdWlyZV9fLFxuICAgIGxvYWRDaHVuazogX19uZXh0X2FwcF9sb2FkX2NodW5rX19cbn07XG5leHBvcnQgKiBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VudHJ5LWJhc2VcIjtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFBhZ2VSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgIHBhZ2U6IFwiL2NhbGwvcGFnZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvY2FsbFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiLFxuICAgICAgICBhcHBQYXRoczogW11cbiAgICB9LFxuICAgIHVzZXJsYW5kOiB7XG4gICAgICAgIGxvYWRlclRyZWU6IHRyZWVcbiAgICB9XG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXBhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fcall%2Fpage&page=%2Fcall%2Fpage&appPaths=%2Fcall%2Fpage&pagePath=private-next-app-dir%2Fcall%2Fpage.tsx&appDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext%5Capp%5Cglobals.css&modules=E%3A%5CCode%5CNodejs%5CZola%5Cpackages%5Capp%5Ccomponents%5CGlobalIncomingCall.web.js&server=true!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext%5Capp%5Cglobals.css&modules=E%3A%5CCode%5CNodejs%5CZola%5Cpackages%5Capp%5Ccomponents%5CGlobalIncomingCall.web.js&server=true! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ../../packages/app/components/GlobalIncomingCall.web.js */ \"(ssr)/../../packages/app/components/GlobalIncomingCall.web.js\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMC40X0BiYWJlbCtjb3JlQDcuMl9lNTFjOTRlMzk3YmQyZTIxOWUxOTEyZDQ0NmExN2ZmNi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9RSUzQSU1Q0NvZGUlNUNOb2RlanMlNUNab2xhJTVDYXBwcyU1Q25leHQlNUNhcHAlNUNnbG9iYWxzLmNzcyZtb2R1bGVzPUUlM0ElNUNDb2RlJTVDTm9kZWpzJTVDWm9sYSU1Q3BhY2thZ2VzJTVDYXBwJTVDY29tcG9uZW50cyU1Q0dsb2JhbEluY29taW5nQ2FsbC53ZWIuanMmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9sYS13ZWIvP2E0MzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJFOlxcXFxDb2RlXFxcXE5vZGVqc1xcXFxab2xhXFxcXHBhY2thZ2VzXFxcXGFwcFxcXFxjb21wb25lbnRzXFxcXEdsb2JhbEluY29taW5nQ2FsbC53ZWIuanNcIikiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext%5Capp%5Cglobals.css&modules=E%3A%5CCode%5CNodejs%5CZola%5Cpackages%5Capp%5Ccomponents%5CGlobalIncomingCall.web.js&server=true!\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Capp-router.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cerror-boundary.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Clayout-router.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cnot-found-boundary.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Crender-from-template-context.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cstatic-generation-searchparams-bailout-provider.js&server=true!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Capp-router.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cerror-boundary.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Clayout-router.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cnot-found-boundary.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Crender-from-template-context.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cstatic-generation-searchparams-bailout-provider.js&server=true! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/app-router.js */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/app-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/error-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/layout-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/not-found-boundary.js */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/not-found-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/render-from-template-context.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js\", 23))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMC40X0BiYWJlbCtjb3JlQDcuMl9lNTFjOTRlMzk3YmQyZTIxOWUxOTEyZDQ0NmExN2ZmNi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9RSUzQSU1Q0NvZGUlNUNOb2RlanMlNUNab2xhJTVDbm9kZV9tb2R1bGVzJTVDLnBucG0lNUNuZXh0JTQwMTQuMC40XyU0MGJhYmVsJTJCY29yZSU0MDcuMl9lNTFjOTRlMzk3YmQyZTIxOWUxOTEyZDQ0NmExN2ZmNiU1Q25vZGVfbW9kdWxlcyU1Q25leHQlNUNkaXN0JTVDY2xpZW50JTVDY29tcG9uZW50cyU1Q2FwcC1yb3V0ZXIuanMmbW9kdWxlcz1FJTNBJTVDQ29kZSU1Q05vZGVqcyU1Q1pvbGElNUNub2RlX21vZHVsZXMlNUMucG5wbSU1Q25leHQlNDAxNC4wLjRfJTQwYmFiZWwlMkJjb3JlJTQwNy4yX2U1MWM5NGUzOTdiZDJlMjE5ZTE5MTJkNDQ2YTE3ZmY2JTVDbm9kZV9tb2R1bGVzJTVDbmV4dCU1Q2Rpc3QlNUNjbGllbnQlNUNjb21wb25lbnRzJTVDZXJyb3ItYm91bmRhcnkuanMmbW9kdWxlcz1FJTNBJTVDQ29kZSU1Q05vZGVqcyU1Q1pvbGElNUNub2RlX21vZHVsZXMlNUMucG5wbSU1Q25leHQlNDAxNC4wLjRfJTQwYmFiZWwlMkJjb3JlJTQwNy4yX2U1MWM5NGUzOTdiZDJlMjE5ZTE5MTJkNDQ2YTE3ZmY2JTVDbm9kZV9tb2R1bGVzJTVDbmV4dCU1Q2Rpc3QlNUNjbGllbnQlNUNjb21wb25lbnRzJTVDbGF5b3V0LXJvdXRlci5qcyZtb2R1bGVzPUUlM0ElNUNDb2RlJTVDTm9kZWpzJTVDWm9sYSU1Q25vZGVfbW9kdWxlcyU1Qy5wbnBtJTVDbmV4dCU0MDE0LjAuNF8lNDBiYWJlbCUyQmNvcmUlNDA3LjJfZTUxYzk0ZTM5N2JkMmUyMTllMTkxMmQ0NDZhMTdmZjYlNUNub2RlX21vZHVsZXMlNUNuZXh0JTVDZGlzdCU1Q2NsaWVudCU1Q2NvbXBvbmVudHMlNUNub3QtZm91bmQtYm91bmRhcnkuanMmbW9kdWxlcz1FJTNBJTVDQ29kZSU1Q05vZGVqcyU1Q1pvbGElNUNub2RlX21vZHVsZXMlNUMucG5wbSU1Q25leHQlNDAxNC4wLjRfJTQwYmFiZWwlMkJjb3JlJTQwNy4yX2U1MWM5NGUzOTdiZDJlMjE5ZTE5MTJkNDQ2YTE3ZmY2JTVDbm9kZV9tb2R1bGVzJTVDbmV4dCU1Q2Rpc3QlNUNjbGllbnQlNUNjb21wb25lbnRzJTVDcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyZtb2R1bGVzPUUlM0ElNUNDb2RlJTVDTm9kZWpzJTVDWm9sYSU1Q25vZGVfbW9kdWxlcyU1Qy5wbnBtJTVDbmV4dCU0MDE0LjAuNF8lNDBiYWJlbCUyQmNvcmUlNDA3LjJfZTUxYzk0ZTM5N2JkMmUyMTllMTkxMmQ0NDZhMTdmZjYlNUNub2RlX21vZHVsZXMlNUNuZXh0JTVDZGlzdCU1Q2NsaWVudCU1Q2NvbXBvbmVudHMlNUNzdGF0aWMtZ2VuZXJhdGlvbi1zZWFyY2hwYXJhbXMtYmFpbG91dC1wcm92aWRlci5qcyZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsMFlBQTJNO0FBQzNNLGtaQUErTTtBQUMvTSxnWkFBOE07QUFDOU0sMFpBQW1OO0FBQ25OLDhhQUE2TjtBQUM3TiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvbGEtd2ViLz9lZGY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiRTpcXFxcQ29kZVxcXFxOb2RlanNcXFxcWm9sYVxcXFxub2RlX21vZHVsZXNcXFxcLnBucG1cXFxcbmV4dEAxNC4wLjRfQGJhYmVsK2NvcmVANy4yX2U1MWM5NGUzOTdiZDJlMjE5ZTE5MTJkNDQ2YTE3ZmY2XFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcYXBwLXJvdXRlci5qc1wiKTtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiRTpcXFxcQ29kZVxcXFxOb2RlanNcXFxcWm9sYVxcXFxub2RlX21vZHVsZXNcXFxcLnBucG1cXFxcbmV4dEAxNC4wLjRfQGJhYmVsK2NvcmVANy4yX2U1MWM5NGUzOTdiZDJlMjE5ZTE5MTJkNDQ2YTE3ZmY2XFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcZXJyb3ItYm91bmRhcnkuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkU6XFxcXENvZGVcXFxcTm9kZWpzXFxcXFpvbGFcXFxcbm9kZV9tb2R1bGVzXFxcXC5wbnBtXFxcXG5leHRAMTQuMC40X0BiYWJlbCtjb3JlQDcuMl9lNTFjOTRlMzk3YmQyZTIxOWUxOTEyZDQ0NmExN2ZmNlxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGxheW91dC1yb3V0ZXIuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkU6XFxcXENvZGVcXFxcTm9kZWpzXFxcXFpvbGFcXFxcbm9kZV9tb2R1bGVzXFxcXC5wbnBtXFxcXG5leHRAMTQuMC40X0BiYWJlbCtjb3JlQDcuMl9lNTFjOTRlMzk3YmQyZTIxOWUxOTEyZDQ0NmExN2ZmNlxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXG5vdC1mb3VuZC1ib3VuZGFyeS5qc1wiKTtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiRTpcXFxcQ29kZVxcXFxOb2RlanNcXFxcWm9sYVxcXFxub2RlX21vZHVsZXNcXFxcLnBucG1cXFxcbmV4dEAxNC4wLjRfQGJhYmVsK2NvcmVANy4yX2U1MWM5NGUzOTdiZDJlMjE5ZTE5MTJkNDQ2YTE3ZmY2XFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxccmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiRTpcXFxcQ29kZVxcXFxOb2RlanNcXFxcWm9sYVxcXFxub2RlX21vZHVsZXNcXFxcLnBucG1cXFxcbmV4dEAxNC4wLjRfQGJhYmVsK2NvcmVANy4yX2U1MWM5NGUzOTdiZDJlMjE5ZTE5MTJkNDQ2YTE3ZmY2XFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcc3RhdGljLWdlbmVyYXRpb24tc2VhcmNocGFyYW1zLWJhaWxvdXQtcHJvdmlkZXIuanNcIikiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Capp-router.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cerror-boundary.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Clayout-router.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cnot-found-boundary.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Crender-from-template-context.js&modules=E%3A%5CCode%5CNodejs%5CZola%5Cnode_modules%5C.pnpm%5Cnext%4014.0.4_%40babel%2Bcore%407.2_e51c94e397bd2e219e1912d446a17ff6%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cstatic-generation-searchparams-bailout-provider.js&server=true!\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Cpackages%5Capp%5Cfeatures%5Ccall%5Cscreens%5CCallScreen.web.js&server=true!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Cpackages%5Capp%5Cfeatures%5Ccall%5Cscreens%5CCallScreen.web.js&server=true! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ../../packages/app/features/call/screens/CallScreen.web.js */ \"(ssr)/../../packages/app/features/call/screens/CallScreen.web.js\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMC40X0BiYWJlbCtjb3JlQDcuMl9lNTFjOTRlMzk3YmQyZTIxOWUxOTEyZDQ0NmExN2ZmNi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9RSUzQSU1Q0NvZGUlNUNOb2RlanMlNUNab2xhJTVDcGFja2FnZXMlNUNhcHAlNUNmZWF0dXJlcyU1Q2NhbGwlNUNzY3JlZW5zJTVDQ2FsbFNjcmVlbi53ZWIuanMmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9sYS13ZWIvP2QxNWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJFOlxcXFxDb2RlXFxcXE5vZGVqc1xcXFxab2xhXFxcXHBhY2thZ2VzXFxcXGFwcFxcXFxmZWF0dXJlc1xcXFxjYWxsXFxcXHNjcmVlbnNcXFxcQ2FsbFNjcmVlbi53ZWIuanNcIikiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=E%3A%5CCode%5CNodejs%5CZola%5Cpackages%5Capp%5Cfeatures%5Ccall%5Cscreens%5CCallScreen.web.js&server=true!\n");

/***/ }),

/***/ "(ssr)/../../packages/app/api.js":
/*!*********************************!*\
  !*** ../../packages/app/api.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_URL: () => (/* binding */ API_URL),\n/* harmony export */   acceptCall: () => (/* binding */ acceptCall),\n/* harmony export */   addGroupMembers: () => (/* binding */ addGroupMembers),\n/* harmony export */   addMembers: () => (/* binding */ addMembers),\n/* harmony export */   addReaction: () => (/* binding */ addReaction),\n/* harmony export */   api: () => (/* binding */ api),\n/* harmony export */   banUserApi: () => (/* binding */ banUserApi),\n/* harmony export */   blockUserApi: () => (/* binding */ blockUserApi),\n/* harmony export */   bulkHandleReportsApi: () => (/* binding */ bulkHandleReportsApi),\n/* harmony export */   bulkModeratePostsApi: () => (/* binding */ bulkModeratePostsApi),\n/* harmony export */   changePassword: () => (/* binding */ changePassword),\n/* harmony export */   checkPostLikedApi: () => (/* binding */ checkPostLikedApi),\n/* harmony export */   checkReelLikedApi: () => (/* binding */ checkReelLikedApi),\n/* harmony export */   createCommentApi: () => (/* binding */ createCommentApi),\n/* harmony export */   createConversation: () => (/* binding */ createConversation),\n/* harmony export */   createConversationWithUser: () => (/* binding */ createConversationWithUser),\n/* harmony export */   createGroupConversation: () => (/* binding */ createGroupConversation),\n/* harmony export */   createInviteLink: () => (/* binding */ createInviteLink),\n/* harmony export */   createMessage: () => (/* binding */ createMessage),\n/* harmony export */   createMessageWithPayload: () => (/* binding */ createMessageWithPayload),\n/* harmony export */   createMessageWithReply: () => (/* binding */ createMessageWithReply),\n/* harmony export */   createPostApi: () => (/* binding */ createPostApi),\n/* harmony export */   createReelApi: () => (/* binding */ createReelApi),\n/* harmony export */   createStoryApi: () => (/* binding */ createStoryApi),\n/* harmony export */   createStoryReplyApi: () => (/* binding */ createStoryReplyApi),\n/* harmony export */   deleteMessage: () => (/* binding */ deleteMessage),\n/* harmony export */   deletePostApi: () => (/* binding */ deletePostApi),\n/* harmony export */   deleteReelApi: () => (/* binding */ deleteReelApi),\n/* harmony export */   deleteStoryApi: () => (/* binding */ deleteStoryApi),\n/* harmony export */   editMessage: () => (/* binding */ editMessage),\n/* harmony export */   endCall: () => (/* binding */ endCall),\n/* harmony export */   getActiveCallForConversation: () => (/* binding */ getActiveCallForConversation),\n/* harmony export */   getAdminAnalyticsChartApi: () => (/* binding */ getAdminAnalyticsChartApi),\n/* harmony export */   getAdminDashboardStatsApi: () => (/* binding */ getAdminDashboardStatsApi),\n/* harmony export */   getAdminPostStatsApi: () => (/* binding */ getAdminPostStatsApi),\n/* harmony export */   getAdminPostsApi: () => (/* binding */ getAdminPostsApi),\n/* harmony export */   getAdminReportDetailsApi: () => (/* binding */ getAdminReportDetailsApi),\n/* harmony export */   getAdminReportsApi: () => (/* binding */ getAdminReportsApi),\n/* harmony export */   getAdminUserDetailsApi: () => (/* binding */ getAdminUserDetailsApi),\n/* harmony export */   getAdminUserStatsApi: () => (/* binding */ getAdminUserStatsApi),\n/* harmony export */   getAdminUsersApi: () => (/* binding */ getAdminUsersApi),\n/* harmony export */   getBlockStatusApi: () => (/* binding */ getBlockStatusApi),\n/* harmony export */   getBlockedUsersApi: () => (/* binding */ getBlockedUsersApi),\n/* harmony export */   getCall: () => (/* binding */ getCall),\n/* harmony export */   getContentStatsApi: () => (/* binding */ getContentStatsApi),\n/* harmony export */   getConversations: () => (/* binding */ getConversations),\n/* harmony export */   getCurrentUserId: () => (/* binding */ getCurrentUserId),\n/* harmony export */   getCurrentUserProfile: () => (/* binding */ getCurrentUserProfile),\n/* harmony export */   getFeed: () => (/* binding */ getFeed),\n/* harmony export */   getFriendSuggestionsApi: () => (/* binding */ getFriendSuggestionsApi),\n/* harmony export */   getFriends: () => (/* binding */ getFriends),\n/* harmony export */   getLiveKitToken: () => (/* binding */ getLiveKitToken),\n/* harmony export */   getMessages: () => (/* binding */ getMessages),\n/* harmony export */   getModerationQueueApi: () => (/* binding */ getModerationQueueApi),\n/* harmony export */   getNotificationsApi: () => (/* binding */ getNotificationsApi),\n/* harmony export */   getOnlineUsers: () => (/* binding */ getOnlineUsers),\n/* harmony export */   getOpponentInfo: () => (/* binding */ getOpponentInfo),\n/* harmony export */   getPendingFriendRequestsApi: () => (/* binding */ getPendingFriendRequestsApi),\n/* harmony export */   getPostByIdApi: () => (/* binding */ getPostByIdApi),\n/* harmony export */   getPostComments: () => (/* binding */ getPostComments),\n/* harmony export */   getPostsByHashtagApi: () => (/* binding */ getPostsByHashtagApi),\n/* harmony export */   getReelByIdApi: () => (/* binding */ getReelByIdApi),\n/* harmony export */   getReelsFeedApi: () => (/* binding */ getReelsFeedApi),\n/* harmony export */   getSavedPostsApi: () => (/* binding */ getSavedPostsApi),\n/* harmony export */   getStoriesApi: () => (/* binding */ getStoriesApi),\n/* harmony export */   getStoryRepliesApi: () => (/* binding */ getStoryRepliesApi),\n/* harmony export */   getSystemLogsApi: () => (/* binding */ getSystemLogsApi),\n/* harmony export */   getSystemSettingsApi: () => (/* binding */ getSystemSettingsApi),\n/* harmony export */   getUnreadCount: () => (/* binding */ getUnreadCount),\n/* harmony export */   getUserActivityStatsApi: () => (/* binding */ getUserActivityStatsApi),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserPhotosApi: () => (/* binding */ getUserPhotosApi),\n/* harmony export */   getUserPostsApi: () => (/* binding */ getUserPostsApi),\n/* harmony export */   getUserReelsApi: () => (/* binding */ getUserReelsApi),\n/* harmony export */   getUsersByIds: () => (/* binding */ getUsersByIds),\n/* harmony export */   handleReportApi: () => (/* binding */ handleReportApi),\n/* harmony export */   hidePostApi: () => (/* binding */ hidePostApi),\n/* harmony export */   initiateCall: () => (/* binding */ initiateCall),\n/* harmony export */   joinConversationByInvite: () => (/* binding */ joinConversationByInvite),\n/* harmony export */   leaveGroup: () => (/* binding */ leaveGroup),\n/* harmony export */   likeReelApi: () => (/* binding */ likeReelApi),\n/* harmony export */   login: () => (/* binding */ login),\n/* harmony export */   logout: () => (/* binding */ logout),\n/* harmony export */   makeAdmin: () => (/* binding */ makeAdmin),\n/* harmony export */   makeGroupAdmin: () => (/* binding */ makeGroupAdmin),\n/* harmony export */   markAsRead: () => (/* binding */ markAsRead),\n/* harmony export */   markNotificationsReadApi: () => (/* binding */ markNotificationsReadApi),\n/* harmony export */   markStoryViewedApi: () => (/* binding */ markStoryViewedApi),\n/* harmony export */   moderatePostApi: () => (/* binding */ moderatePostApi),\n/* harmony export */   pinMessage: () => (/* binding */ pinMessage),\n/* harmony export */   reactToPostApi: () => (/* binding */ reactToPostApi),\n/* harmony export */   reactToStoryApi: () => (/* binding */ reactToStoryApi),\n/* harmony export */   register: () => (/* binding */ register),\n/* harmony export */   rejectCall: () => (/* binding */ rejectCall),\n/* harmony export */   removeAdmin: () => (/* binding */ removeAdmin),\n/* harmony export */   removeGroupAdmin: () => (/* binding */ removeGroupAdmin),\n/* harmony export */   removeGroupMember: () => (/* binding */ removeGroupMember),\n/* harmony export */   removeMember: () => (/* binding */ removeMember),\n/* harmony export */   removeReaction: () => (/* binding */ removeReaction),\n/* harmony export */   removeReactionApi: () => (/* binding */ removeReactionApi),\n/* harmony export */   removeStoryReactionApi: () => (/* binding */ removeStoryReactionApi),\n/* harmony export */   reportPostApi: () => (/* binding */ reportPostApi),\n/* harmony export */   resendOTP: () => (/* binding */ resendOTP),\n/* harmony export */   respondFriendRequestApi: () => (/* binding */ respondFriendRequestApi),\n/* harmony export */   restorePostApi: () => (/* binding */ restorePostApi),\n/* harmony export */   revokeMessage: () => (/* binding */ revokeMessage),\n/* harmony export */   savePostApi: () => (/* binding */ savePostApi),\n/* harmony export */   searchMessages: () => (/* binding */ searchMessages),\n/* harmony export */   searchMusicApi: () => (/* binding */ searchMusicApi),\n/* harmony export */   searchSocialApi: () => (/* binding */ searchSocialApi),\n/* harmony export */   searchUsers: () => (/* binding */ searchUsers),\n/* harmony export */   sendFriendRequestApi: () => (/* binding */ sendFriendRequestApi),\n/* harmony export */   sendOTP: () => (/* binding */ sendOTP),\n/* harmony export */   sendVerificationOTP: () => (/* binding */ sendVerificationOTP),\n/* harmony export */   setAuthToken: () => (/* binding */ setAuthToken),\n/* harmony export */   sharePostApi: () => (/* binding */ sharePostApi),\n/* harmony export */   starMessage: () => (/* binding */ starMessage),\n/* harmony export */   syncReelsFromPostsApi: () => (/* binding */ syncReelsFromPostsApi),\n/* harmony export */   trackEventApi: () => (/* binding */ trackEventApi),\n/* harmony export */   unbanUserApi: () => (/* binding */ unbanUserApi),\n/* harmony export */   unblockUserApi: () => (/* binding */ unblockUserApi),\n/* harmony export */   unfriendUserApi: () => (/* binding */ unfriendUserApi),\n/* harmony export */   unlikeReelApi: () => (/* binding */ unlikeReelApi),\n/* harmony export */   unpinMessage: () => (/* binding */ unpinMessage),\n/* harmony export */   unsavePostApi: () => (/* binding */ unsavePostApi),\n/* harmony export */   unverifyUserApi: () => (/* binding */ unverifyUserApi),\n/* harmony export */   updateCurrentUserProfile: () => (/* binding */ updateCurrentUserProfile),\n/* harmony export */   updateGroupInfo: () => (/* binding */ updateGroupInfo),\n/* harmony export */   updateOnlineStatus: () => (/* binding */ updateOnlineStatus),\n/* harmony export */   updateProfileApi: () => (/* binding */ updateProfileApi),\n/* harmony export */   updateSystemSettingsApi: () => (/* binding */ updateSystemSettingsApi),\n/* harmony export */   updateUserAvatar: () => (/* binding */ updateUserAvatar),\n/* harmony export */   updateUserAvatarWithId: () => (/* binding */ updateUserAvatarWithId),\n/* harmony export */   updateUserInfo: () => (/* binding */ updateUserInfo),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile),\n/* harmony export */   updateUserProfileWithId: () => (/* binding */ updateUserProfileWithId),\n/* harmony export */   updateUserRoleApi: () => (/* binding */ updateUserRoleApi),\n/* harmony export */   updateUsername: () => (/* binding */ updateUsername),\n/* harmony export */   uploadAvatarDirect: () => (/* binding */ uploadAvatarDirect),\n/* harmony export */   uploadChatFile: () => (/* binding */ uploadChatFile),\n/* harmony export */   uploadImageLocal: () => (/* binding */ uploadImageLocal),\n/* harmony export */   uploadImageLocalOld: () => (/* binding */ uploadImageLocalOld),\n/* harmony export */   uploadImageS3: () => (/* binding */ uploadImageS3),\n/* harmony export */   uploadMediaApi: () => (/* binding */ uploadMediaApi),\n/* harmony export */   verifyOTP: () => (/* binding */ verifyOTP),\n/* harmony export */   verifyUserApi: () => (/* binding */ verifyUserApi)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(ssr)/../../../../node_modules/axios/lib/axios.js\");\n\n// Use Vercel proxy for web to avoid CORS issues\n// Direct backend URL has CORS restrictions on Vercel domain\nconst DIRECT_BACKEND_URL = \"https://backend36.dev\";\nconst isWeb = \"undefined\" !== \"undefined\";\nconst isLocalhost = isWeb && window?.location?.hostname && /^(localhost|127\\.|192\\.168\\.|10\\.|172\\.(1[6-9]|2\\d|3[0-1]))$/.test(window.location.hostname);\n// Force use proxy for LAN IPs to avoid CORS issues\nconst isLAN = isWeb && window?.location?.hostname && /^(192\\.168\\.|10\\.|172\\.(1[6-9]|2\\d|3[0-1]))$/.test(window.location.hostname);\n// Check if using ngrok tunnel\nconst isNgrok = isWeb && window?.location?.hostname && window.location.hostname.includes(\"ngrok\");\n// Always use direct backend for development (proxy only works in production)\nconst isProduction = isWeb && window?.location?.hostname && !window.location.hostname.includes(\"localhost\") && !window.location.hostname.match(/^(192\\.168\\.|10\\.|172\\.(1[6-9]|2\\d|3[0-1]))/) && !isNgrok && !window.location.hostname.includes(\"ngrok\");\nconst API_URL = isWeb ? isProduction ? \"/api\" : DIRECT_BACKEND_URL : DIRECT_BACKEND_URL;\n// Debug logging\nif (isWeb && window?.location?.hostname) {\n    console.log(\"\\uD83C\\uDF10 Web environment detected\");\n    console.log(\"\\uD83D\\uDD0D window.location.hostname:\", window.location.hostname);\n    console.log(\"\\uD83D\\uDD0D isLocalhost:\", isLocalhost);\n    console.log(\"\\uD83D\\uDD0D isLAN:\", isLAN);\n    console.log(\"\\uD83D\\uDD0D isNgrok:\", isNgrok);\n    console.log(\"\\uD83D\\uDD0D isProduction:\", isProduction);\n    console.log(\"\\uD83D\\uDD0D API_URL:\", API_URL);\n}\nconst api = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n    baseURL: API_URL,\n    withCredentials: true\n});\n// Rehydrate auth header from localStorage on web reload\nif (false) {}\n// Add request interceptor for debugging\napi.interceptors.request.use((config)=>{\n    // Ensure token is set from localStorage on each request\n    if (false) {}\n    const authHeader = typeof config.headers.Authorization === \"string\" ? config.headers.Authorization.substring(0, 30) + \"...\" : config.headers.Authorization ? String(config.headers.Authorization) : \"none\";\n    console.log(\"\\uD83D\\uDD0D API Request:\", {\n        method: config.method?.toUpperCase(),\n        url: config.url,\n        baseURL: config.baseURL,\n        hasAuth: !!config.headers.Authorization,\n        authHeader\n    });\n    return config;\n}, (error)=>{\n    console.error(\" Request Error:\", error);\n    return Promise.reject(error);\n});\n// Add response interceptor for debugging\napi.interceptors.response.use((response)=>{\n    console.log(\" API Response:\", {\n        status: response.status,\n        statusText: response.statusText,\n        data: response.data\n    });\n    return response;\n}, (error)=>{\n    console.error(\" Response Error:\", {\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n        data: error.response?.data,\n        config: {\n            method: error.config?.method?.toUpperCase(),\n            url: error.config?.url,\n            data: error.config?.data\n        }\n    });\n    return Promise.reject(error);\n});\nconst setAuthToken = (token)=>{\n    if (token) {\n        api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    } else {\n        delete api.defaults.headers.common[\"Authorization\"];\n    }\n};\nconst login = async (email, password)=>{\n    const res = await api.post(\"/auth/login\", {\n        email,\n        password\n    });\n    return res.data;\n};\nconst getConversations = async ()=>{\n    const res = await api.get(\"/conversations\");\n    return res.data;\n};\nconst getMessages = async (conversationId)=>{\n    const res = await api.get(`/conversations/${conversationId}/messages`);\n    return res.data;\n};\nconst createMessage = async (conversationId, text)=>{\n    const res = await api.post(`/conversations/${conversationId}/messages`, {\n        text\n    });\n    return res.data;\n};\nconst createMessageWithPayload = async (conversationId, payload)=>{\n    const res = await api.post(`/conversations/${conversationId}/messages`, payload);\n    return res.data;\n};\nconst createConversation = async (userId, title)=>{\n    const res = await api.post(\"/conversations\", {\n        members: [\n            userId\n        ],\n        title: title || `Chat with ${userId}`\n    });\n    return res.data;\n};\n// Create a group conversation with multiple member IDs\nconst createGroupConversation = async (memberIds, title)=>{\n    const unique = Array.from(new Set(memberIds.filter(Boolean)));\n    const res = await api.post(\"/conversations\", {\n        members: unique,\n        isGroup: true,\n        title: title || `Group (${unique.length})`\n    });\n    return res.data;\n};\nconst initiateCall = async (conversationId, type, targetUserId)=>{\n    const payload = {\n        conversationId,\n        type\n    };\n    if (targetUserId) {\n        payload.targetUserId = targetUserId;\n    }\n    const res = await api.post(\"/calls/initiate\", payload);\n    return res.data;\n};\nconst getCall = async (callId)=>{\n    const res = await api.get(`/calls/${callId}`);\n    return res.data;\n};\nconst getActiveCallForConversation = async (conversationId)=>{\n    const res = await api.get(`/calls/conversation/${conversationId}/active`);\n    return res.data;\n};\nconst getLiveKitToken = async (callId)=>{\n    const res = await api.post(`/calls/${callId}/livekit-token`);\n    return res.data;\n};\nconst endCall = async (callId)=>{\n    const res = await api.post(`/calls/${callId}/end`);\n    return res.data;\n};\nconst acceptCall = async (callId)=>{\n    const res = await api.post(`/calls/${callId}/accept`);\n    return res.data;\n};\nconst rejectCall = async (callId)=>{\n    const res = await api.post(`/calls/${callId}/reject`);\n    return res.data;\n};\n// \n// UPLOAD IMAGE LOCAL - CLIENT-SERVER (HTTP POST over TCP)\n// Multipart Form Data\n// \n// Upload image to local storage endpoint (updated to use correct endpoint)\nconst uploadImageLocalOld = async (file)=>{\n    const form = new FormData();\n    if (false) {} else {\n        // React Native\n        // @ts-ignore RN FormData file\n        form.append(\"file\", {\n            uri: file.uri,\n            name: file.name,\n            type: file.type\n        });\n    }\n    const res = await api.post(`/files/image`, form, {\n        headers: {\n            \"Content-Type\": \"multipart/form-data\"\n        }\n    });\n    return res.data;\n};\n// Upload to S3 if backend provides presigned handling (optional)\nconst uploadImageS3 = async (file)=>{\n    const form = new FormData();\n    if (false) {} else {\n        // React Native\n        // @ts-ignore RN FormData file\n        form.append(\"file\", {\n            uri: file.uri,\n            name: file.name,\n            type: file.type\n        });\n    }\n    const res = await api.post(`/files/s3`, form, {\n        headers: {\n            \"Content-Type\": \"multipart/form-data\"\n        }\n    });\n    return res.data;\n};\n// Upload to local storage\nconst uploadImageLocal = async (file)=>{\n    const form = new FormData();\n    if (false) {} else {\n        // React Native\n        // @ts-ignore RN FormData file\n        form.append(\"file\", {\n            uri: file.uri,\n            name: file.name,\n            type: file.type\n        });\n    }\n    const res = await api.post(`/uploads/image`, form, {\n        headers: {\n            \"Content-Type\": \"multipart/form-data\"\n        }\n    });\n    return res.data;\n};\n// Upload media cho mng x hi (nh/video) - dng chung vi desktop\nconst uploadMediaApi = async (file)=>{\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    const res = await api.post(\"/uploads/s3/public\", formData, {\n    });\n    return {\n        url: res.data.url,\n        type: res.data.mime.startsWith(\"image/\") ? \"image\" : \"video\"\n    };\n};\n// Web helper: upload File object directly (chat attachments)\nconst uploadChatFile = async (file)=>{\n    const form = new FormData();\n    form.append(\"file\", file);\n    const res = await api.post(`/uploads/s3/public`, form, {\n        headers: {\n            \"Content-Type\": \"multipart/form-data\"\n        }\n    });\n    return res.data;\n};\nconst logout = async (token)=>{\n    const res = await api.post(\"/auth/logout\", {\n        token\n    });\n    return res.data;\n};\nconst register = async (email, password, name)=>{\n    const res = await api.post(\"/auth/register\", {\n        email,\n        password,\n        name\n    });\n    return res.data;\n};\nconst sendOTP = async (email)=>{\n    const res = await api.post(\"/auth/send-otp\", {\n        email\n    });\n    return res.data;\n};\nconst verifyOTP = async (email, otp)=>{\n    const res = await api.post(\"/auth/verify-otp\", {\n        email,\n        otp\n    });\n    return res.data;\n};\nconst resendOTP = async (email)=>{\n    const res = await api.post(\"/auth/resend-otp\", {\n        email\n    });\n    return res.data;\n};\nconst sendVerificationOTP = async (email)=>{\n    const res = await api.post(\"/auth/send-verification-otp\", {\n        email\n    });\n    return res.data;\n};\nconst updateUsername = async (username)=>{\n    const res = await api.patch(\"/users/username\", {\n        username\n    });\n    return res.data;\n};\nconst updateUserAvatar = async (avatarUrl)=>{\n    const res = await api.patch(\"/users/avatar\", {\n        avatar: avatarUrl\n    });\n    return res.data;\n};\n// Alternative avatar update endpoints to try\nconst updateUserProfile = async (data)=>{\n    const res = await api.patch(\"/users/profile\", data);\n    return res.data;\n};\nconst updateUserInfo = async (avatarUrl)=>{\n    const res = await api.put(\"/users/info\", {\n        avatar: avatarUrl\n    });\n    return res.data;\n};\n// Get current user ID  web version dng localStorage\nconst getCurrentUserId = async ()=>{\n    try {\n        if (true) return null;\n        const userId = window.localStorage.getItem(\"user_id\");\n        return userId;\n    } catch (error) {\n        console.error(\"Error getting user ID from localStorage:\", error);\n        return null;\n    }\n};\n// Bn b cho trang c nhn / friends page\nconst getFriends = async ()=>{\n    const res = await api.get(\"/social/friends\");\n    return res.data;\n};\nconst blockUserApi = async (userId)=>{\n    const res = await api.post(`/users/${userId}/block`);\n    return res.data;\n};\nconst unblockUserApi = async (userId)=>{\n    const res = await api.delete(`/users/${userId}/block`);\n    return res.data;\n};\nconst getBlockedUsersApi = async ()=>{\n    const res = await api.get(\"/users/blocked\");\n    return res.data;\n};\nconst getBlockStatusApi = async (userId)=>{\n    const res = await api.get(`/users/${userId}/block-status`);\n    return res.data;\n};\nconst unfriendUserApi = async (userId)=>{\n    const res = await api.delete(`/social/friends/${userId}`);\n    return res.data;\n};\n// Photos from posts (author or tagged)\nconst getUserPhotosApi = async (userId, type = \"authored\")=>{\n    try {\n        const res = await api.get(`/social/users/${userId}/photos`, {\n            params: {\n                type\n            }\n        });\n        return res.data;\n    } catch (error) {\n        // Nu backend cha c route /photos (404), tr v rng  frontend fallback sang posts\n        if (error?.response?.status === 404) {\n            return {\n                items: []\n            };\n        }\n        throw error;\n    }\n};\nconst updateProfileApi = async (payload)=>{\n    const res = await api.patch(`/users/me/profile`, payload);\n    return res.data;\n};\n// Feed bi vit ca 1 user (trang profile)\nconst getUserPostsApi = async (userId, cursor, limit = 20)=>{\n    const params = {\n        limit\n    };\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(`/social/users/${userId}/posts`, {\n        params\n    });\n    return res.data;\n};\nconst trackEventApi = async (eventType, metadata, sessionId)=>{\n    try {\n        await api.post(\"/analytics/track\", {\n            eventType,\n            metadata,\n            sessionId\n        });\n    } catch (error) {\n        console.error(\"[Analytics] Failed to track event:\", error);\n    }\n};\n// Update avatar with user ID\nconst updateUserAvatarWithId = async (userId, avatarUrl)=>{\n    const res = await api.patch(`/users/${userId}/avatar`, {\n        avatar: avatarUrl\n    });\n    return res.data;\n};\n// Update profile with user ID\nconst updateUserProfileWithId = async (userId, data)=>{\n    const res = await api.patch(`/users/${userId}/profile`, data);\n    return res.data;\n};\nconst changePassword = async (currentPassword, newPassword)=>{\n    const res = await api.post(\"/auth/change-password\", {\n        currentPassword,\n        newPassword\n    });\n    return res.data;\n};\n// Update current user profile (the correct way according to backend docs)\nconst updateCurrentUserProfile = async (data)=>{\n    console.log(\"\\uD83D\\uDD0D updateCurrentUserProfile - request data:\", data);\n    console.log(\"\\uD83D\\uDD0D updateCurrentUserProfile - method: PATCH\");\n    console.log(\"\\uD83D\\uDD0D updateCurrentUserProfile - auth header:\", api.defaults.headers.common[\"Authorization\"]);\n    const res = await api.patch(\"/users/me\", data);\n    return res.data;\n};\n// Get current user profile\nconst getCurrentUserProfile = async ()=>{\n    const res = await api.get(\"/users/me\");\n    return res.data;\n};\n// Cch 1: Upload avatar trc tip (n gin nht)\nconst uploadAvatarDirect = async (file)=>{\n    const form = new FormData();\n    if (false) {} else {\n        // React Native\n        // @ts-ignore RN FormData file\n        form.append(\"avatar\", {\n            uri: file.uri,\n            name: file.name,\n            type: file.type\n        });\n    }\n    console.log(\"\\uD83D\\uDD0D uploadAvatarDirect - sending file:\", file.name);\n    console.log(\"\\uD83D\\uDD0D uploadAvatarDirect - auth header:\", api.defaults.headers.common[\"Authorization\"]);\n    const res = await api.post(\"/users/avatar\", form, {\n        headers: {\n            \"Content-Type\": \"multipart/form-data\"\n        }\n    });\n    return res.data;\n};\nconst getUsersByIds = async (userIds)=>{\n    const res = await api.post(`/users/by-ids`, {\n        userIds\n    });\n    return res.data;\n};\nconst searchUsers = async (query, page = 1, limit = 20)=>{\n    console.log(\"\\uD83D\\uDD0D searchUsers called with:\", {\n        query,\n        page,\n        limit\n    });\n    console.log(\"\\uD83D\\uDD0D API base URL:\", api.defaults.baseURL);\n    console.log(\"\\uD83D\\uDD0D Auth header:\", api.defaults.headers.common[\"Authorization\"]);\n    const res = await api.get(\"/users/search\", {\n        params: {\n            q: query,\n            page,\n            limit\n        }\n    });\n    console.log(\"\\uD83D\\uDD0D searchUsers response:\", res.data);\n    return res.data;\n};\n// To conversation vi user\nconst createConversationWithUser = async (userId)=>{\n    const res = await api.post(\"/conversations\", {\n        members: [\n            userId\n        ]\n    });\n    return res.data;\n};\nconst getOpponentInfo = async (conversationId)=>{\n    const res = await api.get(`/conversations/${conversationId}/opponent`);\n    return res.data;\n};\n// Message Actions API\nconst editMessage = async (messageId, text)=>{\n    const res = await api.patch(`/conversations/messages/${messageId}`, {\n        text\n    });\n    return res.data;\n};\nconst deleteMessage = async (messageId)=>{\n    const res = await api.delete(`/conversations/messages/${messageId}`);\n    return res.data;\n};\nconst addReaction = async (messageId, emoji)=>{\n    const res = await api.post(`/conversations/messages/${messageId}/reactions`, {\n        emoji\n    });\n    return res.data;\n};\nconst removeReaction = async (messageId, emoji)=>{\n    const res = await api.delete(`/conversations/messages/${messageId}/reactions/${encodeURIComponent(emoji)}`);\n    return res.data;\n};\nconst pinMessage = async (messageId)=>{\n    const res = await api.post(`/conversations/messages/${messageId}/pin`);\n    return res.data;\n};\nconst unpinMessage = async (messageId)=>{\n    const res = await api.delete(`/conversations/messages/${messageId}/pin`);\n    return res.data;\n};\nconst starMessage = async (messageId)=>{\n    const res = await api.post(`/conversations/messages/${messageId}/star`);\n    return res.data;\n};\n// Revoke message for everyone\nconst revokeMessage = async (messageId)=>{\n    const res = await api.patch(`/conversations/messages/${messageId}/revoke`, {});\n    return res.data;\n};\nconst searchMessages = async (query, conversationId)=>{\n    const params = {\n        query\n    };\n    if (conversationId) {\n        params.conversationId = conversationId;\n    }\n    const res = await api.get(`/conversations/messages/search`, {\n        params\n    });\n    return res.data;\n};\nconst markAsRead = async (conversationId, messageId)=>{\n    const res = await api.post(`/conversations/${conversationId}/read`, {\n        messageId\n    });\n    return res.data;\n};\n// Group Management API\nconst addMembers = async (conversationId, userIds)=>{\n    const res = await api.post(`/conversations/${conversationId}/members`, {\n        userIds\n    });\n    return res.data;\n};\nconst removeMember = async (conversationId, userId)=>{\n    const res = await api.delete(`/conversations/${conversationId}/members/${userId}`);\n    return res.data;\n};\nconst updateGroupInfo = async (conversationId, data)=>{\n    const res = await api.patch(`/conversations/${conversationId}`, data);\n    return res.data;\n};\nconst createInviteLink = async (conversationId)=>{\n    const res = await api.post(`/conversations/${conversationId}/invite`);\n    return res.data;\n};\nconst joinConversationByInvite = async (inviteCode)=>{\n    const res = await api.post(`/conversations/join/invite`, {\n        inviteCode\n    });\n    return res.data;\n};\nconst makeAdmin = async (conversationId, userId)=>{\n    const res = await api.post(`/conversations/${conversationId}/admins/${userId}`);\n    return res.data;\n};\nconst removeAdmin = async (conversationId, userId)=>{\n    const res = await api.delete(`/conversations/${conversationId}/admins/${userId}`);\n    return res.data;\n};\n// Backwards-compatible aliases for desktop code\nconst addGroupMembers = addMembers;\nconst removeGroupMember = removeMember;\nconst makeGroupAdmin = makeAdmin;\nconst removeGroupAdmin = removeAdmin;\nconst leaveGroup = async (conversationId)=>{\n    const res = await api.post(`/conversations/${conversationId}/leave`);\n    return res.data;\n};\nconst getUnreadCount = async (conversationId)=>{\n    const res = await api.get(`/conversations/${conversationId}/unread`);\n    return res.data;\n};\n// Online Status API\nconst updateOnlineStatus = async (status)=>{\n    const res = await api.patch(`/users/me/status`, {\n        status\n    });\n    return res.data;\n};\nconst getOnlineUsers = async (userIds)=>{\n    const res = await api.post(`/users/online-status`, {\n        userIds\n    });\n    return res.data;\n};\n// Update createMessage to support replyTo\nconst createMessageWithReply = async (conversationId, text, replyTo)=>{\n    const res = await api.post(`/conversations/${conversationId}/messages`, {\n        text,\n        replyTo\n    });\n    return res.data;\n};\nconst getFeed = async (cursor)=>{\n    const params = {};\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(\"/social/posts/feed\", {\n        params\n    });\n    return res.data;\n};\nconst createPostApi = async (payload)=>{\n    const res = await api.post(\"/social/posts\", payload);\n    return res.data;\n};\nconst createCommentApi = async (postId, payload)=>{\n    const res = await api.post(`/social/posts/${postId}/comments`, payload);\n    return res.data;\n};\nconst getPostComments = async (postId, cursor)=>{\n    const params = {};\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(`/social/posts/${postId}/comments`, {\n        params\n    });\n    return res.data;\n};\nconst getPostsByHashtagApi = async (tag, cursor)=>{\n    const params = {};\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(`/social/hashtags/${encodeURIComponent(tag)}/posts`, {\n        params\n    });\n    return res.data;\n};\n// Single post detail\nconst getPostByIdApi = async (postId)=>{\n    const res = await api.get(`/social/posts/${postId}`);\n    return res.data;\n};\nconst sharePostApi = async (postId, payload)=>{\n    const res = await api.post(`/social/posts/${postId}/share`, payload);\n    return res.data;\n};\nconst createStoryApi = async (payload)=>{\n    const res = await api.post(\"/social/stories\", payload);\n    return res.data;\n};\nconst getStoriesApi = async ()=>{\n    const res = await api.get(\"/social/stories\");\n    return res.data;\n};\nconst markStoryViewedApi = async (storyId)=>{\n    const res = await api.post(`/social/stories/${storyId}/view`, {});\n    return res.data;\n};\nconst deleteStoryApi = async (storyId)=>{\n    const res = await api.delete(`/social/stories/${storyId}`);\n    return res.data;\n};\nconst savePostApi = async (postId)=>{\n    const res = await api.post(`/social/posts/${postId}/save`, {});\n    return res.data;\n};\nconst unsavePostApi = async (postId)=>{\n    const res = await api.delete(`/social/posts/${postId}/save`);\n    return res.data;\n};\nconst getSavedPostsApi = async (cursor)=>{\n    const params = {};\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(\"/social/posts/saved\", {\n        params\n    });\n    return res.data;\n};\nconst reportPostApi = async (postId, payload)=>{\n    const res = await api.post(`/social/posts/${postId}/report`, payload);\n    return res.data;\n};\nconst getFriendSuggestionsApi = async (limit = 6)=>{\n    const res = await api.get(\"/social/friends/suggestions\", {\n        params: {\n            limit\n        }\n    });\n    return res.data;\n};\nconst sendFriendRequestApi = async (targetUserId)=>{\n    const res = await api.post(\"/social/friends/requests\", {\n        targetUserId\n    });\n    return res.data;\n};\nconst respondFriendRequestApi = async (friendshipId, action)=>{\n    const res = await api.post(`/social/friends/${friendshipId}/respond`, {\n        action\n    });\n    return res.data;\n};\nconst getPendingFriendRequestsApi = async ()=>{\n    const res = await api.get(\"/social/friends/requests/pending\");\n    return res.data;\n};\nconst getNotificationsApi = async (cursor, limit = 20)=>{\n    const params = {\n        limit\n    };\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(\"/social/notifications\", {\n        params\n    });\n    return res.data;\n};\nconst markNotificationsReadApi = async (ids)=>{\n    const res = await api.post(\"/social/notifications/read\", {\n        ids\n    });\n    return res.data;\n};\nconst getUserById = async (userId)=>{\n    const res = await api.get(`/users/${userId}`);\n    return res.data;\n};\nconst searchSocialApi = async (queryOrParams)=>{\n    const params = typeof queryOrParams === \"string\" ? {\n        q: queryOrParams\n    } : {\n        q: queryOrParams.q,\n        type: queryOrParams.type\n    };\n    const res = await api.get(\"/social/search\", {\n        params\n    });\n    return res.data;\n};\nconst checkPostLikedApi = async (postId)=>{\n    const res = await api.get(`/social/posts/${postId}/liked`);\n    return res.data;\n};\nconst reactToPostApi = async (postId, type)=>{\n    const res = await api.post(`/social/posts/${postId}/reactions`, {\n        type\n    });\n    return res.data;\n};\nconst removeReactionApi = async (postId)=>{\n    const res = await api.delete(`/social/posts/${postId}/reactions`);\n    return res.data;\n};\n// Story Reactions & Replies\nconst reactToStoryApi = async (storyId, type)=>{\n    const res = await api.post(`/social/stories/${storyId}/reactions`, {\n        type\n    });\n    return res.data;\n};\nconst removeStoryReactionApi = async (storyId)=>{\n    const res = await api.delete(`/social/stories/${storyId}/reactions`);\n    return res.data;\n};\nconst getStoryRepliesApi = async (storyId, cursor, limit = 20)=>{\n    const params = {\n        limit\n    };\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(`/social/stories/${storyId}/replies`, {\n        params\n    });\n    return res.data;\n};\nconst createStoryReplyApi = async (storyId, content)=>{\n    const res = await api.post(`/social/stories/${storyId}/replies`, {\n        content\n    });\n    return res.data;\n};\n// Music Search\nconst searchMusicApi = async (query)=>{\n    try {\n        const response = await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(query)}&media=music&limit=20`);\n        const data = await response.json();\n        return data.results || [];\n    } catch (error) {\n        console.error(\"Failed to search music:\", error);\n        return [];\n    }\n};\n// Reel APIs\nconst createReelApi = async (payload)=>{\n    const res = await api.post(\"/reels\", payload);\n    return res.data;\n};\nconst getReelsFeedApi = async (cursor, limit = 10)=>{\n    const params = {\n        limit\n    };\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(\"/reels\", {\n        params\n    });\n    return res.data;\n};\nconst getReelByIdApi = async (reelId)=>{\n    const res = await api.get(`/reels/${reelId}`);\n    return res.data;\n};\nconst getUserReelsApi = async (userId, cursor, limit = 20)=>{\n    const params = {\n        limit\n    };\n    if (cursor) params.cursor = cursor;\n    const res = await api.get(`/reels/users/${userId}`, {\n        params\n    });\n    return res.data;\n};\nconst likeReelApi = async (reelId, type = \"LIKE\")=>{\n    const res = await api.post(`/reels/${reelId}/like`, {\n        type\n    });\n    return res.data;\n};\nconst unlikeReelApi = async (reelId)=>{\n    const res = await api.delete(`/reels/${reelId}/like`);\n    return res.data;\n};\nconst checkReelLikedApi = async (reelId)=>{\n    const res = await api.get(`/reels/${reelId}/liked`);\n    return res.data;\n};\nconst deleteReelApi = async (reelId)=>{\n    const res = await api.delete(`/reels/${reelId}`);\n    return res.data;\n};\nconst syncReelsFromPostsApi = async ()=>{\n    const res = await api.post(\"/reels/sync\");\n    return res.data;\n};\n// ==========================================\n// ADMIN APIs\n// ==========================================\n// Users Management\nconst getAdminUsersApi = async (params)=>{\n    const res = await api.get(\"/admin/users\", {\n        params\n    });\n    return res.data;\n};\nconst getAdminUserStatsApi = async ()=>{\n    const res = await api.get(\"/admin/users/stats\");\n    return res.data;\n};\nconst getAdminUserDetailsApi = async (userId)=>{\n    const res = await api.get(`/admin/users/${userId}`);\n    return res.data;\n};\nconst banUserApi = async (userId, reason)=>{\n    const res = await api.patch(`/admin/users/${userId}/ban`, {\n        reason\n    });\n    return res.data;\n};\nconst unbanUserApi = async (userId)=>{\n    const res = await api.patch(`/admin/users/${userId}/unban`);\n    return res.data;\n};\nconst updateUserRoleApi = async (userId, role)=>{\n    const res = await api.patch(`/admin/users/${userId}/role`, {\n        role\n    });\n    return res.data;\n};\nconst verifyUserApi = async (userId)=>{\n    const res = await api.patch(`/admin/users/${userId}/verify`);\n    return res.data;\n};\nconst unverifyUserApi = async (userId)=>{\n    const res = await api.patch(`/admin/users/${userId}/unverify`);\n    return res.data;\n};\n// Posts Management\nconst getAdminPostsApi = async (params)=>{\n    const res = await api.get(\"/admin/posts\", {\n        params\n    });\n    return res.data;\n};\nconst getAdminPostStatsApi = async ()=>{\n    const res = await api.get(\"/admin/posts/stats\");\n    return res.data;\n};\nconst deletePostApi = async (postId)=>{\n    const res = await api.delete(`/admin/posts/${postId}`);\n    return res.data;\n};\nconst hidePostApi = async (postId)=>{\n    const res = await api.patch(`/admin/posts/${postId}/hide`);\n    return res.data;\n};\nconst restorePostApi = async (postId)=>{\n    const res = await api.patch(`/admin/posts/${postId}/restore`);\n    return res.data;\n};\nconst getAdminReportsApi = async (params)=>{\n    const res = await api.get(\"/admin/reports\", {\n        params\n    });\n    return res.data;\n};\nconst getAdminReportDetailsApi = async (reportId)=>{\n    const res = await api.get(`/admin/reports/${reportId}`);\n    return res.data;\n};\nconst handleReportApi = async (reportId, action, notes)=>{\n    const res = await api.patch(`/admin/reports/${reportId}/handle`, {\n        action,\n        notes\n    });\n    return res.data;\n};\nconst bulkHandleReportsApi = async (reportIds, action)=>{\n    const res = await api.post(\"/admin/reports/bulk-handle\", {\n        reportIds,\n        action\n    });\n    return res.data;\n};\n// Analytics\nconst getAdminDashboardStatsApi = async ()=>{\n    const res = await api.get(\"/admin/dashboard/stats\");\n    return res.data;\n};\nconst getAdminAnalyticsChartApi = async (timeRange, metric)=>{\n    const res = await api.get(\"/admin/analytics/chart\", {\n        params: {\n            timeRange,\n            metric\n        }\n    });\n    return res.data;\n};\nconst getUserActivityStatsApi = async (userId, timeRange)=>{\n    const res = await api.get(`/admin/analytics/users/${userId}`, {\n        params: {\n            timeRange\n        }\n    });\n    return res.data;\n};\nconst getContentStatsApi = async (timeRange)=>{\n    const res = await api.get(\"/admin/analytics/content\", {\n        params: {\n            timeRange\n        }\n    });\n    return res.data;\n};\n// Content Moderation\nconst moderatePostApi = async (postId, action)=>{\n    const res = await api.patch(`/admin/moderation/posts/${postId}`, {\n        action\n    });\n    return res.data;\n};\nconst bulkModeratePostsApi = async (postIds, action)=>{\n    const res = await api.post(\"/admin/moderation/posts/bulk\", {\n        postIds,\n        action\n    });\n    return res.data;\n};\nconst getModerationQueueApi = async ()=>{\n    const res = await api.get(\"/admin/moderation/queue\");\n    return res.data;\n};\nconst getSystemSettingsApi = async ()=>{\n    const res = await api.get(\"/admin/settings\");\n    return res.data;\n};\nconst updateSystemSettingsApi = async (settings)=>{\n    const res = await api.patch(\"/admin/settings\", settings);\n    return res.data;\n};\nconst getSystemLogsApi = async (params)=>{\n    const res = await api.get(\"/admin/logs\", {\n        params\n    });\n    return res.data;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL2FwaS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDMUIsZ0RBQWdEO0FBQ2hELDREQUE0RDtBQUM1RCxNQUFNQyxxQkFBcUI7QUFDM0IsTUFBTUMsUUFBUSxnQkFBa0I7QUFDaEMsTUFBTUMsY0FBY0QsU0FBU0UsUUFBUUMsVUFBVUMsWUFBWSwrREFBK0RDLElBQUksQ0FBQ0gsT0FBT0MsUUFBUSxDQUFDQyxRQUFRO0FBQ3ZKLG1EQUFtRDtBQUNuRCxNQUFNRSxRQUFRTixTQUFTRSxRQUFRQyxVQUFVQyxZQUFZLCtDQUErQ0MsSUFBSSxDQUFDSCxPQUFPQyxRQUFRLENBQUNDLFFBQVE7QUFDakksOEJBQThCO0FBQzlCLE1BQU1HLFVBQVVQLFNBQVNFLFFBQVFDLFVBQVVDLFlBQVlGLE9BQU9DLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDSSxRQUFRLENBQUM7QUFDekYsNkVBQTZFO0FBQzdFLE1BQU1DLGVBQWVULFNBQVNFLFFBQVFDLFVBQVVDLFlBQVksQ0FBQ0YsT0FBT0MsUUFBUSxDQUFDQyxRQUFRLENBQUNJLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQ04sT0FBT0MsUUFBUSxDQUFDQyxRQUFRLENBQUNNLEtBQUssQ0FBQyxrREFBa0QsQ0FBQ0gsV0FBVyxDQUFDTCxPQUFPQyxRQUFRLENBQUNDLFFBQVEsQ0FBQ0ksUUFBUSxDQUFDO0FBQ3pPLE1BQU1HLFVBQVVYLFFBQVNTLGVBQWUsU0FBU1YscUJBQXNCQSxtQkFBbUI7QUFDakcsZ0JBQWdCO0FBQ2hCLElBQUlDLFNBQVNFLFFBQVFDLFVBQVVDLFVBQVU7SUFDckNRLFFBQVFDLEdBQUcsQ0FBQztJQUNaRCxR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QUFNZ08sdUJBQXVCO0lBQ2hDLE1BQU0zTixNQUFNLE1BQU1qQyxJQUFJb0MsR0FBRyxDQUFDO0lBQzFCLE9BQU9ILElBQUlMLElBQUk7QUFDbkIsRUFBRTtBQUNLLE1BQU1pTywwQkFBMEIsT0FBT0M7SUFDMUMsTUFBTTdOLE1BQU0sTUFBTWpDLElBQUlnRyxLQUFLLENBQUMsbUJBQW1COEo7SUFDL0MsT0FBTzdOLElBQUlMLElBQUk7QUFDbkIsRUFBRTtBQUNLLE1BQU1tTyxtQkFBbUIsT0FBTy9JO0lBQ25DLE1BQU0vRSxNQUFNLE1BQU1qQyxJQUFJb0MsR0FBRyxDQUFDLGVBQWU7UUFBRTRFO0lBQU87SUFDbEQsT0FBTy9FLElBQUlMLElBQUk7QUFDbkIsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3pvbGEtd2ViLy4uLy4uL3BhY2thZ2VzL2FwcC9hcGkuanM/YmI2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuLy8gVXNlIFZlcmNlbCBwcm94eSBmb3Igd2ViIHRvIGF2b2lkIENPUlMgaXNzdWVzXG4vLyBEaXJlY3QgYmFja2VuZCBVUkwgaGFzIENPUlMgcmVzdHJpY3Rpb25zIG9uIFZlcmNlbCBkb21haW5cbmNvbnN0IERJUkVDVF9CQUNLRU5EX1VSTCA9ICdodHRwczovL2JhY2tlbmQzNi5kZXYnO1xuY29uc3QgaXNXZWIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbmNvbnN0IGlzTG9jYWxob3N0ID0gaXNXZWIgJiYgd2luZG93Py5sb2NhdGlvbj8uaG9zdG5hbWUgJiYgL14obG9jYWxob3N0fDEyN1xcLnwxOTJcXC4xNjhcXC58MTBcXC58MTcyXFwuKDFbNi05XXwyXFxkfDNbMC0xXSkpJC8udGVzdCh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpO1xuLy8gRm9yY2UgdXNlIHByb3h5IGZvciBMQU4gSVBzIHRvIGF2b2lkIENPUlMgaXNzdWVzXG5jb25zdCBpc0xBTiA9IGlzV2ViICYmIHdpbmRvdz8ubG9jYXRpb24/Lmhvc3RuYW1lICYmIC9eKDE5MlxcLjE2OFxcLnwxMFxcLnwxNzJcXC4oMVs2LTldfDJcXGR8M1swLTFdKSkkLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSk7XG4vLyBDaGVjayBpZiB1c2luZyBuZ3JvayB0dW5uZWxcbmNvbnN0IGlzTmdyb2sgPSBpc1dlYiAmJiB3aW5kb3c/LmxvY2F0aW9uPy5ob3N0bmFtZSAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuaW5jbHVkZXMoJ25ncm9rJyk7XG4vLyBBbHdheXMgdXNlIGRpcmVjdCBiYWNrZW5kIGZvciBkZXZlbG9wbWVudCAocHJveHkgb25seSB3b3JrcyBpbiBwcm9kdWN0aW9uKVxuY29uc3QgaXNQcm9kdWN0aW9uID0gaXNXZWIgJiYgd2luZG93Py5sb2NhdGlvbj8uaG9zdG5hbWUgJiYgIXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5pbmNsdWRlcygnbG9jYWxob3N0JykgJiYgIXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5tYXRjaCgvXigxOTJcXC4xNjhcXC58MTBcXC58MTcyXFwuKDFbNi05XXwyXFxkfDNbMC0xXSkpLykgJiYgIWlzTmdyb2sgJiYgIXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5pbmNsdWRlcygnbmdyb2snKTtcbmV4cG9ydCBjb25zdCBBUElfVVJMID0gaXNXZWIgPyAoaXNQcm9kdWN0aW9uID8gJy9hcGknIDogRElSRUNUX0JBQ0tFTkRfVVJMKSA6IERJUkVDVF9CQUNLRU5EX1VSTDtcbi8vIERlYnVnIGxvZ2dpbmdcbmlmIChpc1dlYiAmJiB3aW5kb3c/LmxvY2F0aW9uPy5ob3N0bmFtZSkge1xuICAgIGNvbnNvbGUubG9nKCfwn4yQIFdlYiBlbnZpcm9ubWVudCBkZXRlY3RlZCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTonLCB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIGlzTG9jYWxob3N0OicsIGlzTG9jYWxob3N0KTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBpc0xBTjonLCBpc0xBTik7XG4gICAgY29uc29sZS5sb2coJ/CflI0gaXNOZ3JvazonLCBpc05ncm9rKTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBpc1Byb2R1Y3Rpb246JywgaXNQcm9kdWN0aW9uKTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBBUElfVVJMOicsIEFQSV9VUkwpO1xufVxuZXhwb3J0IGNvbnN0IGFwaSA9IGF4aW9zLmNyZWF0ZSh7XG4gICAgYmFzZVVSTDogQVBJX1VSTCxcbiAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG59KTtcbi8vIFJlaHlkcmF0ZSBhdXRoIGhlYWRlciBmcm9tIGxvY2FsU3RvcmFnZSBvbiB3ZWIgcmVsb2FkXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNvbnN0IHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYXV0aF90b2tlblwiKTtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgYXBpLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uW1wiQXV0aG9yaXphdGlvblwiXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgIH1cbn1cbi8vIEFkZCByZXF1ZXN0IGludGVyY2VwdG9yIGZvciBkZWJ1Z2dpbmdcbmFwaS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoKGNvbmZpZykgPT4ge1xuICAgIC8vIEVuc3VyZSB0b2tlbiBpcyBzZXQgZnJvbSBsb2NhbFN0b3JhZ2Ugb24gZWFjaCByZXF1ZXN0XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhdXRoX3Rva2VuXCIpO1xuICAgICAgICBpZiAodG9rZW4gJiYgIWNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24pIHtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhdXRoSGVhZGVyID0gdHlwZW9mIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uLnN1YnN0cmluZygwLCAzMCkgKyBcIi4uLlwiXG4gICAgICAgIDogY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvblxuICAgICAgICAgICAgPyBTdHJpbmcoY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbilcbiAgICAgICAgICAgIDogXCJub25lXCI7XG4gICAgY29uc29sZS5sb2coJ/CflI0gQVBJIFJlcXVlc3Q6Jywge1xuICAgICAgICBtZXRob2Q6IGNvbmZpZy5tZXRob2Q/LnRvVXBwZXJDYXNlKCksXG4gICAgICAgIHVybDogY29uZmlnLnVybCxcbiAgICAgICAgYmFzZVVSTDogY29uZmlnLmJhc2VVUkwsXG4gICAgICAgIGhhc0F1dGg6ICEhY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbixcbiAgICAgICAgYXV0aEhlYWRlcixcbiAgICB9KTtcbiAgICByZXR1cm4gY29uZmlnO1xufSwgKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFJlcXVlc3QgRXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG59KTtcbi8vIEFkZCByZXNwb25zZSBpbnRlcmNlcHRvciBmb3IgZGVidWdnaW5nXG5hcGkuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgocmVzcG9uc2UpID0+IHtcbiAgICBjb25zb2xlLmxvZygn4pyFIEFQSSBSZXNwb25zZTonLCB7XG4gICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICBkYXRhOiByZXNwb25zZS5kYXRhLFxuICAgIH0pO1xuICAgIHJldHVybiByZXNwb25zZTtcbn0sIChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBSZXNwb25zZSBFcnJvcjonLCB7XG4gICAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogZXJyb3IucmVzcG9uc2U/LnN0YXR1c1RleHQsXG4gICAgICAgIGRhdGE6IGVycm9yLnJlc3BvbnNlPy5kYXRhLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIG1ldGhvZDogZXJyb3IuY29uZmlnPy5tZXRob2Q/LnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICB1cmw6IGVycm9yLmNvbmZpZz8udXJsLFxuICAgICAgICAgICAgZGF0YTogZXJyb3IuY29uZmlnPy5kYXRhLFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbn0pO1xuZXhwb3J0IGNvbnN0IHNldEF1dGhUb2tlbiA9ICh0b2tlbikgPT4ge1xuICAgIGlmICh0b2tlbikge1xuICAgICAgICBhcGkuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGVsZXRlIGFwaS5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAoZW1haWwsIHBhc3N3b3JkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoJy9hdXRoL2xvZ2luJywgeyBlbWFpbCwgcGFzc3dvcmQgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRDb252ZXJzYXRpb25zID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoJy9jb252ZXJzYXRpb25zJyk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRNZXNzYWdlcyA9IGFzeW5jIChjb252ZXJzYXRpb25JZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoYC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L21lc3NhZ2VzYCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBjcmVhdGVNZXNzYWdlID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkLCB0ZXh0KSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L21lc3NhZ2VzYCwgeyB0ZXh0IH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgY3JlYXRlTWVzc2FnZVdpdGhQYXlsb2FkID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkLCBwYXlsb2FkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L21lc3NhZ2VzYCwgcGF5bG9hZCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBjcmVhdGVDb252ZXJzYXRpb24gPSBhc3luYyAodXNlcklkLCB0aXRsZSkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCcvY29udmVyc2F0aW9ucycsIHtcbiAgICAgICAgbWVtYmVyczogW3VzZXJJZF0sXG4gICAgICAgIHRpdGxlOiB0aXRsZSB8fCBgQ2hhdCB3aXRoICR7dXNlcklkfWBcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gQ3JlYXRlIGEgZ3JvdXAgY29udmVyc2F0aW9uIHdpdGggbXVsdGlwbGUgbWVtYmVyIElEc1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUdyb3VwQ29udmVyc2F0aW9uID0gYXN5bmMgKG1lbWJlcklkcywgdGl0bGUpID0+IHtcbiAgICBjb25zdCB1bmlxdWUgPSBBcnJheS5mcm9tKG5ldyBTZXQobWVtYmVySWRzLmZpbHRlcihCb29sZWFuKSkpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCcvY29udmVyc2F0aW9ucycsIHtcbiAgICAgICAgbWVtYmVyczogdW5pcXVlLFxuICAgICAgICBpc0dyb3VwOiB0cnVlLFxuICAgICAgICB0aXRsZTogdGl0bGUgfHwgYEdyb3VwICgke3VuaXF1ZS5sZW5ndGh9KWBcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGluaXRpYXRlQ2FsbCA9IGFzeW5jIChjb252ZXJzYXRpb25JZCwgdHlwZSwgdGFyZ2V0VXNlcklkKSA9PiB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHsgY29udmVyc2F0aW9uSWQsIHR5cGUgfTtcbiAgICBpZiAodGFyZ2V0VXNlcklkKSB7XG4gICAgICAgIHBheWxvYWQudGFyZ2V0VXNlcklkID0gdGFyZ2V0VXNlcklkO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdCgnL2NhbGxzL2luaXRpYXRlJywgcGF5bG9hZCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRDYWxsID0gYXN5bmMgKGNhbGxJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoYC9jYWxscy8ke2NhbGxJZH1gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGdldEFjdGl2ZUNhbGxGb3JDb252ZXJzYXRpb24gPSBhc3luYyAoY29udmVyc2F0aW9uSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvY2FsbHMvY29udmVyc2F0aW9uLyR7Y29udmVyc2F0aW9uSWR9L2FjdGl2ZWApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0TGl2ZUtpdFRva2VuID0gYXN5bmMgKGNhbGxJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvY2FsbHMvJHtjYWxsSWR9L2xpdmVraXQtdG9rZW5gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGVuZENhbGwgPSBhc3luYyAoY2FsbElkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9jYWxscy8ke2NhbGxJZH0vZW5kYCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBhY2NlcHRDYWxsID0gYXN5bmMgKGNhbGxJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvY2FsbHMvJHtjYWxsSWR9L2FjY2VwdGApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgcmVqZWN0Q2FsbCA9IGFzeW5jIChjYWxsSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL2NhbGxzLyR7Y2FsbElkfS9yZWplY3RgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4vLyBVUExPQUQgSU1BR0UgTE9DQUwgLSBDTElFTlQtU0VSVkVSIChIVFRQIFBPU1Qgb3ZlciBUQ1ApXG4vLyBNdWx0aXBhcnQgRm9ybSBEYXRhXG4vLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbi8vIFVwbG9hZCBpbWFnZSB0byBsb2NhbCBzdG9yYWdlIGVuZHBvaW50ICh1cGRhdGVkIHRvIHVzZSBjb3JyZWN0IGVuZHBvaW50KVxuZXhwb3J0IGNvbnN0IHVwbG9hZEltYWdlTG9jYWxPbGQgPSBhc3luYyAoZmlsZSkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGZldGNoKGZpbGUudXJpKS50aGVuKChyKSA9PiByLmJsb2IoKSk7XG4gICAgICAgIGNvbnN0IHdlYkZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIGZpbGUubmFtZSwgeyB0eXBlOiBmaWxlLnR5cGUgfSk7XG4gICAgICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgd2ViRmlsZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBSZWFjdCBOYXRpdmVcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBSTiBGb3JtRGF0YSBmaWxlXG4gICAgICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgeyB1cmk6IGZpbGUudXJpLCBuYW1lOiBmaWxlLm5hbWUsIHR5cGU6IGZpbGUudHlwZSB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9maWxlcy9pbWFnZWAsIGZvcm0sIHtcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbi8vIFVwbG9hZCB0byBTMyBpZiBiYWNrZW5kIHByb3ZpZGVzIHByZXNpZ25lZCBoYW5kbGluZyAob3B0aW9uYWwpXG5leHBvcnQgY29uc3QgdXBsb2FkSW1hZ2VTMyA9IGFzeW5jIChmaWxlKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgZmV0Y2goZmlsZS51cmkpLnRoZW4oKHIpID0+IHIuYmxvYigpKTtcbiAgICAgICAgY29uc3Qgd2ViRmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgZmlsZS5uYW1lLCB7IHR5cGU6IGZpbGUudHlwZSB9KTtcbiAgICAgICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCB3ZWJGaWxlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFJlYWN0IE5hdGl2ZVxuICAgICAgICAvLyBAdHMtaWdub3JlIFJOIEZvcm1EYXRhIGZpbGVcbiAgICAgICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCB7IHVyaTogZmlsZS51cmksIG5hbWU6IGZpbGUubmFtZSwgdHlwZTogZmlsZS50eXBlIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL2ZpbGVzL3MzYCwgZm9ybSwge1xuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gVXBsb2FkIHRvIGxvY2FsIHN0b3JhZ2VcbmV4cG9ydCBjb25zdCB1cGxvYWRJbWFnZUxvY2FsID0gYXN5bmMgKGZpbGUpID0+IHtcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBmZXRjaChmaWxlLnVyaSkudGhlbigocikgPT4gci5ibG9iKCkpO1xuICAgICAgICBjb25zdCB3ZWJGaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBmaWxlLm5hbWUsIHsgdHlwZTogZmlsZS50eXBlIH0pO1xuICAgICAgICBmb3JtLmFwcGVuZCgnZmlsZScsIHdlYkZpbGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gUmVhY3QgTmF0aXZlXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgUk4gRm9ybURhdGEgZmlsZVxuICAgICAgICBmb3JtLmFwcGVuZCgnZmlsZScsIHsgdXJpOiBmaWxlLnVyaSwgbmFtZTogZmlsZS5uYW1lLCB0eXBlOiBmaWxlLnR5cGUgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvdXBsb2Fkcy9pbWFnZWAsIGZvcm0sIHtcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbi8vIFVwbG9hZCBtZWRpYSBjaG8gbeG6oW5nIHjDoyBo4buZaSAo4bqjbmgvdmlkZW8pIC0gZMO5bmcgY2h1bmcgduG7m2kgZGVza3RvcFxuZXhwb3J0IGNvbnN0IHVwbG9hZE1lZGlhQXBpID0gYXN5bmMgKGZpbGUpID0+IHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCcvdXBsb2Fkcy9zMy9wdWJsaWMnLCBmb3JtRGF0YSwge1xuICAgIC8vIMSQ4buDIGJyb3dzZXIgdOG7sSBzZXQgQ29udGVudC1UeXBlICsgYm91bmRhcnlcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cmw6IHJlcy5kYXRhLnVybCxcbiAgICAgICAgdHlwZTogcmVzLmRhdGEubWltZS5zdGFydHNXaXRoKCdpbWFnZS8nKSA/ICdpbWFnZScgOiAndmlkZW8nLFxuICAgIH07XG59O1xuLy8gV2ViIGhlbHBlcjogdXBsb2FkIEZpbGUgb2JqZWN0IGRpcmVjdGx5IChjaGF0IGF0dGFjaG1lbnRzKVxuZXhwb3J0IGNvbnN0IHVwbG9hZENoYXRGaWxlID0gYXN5bmMgKGZpbGUpID0+IHtcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL3VwbG9hZHMvczMvcHVibGljYCwgZm9ybSwge1xuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGxvZ291dCA9IGFzeW5jICh0b2tlbikgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCcvYXV0aC9sb2dvdXQnLCB7IHRva2VuIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgcmVnaXN0ZXIgPSBhc3luYyAoZW1haWwsIHBhc3N3b3JkLCBuYW1lKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoJy9hdXRoL3JlZ2lzdGVyJywgeyBlbWFpbCwgcGFzc3dvcmQsIG5hbWUgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBzZW5kT1RQID0gYXN5bmMgKGVtYWlsKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoJy9hdXRoL3NlbmQtb3RwJywgeyBlbWFpbCB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHZlcmlmeU9UUCA9IGFzeW5jIChlbWFpbCwgb3RwKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoJy9hdXRoL3ZlcmlmeS1vdHAnLCB7IGVtYWlsLCBvdHAgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCByZXNlbmRPVFAgPSBhc3luYyAoZW1haWwpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdCgnL2F1dGgvcmVzZW5kLW90cCcsIHsgZW1haWwgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBzZW5kVmVyaWZpY2F0aW9uT1RQID0gYXN5bmMgKGVtYWlsKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoJy9hdXRoL3NlbmQtdmVyaWZpY2F0aW9uLW90cCcsIHsgZW1haWwgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCB1cGRhdGVVc2VybmFtZSA9IGFzeW5jICh1c2VybmFtZSkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wYXRjaCgnL3VzZXJzL3VzZXJuYW1lJywgeyB1c2VybmFtZSB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJBdmF0YXIgPSBhc3luYyAoYXZhdGFyVXJsKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKCcvdXNlcnMvYXZhdGFyJywgeyBhdmF0YXI6IGF2YXRhclVybCB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gQWx0ZXJuYXRpdmUgYXZhdGFyIHVwZGF0ZSBlbmRwb2ludHMgdG8gdHJ5XG5leHBvcnQgY29uc3QgdXBkYXRlVXNlclByb2ZpbGUgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wYXRjaCgnL3VzZXJzL3Byb2ZpbGUnLCBkYXRhKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJJbmZvID0gYXN5bmMgKGF2YXRhclVybCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wdXQoJy91c2Vycy9pbmZvJywgeyBhdmF0YXI6IGF2YXRhclVybCB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gR2V0IGN1cnJlbnQgdXNlciBJRCDigJMgd2ViIHZlcnNpb24gZMO5bmcgbG9jYWxTdG9yYWdlXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFVzZXJJZCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdXNlcklkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7XG4gICAgICAgIHJldHVybiB1c2VySWQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgSUQgZnJvbSBsb2NhbFN0b3JhZ2U6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuLy8gQuG6oW4gYsOoIGNobyB0cmFuZyBjw6EgbmjDom4gLyBmcmllbmRzIHBhZ2VcbmV4cG9ydCBjb25zdCBnZXRGcmllbmRzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvc29jaWFsL2ZyaWVuZHNcIik7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBibG9ja1VzZXJBcGkgPSBhc3luYyAodXNlcklkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC91c2Vycy8ke3VzZXJJZH0vYmxvY2tgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHVuYmxvY2tVc2VyQXBpID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5kZWxldGUoYC91c2Vycy8ke3VzZXJJZH0vYmxvY2tgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGdldEJsb2NrZWRVc2Vyc0FwaSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KFwiL3VzZXJzL2Jsb2NrZWRcIik7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRCbG9ja1N0YXR1c0FwaSA9IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvdXNlcnMvJHt1c2VySWR9L2Jsb2NrLXN0YXR1c2ApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgdW5mcmllbmRVc2VyQXBpID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5kZWxldGUoYC9zb2NpYWwvZnJpZW5kcy8ke3VzZXJJZH1gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gUGhvdG9zIGZyb20gcG9zdHMgKGF1dGhvciBvciB0YWdnZWQpXG5leHBvcnQgY29uc3QgZ2V0VXNlclBob3Rvc0FwaSA9IGFzeW5jICh1c2VySWQsIHR5cGUgPSBcImF1dGhvcmVkXCIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvc29jaWFsL3VzZXJzLyR7dXNlcklkfS9waG90b3NgLCB7IHBhcmFtczogeyB0eXBlIH0gfSk7XG4gICAgICAgIHJldHVybiByZXMuZGF0YTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIE7hur91IGJhY2tlbmQgY2jGsGEgY8OzIHJvdXRlIC9waG90b3MgKDQwNCksIHRy4bqjIHbhu4EgcuG7l25nIMSR4buDIGZyb250ZW5kIGZhbGxiYWNrIHNhbmcgcG9zdHNcbiAgICAgICAgaWYgKGVycm9yPy5yZXNwb25zZT8uc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGl0ZW1zOiBbXSB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgdXBkYXRlUHJvZmlsZUFwaSA9IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKGAvdXNlcnMvbWUvcHJvZmlsZWAsIHBheWxvYWQpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG4vLyBGZWVkIGLDoGkgdmnhur90IGPhu6dhIDEgdXNlciAodHJhbmcgcHJvZmlsZSlcbmV4cG9ydCBjb25zdCBnZXRVc2VyUG9zdHNBcGkgPSBhc3luYyAodXNlcklkLCBjdXJzb3IsIGxpbWl0ID0gMjApID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7IGxpbWl0IH07XG4gICAgaWYgKGN1cnNvcilcbiAgICAgICAgcGFyYW1zLmN1cnNvciA9IGN1cnNvcjtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvc29jaWFsL3VzZXJzLyR7dXNlcklkfS9wb3N0c2AsIHsgcGFyYW1zIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgdHJhY2tFdmVudEFwaSA9IGFzeW5jIChldmVudFR5cGUsIG1ldGFkYXRhLCBzZXNzaW9uSWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBhcGkucG9zdChcIi9hbmFseXRpY3MvdHJhY2tcIiwgeyBldmVudFR5cGUsIG1ldGFkYXRhLCBzZXNzaW9uSWQgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW0FuYWx5dGljc10gRmFpbGVkIHRvIHRyYWNrIGV2ZW50OlwiLCBlcnJvcik7XG4gICAgfVxufTtcbi8vIFVwZGF0ZSBhdmF0YXIgd2l0aCB1c2VyIElEXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlckF2YXRhcldpdGhJZCA9IGFzeW5jICh1c2VySWQsIGF2YXRhclVybCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wYXRjaChgL3VzZXJzLyR7dXNlcklkfS9hdmF0YXJgLCB7IGF2YXRhcjogYXZhdGFyVXJsIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG4vLyBVcGRhdGUgcHJvZmlsZSB3aXRoIHVzZXIgSURcbmV4cG9ydCBjb25zdCB1cGRhdGVVc2VyUHJvZmlsZVdpdGhJZCA9IGFzeW5jICh1c2VySWQsIGRhdGEpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucGF0Y2goYC91c2Vycy8ke3VzZXJJZH0vcHJvZmlsZWAsIGRhdGEpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgY2hhbmdlUGFzc3dvcmQgPSBhc3luYyAoY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCcvYXV0aC9jaGFuZ2UtcGFzc3dvcmQnLCB7XG4gICAgICAgIGN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgbmV3UGFzc3dvcmQsXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbi8vIFVwZGF0ZSBjdXJyZW50IHVzZXIgcHJvZmlsZSAodGhlIGNvcnJlY3Qgd2F5IGFjY29yZGluZyB0byBiYWNrZW5kIGRvY3MpXG5leHBvcnQgY29uc3QgdXBkYXRlQ3VycmVudFVzZXJQcm9maWxlID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSB1cGRhdGVDdXJyZW50VXNlclByb2ZpbGUgLSByZXF1ZXN0IGRhdGE6JywgZGF0YSk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gdXBkYXRlQ3VycmVudFVzZXJQcm9maWxlIC0gbWV0aG9kOiBQQVRDSCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIHVwZGF0ZUN1cnJlbnRVc2VyUHJvZmlsZSAtIGF1dGggaGVhZGVyOicsIGFwaS5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucGF0Y2goJy91c2Vycy9tZScsIGRhdGEpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG4vLyBHZXQgY3VycmVudCB1c2VyIHByb2ZpbGVcbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VXNlclByb2ZpbGUgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldCgnL3VzZXJzL21lJyk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbi8vIEPDoWNoIDE6IFVwbG9hZCBhdmF0YXIgdHLhu7FjIHRp4bq/cCAoxJHGoW4gZ2nhuqNuIG5o4bqldClcbmV4cG9ydCBjb25zdCB1cGxvYWRBdmF0YXJEaXJlY3QgPSBhc3luYyAoZmlsZSkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGZldGNoKGZpbGUudXJpKS50aGVuKChyKSA9PiByLmJsb2IoKSk7XG4gICAgICAgIGNvbnN0IHdlYkZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIGZpbGUubmFtZSwgeyB0eXBlOiBmaWxlLnR5cGUgfSk7XG4gICAgICAgIGZvcm0uYXBwZW5kKCdhdmF0YXInLCB3ZWJGaWxlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFJlYWN0IE5hdGl2ZVxuICAgICAgICAvLyBAdHMtaWdub3JlIFJOIEZvcm1EYXRhIGZpbGVcbiAgICAgICAgZm9ybS5hcHBlbmQoJ2F2YXRhcicsIHsgdXJpOiBmaWxlLnVyaSwgbmFtZTogZmlsZS5uYW1lLCB0eXBlOiBmaWxlLnR5cGUgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCfwn5SNIHVwbG9hZEF2YXRhckRpcmVjdCAtIHNlbmRpbmcgZmlsZTonLCBmaWxlLm5hbWUpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIHVwbG9hZEF2YXRhckRpcmVjdCAtIGF1dGggaGVhZGVyOicsIGFwaS5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdCgnL3VzZXJzL2F2YXRhcicsIGZvcm0sIHtcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRVc2Vyc0J5SWRzID0gYXN5bmMgKHVzZXJJZHMpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL3VzZXJzL2J5LWlkc2AsIHsgdXNlcklkcyB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHNlYXJjaFVzZXJzID0gYXN5bmMgKHF1ZXJ5LCBwYWdlID0gMSwgbGltaXQgPSAyMCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIHNlYXJjaFVzZXJzIGNhbGxlZCB3aXRoOicsIHsgcXVlcnksIHBhZ2UsIGxpbWl0IH0pO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIEFQSSBiYXNlIFVSTDonLCBhcGkuZGVmYXVsdHMuYmFzZVVSTCk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gQXV0aCBoZWFkZXI6JywgYXBpLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10pO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoJy91c2Vycy9zZWFyY2gnLCB7XG4gICAgICAgIHBhcmFtczogeyBxOiBxdWVyeSwgcGFnZSwgbGltaXQgfVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIHNlYXJjaFVzZXJzIHJlc3BvbnNlOicsIHJlcy5kYXRhKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gVOG6oW8gY29udmVyc2F0aW9uIHbhu5tpIHVzZXJcbmV4cG9ydCBjb25zdCBjcmVhdGVDb252ZXJzYXRpb25XaXRoVXNlciA9IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdCgnL2NvbnZlcnNhdGlvbnMnLCB7XG4gICAgICAgIG1lbWJlcnM6IFt1c2VySWRdXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRPcHBvbmVudEluZm8gPSBhc3luYyAoY29udmVyc2F0aW9uSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9vcHBvbmVudGApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG4vLyBNZXNzYWdlIEFjdGlvbnMgQVBJXG5leHBvcnQgY29uc3QgZWRpdE1lc3NhZ2UgPSBhc3luYyAobWVzc2FnZUlkLCB0ZXh0KSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKGAvY29udmVyc2F0aW9ucy9tZXNzYWdlcy8ke21lc3NhZ2VJZH1gLCB7IHRleHQgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBkZWxldGVNZXNzYWdlID0gYXN5bmMgKG1lc3NhZ2VJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5kZWxldGUoYC9jb252ZXJzYXRpb25zL21lc3NhZ2VzLyR7bWVzc2FnZUlkfWApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgYWRkUmVhY3Rpb24gPSBhc3luYyAobWVzc2FnZUlkLCBlbW9qaSkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvY29udmVyc2F0aW9ucy9tZXNzYWdlcy8ke21lc3NhZ2VJZH0vcmVhY3Rpb25zYCwgeyBlbW9qaSB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHJlbW92ZVJlYWN0aW9uID0gYXN5bmMgKG1lc3NhZ2VJZCwgZW1vamkpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZGVsZXRlKGAvY29udmVyc2F0aW9ucy9tZXNzYWdlcy8ke21lc3NhZ2VJZH0vcmVhY3Rpb25zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGVtb2ppKX1gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHBpbk1lc3NhZ2UgPSBhc3luYyAobWVzc2FnZUlkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9jb252ZXJzYXRpb25zL21lc3NhZ2VzLyR7bWVzc2FnZUlkfS9waW5gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHVucGluTWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZGVsZXRlKGAvY29udmVyc2F0aW9ucy9tZXNzYWdlcy8ke21lc3NhZ2VJZH0vcGluYCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBzdGFyTWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL2NvbnZlcnNhdGlvbnMvbWVzc2FnZXMvJHttZXNzYWdlSWR9L3N0YXJgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gUmV2b2tlIG1lc3NhZ2UgZm9yIGV2ZXJ5b25lXG5leHBvcnQgY29uc3QgcmV2b2tlTWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucGF0Y2goYC9jb252ZXJzYXRpb25zL21lc3NhZ2VzLyR7bWVzc2FnZUlkfS9yZXZva2VgLCB7fSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBzZWFyY2hNZXNzYWdlcyA9IGFzeW5jIChxdWVyeSwgY29udmVyc2F0aW9uSWQpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7IHF1ZXJ5IH07XG4gICAgaWYgKGNvbnZlcnNhdGlvbklkKSB7XG4gICAgICAgIHBhcmFtcy5jb252ZXJzYXRpb25JZCA9IGNvbnZlcnNhdGlvbklkO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvY29udmVyc2F0aW9ucy9tZXNzYWdlcy9zZWFyY2hgLCB7IHBhcmFtcyB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IG1hcmtBc1JlYWQgPSBhc3luYyAoY29udmVyc2F0aW9uSWQsIG1lc3NhZ2VJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9yZWFkYCwgeyBtZXNzYWdlSWQgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbi8vIEdyb3VwIE1hbmFnZW1lbnQgQVBJXG5leHBvcnQgY29uc3QgYWRkTWVtYmVycyA9IGFzeW5jIChjb252ZXJzYXRpb25JZCwgdXNlcklkcykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9tZW1iZXJzYCwgeyB1c2VySWRzIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgcmVtb3ZlTWVtYmVyID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkLCB1c2VySWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZGVsZXRlKGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9tZW1iZXJzLyR7dXNlcklkfWApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgdXBkYXRlR3JvdXBJbmZvID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkLCBkYXRhKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfWAsIGRhdGEpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgY3JlYXRlSW52aXRlTGluayA9IGFzeW5jIChjb252ZXJzYXRpb25JZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9pbnZpdGVgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGpvaW5Db252ZXJzYXRpb25CeUludml0ZSA9IGFzeW5jIChpbnZpdGVDb2RlKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9jb252ZXJzYXRpb25zL2pvaW4vaW52aXRlYCwgeyBpbnZpdGVDb2RlIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgbWFrZUFkbWluID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkLCB1c2VySWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH0vYWRtaW5zLyR7dXNlcklkfWApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgcmVtb3ZlQWRtaW4gPSBhc3luYyAoY29udmVyc2F0aW9uSWQsIHVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5kZWxldGUoYC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L2FkbWlucy8ke3VzZXJJZH1gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gQmFja3dhcmRzLWNvbXBhdGlibGUgYWxpYXNlcyBmb3IgZGVza3RvcCBjb2RlXG5leHBvcnQgY29uc3QgYWRkR3JvdXBNZW1iZXJzID0gYWRkTWVtYmVycztcbmV4cG9ydCBjb25zdCByZW1vdmVHcm91cE1lbWJlciA9IHJlbW92ZU1lbWJlcjtcbmV4cG9ydCBjb25zdCBtYWtlR3JvdXBBZG1pbiA9IG1ha2VBZG1pbjtcbmV4cG9ydCBjb25zdCByZW1vdmVHcm91cEFkbWluID0gcmVtb3ZlQWRtaW47XG5leHBvcnQgY29uc3QgbGVhdmVHcm91cCA9IGFzeW5jIChjb252ZXJzYXRpb25JZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9sZWF2ZWApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0VW5yZWFkQ291bnQgPSBhc3luYyAoY29udmVyc2F0aW9uSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS91bnJlYWRgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gT25saW5lIFN0YXR1cyBBUElcbmV4cG9ydCBjb25zdCB1cGRhdGVPbmxpbmVTdGF0dXMgPSBhc3luYyAoc3RhdHVzKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKGAvdXNlcnMvbWUvc3RhdHVzYCwgeyBzdGF0dXMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRPbmxpbmVVc2VycyA9IGFzeW5jICh1c2VySWRzKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC91c2Vycy9vbmxpbmUtc3RhdHVzYCwgeyB1c2VySWRzIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG4vLyBVcGRhdGUgY3JlYXRlTWVzc2FnZSB0byBzdXBwb3J0IHJlcGx5VG9cbmV4cG9ydCBjb25zdCBjcmVhdGVNZXNzYWdlV2l0aFJlcGx5ID0gYXN5bmMgKGNvbnZlcnNhdGlvbklkLCB0ZXh0LCByZXBseVRvKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L21lc3NhZ2VzYCwgeyB0ZXh0LCByZXBseVRvIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RmVlZCA9IGFzeW5jIChjdXJzb3IpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgICBpZiAoY3Vyc29yKVxuICAgICAgICBwYXJhbXMuY3Vyc29yID0gY3Vyc29yO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvc29jaWFsL3Bvc3RzL2ZlZWRcIiwgeyBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBjcmVhdGVQb3N0QXBpID0gYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChcIi9zb2NpYWwvcG9zdHNcIiwgcGF5bG9hZCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBjcmVhdGVDb21tZW50QXBpID0gYXN5bmMgKHBvc3RJZCwgcGF5bG9hZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvc29jaWFsL3Bvc3RzLyR7cG9zdElkfS9jb21tZW50c2AsIHBheWxvYWQpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0UG9zdENvbW1lbnRzID0gYXN5bmMgKHBvc3RJZCwgY3Vyc29yKSA9PiB7XG4gICAgY29uc3QgcGFyYW1zID0ge307XG4gICAgaWYgKGN1cnNvcilcbiAgICAgICAgcGFyYW1zLmN1cnNvciA9IGN1cnNvcjtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvc29jaWFsL3Bvc3RzLyR7cG9zdElkfS9jb21tZW50c2AsIHsgcGFyYW1zIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0UG9zdHNCeUhhc2h0YWdBcGkgPSBhc3luYyAodGFnLCBjdXJzb3IpID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgICBpZiAoY3Vyc29yKVxuICAgICAgICBwYXJhbXMuY3Vyc29yID0gY3Vyc29yO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoYC9zb2NpYWwvaGFzaHRhZ3MvJHtlbmNvZGVVUklDb21wb25lbnQodGFnKX0vcG9zdHNgLCB7IHBhcmFtcyB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gU2luZ2xlIHBvc3QgZGV0YWlsXG5leHBvcnQgY29uc3QgZ2V0UG9zdEJ5SWRBcGkgPSBhc3luYyAocG9zdElkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChgL3NvY2lhbC9wb3N0cy8ke3Bvc3RJZH1gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHNoYXJlUG9zdEFwaSA9IGFzeW5jIChwb3N0SWQsIHBheWxvYWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL3NvY2lhbC9wb3N0cy8ke3Bvc3RJZH0vc2hhcmVgLCBwYXlsb2FkKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0b3J5QXBpID0gYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChcIi9zb2NpYWwvc3Rvcmllc1wiLCBwYXlsb2FkKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGdldFN0b3JpZXNBcGkgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChcIi9zb2NpYWwvc3Rvcmllc1wiKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IG1hcmtTdG9yeVZpZXdlZEFwaSA9IGFzeW5jIChzdG9yeUlkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9zb2NpYWwvc3Rvcmllcy8ke3N0b3J5SWR9L3ZpZXdgLCB7fSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBkZWxldGVTdG9yeUFwaSA9IGFzeW5jIChzdG9yeUlkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmRlbGV0ZShgL3NvY2lhbC9zdG9yaWVzLyR7c3RvcnlJZH1gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHNhdmVQb3N0QXBpID0gYXN5bmMgKHBvc3RJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvc29jaWFsL3Bvc3RzLyR7cG9zdElkfS9zYXZlYCwge30pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgdW5zYXZlUG9zdEFwaSA9IGFzeW5jIChwb3N0SWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZGVsZXRlKGAvc29jaWFsL3Bvc3RzLyR7cG9zdElkfS9zYXZlYCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRTYXZlZFBvc3RzQXBpID0gYXN5bmMgKGN1cnNvcikgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHt9O1xuICAgIGlmIChjdXJzb3IpXG4gICAgICAgIHBhcmFtcy5jdXJzb3IgPSBjdXJzb3I7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChcIi9zb2NpYWwvcG9zdHMvc2F2ZWRcIiwgeyBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCByZXBvcnRQb3N0QXBpID0gYXN5bmMgKHBvc3RJZCwgcGF5bG9hZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvc29jaWFsL3Bvc3RzLyR7cG9zdElkfS9yZXBvcnRgLCBwYXlsb2FkKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGdldEZyaWVuZFN1Z2dlc3Rpb25zQXBpID0gYXN5bmMgKGxpbWl0ID0gNikgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvc29jaWFsL2ZyaWVuZHMvc3VnZ2VzdGlvbnNcIiwge1xuICAgICAgICBwYXJhbXM6IHsgbGltaXQgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHNlbmRGcmllbmRSZXF1ZXN0QXBpID0gYXN5bmMgKHRhcmdldFVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KFwiL3NvY2lhbC9mcmllbmRzL3JlcXVlc3RzXCIsIHsgdGFyZ2V0VXNlcklkIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgcmVzcG9uZEZyaWVuZFJlcXVlc3RBcGkgPSBhc3luYyAoZnJpZW5kc2hpcElkLCBhY3Rpb24pID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucG9zdChgL3NvY2lhbC9mcmllbmRzLyR7ZnJpZW5kc2hpcElkfS9yZXNwb25kYCwgeyBhY3Rpb24gfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRQZW5kaW5nRnJpZW5kUmVxdWVzdHNBcGkgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChcIi9zb2NpYWwvZnJpZW5kcy9yZXF1ZXN0cy9wZW5kaW5nXCIpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0Tm90aWZpY2F0aW9uc0FwaSA9IGFzeW5jIChjdXJzb3IsIGxpbWl0ID0gMjApID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7IGxpbWl0IH07XG4gICAgaWYgKGN1cnNvcilcbiAgICAgICAgcGFyYW1zLmN1cnNvciA9IGN1cnNvcjtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KFwiL3NvY2lhbC9ub3RpZmljYXRpb25zXCIsIHsgcGFyYW1zIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgbWFya05vdGlmaWNhdGlvbnNSZWFkQXBpID0gYXN5bmMgKGlkcykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KFwiL3NvY2lhbC9ub3RpZmljYXRpb25zL3JlYWRcIiwgeyBpZHMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRVc2VyQnlJZCA9IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvdXNlcnMvJHt1c2VySWR9YCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBzZWFyY2hTb2NpYWxBcGkgPSBhc3luYyAocXVlcnlPclBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHR5cGVvZiBxdWVyeU9yUGFyYW1zID09PSBcInN0cmluZ1wiXG4gICAgICAgID8geyBxOiBxdWVyeU9yUGFyYW1zIH1cbiAgICAgICAgOiB7IHE6IHF1ZXJ5T3JQYXJhbXMucSwgdHlwZTogcXVlcnlPclBhcmFtcy50eXBlIH07XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChcIi9zb2NpYWwvc2VhcmNoXCIsIHsgcGFyYW1zIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgY2hlY2tQb3N0TGlrZWRBcGkgPSBhc3luYyAocG9zdElkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChgL3NvY2lhbC9wb3N0cy8ke3Bvc3RJZH0vbGlrZWRgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWN0VG9Qb3N0QXBpID0gYXN5bmMgKHBvc3RJZCwgdHlwZSkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvc29jaWFsL3Bvc3RzLyR7cG9zdElkfS9yZWFjdGlvbnNgLCB7IHR5cGUgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCByZW1vdmVSZWFjdGlvbkFwaSA9IGFzeW5jIChwb3N0SWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZGVsZXRlKGAvc29jaWFsL3Bvc3RzLyR7cG9zdElkfS9yZWFjdGlvbnNgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gU3RvcnkgUmVhY3Rpb25zICYgUmVwbGllc1xuZXhwb3J0IGNvbnN0IHJlYWN0VG9TdG9yeUFwaSA9IGFzeW5jIChzdG9yeUlkLCB0eXBlKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoYC9zb2NpYWwvc3Rvcmllcy8ke3N0b3J5SWR9L3JlYWN0aW9uc2AsIHsgdHlwZSB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHJlbW92ZVN0b3J5UmVhY3Rpb25BcGkgPSBhc3luYyAoc3RvcnlJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5kZWxldGUoYC9zb2NpYWwvc3Rvcmllcy8ke3N0b3J5SWR9L3JlYWN0aW9uc2ApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0U3RvcnlSZXBsaWVzQXBpID0gYXN5bmMgKHN0b3J5SWQsIGN1cnNvciwgbGltaXQgPSAyMCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHsgbGltaXQgfTtcbiAgICBpZiAoY3Vyc29yKVxuICAgICAgICBwYXJhbXMuY3Vyc29yID0gY3Vyc29yO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoYC9zb2NpYWwvc3Rvcmllcy8ke3N0b3J5SWR9L3JlcGxpZXNgLCB7XG4gICAgICAgIHBhcmFtcyxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0b3J5UmVwbHlBcGkgPSBhc3luYyAoc3RvcnlJZCwgY29udGVudCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvc29jaWFsL3N0b3JpZXMvJHtzdG9yeUlkfS9yZXBsaWVzYCwgeyBjb250ZW50IH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG4vLyBNdXNpYyBTZWFyY2hcbmV4cG9ydCBjb25zdCBzZWFyY2hNdXNpY0FwaSA9IGFzeW5jIChxdWVyeSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS9zZWFyY2g/dGVybT0ke2VuY29kZVVSSUNvbXBvbmVudChxdWVyeSl9Jm1lZGlhPW11c2ljJmxpbWl0PTIwYCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMgfHwgW107XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNlYXJjaCBtdXNpYzpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcbi8vIFJlZWwgQVBJc1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlZWxBcGkgPSBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KFwiL3JlZWxzXCIsIHBheWxvYWQpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0UmVlbHNGZWVkQXBpID0gYXN5bmMgKGN1cnNvciwgbGltaXQgPSAxMCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHsgbGltaXQgfTtcbiAgICBpZiAoY3Vyc29yKVxuICAgICAgICBwYXJhbXMuY3Vyc29yID0gY3Vyc29yO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvcmVlbHNcIiwgeyBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRSZWVsQnlJZEFwaSA9IGFzeW5jIChyZWVsSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvcmVlbHMvJHtyZWVsSWR9YCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRVc2VyUmVlbHNBcGkgPSBhc3luYyAodXNlcklkLCBjdXJzb3IsIGxpbWl0ID0gMjApID0+IHtcbiAgICBjb25zdCBwYXJhbXMgPSB7IGxpbWl0IH07XG4gICAgaWYgKGN1cnNvcilcbiAgICAgICAgcGFyYW1zLmN1cnNvciA9IGN1cnNvcjtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvcmVlbHMvdXNlcnMvJHt1c2VySWR9YCwgeyBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBsaWtlUmVlbEFwaSA9IGFzeW5jIChyZWVsSWQsIHR5cGUgPSBcIkxJS0VcIikgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KGAvcmVlbHMvJHtyZWVsSWR9L2xpa2VgLCB7IHR5cGUgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCB1bmxpa2VSZWVsQXBpID0gYXN5bmMgKHJlZWxJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5kZWxldGUoYC9yZWVscy8ke3JlZWxJZH0vbGlrZWApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgY2hlY2tSZWVsTGlrZWRBcGkgPSBhc3luYyAocmVlbElkKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChgL3JlZWxzLyR7cmVlbElkfS9saWtlZGApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZGVsZXRlUmVlbEFwaSA9IGFzeW5jIChyZWVsSWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZGVsZXRlKGAvcmVlbHMvJHtyZWVsSWR9YCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBzeW5jUmVlbHNGcm9tUG9zdHNBcGkgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoXCIvcmVlbHMvc3luY1wiKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBRE1JTiBBUElzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVzZXJzIE1hbmFnZW1lbnRcbmV4cG9ydCBjb25zdCBnZXRBZG1pblVzZXJzQXBpID0gYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvYWRtaW4vdXNlcnNcIiwgeyBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRBZG1pblVzZXJTdGF0c0FwaSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KFwiL2FkbWluL3VzZXJzL3N0YXRzXCIpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0QWRtaW5Vc2VyRGV0YWlsc0FwaSA9IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KGAvYWRtaW4vdXNlcnMvJHt1c2VySWR9YCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBiYW5Vc2VyQXBpID0gYXN5bmMgKHVzZXJJZCwgcmVhc29uKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKGAvYWRtaW4vdXNlcnMvJHt1c2VySWR9L2JhbmAsIHsgcmVhc29uIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgdW5iYW5Vc2VyQXBpID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wYXRjaChgL2FkbWluL3VzZXJzLyR7dXNlcklkfS91bmJhbmApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgdXBkYXRlVXNlclJvbGVBcGkgPSBhc3luYyAodXNlcklkLCByb2xlKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKGAvYWRtaW4vdXNlcnMvJHt1c2VySWR9L3JvbGVgLCB7IHJvbGUgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCB2ZXJpZnlVc2VyQXBpID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wYXRjaChgL2FkbWluL3VzZXJzLyR7dXNlcklkfS92ZXJpZnlgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IHVudmVyaWZ5VXNlckFwaSA9IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucGF0Y2goYC9hZG1pbi91c2Vycy8ke3VzZXJJZH0vdW52ZXJpZnlgKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gUG9zdHMgTWFuYWdlbWVudFxuZXhwb3J0IGNvbnN0IGdldEFkbWluUG9zdHNBcGkgPSBhc3luYyAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChcIi9hZG1pbi9wb3N0c1wiLCB7IHBhcmFtcyB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGdldEFkbWluUG9zdFN0YXRzQXBpID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvYWRtaW4vcG9zdHMvc3RhdHNcIik7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBkZWxldGVQb3N0QXBpID0gYXN5bmMgKHBvc3RJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5kZWxldGUoYC9hZG1pbi9wb3N0cy8ke3Bvc3RJZH1gKTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGhpZGVQb3N0QXBpID0gYXN5bmMgKHBvc3RJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wYXRjaChgL2FkbWluL3Bvc3RzLyR7cG9zdElkfS9oaWRlYCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCByZXN0b3JlUG9zdEFwaSA9IGFzeW5jIChwb3N0SWQpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucGF0Y2goYC9hZG1pbi9wb3N0cy8ke3Bvc3RJZH0vcmVzdG9yZWApO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0QWRtaW5SZXBvcnRzQXBpID0gYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvYWRtaW4vcmVwb3J0c1wiLCB7IHBhcmFtcyB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGdldEFkbWluUmVwb3J0RGV0YWlsc0FwaSA9IGFzeW5jIChyZXBvcnRJZCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoYC9hZG1pbi9yZXBvcnRzLyR7cmVwb3J0SWR9YCk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBoYW5kbGVSZXBvcnRBcGkgPSBhc3luYyAocmVwb3J0SWQsIGFjdGlvbiwgbm90ZXMpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucGF0Y2goYC9hZG1pbi9yZXBvcnRzLyR7cmVwb3J0SWR9L2hhbmRsZWAsIHsgYWN0aW9uLCBub3RlcyB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGJ1bGtIYW5kbGVSZXBvcnRzQXBpID0gYXN5bmMgKHJlcG9ydElkcywgYWN0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoXCIvYWRtaW4vcmVwb3J0cy9idWxrLWhhbmRsZVwiLCB7XG4gICAgICAgIHJlcG9ydElkcyxcbiAgICAgICAgYWN0aW9uLFxuICAgIH0pO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG4vLyBBbmFseXRpY3NcbmV4cG9ydCBjb25zdCBnZXRBZG1pbkRhc2hib2FyZFN0YXRzQXBpID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvYWRtaW4vZGFzaGJvYXJkL3N0YXRzXCIpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0QWRtaW5BbmFseXRpY3NDaGFydEFwaSA9IGFzeW5jICh0aW1lUmFuZ2UsIG1ldHJpYykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoXCIvYWRtaW4vYW5hbHl0aWNzL2NoYXJ0XCIsIHtcbiAgICAgICAgcGFyYW1zOiB7IHRpbWVSYW5nZSwgbWV0cmljIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRVc2VyQWN0aXZpdHlTdGF0c0FwaSA9IGFzeW5jICh1c2VySWQsIHRpbWVSYW5nZSkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoYC9hZG1pbi9hbmFseXRpY3MvdXNlcnMvJHt1c2VySWR9YCwgeyBwYXJhbXM6IHsgdGltZVJhbmdlIH0gfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRDb250ZW50U3RhdHNBcGkgPSBhc3luYyAodGltZVJhbmdlKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldChcIi9hZG1pbi9hbmFseXRpY3MvY29udGVudFwiLCB7XG4gICAgICAgIHBhcmFtczogeyB0aW1lUmFuZ2UgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuLy8gQ29udGVudCBNb2RlcmF0aW9uXG5leHBvcnQgY29uc3QgbW9kZXJhdGVQb3N0QXBpID0gYXN5bmMgKHBvc3RJZCwgYWN0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBhdGNoKGAvYWRtaW4vbW9kZXJhdGlvbi9wb3N0cy8ke3Bvc3RJZH1gLCB7IGFjdGlvbiB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGJ1bGtNb2RlcmF0ZVBvc3RzQXBpID0gYXN5bmMgKHBvc3RJZHMsIGFjdGlvbikgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KFwiL2FkbWluL21vZGVyYXRpb24vcG9zdHMvYnVsa1wiLCB7IHBvc3RJZHMsIGFjdGlvbiB9KTtcbiAgICByZXR1cm4gcmVzLmRhdGE7XG59O1xuZXhwb3J0IGNvbnN0IGdldE1vZGVyYXRpb25RdWV1ZUFwaSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KFwiL2FkbWluL21vZGVyYXRpb24vcXVldWVcIik7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbmV4cG9ydCBjb25zdCBnZXRTeXN0ZW1TZXR0aW5nc0FwaSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KFwiL2FkbWluL3NldHRpbmdzXCIpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgdXBkYXRlU3lzdGVtU2V0dGluZ3NBcGkgPSBhc3luYyAoc2V0dGluZ3MpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucGF0Y2goXCIvYWRtaW4vc2V0dGluZ3NcIiwgc2V0dGluZ3MpO1xuICAgIHJldHVybiByZXMuZGF0YTtcbn07XG5leHBvcnQgY29uc3QgZ2V0U3lzdGVtTG9nc0FwaSA9IGFzeW5jIChwYXJhbXMpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KFwiL2FkbWluL2xvZ3NcIiwgeyBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIHJlcy5kYXRhO1xufTtcbiJdLCJuYW1lcyI6WyJheGlvcyIsIkRJUkVDVF9CQUNLRU5EX1VSTCIsImlzV2ViIiwiaXNMb2NhbGhvc3QiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwidGVzdCIsImlzTEFOIiwiaXNOZ3JvayIsImluY2x1ZGVzIiwiaXNQcm9kdWN0aW9uIiwibWF0Y2giLCJBUElfVVJMIiwiY29uc29sZSIsImxvZyIsImFwaSIsImNyZWF0ZSIsImJhc2VVUkwiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJpbnRlcmNlcHRvcnMiLCJyZXF1ZXN0IiwidXNlIiwiY29uZmlnIiwiQXV0aG9yaXphdGlvbiIsImF1dGhIZWFkZXIiLCJzdWJzdHJpbmciLCJTdHJpbmciLCJtZXRob2QiLCJ0b1VwcGVyQ2FzZSIsInVybCIsImhhc0F1dGgiLCJlcnJvciIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNwb25zZSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJkYXRhIiwic2V0QXV0aFRva2VuIiwibG9naW4iLCJlbWFpbCIsInBhc3N3b3JkIiwicmVzIiwicG9zdCIsImdldENvbnZlcnNhdGlvbnMiLCJnZXQiLCJnZXRNZXNzYWdlcyIsImNvbnZlcnNhdGlvbklkIiwiY3JlYXRlTWVzc2FnZSIsInRleHQiLCJjcmVhdGVNZXNzYWdlV2l0aFBheWxvYWQiLCJwYXlsb2FkIiwiY3JlYXRlQ29udmVyc2F0aW9uIiwidXNlcklkIiwidGl0bGUiLCJtZW1iZXJzIiwiY3JlYXRlR3JvdXBDb252ZXJzYXRpb24iLCJtZW1iZXJJZHMiLCJ1bmlxdWUiLCJBcnJheSIsImZyb20iLCJTZXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiaXNHcm91cCIsImxlbmd0aCIsImluaXRpYXRlQ2FsbCIsInR5cGUiLCJ0YXJnZXRVc2VySWQiLCJnZXRDYWxsIiwiY2FsbElkIiwiZ2V0QWN0aXZlQ2FsbEZvckNvbnZlcnNhdGlvbiIsImdldExpdmVLaXRUb2tlbiIsImVuZENhbGwiLCJhY2NlcHRDYWxsIiwicmVqZWN0Q2FsbCIsInVwbG9hZEltYWdlTG9jYWxPbGQiLCJmaWxlIiwiZm9ybSIsIkZvcm1EYXRhIiwiYmxvYiIsImZldGNoIiwidXJpIiwidGhlbiIsInIiLCJ3ZWJGaWxlIiwiRmlsZSIsIm5hbWUiLCJhcHBlbmQiLCJ1cGxvYWRJbWFnZVMzIiwidXBsb2FkSW1hZ2VMb2NhbCIsInVwbG9hZE1lZGlhQXBpIiwiZm9ybURhdGEiLCJtaW1lIiwic3RhcnRzV2l0aCIsInVwbG9hZENoYXRGaWxlIiwibG9nb3V0IiwicmVnaXN0ZXIiLCJzZW5kT1RQIiwidmVyaWZ5T1RQIiwib3RwIiwicmVzZW5kT1RQIiwic2VuZFZlcmlmaWNhdGlvbk9UUCIsInVwZGF0ZVVzZXJuYW1lIiwidXNlcm5hbWUiLCJwYXRjaCIsInVwZGF0ZVVzZXJBdmF0YXIiLCJhdmF0YXJVcmwiLCJhdmF0YXIiLCJ1cGRhdGVVc2VyUHJvZmlsZSIsInVwZGF0ZVVzZXJJbmZvIiwicHV0IiwiZ2V0Q3VycmVudFVzZXJJZCIsImdldEZyaWVuZHMiLCJibG9ja1VzZXJBcGkiLCJ1bmJsb2NrVXNlckFwaSIsImRlbGV0ZSIsImdldEJsb2NrZWRVc2Vyc0FwaSIsImdldEJsb2NrU3RhdHVzQXBpIiwidW5mcmllbmRVc2VyQXBpIiwiZ2V0VXNlclBob3Rvc0FwaSIsInBhcmFtcyIsIml0ZW1zIiwidXBkYXRlUHJvZmlsZUFwaSIsImdldFVzZXJQb3N0c0FwaSIsImN1cnNvciIsImxpbWl0IiwidHJhY2tFdmVudEFwaSIsImV2ZW50VHlwZSIsIm1ldGFkYXRhIiwic2Vzc2lvbklkIiwidXBkYXRlVXNlckF2YXRhcldpdGhJZCIsInVwZGF0ZVVzZXJQcm9maWxlV2l0aElkIiwiY2hhbmdlUGFzc3dvcmQiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsInVwZGF0ZUN1cnJlbnRVc2VyUHJvZmlsZSIsImdldEN1cnJlbnRVc2VyUHJvZmlsZSIsInVwbG9hZEF2YXRhckRpcmVjdCIsImdldFVzZXJzQnlJZHMiLCJ1c2VySWRzIiwic2VhcmNoVXNlcnMiLCJxdWVyeSIsInBhZ2UiLCJxIiwiY3JlYXRlQ29udmVyc2F0aW9uV2l0aFVzZXIiLCJnZXRPcHBvbmVudEluZm8iLCJlZGl0TWVzc2FnZSIsIm1lc3NhZ2VJZCIsImRlbGV0ZU1lc3NhZ2UiLCJhZGRSZWFjdGlvbiIsImVtb2ppIiwicmVtb3ZlUmVhY3Rpb24iLCJlbmNvZGVVUklDb21wb25lbnQiLCJwaW5NZXNzYWdlIiwidW5waW5NZXNzYWdlIiwic3Rhck1lc3NhZ2UiLCJyZXZva2VNZXNzYWdlIiwic2VhcmNoTWVzc2FnZXMiLCJtYXJrQXNSZWFkIiwiYWRkTWVtYmVycyIsInJlbW92ZU1lbWJlciIsInVwZGF0ZUdyb3VwSW5mbyIsImNyZWF0ZUludml0ZUxpbmsiLCJqb2luQ29udmVyc2F0aW9uQnlJbnZpdGUiLCJpbnZpdGVDb2RlIiwibWFrZUFkbWluIiwicmVtb3ZlQWRtaW4iLCJhZGRHcm91cE1lbWJlcnMiLCJyZW1vdmVHcm91cE1lbWJlciIsIm1ha2VHcm91cEFkbWluIiwicmVtb3ZlR3JvdXBBZG1pbiIsImxlYXZlR3JvdXAiLCJnZXRVbnJlYWRDb3VudCIsInVwZGF0ZU9ubGluZVN0YXR1cyIsImdldE9ubGluZVVzZXJzIiwiY3JlYXRlTWVzc2FnZVdpdGhSZXBseSIsInJlcGx5VG8iLCJnZXRGZWVkIiwiY3JlYXRlUG9zdEFwaSIsImNyZWF0ZUNvbW1lbnRBcGkiLCJwb3N0SWQiLCJnZXRQb3N0Q29tbWVudHMiLCJnZXRQb3N0c0J5SGFzaHRhZ0FwaSIsInRhZyIsImdldFBvc3RCeUlkQXBpIiwic2hhcmVQb3N0QXBpIiwiY3JlYXRlU3RvcnlBcGkiLCJnZXRTdG9yaWVzQXBpIiwibWFya1N0b3J5Vmlld2VkQXBpIiwic3RvcnlJZCIsImRlbGV0ZVN0b3J5QXBpIiwic2F2ZVBvc3RBcGkiLCJ1bnNhdmVQb3N0QXBpIiwiZ2V0U2F2ZWRQb3N0c0FwaSIsInJlcG9ydFBvc3RBcGkiLCJnZXRGcmllbmRTdWdnZXN0aW9uc0FwaSIsInNlbmRGcmllbmRSZXF1ZXN0QXBpIiwicmVzcG9uZEZyaWVuZFJlcXVlc3RBcGkiLCJmcmllbmRzaGlwSWQiLCJhY3Rpb24iLCJnZXRQZW5kaW5nRnJpZW5kUmVxdWVzdHNBcGkiLCJnZXROb3RpZmljYXRpb25zQXBpIiwibWFya05vdGlmaWNhdGlvbnNSZWFkQXBpIiwiaWRzIiwiZ2V0VXNlckJ5SWQiLCJzZWFyY2hTb2NpYWxBcGkiLCJxdWVyeU9yUGFyYW1zIiwiY2hlY2tQb3N0TGlrZWRBcGkiLCJyZWFjdFRvUG9zdEFwaSIsInJlbW92ZVJlYWN0aW9uQXBpIiwicmVhY3RUb1N0b3J5QXBpIiwicmVtb3ZlU3RvcnlSZWFjdGlvbkFwaSIsImdldFN0b3J5UmVwbGllc0FwaSIsImNyZWF0ZVN0b3J5UmVwbHlBcGkiLCJjb250ZW50Iiwic2VhcmNoTXVzaWNBcGkiLCJqc29uIiwicmVzdWx0cyIsImNyZWF0ZVJlZWxBcGkiLCJnZXRSZWVsc0ZlZWRBcGkiLCJnZXRSZWVsQnlJZEFwaSIsInJlZWxJZCIsImdldFVzZXJSZWVsc0FwaSIsImxpa2VSZWVsQXBpIiwidW5saWtlUmVlbEFwaSIsImNoZWNrUmVlbExpa2VkQXBpIiwiZGVsZXRlUmVlbEFwaSIsInN5bmNSZWVsc0Zyb21Qb3N0c0FwaSIsImdldEFkbWluVXNlcnNBcGkiLCJnZXRBZG1pblVzZXJTdGF0c0FwaSIsImdldEFkbWluVXNlckRldGFpbHNBcGkiLCJiYW5Vc2VyQXBpIiwicmVhc29uIiwidW5iYW5Vc2VyQXBpIiwidXBkYXRlVXNlclJvbGVBcGkiLCJyb2xlIiwidmVyaWZ5VXNlckFwaSIsInVudmVyaWZ5VXNlckFwaSIsImdldEFkbWluUG9zdHNBcGkiLCJnZXRBZG1pblBvc3RTdGF0c0FwaSIsImRlbGV0ZVBvc3RBcGkiLCJoaWRlUG9zdEFwaSIsInJlc3RvcmVQb3N0QXBpIiwiZ2V0QWRtaW5SZXBvcnRzQXBpIiwiZ2V0QWRtaW5SZXBvcnREZXRhaWxzQXBpIiwicmVwb3J0SWQiLCJoYW5kbGVSZXBvcnRBcGkiLCJub3RlcyIsImJ1bGtIYW5kbGVSZXBvcnRzQXBpIiwicmVwb3J0SWRzIiwiZ2V0QWRtaW5EYXNoYm9hcmRTdGF0c0FwaSIsImdldEFkbWluQW5hbHl0aWNzQ2hhcnRBcGkiLCJ0aW1lUmFuZ2UiLCJtZXRyaWMiLCJnZXRVc2VyQWN0aXZpdHlTdGF0c0FwaSIsImdldENvbnRlbnRTdGF0c0FwaSIsIm1vZGVyYXRlUG9zdEFwaSIsImJ1bGtNb2RlcmF0ZVBvc3RzQXBpIiwicG9zdElkcyIsImdldE1vZGVyYXRpb25RdWV1ZUFwaSIsImdldFN5c3RlbVNldHRpbmdzQXBpIiwidXBkYXRlU3lzdGVtU2V0dGluZ3NBcGkiLCJzZXR0aW5ncyIsImdldFN5c3RlbUxvZ3NBcGkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/api.js\n");

/***/ }),

/***/ "(ssr)/../../packages/app/components/GlobalIncomingCall.web.js":
/*!***************************************************************!*\
  !*** ../../packages/app/components/GlobalIncomingCall.web.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalIncomingCall: () => (/* binding */ GlobalIncomingCall)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _socket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../socket */ \"(ssr)/../../packages/app/socket.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api */ \"(ssr)/../../packages/app/api.js\");\n/* harmony import */ var _styles_floating_chat_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/floating-chat.css */ \"(ssr)/../../packages/app/styles/floating-chat.css\");\n/* __next_internal_client_entry_do_not_use__ GlobalIncomingCall auto */ \n\n\n\n\nfunction GlobalIncomingCall() {\n    const [incomingCall, setIncomingCall] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [callerName, setCallerName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"Ai \\xf3\");\n    const [callerAvatar, setCallerAvatar] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isProcessing, setIsProcessing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isGroupCall, setIsGroupCall] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [groupName, setGroupName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Listen for socket events globally\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const socket = (0,_socket__WEBPACK_IMPORTED_MODULE_2__.getSocket)();\n        if (!socket) {\n            console.warn(\"[GlobalIncomingCall] Socket not available\");\n            return;\n        }\n        const handleIncomingCall = (data)=>{\n            console.log(\"[GlobalIncomingCall] Received call:incoming\", data);\n            const currentUserId =  false ? 0 : null;\n            // B qua cuc gi do chnh mnh to\n            if (currentUserId && data.initiatorId === currentUserId) {\n                console.log(\"[GlobalIncomingCall] Skip own outgoing call\");\n                return;\n            }\n            // Nu ang x l cuc gi khc th b qua\n            if (incomingCall || isProcessing) {\n                console.log(\"[GlobalIncomingCall] Already handling a call, ignoring new one\");\n                return;\n            }\n            setIncomingCall(data);\n        };\n        console.log(\"[GlobalIncomingCall] Subscribing to call:incoming\");\n        socket.on(\"call:incoming\", handleIncomingCall);\n        return ()=>{\n            console.log(\"[GlobalIncomingCall] Cleanup call:incoming listener\");\n            socket.off(\"call:incoming\", handleIncomingCall);\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        incomingCall,\n        isProcessing\n    ]);\n    // Load caller/group info and call details\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!incomingCall) return;\n        let cancelled = false;\n        const loadInfo = async ()=>{\n            try {\n                // Fetch call info to get callType and livekitRoomName if not provided\n                if (!incomingCall.callType || !incomingCall.livekitRoomName) {\n                    try {\n                        const callInfo = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.getCall)(incomingCall.callId);\n                        if (!cancelled && callInfo) {\n                            // Update incomingCall with call info\n                            setIncomingCall((prev)=>prev ? {\n                                    ...prev,\n                                    callType: callInfo.callType || prev.callType,\n                                    livekitRoomName: callInfo.metadata?.livekitRoomName || prev.livekitRoomName\n                                } : prev);\n                            console.log(\"[GlobalIncomingCall] Call info loaded:\", {\n                                callType: callInfo.callType,\n                                livekitRoomName: callInfo.metadata?.livekitRoomName\n                            });\n                        }\n                    } catch (err) {\n                        console.warn(\"[GlobalIncomingCall] Could not fetch call info:\", err);\n                    }\n                }\n                // Check if this is a group call by getting conversation info\n                const conversations = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.getConversations)();\n                const conversation = conversations.find((c)=>c._id === incomingCall.conversationId);\n                if (cancelled) return;\n                if (conversation?.isGroup) {\n                    // Group call\n                    setIsGroupCall(true);\n                    setGroupName(conversation.title || `Nhm (${conversation.members?.length || 0} thnh vin)`);\n                    setCallerAvatar(conversation.avatar || null);\n                    // Also try to get the initiator's name\n                    try {\n                        const info = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.getOpponentInfo)(incomingCall.conversationId);\n                        if (!cancelled && info?.user?.name) {\n                            setCallerName(info.user.name);\n                        }\n                    } catch  {\n                    // Ignore error, use group name\n                    }\n                } else {\n                    // 1-1 call\n                    setIsGroupCall(false);\n                    setGroupName(null);\n                    const info = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.getOpponentInfo)(incomingCall.conversationId);\n                    if (cancelled) return;\n                    setCallerName(info?.user?.name || info?.user?.email || \"Ai \\xf3\");\n                    setCallerAvatar(info?.user?.avatar || null);\n                }\n            } catch (err) {\n                console.error(\"[GlobalIncomingCall] Failed to load caller info\", err);\n                if (!cancelled) {\n                    setCallerName(\"Ai \\xf3\");\n                    setCallerAvatar(null);\n                    setIsGroupCall(false);\n                }\n            }\n        };\n        loadInfo();\n        return ()=>{\n            cancelled = true;\n        };\n    }, [\n        incomingCall?.callId,\n        incomingCall?.conversationId\n    ]);\n    const clearState = ()=>{\n        setIncomingCall(null);\n        setIsProcessing(false);\n        setIsGroupCall(false);\n        setGroupName(null);\n        setCallerName(\"Ai \\xf3\");\n        setCallerAvatar(null);\n    };\n    const handleAccept = async ()=>{\n        if (!incomingCall || isProcessing) return;\n        setIsProcessing(true);\n        try {\n            await (0,_api__WEBPACK_IMPORTED_MODULE_3__.acceptCall)(incomingCall.callId);\n        } catch (err) {\n            console.error(\"[GlobalIncomingCall] Error accepting call (will still navigate)\", err);\n        }\n        // iu hng sang mn hnh call\n        if (false) {}\n        clearState();\n    };\n    const handleReject = async ()=>{\n        if (!incomingCall || isProcessing) return;\n        setIsProcessing(true);\n        try {\n            await (0,_api__WEBPACK_IMPORTED_MODULE_3__.rejectCall)(incomingCall.callId);\n        } catch (err) {\n            console.error(\"[GlobalIncomingCall] Error rejecting call\", err);\n        }\n        clearState();\n    };\n    // Auto dismiss after 30s\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!incomingCall) return;\n        const timer = setTimeout(()=>{\n            console.log(\"[GlobalIncomingCall] Auto dismiss incoming call toast\");\n            clearState();\n        }, 30000);\n        return ()=>clearTimeout(timer);\n    }, [\n        incomingCall\n    ]);\n    if (!incomingCall) return null;\n    const displayName = isGroupCall ? groupName || \"Nh\\xf3m\" : callerName;\n    const displaySubtitle = isGroupCall ? `${callerName} ang gi ${incomingCall.type === \"video\" ? \"video\" : \"thoi\"} nhm` : incomingCall.type === \"video\" ? \"Gi video\" : \"Gi thoi\";\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        className: \"global-incoming-call-overlay\",\n        onClick: (e)=>{\n            // chn click xuyn qua\n            e.stopPropagation();\n        },\n        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n            className: `global-incoming-call-card ${isGroupCall ? \"global-incoming-call-card--group\" : \"\"}`,\n            onClick: (e)=>e.stopPropagation(),\n            children: [\n                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                    className: \"global-incoming-call-header\",\n                    children: isGroupCall ? \"Cuc gi nh\\xf3m\" : \"Cuc gi n\"\n                }),\n                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                    className: \"global-incoming-call-body\",\n                    children: [\n                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                            className: `global-incoming-call-avatar ${isGroupCall ? \"global-incoming-call-avatar--group\" : \"\"}`,\n                            children: callerAvatar ? // eslint-disable-next-line @next/next/no-img-element\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", {\n                                src: callerAvatar,\n                                alt: displayName\n                            }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                className: \"global-incoming-call-avatar-fallback\",\n                                children: isGroupCall ? \"\\uD83D\\uDC65\" : displayName.charAt(0).toUpperCase()\n                            })\n                        }),\n                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                            className: \"global-incoming-call-info\",\n                            children: [\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    className: \"global-incoming-call-name\",\n                                    children: displayName\n                                }),\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    className: \"global-incoming-call-type\",\n                                    children: displaySubtitle\n                                })\n                            ]\n                        })\n                    ]\n                }),\n                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                    className: \"global-incoming-call-actions\",\n                    children: [\n                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                            className: \"global-incoming-call-btn global-incoming-call-btn--reject\",\n                            onClick: handleReject,\n                            disabled: isProcessing,\n                            children: \"T chi\"\n                        }),\n                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                            className: \"global-incoming-call-btn global-incoming-call-btn--accept\",\n                            onClick: handleAccept,\n                            disabled: isProcessing,\n                            children: \"Tham gia\"\n                        })\n                    ]\n                })\n            ]\n        })\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL2NvbXBvbmVudHMvR2xvYmFsSW5jb21pbmdDYWxsLndlYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozt3RUFDK0Q7QUFDbkI7QUFDTjtBQUNzRDtBQUN2RDtBQUM5QixTQUFTWTtJQUNaLE1BQU0sQ0FBQ0MsY0FBY0MsZ0JBQWdCLEdBQUdULCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ1UsWUFBWUMsY0FBYyxHQUFHWCwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUNZLGNBQWNDLGdCQUFnQixHQUFHYiwrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUNjLGNBQWNDLGdCQUFnQixHQUFHZiwrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUNnQixhQUFhQyxlQUFlLEdBQUdqQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNrQixXQUFXQyxhQUFhLEdBQUduQiwrQ0FBUUEsQ0FBQztJQUMzQyxvQ0FBb0M7SUFDcENELGdEQUFTQSxDQUFDO1FBQ04sTUFBTXFCLFNBQVNuQixrREFBU0E7UUFDeEIsSUFBSSxDQUFDbUIsUUFBUTtZQUNUQyxRQUFRQyxJQUFJLENBQUM7WUFDYjtRQUNKO1FBQ0EsTUFBTUMscUJBQXFCLENBQUNDO1lBQ3hCSCxRQUFRSSxHQUFHLENBQUMsK0NBQStDRDtZQUMzRCxNQUFNRSxnQkFBZ0IsTUFBNkIsR0FBR0MsQ0FBc0MsR0FBRztZQUMvRixvQ0FBb0M7WUFDcEMsSUFBSUQsaUJBQWlCRixLQUFLTSxXQUFXLEtBQUtKLGVBQWU7Z0JBQ3JETCxRQUFRSSxHQUFHLENBQUM7Z0JBQ1o7WUFDSjtZQUNBLDBDQUEwQztZQUMxQyxJQUFJakIsZ0JBQWdCTSxjQUFjO2dCQUM5Qk8sUUFBUUksR0FBRyxDQUFDO2dCQUNaO1lBQ0o7WUFDQWhCLGdCQUFnQmU7UUFDcEI7UUFDQUgsUUFBUUksR0FBRyxDQUFDO1FBQ1pMLE9BQU9XLEVBQUUsQ0FBQyxpQkFBaUJSO1FBQzNCLE9BQU87WUFDSEYsUUFB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L2NvbXBvbmVudHMvR2xvYmFsSW5jb21pbmdDYWxsLndlYi5qcz8xMTI1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGdldFNvY2tldCB9IGZyb20gXCIuLi9zb2NrZXRcIjtcbmltcG9ydCB7IGFjY2VwdENhbGwsIHJlamVjdENhbGwsIGdldE9wcG9uZW50SW5mbywgZ2V0Q29udmVyc2F0aW9ucywgZ2V0Q2FsbCB9IGZyb20gXCIuLi9hcGlcIjtcbmltcG9ydCBcIi4uL3N0eWxlcy9mbG9hdGluZy1jaGF0LmNzc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIEdsb2JhbEluY29taW5nQ2FsbCgpIHtcbiAgICBjb25zdCBbaW5jb21pbmdDYWxsLCBzZXRJbmNvbWluZ0NhbGxdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW2NhbGxlck5hbWUsIHNldENhbGxlck5hbWVdID0gdXNlU3RhdGUoXCJBaSDEkcOzXCIpO1xuICAgIGNvbnN0IFtjYWxsZXJBdmF0YXIsIHNldENhbGxlckF2YXRhcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbaXNQcm9jZXNzaW5nLCBzZXRJc1Byb2Nlc3NpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtpc0dyb3VwQ2FsbCwgc2V0SXNHcm91cENhbGxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtncm91cE5hbWUsIHNldEdyb3VwTmFtZV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICAvLyBMaXN0ZW4gZm9yIHNvY2tldCBldmVudHMgZ2xvYmFsbHlcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBzb2NrZXQgPSBnZXRTb2NrZXQoKTtcbiAgICAgICAgaWYgKCFzb2NrZXQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIltHbG9iYWxJbmNvbWluZ0NhbGxdIFNvY2tldCBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhbmRsZUluY29taW5nQ2FsbCA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIltHbG9iYWxJbmNvbWluZ0NhbGxdIFJlY2VpdmVkIGNhbGw6aW5jb21pbmdcIiwgZGF0YSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VXNlcklkID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJfaWRcIikgOiBudWxsO1xuICAgICAgICAgICAgLy8gQuG7jyBxdWEgY3Xhu5ljIGfhu41pIGRvIGNow61uaCBtw6xuaCB04bqhb1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRVc2VySWQgJiYgZGF0YS5pbml0aWF0b3JJZCA9PT0gY3VycmVudFVzZXJJZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0dsb2JhbEluY29taW5nQ2FsbF0gU2tpcCBvd24gb3V0Z29pbmcgY2FsbFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBO4bq/dSDEkWFuZyB44butIGzDvSBjdeG7mWMgZ+G7jWkga2jDoWMgdGjDrCBi4buPIHF1YVxuICAgICAgICAgICAgaWYgKGluY29taW5nQ2FsbCB8fCBpc1Byb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltHbG9iYWxJbmNvbWluZ0NhbGxdIEFscmVhZHkgaGFuZGxpbmcgYSBjYWxsLCBpZ25vcmluZyBuZXcgb25lXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldEluY29taW5nQ2FsbChkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2coXCJbR2xvYmFsSW5jb21pbmdDYWxsXSBTdWJzY3JpYmluZyB0byBjYWxsOmluY29taW5nXCIpO1xuICAgICAgICBzb2NrZXQub24oXCJjYWxsOmluY29taW5nXCIsIGhhbmRsZUluY29taW5nQ2FsbCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIltHbG9iYWxJbmNvbWluZ0NhbGxdIENsZWFudXAgY2FsbDppbmNvbWluZyBsaXN0ZW5lclwiKTtcbiAgICAgICAgICAgIHNvY2tldC5vZmYoXCJjYWxsOmluY29taW5nXCIsIGhhbmRsZUluY29taW5nQ2FsbCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbaW5jb21pbmdDYWxsLCBpc1Byb2Nlc3NpbmddKTtcbiAgICAvLyBMb2FkIGNhbGxlci9ncm91cCBpbmZvIGFuZCBjYWxsIGRldGFpbHNcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWluY29taW5nQ2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBsb2FkSW5mbyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gRmV0Y2ggY2FsbCBpbmZvIHRvIGdldCBjYWxsVHlwZSBhbmQgbGl2ZWtpdFJvb21OYW1lIGlmIG5vdCBwcm92aWRlZFxuICAgICAgICAgICAgICAgIGlmICghaW5jb21pbmdDYWxsLmNhbGxUeXBlIHx8ICFpbmNvbWluZ0NhbGwubGl2ZWtpdFJvb21OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsSW5mbyA9IGF3YWl0IGdldENhbGwoaW5jb21pbmdDYWxsLmNhbGxJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbmNlbGxlZCAmJiBjYWxsSW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBpbmNvbWluZ0NhbGwgd2l0aCBjYWxsIGluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbmNvbWluZ0NhbGwocHJldiA9PiBwcmV2ID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVHlwZTogY2FsbEluZm8uY2FsbFR5cGUgfHwgcHJldi5jYWxsVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl2ZWtpdFJvb21OYW1lOiBjYWxsSW5mby5tZXRhZGF0YT8ubGl2ZWtpdFJvb21OYW1lIHx8IHByZXYubGl2ZWtpdFJvb21OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltHbG9iYWxJbmNvbWluZ0NhbGxdIENhbGwgaW5mbyBsb2FkZWQ6XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFR5cGU6IGNhbGxJbmZvLmNhbGxUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXZla2l0Um9vbU5hbWU6IGNhbGxJbmZvLm1ldGFkYXRhPy5saXZla2l0Um9vbU5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJbR2xvYmFsSW5jb21pbmdDYWxsXSBDb3VsZCBub3QgZmV0Y2ggY2FsbCBpbmZvOlwiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBncm91cCBjYWxsIGJ5IGdldHRpbmcgY29udmVyc2F0aW9uIGluZm9cbiAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25zID0gYXdhaXQgZ2V0Q29udmVyc2F0aW9ucygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbiA9IGNvbnZlcnNhdGlvbnMuZmluZCgoYykgPT4gYy5faWQgPT09IGluY29taW5nQ2FsbC5jb252ZXJzYXRpb25JZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmNlbGxlZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChjb252ZXJzYXRpb24/LmlzR3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXAgY2FsbFxuICAgICAgICAgICAgICAgICAgICBzZXRJc0dyb3VwQ2FsbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0R3JvdXBOYW1lKGNvbnZlcnNhdGlvbi50aXRsZSB8fCBgTmjDs20gKCR7Y29udmVyc2F0aW9uLm1lbWJlcnM/Lmxlbmd0aCB8fCAwfSB0aMOgbmggdmnDqm4pYCk7XG4gICAgICAgICAgICAgICAgICAgIHNldENhbGxlckF2YXRhcihjb252ZXJzYXRpb24uYXZhdGFyIHx8IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBbHNvIHRyeSB0byBnZXQgdGhlIGluaXRpYXRvcidzIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBnZXRPcHBvbmVudEluZm8oaW5jb21pbmdDYWxsLmNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FuY2VsbGVkICYmIGluZm8/LnVzZXI/Lm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDYWxsZXJOYW1lKGluZm8udXNlci5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXJyb3IsIHVzZSBncm91cCBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDEtMSBjYWxsXG4gICAgICAgICAgICAgICAgICAgIHNldElzR3JvdXBDYWxsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0R3JvdXBOYW1lKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgZ2V0T3Bwb25lbnRJbmZvKGluY29taW5nQ2FsbC5jb252ZXJzYXRpb25JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxsZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIHNldENhbGxlck5hbWUoaW5mbz8udXNlcj8ubmFtZSB8fCBpbmZvPy51c2VyPy5lbWFpbCB8fCBcIkFpIMSRw7NcIik7XG4gICAgICAgICAgICAgICAgICAgIHNldENhbGxlckF2YXRhcihpbmZvPy51c2VyPy5hdmF0YXIgfHwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbR2xvYmFsSW5jb21pbmdDYWxsXSBGYWlsZWQgdG8gbG9hZCBjYWxsZXIgaW5mb1wiLCBlcnIpO1xuICAgICAgICAgICAgICAgIGlmICghY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldENhbGxlck5hbWUoXCJBaSDEkcOzXCIpO1xuICAgICAgICAgICAgICAgICAgICBzZXRDYWxsZXJBdmF0YXIobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHNldElzR3JvdXBDYWxsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxvYWRJbmZvKCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgIH0sIFtpbmNvbWluZ0NhbGw/LmNhbGxJZCwgaW5jb21pbmdDYWxsPy5jb252ZXJzYXRpb25JZF0pO1xuICAgIGNvbnN0IGNsZWFyU3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIHNldEluY29taW5nQ2FsbChudWxsKTtcbiAgICAgICAgc2V0SXNQcm9jZXNzaW5nKGZhbHNlKTtcbiAgICAgICAgc2V0SXNHcm91cENhbGwoZmFsc2UpO1xuICAgICAgICBzZXRHcm91cE5hbWUobnVsbCk7XG4gICAgICAgIHNldENhbGxlck5hbWUoXCJBaSDEkcOzXCIpO1xuICAgICAgICBzZXRDYWxsZXJBdmF0YXIobnVsbCk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVBY2NlcHQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghaW5jb21pbmdDYWxsIHx8IGlzUHJvY2Vzc2luZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2V0SXNQcm9jZXNzaW5nKHRydWUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYWNjZXB0Q2FsbChpbmNvbWluZ0NhbGwuY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW0dsb2JhbEluY29taW5nQ2FsbF0gRXJyb3IgYWNjZXB0aW5nIGNhbGwgKHdpbGwgc3RpbGwgbmF2aWdhdGUpXCIsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gxJBp4buBdSBoxrDhu5tuZyBzYW5nIG3DoG4gaMOsbmggY2FsbFxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgLy8gRGV0ZWN0IEVsZWN0cm9uOiBjaGVjayBlbGVjdHJvbkFQSSBob+G6t2MgaGFzaCB0cm9uZyBVUkwgaG/hurdjIHVzZXJBZ2VudFxuICAgICAgICAgICAgY29uc3QgaXNFbGVjdHJvbiA9ICEhKHdpbmRvdy5lbGVjdHJvbkFQSSB8fFxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoLmluY2x1ZGVzKFwiIy9cIikgfHxcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcIi8jL1wiKSB8fFxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImVsZWN0cm9uXCIpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0dsb2JhbEluY29taW5nQ2FsbF0gaXNFbGVjdHJvbjpcIiwgaXNFbGVjdHJvbiwgXCJoYXNoOlwiLCB3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgICAgICAgICBpZiAoaXNFbGVjdHJvbikge1xuICAgICAgICAgICAgICAgIC8vIEVsZWN0cm9uIGTDuW5nIEhhc2hSb3V0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBgIy9jYWxsLyR7aW5jb21pbmdDYWxsLmNhbGxJZH1gO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0dsb2JhbEluY29taW5nQ2FsbF0gTmF2aWdhdGluZyB2aWEgaGFzaCB0byBjYWxsIHNjcmVlbjpcIiwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFdlYiBkw7luZyBCcm93c2VyUm91dGVyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogaW5jb21pbmdDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGluY29taW5nQ2FsbC5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0ZWRGcm9tTW9kYWw6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNJbmNvbWluZzogJ3RydWUnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIEFkZCBjYWxsIHR5cGUgcGFyYW1zIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIGlmIChpbmNvbWluZ0NhbGwuY2FsbFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnNldCgnY2FsbFR5cGUnLCBpbmNvbWluZ0NhbGwuY2FsbFR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0dyb3VwQ2FsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBHcm91cCBjYWxscyB1c2UgU0ZVXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5zZXQoJ2NhbGxUeXBlJywgJ3NmdScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5jb21pbmdDYWxsLmxpdmVraXRSb29tTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuc2V0KCdsaXZla2l0Um9vbU5hbWUnLCBpbmNvbWluZ0NhbGwubGl2ZWtpdFJvb21OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbR2xvYmFsSW5jb21pbmdDYWxsXSBOYXZpZ2F0aW5nIHRvIGNhbGwgc2NyZWVuIHdpdGggcGFyYW1zOlwiLCBPYmplY3QuZnJvbUVudHJpZXMocGFyYW1zKSk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2NhbGw/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNsZWFyU3RhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZVJlamVjdCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFpbmNvbWluZ0NhbGwgfHwgaXNQcm9jZXNzaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZXRJc1Byb2Nlc3NpbmcodHJ1ZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCByZWplY3RDYWxsKGluY29taW5nQ2FsbC5jYWxsSWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbR2xvYmFsSW5jb21pbmdDYWxsXSBFcnJvciByZWplY3RpbmcgY2FsbFwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyU3RhdGUoKTtcbiAgICB9O1xuICAgIC8vIEF1dG8gZGlzbWlzcyBhZnRlciAzMHNcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWluY29taW5nQ2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0dsb2JhbEluY29taW5nQ2FsbF0gQXV0byBkaXNtaXNzIGluY29taW5nIGNhbGwgdG9hc3RcIik7XG4gICAgICAgICAgICBjbGVhclN0YXRlKCk7XG4gICAgICAgIH0sIDMwMDAwKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfSwgW2luY29taW5nQ2FsbF0pO1xuICAgIGlmICghaW5jb21pbmdDYWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGlzR3JvdXBDYWxsID8gKGdyb3VwTmFtZSB8fCBcIk5ow7NtXCIpIDogY2FsbGVyTmFtZTtcbiAgICBjb25zdCBkaXNwbGF5U3VidGl0bGUgPSBpc0dyb3VwQ2FsbFxuICAgICAgICA/IGAke2NhbGxlck5hbWV9IMSRYW5nIGfhu41pICR7aW5jb21pbmdDYWxsLnR5cGUgPT09IFwidmlkZW9cIiA/IFwidmlkZW9cIiA6IFwidGhv4bqhaVwifSBuaMOzbWBcbiAgICAgICAgOiAoaW5jb21pbmdDYWxsLnR5cGUgPT09IFwidmlkZW9cIiA/IFwiR+G7jWkgdmlkZW9cIiA6IFwiR+G7jWkgdGhv4bqhaVwiKTtcbiAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZ2xvYmFsLWluY29taW5nLWNhbGwtb3ZlcmxheVwiLCBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gY2jhurduIGNsaWNrIHh1ecOqbiBxdWFcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0sIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogYGdsb2JhbC1pbmNvbWluZy1jYWxsLWNhcmQgJHtpc0dyb3VwQ2FsbCA/IFwiZ2xvYmFsLWluY29taW5nLWNhbGwtY2FyZC0tZ3JvdXBcIiA6IFwiXCJ9YCwgb25DbGljazogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJnbG9iYWwtaW5jb21pbmctY2FsbC1oZWFkZXJcIiwgY2hpbGRyZW46IGlzR3JvdXBDYWxsID8gXCJDdeG7mWMgZ+G7jWkgbmjDs21cIiA6IFwiQ3Xhu5ljIGfhu41pIMSR4bq/blwiIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJnbG9iYWwtaW5jb21pbmctY2FsbC1ib2R5XCIsIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogYGdsb2JhbC1pbmNvbWluZy1jYWxsLWF2YXRhciAke2lzR3JvdXBDYWxsID8gXCJnbG9iYWwtaW5jb21pbmctY2FsbC1hdmF0YXItLWdyb3VwXCIgOiBcIlwifWAsIGNoaWxkcmVuOiBjYWxsZXJBdmF0YXIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBuZXh0L25leHQvbm8taW1nLWVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfanN4KFwiaW1nXCIsIHsgc3JjOiBjYWxsZXJBdmF0YXIsIGFsdDogZGlzcGxheU5hbWUgfSkpIDogKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZ2xvYmFsLWluY29taW5nLWNhbGwtYXZhdGFyLWZhbGxiYWNrXCIsIGNoaWxkcmVuOiBpc0dyb3VwQ2FsbCA/IFwi8J+RpVwiIDogZGlzcGxheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgfSkpIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJnbG9iYWwtaW5jb21pbmctY2FsbC1pbmZvXCIsIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJnbG9iYWwtaW5jb21pbmctY2FsbC1uYW1lXCIsIGNoaWxkcmVuOiBkaXNwbGF5TmFtZSB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJnbG9iYWwtaW5jb21pbmctY2FsbC10eXBlXCIsIGNoaWxkcmVuOiBkaXNwbGF5U3VidGl0bGUgfSldIH0pXSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZ2xvYmFsLWluY29taW5nLWNhbGwtYWN0aW9uc1wiLCBjaGlsZHJlbjogW19qc3goXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwiZ2xvYmFsLWluY29taW5nLWNhbGwtYnRuIGdsb2JhbC1pbmNvbWluZy1jYWxsLWJ0bi0tcmVqZWN0XCIsIG9uQ2xpY2s6IGhhbmRsZVJlamVjdCwgZGlzYWJsZWQ6IGlzUHJvY2Vzc2luZywgY2hpbGRyZW46IFwiVFxcdTFFRUIgY2hcXHUxRUQxaVwiIH0pLCBfanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImdsb2JhbC1pbmNvbWluZy1jYWxsLWJ0biBnbG9iYWwtaW5jb21pbmctY2FsbC1idG4tLWFjY2VwdFwiLCBvbkNsaWNrOiBoYW5kbGVBY2NlcHQsIGRpc2FibGVkOiBpc1Byb2Nlc3NpbmcsIGNoaWxkcmVuOiBcIlRoYW0gZ2lhXCIgfSldIH0pXSB9KSB9KSk7XG59XG4iXSwibmFtZXMiOlsianN4IiwiX2pzeCIsImpzeHMiLCJfanN4cyIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiZ2V0U29ja2V0IiwiYWNjZXB0Q2FsbCIsInJlamVjdENhbGwiLCJnZXRPcHBvbmVudEluZm8iLCJnZXRDb252ZXJzYXRpb25zIiwiZ2V0Q2FsbCIsIkdsb2JhbEluY29taW5nQ2FsbCIsImluY29taW5nQ2FsbCIsInNldEluY29taW5nQ2FsbCIsImNhbGxlck5hbWUiLCJzZXRDYWxsZXJOYW1lIiwiY2FsbGVyQXZhdGFyIiwic2V0Q2FsbGVyQXZhdGFyIiwiaXNQcm9jZXNzaW5nIiwic2V0SXNQcm9jZXNzaW5nIiwiaXNHcm91cENhbGwiLCJzZXRJc0dyb3VwQ2FsbCIsImdyb3VwTmFtZSIsInNldEdyb3VwTmFtZSIsInNvY2tldCIsImNvbnNvbGUiLCJ3YXJuIiwiaGFuZGxlSW5jb21pbmdDYWxsIiwiZGF0YSIsImxvZyIsImN1cnJlbnRVc2VySWQiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaW5pdGlhdG9ySWQiLCJvbiIsIm9mZiIsImNhbmNlbGxlZCIsImxvYWRJbmZvIiwiY2FsbFR5cGUiLCJsaXZla2l0Um9vbU5hbWUiLCJjYWxsSW5mbyIsImNhbGxJZCIsInByZXYiLCJtZXRhZGF0YSIsImVyciIsImNvbnZlcnNhdGlvbnMiLCJjb252ZXJzYXRpb24iLCJmaW5kIiwiYyIsIl9pZCIsImNvbnZlcnNhdGlvbklkIiwiaXNHcm91cCIsInRpdGxlIiwibWVtYmVycyIsImxlbmd0aCIsImF2YXRhciIsImluZm8iLCJ1c2VyIiwibmFtZSIsImVtYWlsIiwiZXJyb3IiLCJjbGVhclN0YXRlIiwiaGFuZGxlQWNjZXB0IiwiaXNFbGVjdHJvbiIsImVsZWN0cm9uQVBJIiwibG9jYXRpb24iLCJoYXNoIiwiaW5jbHVkZXMiLCJocmVmIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJ0YXJnZXQiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhY2NlcHRlZEZyb21Nb2RhbCIsImlzSW5jb21pbmciLCJzZXQiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsInRvU3RyaW5nIiwiaGFuZGxlUmVqZWN0IiwidGltZXIiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiZGlzcGxheU5hbWUiLCJkaXNwbGF5U3VidGl0bGUiLCJ0eXBlIiwiY2xhc3NOYW1lIiwib25DbGljayIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJjaGlsZHJlbiIsInNyYyIsImFsdCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiZGlzYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/components/GlobalIncomingCall.web.js\n");

/***/ }),

/***/ "(ssr)/../../packages/app/components/call/GroupCallGrid.js":
/*!***********************************************************!*\
  !*** ../../packages/app/components/call/GroupCallGrid.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupCallGrid: () => (/* binding */ GroupCallGrid)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _styles_group_call_grid_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../styles/group-call-grid.css */ \"(ssr)/../../packages/app/styles/group-call-grid.css\");\n\n\n\nfunction ParticipantVideoTile({ participant, remoteVideoTrack }) {\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // For remote participants with LiveKit track, use track.attach()\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!participant.isLocal && remoteVideoTrack && videoRef.current) {\n            // Use LiveKit's attach method which properly starts the track\n            remoteVideoTrack.attach(videoRef.current);\n            return ()=>{\n                if (videoRef.current) {\n                    remoteVideoTrack.detach(videoRef.current);\n                }\n            };\n        }\n    }, [\n        remoteVideoTrack,\n        participant.participantId,\n        participant.isLocal\n    ]);\n    // For local stream or fallback, use srcObject\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Skip if using LiveKit attach for remote\n        if (!participant.isLocal && remoteVideoTrack) return;\n        if (videoRef.current && participant.stream) {\n            videoRef.current.srcObject = participant.stream;\n            // Force play the video with retry\n            const playVideo = async ()=>{\n                try {\n                    await videoRef.current?.play();\n                } catch (err) {\n                    // If interrupted, retry after a short delay\n                    if (err.name === \"AbortError\") {\n                        setTimeout(playVideo, 100);\n                    }\n                }\n            };\n            playVideo();\n        }\n    }, [\n        participant.stream,\n        participant.participantId,\n        participant.isLocal,\n        remoteVideoTrack\n    ]);\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        className: \"participant-video-tile\",\n        children: [\n            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"video\", {\n                ref: videoRef,\n                autoPlay: true,\n                playsInline: true,\n                muted: participant.isLocal,\n                className: \"participant-video\",\n                // Performance optimizations\n                style: {\n                    transform: \"translateZ(0)\",\n                    willChange: \"transform\"\n                }\n            }),\n            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                className: \"participant-info\",\n                children: [\n                    participant.avatar ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", {\n                        src: participant.avatar,\n                        alt: participant.name || participant.participantId,\n                        className: \"participant-avatar\"\n                    }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                        className: \"participant-avatar-placeholder\",\n                        children: (participant.name || participant.participantId).charAt(0).toUpperCase()\n                    }),\n                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                        className: \"participant-name\",\n                        children: participant.isLocal ? \"Bn\" : participant.name || participant.participantId\n                    })\n                ]\n            })\n        ]\n    });\n}\nfunction GroupCallGrid({ participants, localStream, localParticipantId, remoteTracks }) {\n    const allParticipants = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(()=>{\n        const result = [];\n        // Thm local stream nu c\n        if (localStream) {\n            result.push({\n                participantId: localParticipantId,\n                stream: localStream,\n                isLocal: true\n            });\n        }\n        // Thm remote participants\n        participants.forEach((p)=>{\n            if (p.participantId !== localParticipantId) {\n                result.push({\n                    ...p,\n                    isLocal: false\n                });\n            }\n        });\n        return result;\n    }, [\n        participants,\n        localStream,\n        localParticipantId\n    ]);\n    const gridClass = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(()=>{\n        const count = allParticipants.length;\n        if (count === 1) return \"grid-1\";\n        if (count === 2) return \"grid-2\";\n        if (count === 3) return \"grid-3\";\n        if (count === 4) return \"grid-4\";\n        if (count === 5) return \"grid-5\";\n        return \"grid-6\";\n    }, [\n        allParticipants.length\n    ]);\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n        className: `group-call-grid ${gridClass}`,\n        children: allParticipants.map((participant)=>{\n            const tracks = remoteTracks?.get(participant.participantId);\n            return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ParticipantVideoTile, {\n                participant: participant,\n                remoteVideoTrack: participant.isLocal ? undefined : tracks?.videoTrack\n            }, participant.participantId);\n        })\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL2NvbXBvbmVudHMvY2FsbC9Hcm91cENhbGxHcmlkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErRDtBQUNkO0FBQ1A7QUFDMUMsU0FBU08scUJBQXFCLEVBQUVDLFdBQVcsRUFBRUMsZ0JBQWdCLEVBQUU7SUFDM0QsTUFBTUMsV0FBV0osNkNBQU1BLENBQUM7SUFDeEIsaUVBQWlFO0lBQ2pFRCxnREFBU0EsQ0FBQztRQUNOLElBQUksQ0FBQ0csWUFBWUcsT0FBTyxJQUFJRixvQkFBb0JDLFNBQVNFLE9BQU8sRUFBRTtZQUM5RCw4REFBOEQ7WUFDOURILGlCQUFpQkksTUFBTSxDQUFDSCxTQUFTRSxPQUFPO1lBQ3hDLE9BQU87Z0JBQ0gsSUFBSUYsU0FBU0UsT0FBTyxFQUFFO29CQUNsQkgsaUJBQWlCSyxNQUFNLENBQUNKLFNBQVNFLE9BQU87Z0JBQzVDO1lBQ0o7UUFDSjtJQUNKLEdBQUc7UUFBQ0g7UUFBa0JELFlBQVlPLGFBQWE7UUFBRVAsWUFBWUcsT0FBTztLQUFDO0lBQ3JFLDhDQUE4QztJQUM5Q04sZ0RBQVNBLENBQUM7UUFDTiwwQ0FBMEM7UUFDMUMsSUFBSSxDQUFDRyxZQUFZRyxPQUFPLElBQUlGLGtCQUN4QjtRQUNKLElBQUlDLFNBQVNFLE9BQU8sSUFBSUosWUFBWVEsTUFBTSxFQUFFO1lBQ3hDTixTQUFTRSxPQUFPLENBQUNLLFNBQVMsR0FBR1QsWUFBWVEsTUFBTTtZQUMvQyxrQ0FBa0M7WUFDbEMsTUFBTUUsWUFBWTtnQkFDZCxJQUFJO29CQUNBLE1BQU1SLFNBQVNFLE9BQU8sRUFBRU87Z0JBQzVCLEVBQ0EsT0FBT0MsS0FBSztvQkFDUiw0Q0FBNEM7b0JBQzVDLElBQUlBLElBQUlDLElBQUksS0FBSyxjQUFjO3dCQUMzQkMsV0FBV0osV0FBVztvQkFDMUI7Z0JBQ0o7WUFDSjtZQUNBQTtRQUNKO0lBQ0osR0FBRztRQUFDVixZQUFZUSxNQUFNO1FBQUVSLFlBQVlPLGFBQWE7UUFBRVAsWUFBWUcsT0FBTztRQUFFRjtLQUFpQjtJQUN6RixPQUFRTix1REFBS0EsQ0FBQyxPQUFPO1FBQUVvQixXQUFXO1FBQTBCQyxVQUFVO1lBQUN2QixzREFBSUEsQ0FBQyxTQUFTO2dCQUFFd0IsS0FBS2Y7Z0JBQVVnQixVQUFVO2dCQUFNQyxhQUFhO2dCQUFNQyxPQUFPcEIsWUFBWUcsT0FBTztnQkFBRVksV0FBVztnQkFDcEssNEJBQTRCO2dCQUM1Qk0sT0FBTztvQkFDSEMsV0FBVztvQkFDWEMsWUFBWTtnQkFDaEI7WUFBRTtZQUFJNUIsdURBQUtBLENBQUMsT0FBTztnQkFBRW9CLFdBQVc7Z0JBQW9CQyxVQUFVO29CQUFDaEIsWUFBWXdCLE1BQU0sR0FBSS9CLHNEQUFJQSxDQUFDLE9BQU87d0JBQUVnQyxLQUFLekIsWUFBWXdCLE1BQU07d0JBQUVFLEtBQUsxQixZQUFZYSxJQUFJLElBQUliLFlBQVlPLGFBQWE7d0JBQUVRLFdBQVc7b0JBQXFCLEtBQU90QixzREFBSUEsQ0FBQyxPQUFPO3dCQUFFc0IsV0FBVzt3QkFBa0NDLFVBQVUsQ0FBQ2hCLFlBQVlhLElBQUksSUFBSWIsWUFBWU8sYUFBYSxFQUFFb0IsTUFBTSxDQUFDLEdBQUdDLFdBQVc7b0JBQUc7b0JBQUtuQyxzREFBSUEsQ0FBQyxRQUFRO3dCQUFFc0IsV0FBVzt3QkFBb0JDLFVBQVVoQixZQUFZRyxPQUFPLEdBQUcsUUFBU0gsWUFBWWEsSUFBSSxJQUFJYixZQUFZTyxhQUFhO29CQUFFO2lCQUFHO1lBQUM7U0FBRztJQUFDO0FBQ3ZnQjtBQUNPLFNBQVNzQixjQUFjLEVBQUVDLFlBQVksRUFBRUMsV0FBVyxFQUFFQyxrQkFBa0IsRUFBRUMsWUFBWSxFQUFFO0lBQ3pGLE1BQU1DLGtCQUFrQnRDLG9EQUFhLENBQUM7UUFDbEMsTUFBTXdDLFNBQVMsRUFBRTtRQUNqQiwyQkFBMkI7UUFDM0IsSUFBSUwsYUFBYTtZQUNiSyxPQUFPQyxJQUFJLENBQUM7Z0JBQ1I5QixlQUFleUI7Z0JBQ2Z4QixRQUFRdUI7Z0JBQ1I1QixTQUFTO1lBQ2I7UUFDSjtRQUNBLDJCQUEyQjtRQUMzQjJCLGFBQWFRLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDakIsSUFBSUEsRUFBRWhDLGFBQWEsS0FBS3lCLG9CQUFvQjtnQkFDeENJLE9BQU9DLElBQUksQ0FBQztvQkFDUixHQUFHRSxDQUFDO29CQUNKcEMsU0FBUztnQkFDYjtZQUNKO1FBQ0o7UUFDQSxPQUFPaUM7SUFDWCxHQUFHO1FBQUNOO1FBQWNDO1FBQWFDO0tBQW1CO0lBQ2xELE1BQU1RLFlBQVk1QyxvREFBYSxDQUFDO1FBQzVCLE1BQU02QyxRQUFRUCxnQkFBZ0JRLE1BQU07UUFDcEMsSUFBSUQsVUFBVSxHQUNWLE9BQU87UUFDWCxJQUFJQSxVQUFVLEdBQ1YsT0FBTztRQUNYLElBQUlBLFVBQVUsR0FDVixPQUFPO1FBQ1gsSUFBSUEsVUFBVSxHQUNWLE9BQU87UUFDWCxJQUFJQSxVQUFVLEdBQ1YsT0FBTztRQUNYLE9BQU87SUFDWCxHQUFHO1FBQUNQLGdCQUFnQlEsTUFBTTtLQUFDO0lBQzNCLE9BQVFqRCxzREFBSUEsQ0FBQyxPQUFPO1FBQUVzQixXQUFXLENBQUMsZ0JBQWdCLEVBQUV5QixVQUFVLENBQUM7UUFBRXhCLFVBQVVrQixnQkFBZ0JTLEdBQUcsQ0FBQyxDQUFDM0M7WUFDeEYsTUFBTTRDLFNBQVNYLGNBQWNZLElBQUk3QyxZQUFZTyxhQUFhO1lBQzFELE9BQVFkLHNEQUFJQSxDQUFDTSxzQkFBc0I7Z0JBQUVDLGFBQWFBO2dCQUFhQyxrQkFBa0JELFlBQVlHLE9BQU8sR0FBRzJDLFlBQVlGLFFBQVFHO1lBQVcsR0FBRy9DLFlBQVlPLGFBQWE7UUFDdEs7SUFBRztBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9sYS13ZWIvLi4vLi4vcGFja2FnZXMvYXBwL2NvbXBvbmVudHMvY2FsbC9Hcm91cENhbGxHcmlkLmpzPzBkNGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCAnLi4vLi4vc3R5bGVzL2dyb3VwLWNhbGwtZ3JpZC5jc3MnO1xuZnVuY3Rpb24gUGFydGljaXBhbnRWaWRlb1RpbGUoeyBwYXJ0aWNpcGFudCwgcmVtb3RlVmlkZW9UcmFjayB9KSB7XG4gICAgY29uc3QgdmlkZW9SZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgLy8gRm9yIHJlbW90ZSBwYXJ0aWNpcGFudHMgd2l0aCBMaXZlS2l0IHRyYWNrLCB1c2UgdHJhY2suYXR0YWNoKClcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXBhcnRpY2lwYW50LmlzTG9jYWwgJiYgcmVtb3RlVmlkZW9UcmFjayAmJiB2aWRlb1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAvLyBVc2UgTGl2ZUtpdCdzIGF0dGFjaCBtZXRob2Qgd2hpY2ggcHJvcGVybHkgc3RhcnRzIHRoZSB0cmFja1xuICAgICAgICAgICAgcmVtb3RlVmlkZW9UcmFjay5hdHRhY2godmlkZW9SZWYuY3VycmVudCk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2aWRlb1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVZpZGVvVHJhY2suZGV0YWNoKHZpZGVvUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LCBbcmVtb3RlVmlkZW9UcmFjaywgcGFydGljaXBhbnQucGFydGljaXBhbnRJZCwgcGFydGljaXBhbnQuaXNMb2NhbF0pO1xuICAgIC8vIEZvciBsb2NhbCBzdHJlYW0gb3IgZmFsbGJhY2ssIHVzZSBzcmNPYmplY3RcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBTa2lwIGlmIHVzaW5nIExpdmVLaXQgYXR0YWNoIGZvciByZW1vdGVcbiAgICAgICAgaWYgKCFwYXJ0aWNpcGFudC5pc0xvY2FsICYmIHJlbW90ZVZpZGVvVHJhY2spXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh2aWRlb1JlZi5jdXJyZW50ICYmIHBhcnRpY2lwYW50LnN0cmVhbSkge1xuICAgICAgICAgICAgdmlkZW9SZWYuY3VycmVudC5zcmNPYmplY3QgPSBwYXJ0aWNpcGFudC5zdHJlYW07XG4gICAgICAgICAgICAvLyBGb3JjZSBwbGF5IHRoZSB2aWRlbyB3aXRoIHJldHJ5XG4gICAgICAgICAgICBjb25zdCBwbGF5VmlkZW8gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmlkZW9SZWYuY3VycmVudD8ucGxheSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGludGVycnVwdGVkLCByZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHBsYXlWaWRlbywgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwbGF5VmlkZW8oKTtcbiAgICAgICAgfVxuICAgIH0sIFtwYXJ0aWNpcGFudC5zdHJlYW0sIHBhcnRpY2lwYW50LnBhcnRpY2lwYW50SWQsIHBhcnRpY2lwYW50LmlzTG9jYWwsIHJlbW90ZVZpZGVvVHJhY2tdKTtcbiAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInBhcnRpY2lwYW50LXZpZGVvLXRpbGVcIiwgY2hpbGRyZW46IFtfanN4KFwidmlkZW9cIiwgeyByZWY6IHZpZGVvUmVmLCBhdXRvUGxheTogdHJ1ZSwgcGxheXNJbmxpbmU6IHRydWUsIG11dGVkOiBwYXJ0aWNpcGFudC5pc0xvY2FsLCBjbGFzc05hbWU6IFwicGFydGljaXBhbnQtdmlkZW9cIiwgXG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uc1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVooMCknLCAvLyBGb3JjZSBHUFUgYWNjZWxlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLCAvLyBIaW50IGZvciBicm93c2VyIG9wdGltaXphdGlvblxuICAgICAgICAgICAgICAgIH0gfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInBhcnRpY2lwYW50LWluZm9cIiwgY2hpbGRyZW46IFtwYXJ0aWNpcGFudC5hdmF0YXIgPyAoX2pzeChcImltZ1wiLCB7IHNyYzogcGFydGljaXBhbnQuYXZhdGFyLCBhbHQ6IHBhcnRpY2lwYW50Lm5hbWUgfHwgcGFydGljaXBhbnQucGFydGljaXBhbnRJZCwgY2xhc3NOYW1lOiBcInBhcnRpY2lwYW50LWF2YXRhclwiIH0pKSA6IChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInBhcnRpY2lwYW50LWF2YXRhci1wbGFjZWhvbGRlclwiLCBjaGlsZHJlbjogKHBhcnRpY2lwYW50Lm5hbWUgfHwgcGFydGljaXBhbnQucGFydGljaXBhbnRJZCkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgfSkpLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJwYXJ0aWNpcGFudC1uYW1lXCIsIGNoaWxkcmVuOiBwYXJ0aWNpcGFudC5pc0xvY2FsID8gJ0LhuqFuJyA6IChwYXJ0aWNpcGFudC5uYW1lIHx8IHBhcnRpY2lwYW50LnBhcnRpY2lwYW50SWQpIH0pXSB9KV0gfSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIEdyb3VwQ2FsbEdyaWQoeyBwYXJ0aWNpcGFudHMsIGxvY2FsU3RyZWFtLCBsb2NhbFBhcnRpY2lwYW50SWQsIHJlbW90ZVRyYWNrcyB9KSB7XG4gICAgY29uc3QgYWxsUGFydGljaXBhbnRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICAvLyBUaMOqbSBsb2NhbCBzdHJlYW0gbuG6v3UgY8OzXG4gICAgICAgIGlmIChsb2NhbFN0cmVhbSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IGxvY2FsUGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgICAgICBzdHJlYW06IGxvY2FsU3RyZWFtLFxuICAgICAgICAgICAgICAgIGlzTG9jYWw6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaMOqbSByZW1vdGUgcGFydGljaXBhbnRzXG4gICAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgICAgaWYgKHAucGFydGljaXBhbnRJZCAhPT0gbG9jYWxQYXJ0aWNpcGFudElkKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAuLi5wLFxuICAgICAgICAgICAgICAgICAgICBpc0xvY2FsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwgW3BhcnRpY2lwYW50cywgbG9jYWxTdHJlYW0sIGxvY2FsUGFydGljaXBhbnRJZF0pO1xuICAgIGNvbnN0IGdyaWRDbGFzcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgICAgICBjb25zdCBjb3VudCA9IGFsbFBhcnRpY2lwYW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChjb3VudCA9PT0gMSlcbiAgICAgICAgICAgIHJldHVybiAnZ3JpZC0xJztcbiAgICAgICAgaWYgKGNvdW50ID09PSAyKVxuICAgICAgICAgICAgcmV0dXJuICdncmlkLTInO1xuICAgICAgICBpZiAoY291bnQgPT09IDMpXG4gICAgICAgICAgICByZXR1cm4gJ2dyaWQtMyc7XG4gICAgICAgIGlmIChjb3VudCA9PT0gNClcbiAgICAgICAgICAgIHJldHVybiAnZ3JpZC00JztcbiAgICAgICAgaWYgKGNvdW50ID09PSA1KVxuICAgICAgICAgICAgcmV0dXJuICdncmlkLTUnO1xuICAgICAgICByZXR1cm4gJ2dyaWQtNic7XG4gICAgfSwgW2FsbFBhcnRpY2lwYW50cy5sZW5ndGhdKTtcbiAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGBncm91cC1jYWxsLWdyaWQgJHtncmlkQ2xhc3N9YCwgY2hpbGRyZW46IGFsbFBhcnRpY2lwYW50cy5tYXAoKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0cmFja3MgPSByZW1vdGVUcmFja3M/LmdldChwYXJ0aWNpcGFudC5wYXJ0aWNpcGFudElkKTtcbiAgICAgICAgICAgIHJldHVybiAoX2pzeChQYXJ0aWNpcGFudFZpZGVvVGlsZSwgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQsIHJlbW90ZVZpZGVvVHJhY2s6IHBhcnRpY2lwYW50LmlzTG9jYWwgPyB1bmRlZmluZWQgOiB0cmFja3M/LnZpZGVvVHJhY2sgfSwgcGFydGljaXBhbnQucGFydGljaXBhbnRJZCkpO1xuICAgICAgICB9KSB9KSk7XG59XG4iXSwibmFtZXMiOlsianN4IiwiX2pzeCIsImpzeHMiLCJfanN4cyIsIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwiUGFydGljaXBhbnRWaWRlb1RpbGUiLCJwYXJ0aWNpcGFudCIsInJlbW90ZVZpZGVvVHJhY2siLCJ2aWRlb1JlZiIsImlzTG9jYWwiLCJjdXJyZW50IiwiYXR0YWNoIiwiZGV0YWNoIiwicGFydGljaXBhbnRJZCIsInN0cmVhbSIsInNyY09iamVjdCIsInBsYXlWaWRlbyIsInBsYXkiLCJlcnIiLCJuYW1lIiwic2V0VGltZW91dCIsImNsYXNzTmFtZSIsImNoaWxkcmVuIiwicmVmIiwiYXV0b1BsYXkiLCJwbGF5c0lubGluZSIsIm11dGVkIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJ3aWxsQ2hhbmdlIiwiYXZhdGFyIiwic3JjIiwiYWx0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJHcm91cENhbGxHcmlkIiwicGFydGljaXBhbnRzIiwibG9jYWxTdHJlYW0iLCJsb2NhbFBhcnRpY2lwYW50SWQiLCJyZW1vdGVUcmFja3MiLCJhbGxQYXJ0aWNpcGFudHMiLCJ1c2VNZW1vIiwicmVzdWx0IiwicHVzaCIsImZvckVhY2giLCJwIiwiZ3JpZENsYXNzIiwiY291bnQiLCJsZW5ndGgiLCJtYXAiLCJ0cmFja3MiLCJnZXQiLCJ1bmRlZmluZWQiLCJ2aWRlb1RyYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/components/call/GroupCallGrid.js\n");

/***/ }),

/***/ "(ssr)/../../packages/app/features/call/screens/CallScreen.web.js":
/*!******************************************************************!*\
  !*** ../../packages/app/features/call/screens/CallScreen.web.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CallScreen)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _hooks_useWebRTC__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../hooks/useWebRTC */ \"(ssr)/../../packages/app/hooks/useWebRTC.js\");\n/* harmony import */ var _hooks_useLiveKit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../hooks/useLiveKit */ \"(ssr)/../../packages/app/hooks/useLiveKit.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api */ \"(ssr)/../../packages/app/api.js\");\n/* harmony import */ var _socket__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../socket */ \"(ssr)/../../packages/app/socket.js\");\n/* harmony import */ var _hooks_useOpponentInfo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../hooks/useOpponentInfo */ \"(ssr)/../../packages/app/hooks/useOpponentInfo.js\");\n/* harmony import */ var _components_call_GroupCallGrid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/call/GroupCallGrid */ \"(ssr)/../../packages/app/components/call/GroupCallGrid.js\");\n/* harmony import */ var _styles_call_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../styles/call.css */ \"(ssr)/../../packages/app/styles/call.css\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\nfunction CallScreen() {\n    const [callId, setCallId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [callInfo, setCallInfo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isInitiator, setIsInitiator] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [localUserId, setLocalUserId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [acceptedFromModal, setAcceptedFromModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Read user id & URL params on client\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (true) return;\n        try {\n            const uid = window.localStorage.getItem(\"user_id\");\n            setLocalUserId(uid);\n        } catch (err) {\n            console.warn(\"[CallScreen] Unable to read user_id from localStorage\", err);\n        }\n        const search = new URLSearchParams(window.location.search);\n        const urlCallId = search.get(\"callId\");\n        const urlConversationId = search.get(\"conversationId\");\n        const urlAcceptedFromModal = search.get(\"acceptedFromModal\");\n        const urlCallType = search.get(\"callType\");\n        const urlLivekitRoomName = search.get(\"livekitRoomName\");\n        const urlIsIncoming = search.get(\"isIncoming\");\n        console.log(\"[CallScreen] Parsed URL params:\", {\n            urlCallId,\n            urlConversationId,\n            urlAcceptedFromModal,\n            urlCallType,\n            urlLivekitRoomName,\n            urlIsIncoming\n        });\n        if (urlCallId) {\n            setCallId(urlCallId);\n        }\n        if (urlConversationId) {\n            setCallInfo((prev)=>{\n                const newInfo = prev ? {\n                    ...prev,\n                    conversationId: urlConversationId\n                } : {\n                    conversationId: urlConversationId,\n                    initiatorId: localUserId || \"\",\n                    remoteUserId: \"\",\n                    type: \"video\"\n                };\n                // Add callType and livekitRoomName from URL params\n                if (urlCallType) {\n                    newInfo.callType = urlCallType;\n                }\n                if (urlLivekitRoomName) {\n                    newInfo.livekitRoomName = urlLivekitRoomName;\n                }\n                return newInfo;\n            });\n        }\n        // Check if user accepted from GlobalIncomingCall modal\n        if (urlAcceptedFromModal === \"true\") {\n            console.log(\"[CallScreen] User accepted from modal, skipping incoming call UI\");\n            setAcceptedFromModal(true);\n            // If SFU call and we have livekitRoomName, fetch the token immediately\n            if (urlCallType === \"sfu\" && urlLivekitRoomName && urlCallId) {\n                console.log(\"[CallScreen] Fetching LiveKit token for SFU call from modal...\");\n                (0,_api__WEBPACK_IMPORTED_MODULE_4__.getLiveKitToken)(urlCallId).then((tokenData)=>{\n                    setLiveKitToken(tokenData.token);\n                    setLiveKitUrl(tokenData.url);\n                    console.log(\"[CallScreen] LiveKit token obtained from modal accept\");\n                }).catch((err)=>{\n                    console.error(\"[CallScreen] Error getting LiveKit token from modal accept:\", err);\n                });\n            }\n        }\n        // Set isInitiator based on URL param\n        if (urlIsIncoming === \"false\") {\n            setIsInitiator(true);\n        } else if (urlIsIncoming === \"true\") {\n            setIsInitiator(false);\n        }\n    }, [\n        localUserId\n    ]);\n    // Log component lifecycle\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"[CallScreen] Component mounted, callId:\", callId);\n        return ()=>{\n            console.log(\"[CallScreen] Component unmounting, callId:\", callId);\n        };\n    }, [\n        callId\n    ]);\n    const [callDuration, setCallDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [callStartTime, setCallStartTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const durationIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { info: opponentInfo } = (0,_hooks_useOpponentInfo__WEBPACK_IMPORTED_MODULE_6__.useOpponentInfo)(callInfo?.conversationId || \"\");\n    const filterOptions = [\n        {\n            id: \"none\",\n            label: \"Gc\",\n            emoji: \"\\uD83D\\uDE42\"\n        },\n        {\n            id: \"beauty\",\n            label: \"Mn\",\n            emoji: \"\"\n        },\n        {\n            id: \"warm\",\n            label: \"m\",\n            emoji: \"\\uD83C\\uDF05\"\n        },\n        {\n            id: \"cool\",\n            label: \"M\\xe1t\",\n            emoji: \"\"\n        },\n        {\n            id: \"party\",\n            label: \"Party\",\n            emoji: \"\\uD83C\\uDF89\"\n        },\n        {\n            id: \"birthday\",\n            label: \"Sinh nht\",\n            emoji: \"\\uD83C\\uDF82\"\n        }\n    ];\n    const [showFilterPanel, setShowFilterPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // LiveKit state\n    const [liveKitToken, setLiveKitToken] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [liveKitUrl, setLiveKitUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const liveKitTokenRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Keep ref in sync with state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        liveKitTokenRef.current = liveKitToken;\n    }, [\n        liveKitToken\n    ]);\n    // Ch s dng useWebRTC cho P2P calls\n    const isP2PCall = !callInfo?.callType || callInfo.callType === \"p2p\";\n    // Lun gi useWebRTC  m bo hooks order khng i\n    const { localStream: p2pLocalStream, remoteStream: p2pRemoteStream, isConnected: p2pIsConnected, error: p2pError, startCall, endCall: endWebRTC, toggleVideo: p2pToggleVideo, toggleAudio: p2pToggleAudio, isVideoEnabled: p2pIsVideoEnabled, isAudioEnabled: p2pIsAudioEnabled, applyFilter, currentFilter, startScreenShare, stopScreenShare, isScreenSharing, localVideoRef, remoteVideoRef } = (0,_hooks_useWebRTC__WEBPACK_IMPORTED_MODULE_2__.useWebRTC)({\n        callId: callId || \"\",\n        conversationId: callInfo?.conversationId || \"\",\n        isInitiator: isInitiator,\n        localUserId: localUserId || \"\",\n        remoteUserId: callInfo?.remoteUserId || \"\"\n    });\n    // Lun gi useLiveKit  m bo hooks order khng i\n    const { localStream: liveKitLocalStream, remoteStreams: liveKitRemoteStreams, remoteTracks: liveKitRemoteTracks, isConnected: liveKitIsConnected, error: liveKitError, connect: connectLiveKit, disconnect: disconnectLiveKit, toggleVideo: liveKitToggleVideo, toggleAudio: liveKitToggleAudio, isVideoEnabled: liveKitIsVideoEnabled, isAudioEnabled: liveKitIsAudioEnabled } = (0,_hooks_useLiveKit__WEBPACK_IMPORTED_MODULE_3__.useLiveKit)({\n        roomName: callInfo?.livekitRoomName || \"\",\n        token: liveKitToken || \"\",\n        url: liveKitUrl\n    });\n    // Chn stream v controls da trn call type\n    const localStream = isP2PCall ? p2pLocalStream : liveKitLocalStream;\n    const remoteStream = isP2PCall ? p2pRemoteStream : null;\n    const isConnected = isP2PCall ? p2pIsConnected : liveKitIsConnected;\n    const error = isP2PCall ? p2pError : liveKitError;\n    const toggleVideo = isP2PCall ? p2pToggleVideo : liveKitToggleVideo;\n    const toggleAudio = isP2PCall ? p2pToggleAudio : liveKitToggleAudio;\n    const isVideoEnabled = isP2PCall ? p2pIsVideoEnabled : liveKitIsVideoEnabled;\n    const isAudioEnabled = isP2PCall ? p2pIsAudioEnabled : liveKitIsAudioEnabled;\n    const canUseEnhancements = isP2PCall && callInfo?.type === \"video\";\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!canUseEnhancements) {\n            setShowFilterPanel(false);\n        }\n    }, [\n        canUseEnhancements\n    ]);\n    const handleToggleFilterPanel = ()=>{\n        if (!canUseEnhancements) return;\n        setShowFilterPanel((prev)=>!prev);\n    };\n    // Ref to track if we've already auto-started\n    const hasAutoStartedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    // Ref to store latest startCall function to avoid re-triggering\n    const startCallRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(startCall);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        startCallRef.current = startCall;\n    }, [\n        startCall\n    ]);\n    // Calculate call duration\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isConnected && callStartTime) {\n            durationIntervalRef.current = setInterval(()=>{\n                const now = new Date();\n                const diff = Math.floor((now.getTime() - callStartTime.getTime()) / 1000);\n                setCallDuration(diff);\n            }, 1000);\n        } else {\n            if (durationIntervalRef.current) {\n                clearInterval(durationIntervalRef.current);\n                durationIntervalRef.current = null;\n            }\n        }\n        return ()=>{\n            if (durationIntervalRef.current) {\n                clearInterval(durationIntervalRef.current);\n            }\n        };\n    }, [\n        isConnected,\n        callStartTime\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isConnected && !callStartTime) {\n            setCallStartTime(new Date());\n        }\n    }, [\n        isConnected,\n        callStartTime\n    ]);\n    // Format duration as MM:SS or HH:MM:SS\n    const formatDuration = (seconds)=>{\n        const hours = Math.floor(seconds / 3600);\n        const minutes = Math.floor(seconds % 3600 / 60);\n        const secs = seconds % 60;\n        if (hours > 0) {\n            return `${hours.toString().padStart(2, \"0\")}:${minutes.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n        }\n        return `${minutes.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!callId || !localUserId) return;\n        const loadCallInfo = async ()=>{\n            try {\n                console.log(\"[CallScreen] Loading call info for callId:\", callId);\n                const call = await (0,_api__WEBPACK_IMPORTED_MODULE_4__.getCall)(callId);\n                console.log(\"[CallScreen] Call info loaded:\", call);\n                const remoteUserId = call.participants.find((id)=>String(id) !== localUserId) || \"\";\n                const isInit = String(call.initiatorId) === localUserId;\n                const callType = call.callType || \"p2p\";\n                setCallInfo({\n                    conversationId: String(call.conversationId),\n                    initiatorId: String(call.initiatorId),\n                    remoteUserId: String(remoteUserId),\n                    type: call.type,\n                    callType: callType,\n                    livekitRoomName: call.metadata?.livekitRoomName,\n                    participants: call.participants.map((p)=>String(p))\n                });\n                setIsInitiator(isInit);\n                // Nu l cuc gi nhm, ly LiveKit token\n                if (callType === \"sfu\" && call.metadata?.livekitRoomName) {\n                    try {\n                        const tokenData = await (0,_api__WEBPACK_IMPORTED_MODULE_4__.getLiveKitToken)(callId);\n                        setLiveKitToken(tokenData.token);\n                        setLiveKitUrl(tokenData.url);\n                        console.log(\"[CallScreen] LiveKit token obtained\");\n                    } catch (err) {\n                        console.error(\"[CallScreen] Error getting LiveKit token:\", err);\n                    }\n                }\n            } catch (error) {\n                console.error(\"[CallScreen] Error loading call info:\", error);\n                // If call not found, try to get info from socket or use fallback\n                if (error.response?.status === 404) {\n                    console.warn(\"[CallScreen] Call not found (404), trying socket events...\");\n                    // Try to get info from socket events instead\n                    const socket = (0,_socket__WEBPACK_IMPORTED_MODULE_5__.getSocket)();\n                    if (socket) {\n                        // Listen for call info from socket\n                        socket.once(\"call:info\", (data)=>{\n                            if (data.callId === callId) {\n                                console.log(\"[CallScreen] Got call info from socket:\", data);\n                                setCallInfo({\n                                    conversationId: data.conversationId,\n                                    initiatorId: data.initiatorId,\n                                    remoteUserId: data.remoteUserId || data.initiatorId,\n                                    type: data.type || \"video\"\n                                });\n                                setIsInitiator(String(data.initiatorId) === localUserId);\n                            }\n                        });\n                        // Also listen for incoming call event\n                        socket.once(\"call:incoming\", (data)=>{\n                            if (data.callId === callId) {\n                                console.log(\"[CallScreen] Got call info from call:incoming:\", data);\n                                setCallInfo({\n                                    conversationId: data.conversationId,\n                                    initiatorId: data.initiatorId,\n                                    remoteUserId: data.initiatorId,\n                                    type: data.type || \"video\"\n                                });\n                                setIsInitiator(false);\n                            }\n                        });\n                    }\n                }\n            }\n        };\n        loadCallInfo();\n        const socket = (0,_socket__WEBPACK_IMPORTED_MODULE_5__.getSocket)();\n        if (socket) {\n            const handleCallIncoming = async (data)=>{\n                if (data.callId !== callId) return;\n                console.log(\"[CallScreen] Received call:incoming event:\", data);\n                setCallInfo({\n                    conversationId: data.conversationId,\n                    initiatorId: data.initiatorId,\n                    remoteUserId: data.remoteUserId || data.initiatorId,\n                    type: data.type,\n                    callType: data.callType || \"p2p\",\n                    livekitRoomName: data.livekitRoomName,\n                    participants: data.participants\n                });\n                setIsInitiator(false);\n                // Nu l cuc gi nhm, ly LiveKit token\n                if (data.callType === \"sfu\" && data.livekitRoomName) {\n                    try {\n                        const tokenData = await (0,_api__WEBPACK_IMPORTED_MODULE_4__.getLiveKitToken)(callId);\n                        setLiveKitToken(tokenData.token);\n                        setLiveKitUrl(tokenData.url);\n                        console.log(\"[CallScreen] LiveKit token obtained from incoming call\");\n                    } catch (err) {\n                        console.error(\"[CallScreen] Error getting LiveKit token:\", err);\n                    }\n                }\n            };\n            const handleCallInfo = (data)=>{\n                if (data.callId !== callId) return;\n                console.log(\"[CallScreen] Received call:info event:\", data);\n                const remoteUserId = data.participants.find((id)=>String(id) !== localUserId) || \"\";\n                const isInit = String(data.initiatorId) === localUserId;\n                setCallInfo({\n                    conversationId: data.conversationId,\n                    initiatorId: String(data.initiatorId),\n                    remoteUserId: String(remoteUserId),\n                    type: data.type\n                });\n                setIsInitiator(isInit);\n            };\n            const handleCallAccepted = (data)=>{\n                if (data.callId !== callId) return;\n                console.log(\"[CallScreen] Received call:accepted event:\", data);\n                // Update call info if provided\n                if (data.conversationId) {\n                    const remoteUserId = data.participants ? data.participants.find((id)=>String(id) !== localUserId) || \"\" : data.remoteUserId || \"\";\n                    setCallInfo((prev)=>prev ? {\n                            ...prev,\n                            conversationId: data.conversationId,\n                            remoteUserId: remoteUserId || prev.remoteUserId,\n                            type: data.type || prev.type\n                        } : {\n                            conversationId: data.conversationId,\n                            initiatorId: data.initiatorId || localUserId,\n                            remoteUserId: remoteUserId,\n                            type: data.type || \"video\"\n                        });\n                }\n                // If we're the initiator and call is accepted, auto-start the call\n                // Only auto-start once\n                if (isInitiator && !isConnected && !hasAutoStartedRef.current && callInfo) {\n                    console.log(\"[CallScreen] Call accepted, auto-starting call...\");\n                    console.log(\"[CallScreen] CallInfo available:\", callInfo);\n                    hasAutoStartedRef.current = true;\n                    setTimeout(async ()=>{\n                        console.log(\"[CallScreen] Attempting to start call as initiator...\");\n                        if (callInfo.callType === \"sfu\" && liveKitToken) {\n                            // Start LiveKit connection\n                            await connectLiveKit();\n                        } else {\n                            // Use ref to call latest startCall without triggering re-runs\n                            startCallRef.current().then(()=>{\n                                console.log(\"[CallScreen] Call started successfully as initiator\");\n                            }).catch((err)=>{\n                                console.error(\"[CallScreen] Error auto-starting call:\", err);\n                                hasAutoStartedRef.current = false; // Reset on error\n                            });\n                        }\n                    }, 1000);\n                }\n            };\n            const handleCallActive = (data)=>{\n                if (data.callId !== callId) return;\n                console.log(\"[CallScreen] Received call:active event:\", data);\n            // Call is now active, ensure we're connected\n            };\n            socket.on(\"call:incoming\", handleCallIncoming);\n            socket.on(\"call:info\", handleCallInfo);\n            socket.on(\"call:accepted\", handleCallAccepted);\n            socket.on(\"call:active\", handleCallActive);\n            return ()=>{\n                socket.off(\"call:incoming\", handleCallIncoming);\n                socket.off(\"call:info\", handleCallInfo);\n                socket.off(\"call:accepted\", handleCallAccepted);\n                socket.off(\"call:active\", handleCallActive);\n            };\n        }\n    }, [\n        callId,\n        localUserId\n    ]);\n    // Reset auto-start flag when call connects\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isConnected) {\n            hasAutoStartedRef.current = false;\n        }\n    }, [\n        isConnected\n    ]);\n    // Auto-start call for initiator when callInfo is ready\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Skip if already connected or already started\n        if (isConnected || hasAutoStartedRef.current) return;\n        // Initiator: auto-start when callInfo is fully ready (including remoteUserId for P2P)\n        const isSFU = callInfo?.callType === \"sfu\";\n        const isP2PReady = !isSFU && callInfo?.remoteUserId;\n        const isSFUReady = isSFU && callInfo?.livekitRoomName;\n        if (isInitiator && callInfo && callInfo.conversationId && (isP2PReady || isSFUReady)) {\n            console.log(\"[CallScreen] Auto-start effect triggered for initiator:\", {\n                isInitiator,\n                isConnected,\n                callInfo,\n                isP2PReady,\n                isSFUReady\n            });\n            hasAutoStartedRef.current = true;\n            console.log(\"[CallScreen] Starting call as initiator from auto-start effect...\");\n            // Delay slightly to ensure everything is set up\n            setTimeout(async ()=>{\n                if (isSFU) {\n                    // SFU: connect to LiveKit\n                    if (liveKitToken || callInfo.livekitRoomName) {\n                        console.log(\"[CallScreen] Connecting to LiveKit...\", {\n                            hasToken: !!liveKitToken\n                        });\n                        try {\n                            await connectLiveKit();\n                        } catch (err) {\n                            console.error(\"[CallScreen] Error connecting to LiveKit:\", err);\n                            hasAutoStartedRef.current = false;\n                        }\n                    } else {\n                        console.error(\"[CallScreen] LiveKit token and room name not available\");\n                        hasAutoStartedRef.current = false;\n                    }\n                } else {\n                    // P2P: start WebRTC call\n                    console.log(\"[CallScreen] Starting P2P call with remoteUserId:\", callInfo.remoteUserId);\n                    startCallRef.current().then(()=>{\n                        console.log(\"[CallScreen]  Call started as initiator from auto-start effect\");\n                    }).catch((err)=>{\n                        console.error(\"[CallScreen]  Error starting call as initiator:\", err);\n                        hasAutoStartedRef.current = false;\n                    });\n                }\n            }, 500);\n        } else if (acceptedFromModal && !isInitiator && callInfo && callInfo.conversationId && (isP2PReady || isSFUReady)) {\n            console.log(\"[CallScreen] Auto-start effect triggered for non-initiator:\", {\n                acceptedFromModal,\n                isInitiator,\n                isConnected,\n                callInfo,\n                isP2PReady,\n                isSFUReady\n            });\n            hasAutoStartedRef.current = true;\n            console.log(\"[CallScreen] Starting call from auto-start effect...\");\n            setTimeout(async ()=>{\n                if (isSFU) {\n                    // SFU: connect to LiveKit\n                    if (liveKitToken || callInfo.livekitRoomName) {\n                        console.log(\"[CallScreen] Connecting to LiveKit...\", {\n                            hasToken: !!liveKitToken\n                        });\n                        try {\n                            await connectLiveKit();\n                        } catch (err) {\n                            console.error(\"[CallScreen] Error connecting to LiveKit:\", err);\n                            hasAutoStartedRef.current = false;\n                        }\n                    } else {\n                        console.error(\"[CallScreen] LiveKit token and room name not available\");\n                        hasAutoStartedRef.current = false;\n                    }\n                } else {\n                    // P2P: start WebRTC call\n                    console.log(\"[CallScreen] Starting P2P call with remoteUserId:\", callInfo.remoteUserId);\n                    startCallRef.current().then(()=>{\n                        console.log(\"[CallScreen]  Call started from auto-start effect\");\n                    }).catch((err)=>{\n                        console.error(\"[CallScreen]  Error starting call from auto-start effect:\", err);\n                        hasAutoStartedRef.current = false;\n                    });\n                }\n            }, 500);\n        }\n    }, [\n        acceptedFromModal,\n        isInitiator,\n        isConnected,\n        callInfo,\n        liveKitToken,\n        connectLiveKit\n    ]);\n    // Auto-connect to LiveKit when token becomes available (for SFU calls)\n    const hasAutoConnectedLiveKitRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (liveKitToken && callInfo?.callType === \"sfu\" && !isConnected && !hasAutoConnectedLiveKitRef.current && (acceptedFromModal || isInitiator)) {\n            console.log(\"[CallScreen] LiveKit token available, auto-connecting...\", {\n                hasToken: !!liveKitToken,\n                callType: callInfo.callType,\n                isConnected,\n                acceptedFromModal,\n                isInitiator\n            });\n            hasAutoConnectedLiveKitRef.current = true;\n            connectLiveKit().then(()=>{\n                console.log(\"[CallScreen]  Auto-connected to LiveKit successfully\");\n            }).catch((err)=>{\n                console.error(\"[CallScreen]  Error auto-connecting to LiveKit:\", err);\n                hasAutoConnectedLiveKitRef.current = false; // Allow retry\n            });\n        }\n    }, [\n        liveKitToken,\n        callInfo?.callType,\n        isConnected,\n        acceptedFromModal,\n        isInitiator,\n        connectLiveKit\n    ]);\n    const handleAccept = async ()=>{\n        if (!callId) return;\n        try {\n            console.log(\"[CallScreen] Accepting call:\", callId);\n            await (0,_api__WEBPACK_IMPORTED_MODULE_4__.acceptCall)(callId);\n            console.log(\"[CallScreen] Call accepted, starting call...\");\n            // Start the call immediately after accepting\n            if (callInfo?.callType === \"sfu\" && liveKitToken) {\n                await connectLiveKit();\n            } else {\n                await startCall();\n            }\n            console.log(\"[CallScreen] Call started successfully\");\n        } catch (err) {\n            console.error(\"[CallScreen] Error accepting call:\", err);\n            // Try to start call anyway if accept succeeded but startCall failed\n            try {\n                if (callInfo?.callType === \"sfu\" && liveKitToken) {\n                    await connectLiveKit();\n                } else {\n                    await startCall();\n                }\n            } catch (startErr) {\n                console.error(\"[CallScreen] Error starting call after accept:\", startErr);\n            }\n        }\n    };\n    const handleReject = async ()=>{\n        if (!callId) return;\n        try {\n            await (0,_api__WEBPACK_IMPORTED_MODULE_4__.rejectCall)(callId);\n            if (false) {}\n        } catch (err) {\n            console.error(\"Error rejecting call:\", err);\n        }\n    };\n    const handleEndCall = async ()=>{\n        if (!callId) return;\n        try {\n            if (isP2PCall) {\n                endWebRTC();\n            } else {\n                disconnectLiveKit();\n            }\n            await (0,_api__WEBPACK_IMPORTED_MODULE_4__.endCall)(callId);\n            if (false) {}\n        } catch (err) {\n            console.error(\"Error ending call:\", err);\n            if (false) {}\n        }\n    };\n    const handleFilterSelect = async (filter)=>{\n        try {\n            await applyFilter(filter);\n            setShowFilterPanel(false);\n        } catch (error) {\n            console.error(\"[CallScreen] Error applying filter:\", error);\n        }\n    };\n    const handleScreenShareToggle = async ()=>{\n        try {\n            if (isScreenSharing) {\n                await stopScreenShare();\n            } else {\n                await startScreenShare();\n            }\n        } catch (error) {\n            console.error(\"[CallScreen] Screen share error:\", error);\n        }\n    };\n    // Chuyn i LiveKit remoteStreams thnh format cho GroupCallGrid\n    // PHI t trc early returns  tun th Rules of Hooks\n    const groupCallParticipants = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(()=>{\n        if (isP2PCall) return [];\n        console.log(\"[CallScreen] Building groupCallParticipants from liveKitRemoteStreams:\", {\n            remoteStreamsSize: liveKitRemoteStreams.size,\n            remoteStreamKeys: Array.from(liveKitRemoteStreams.keys())\n        });\n        const participants = [];\n        liveKitRemoteStreams.forEach((stream, participantId)=>{\n            console.log(\"[CallScreen] Adding remote participant:\", {\n                participantId,\n                trackCount: stream.getTracks().length,\n                tracks: stream.getTracks().map((t)=>({\n                        kind: t.kind,\n                        enabled: t.enabled\n                    }))\n            });\n            participants.push({\n                participantId,\n                stream\n            });\n        });\n        return participants;\n    }, [\n        liveKitRemoteStreams,\n        isP2PCall\n    ]);\n    const opponentName = opponentInfo?.name || \"Unknown\";\n    const opponentAvatar = opponentInfo?.avatar;\n    if (!callId) {\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n            className: \"call-screen\",\n            children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                className: \"call-loading\",\n                children: \"Invalid call ID\"\n            })\n        });\n    }\n    // Show loading only if we don't have callInfo yet\n    if (!callInfo) {\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n            className: \"call-screen\",\n            children: [\n                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                    className: \"call-loading\",\n                    children: \"Loading call...\"\n                }),\n                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                    style: {\n                        position: \"absolute\",\n                        bottom: \"20px\",\n                        left: \"50%\",\n                        transform: \"translateX(-50%)\",\n                        color: \"rgba(255, 255, 255, 0.5)\",\n                        fontSize: \"14px\"\n                    },\n                    children: [\n                        \"Call ID: \",\n                        callId\n                    ]\n                }),\n                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                    style: {\n                        position: \"absolute\",\n                        bottom: \"60px\",\n                        left: \"50%\",\n                        transform: \"translateX(-50%)\",\n                        color: \"rgba(255, 255, 255, 0.3)\",\n                        fontSize: \"12px\",\n                        textAlign: \"center\",\n                        maxWidth: \"400px\"\n                    },\n                    children: \"Nu call kh\\xf4ng t\\xecm thy, c\\xf3 th \\xe3 b kt th\\xfac hoc backend cha c\\xf3 endpoint GET /calls/:callId\"\n                })\n            ]\n        });\n    }\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        className: \"call-screen\",\n        children: [\n            !isP2PCall && callInfo.callType === \"sfu\" ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                className: \"call-main-video\",\n                style: {\n                    width: \"100%\",\n                    height: \"100%\",\n                    background: \"#000\"\n                },\n                children: isConnected && (localStream || groupCallParticipants.length > 0) ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_call_GroupCallGrid__WEBPACK_IMPORTED_MODULE_7__.GroupCallGrid, {\n                    participants: groupCallParticipants,\n                    localStream: localStream,\n                    localParticipantId: localUserId || \"\",\n                    remoteTracks: liveKitRemoteTracks\n                }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                    style: {\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        height: \"100%\",\n                        color: \"#fff\"\n                    },\n                    children: [\n                        !liveKitToken ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    style: {\n                                        fontSize: \"18px\",\n                                        marginBottom: \"10px\"\n                                    },\n                                    children: \"ang ly token...\"\n                                }),\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    style: {\n                                        fontSize: \"14px\",\n                                        color: \"rgba(255,255,255,0.6)\"\n                                    },\n                                    children: \"Vui l\\xf2ng i\"\n                                })\n                            ]\n                        }) : !isConnected ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    style: {\n                                        fontSize: \"18px\",\n                                        marginBottom: \"10px\"\n                                    },\n                                    children: \"ang kt ni...\"\n                                }),\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    style: {\n                                        fontSize: \"14px\",\n                                        color: \"rgba(255,255,255,0.6)\"\n                                    },\n                                    children: \"ang tham gia cuc gi nh\\xf3m\"\n                                })\n                            ]\n                        }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    style: {\n                                        fontSize: \"18px\",\n                                        marginBottom: \"10px\"\n                                    },\n                                    children: \"ang ti video...\"\n                                }),\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    style: {\n                                        fontSize: \"14px\",\n                                        color: \"rgba(255,255,255,0.6)\"\n                                    },\n                                    children: \"Vui l\\xf2ng i\"\n                                })\n                            ]\n                        }),\n                        error && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                            style: {\n                                marginTop: \"20px\",\n                                padding: \"10px 20px\",\n                                background: \"rgba(255,0,0,0.2)\",\n                                borderRadius: \"8px\",\n                                color: \"#ff6b6b\"\n                            },\n                            children: error\n                        })\n                    ]\n                })\n            }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                        className: \"call-main-video\",\n                        children: remoteStream ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"video\", {\n                            ref: remoteVideoRef,\n                            autoPlay: true,\n                            playsInline: true,\n                            className: \"call-video-remote\"\n                        }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                            className: \"call-avatar-container\",\n                            children: [\n                                opponentAvatar ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"img\", {\n                                    src: opponentAvatar,\n                                    alt: opponentName,\n                                    className: \"call-avatar\"\n                                }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    className: \"call-avatar-placeholder\",\n                                    children: opponentName.charAt(0).toUpperCase()\n                                }),\n                                (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    className: \"call-name\",\n                                    children: opponentName\n                                }),\n                                !isConnected && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                                    className: \"call-status\",\n                                    children: isInitiator ? \"ang gi...\" : acceptedFromModal ? \"ang kt ni...\" : \"Cuc gi n...\"\n                                })\n                            ]\n                        })\n                    }),\n                    callInfo.type === \"video\" && localStream && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                        className: \"call-self-view\",\n                        children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"video\", {\n                            ref: localVideoRef,\n                            autoPlay: true,\n                            playsInline: true,\n                            muted: true,\n                            className: \"call-video-local\"\n                        })\n                    })\n                ]\n            }),\n            isConnected && callDuration > 0 && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                className: \"call-duration\",\n                children: formatDuration(callDuration)\n            }),\n            error && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                className: \"call-error-banner\",\n                children: error\n            }),\n            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                className: \"call-controls\",\n                children: [\n                    !isInitiator && !isConnected && !acceptedFromModal && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                        className: \"call-incoming-controls\",\n                        children: [\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: \"call-control-btn call-control-accept\",\n                                onClick: handleAccept,\n                                title: \"Chp nhn\",\n                                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                        d: \"M20 6L9 17L4 12\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"2\",\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\"\n                                    })\n                                })\n                            }),\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: \"call-control-btn call-control-reject\",\n                                onClick: handleReject,\n                                title: \"T chi\",\n                                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                        d: \"M18 6L6 18M6 6L18 18\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"2\",\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\"\n                                    })\n                                })\n                            })\n                        ]\n                    }),\n                    isConnected && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                        className: \"call-active-controls\",\n                        children: [\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: \"call-control-btn call-control-secondary\",\n                                onClick: ()=>{\n                                    if (false) {}\n                                },\n                                title: \"Tin nhn\",\n                                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                        d: \"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"2\",\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\"\n                                    })\n                                })\n                            }),\n                            canUseEnhancements && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: `call-control-btn call-control-secondary ${showFilterPanel || currentFilter !== \"none\" ? \"call-control-active\" : \"\"}`,\n                                title: \"B lc l\\xe0m p\",\n                                onClick: handleToggleFilterPanel,\n                                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n                                    width: \"22\",\n                                    height: \"22\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: [\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M12 3L13.5 7.5L18 9L13.5 10.5L12 15L10.5 10.5L6 9L10.5 7.5L12 3Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.6\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M5 16H9\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.6\",\n                                            strokeLinecap: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M15 16H19\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.6\",\n                                            strokeLinecap: \"round\"\n                                        })\n                                    ]\n                                })\n                            }),\n                            canUseEnhancements && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: `call-control-btn call-control-secondary ${isScreenSharing ? \"call-control-active\" : \"\"}`,\n                                title: isScreenSharing ? \"Dng chia s m\\xe0n h\\xecnh\" : \"Chia s m\\xe0n h\\xecnh\",\n                                onClick: handleScreenShareToggle,\n                                children: isScreenSharing ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: [\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M4 5H20C21.1046 5 22 5.89543 22 7V15C22 16.1046 21.1046 17 20 17H4C2.89543 17 2 16.1046 2 15V7C2 5.89543 2.89543 5 4 5Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.8\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M12 21V17\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.8\",\n                                            strokeLinecap: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M8 21H16\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.8\",\n                                            strokeLinecap: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M8 9L12 13L16 9\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.8\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        })\n                                    ]\n                                }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: [\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M4 5H20C21.1046 5 22 5.89543 22 7V14C22 15.1046 21.1046 16 20 16H4C2.89543 16 2 15.1046 2 14V7C2 5.89543 2.89543 5 4 5Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.6\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M12 20V16\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.6\",\n                                            strokeLinecap: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M8 20H16\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"1.6\",\n                                            strokeLinecap: \"round\"\n                                        })\n                                    ]\n                                })\n                            }),\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: `call-control-btn ${!isAudioEnabled ? \"call-control-muted\" : \"\"}`,\n                                onClick: toggleAudio,\n                                title: isAudioEnabled ? \"Tt mic\" : \"Bt mic\",\n                                children: isAudioEnabled ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: [\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M12 1C10.34 1 9 2.34 9 4V12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12V4C15 2.34 13.66 1 12 1Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M19 10V12C19 15.87 15.87 19 12 19C8.13 19 5 15.87 5 12V10\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M12 19V23\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M8 23H16\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        })\n                                    ]\n                                }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: [\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M1 1L23 23\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M9 9V12C9 13.66 10.34 15 12 15C12.41 15 12.81 14.92 13.17 14.77\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M5 10V12C5 15.87 8.13 19 12 19C12.69 19 13.35 18.89 13.97 18.7\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M9 1V4\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M15 1V4\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M12 19V23\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M8 23H16\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        })\n                                    ]\n                                })\n                            }),\n                            callInfo.type === \"video\" && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: `call-control-btn ${!isVideoEnabled ? \"call-control-muted\" : \"\"}`,\n                                onClick: toggleVideo,\n                                title: isVideoEnabled ? \"Tt camera\" : \"Bt camera\",\n                                children: isVideoEnabled ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: [\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M23 7L16 12L23 17V7Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M14 5H3C1.89543 5 1 5.89543 1 7V17C1 18.1046 1.89543 19 3 19H14C15.1046 19 16 18.1046 16 17V7C16 5.89543 15.1046 5 14 5Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        })\n                                    ]\n                                }) : (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: [\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M1 1L23 23\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M16 12L23 7V17L16 12Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        }),\n                                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                            d: \"M14 5H3C1.89543 5 1 5.89543 1 7V17C1 18.1046 1.89543 19 3 19H14C15.1046 19 16 18.1046 16 17V7C16 5.89543 15.1046 5 14 5Z\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"2\",\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\"\n                                        })\n                                    ]\n                                })\n                            }),\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                className: \"call-control-btn call-control-end\",\n                                onClick: handleEndCall,\n                                title: \"Kt th\\xfac cuc gi\",\n                                children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", {\n                                    width: \"24\",\n                                    height: \"24\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", {\n                                        d: \"M3 5C3 3.89543 3.89543 3 5 3H8.27924C8.70967 3 9.09181 3.27543 9.22792 3.68377L10.7257 8.17721C10.8831 8.64932 10.6694 9.16531 10.2243 9.38787L7.96701 10.5165C9.06925 12.9612 11.0388 14.9308 13.4835 16.033L14.6121 13.7757C14.8347 13.3306 15.3507 13.1169 15.8228 13.2743L20.3162 14.7721C20.7246 14.9082 21 15.2903 21 15.7208V19C21 20.1046 20.1046 21 19 21H18C9.71573 21 3 14.2843 3 6V5Z\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"2\",\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\"\n                                    })\n                                })\n                            })\n                        ]\n                    })\n                ]\n            }),\n            canUseEnhancements && isScreenSharing && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                className: \"call-screen-share-indicator\",\n                children: [\n                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                        children: \"ang chia s m\\xe0n h\\xecnh\"\n                    }),\n                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                        type: \"button\",\n                        onClick: handleScreenShareToggle,\n                        children: \"Dng chia s\"\n                    })\n                ]\n            }),\n            canUseEnhancements && showFilterPanel && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                className: \"call-filter-panel\",\n                children: [\n                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n                        className: \"call-filter-panel__header\",\n                        children: [\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                                children: \"B lc & hiu ng\"\n                            }),\n                            (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                                type: \"button\",\n                                onClick: ()=>setShowFilterPanel(false),\n                                \"aria-label\": \"\\xf3ng\",\n                                children: \"\\xd7\"\n                            })\n                        ]\n                    }),\n                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                        className: \"call-filter-panel__list\",\n                        children: filterOptions.map((option)=>{\n                            const active = currentFilter === option.id;\n                            const disabled = isScreenSharing;\n                            return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", {\n                                type: \"button\",\n                                className: `filter-option ${active ? \"active\" : \"\"} ${disabled ? \"disabled\" : \"\"}`,\n                                onClick: ()=>!disabled && handleFilterSelect(option.id),\n                                disabled: disabled,\n                                children: [\n                                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                                        className: \"filter-option__emoji\",\n                                        children: option.emoji\n                                    }),\n                                    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                                        className: \"filter-option__label\",\n                                        children: option.label\n                                    })\n                                ]\n                            }, option.id);\n                        })\n                    }),\n                    isScreenSharing && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                        className: \"call-filter-panel__notice\",\n                        children: \"Tt chia s m\\xe0n h\\xecnh  s dng b lc.\"\n                    })\n                ]\n            })\n        ]\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL2ZlYXR1cmVzL2NhbGwvc2NyZWVucy9DYWxsU2NyZWVuLndlYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7NkRBQ3NGO0FBQzNCO0FBQ047QUFDRTtBQUNpRDtBQUM1RDtBQUNxQjtBQUNNO0FBQ3JDO0FBQ25CLFNBQVNxQjtJQUNwQixNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR2YsK0NBQVFBLENBQUM7SUFDckMsTUFBTSxDQUFDZ0IsVUFBVUMsWUFBWSxHQUFHakIsK0NBQVFBLENBQUM7SUFDekMsTUFBTSxDQUFDa0IsYUFBYUMsZUFBZSxHQUFHbkIsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDb0IsYUFBYUMsZUFBZSxHQUFHckIsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDc0IsbUJBQW1CQyxxQkFBcUIsR0FBR3ZCLCtDQUFRQSxDQUFDO0lBQzNELHNDQUFzQztJQUN0Q0QsZ0RBQVNBLENBQUM7UUFDTixJQUFJLElBQWtCLEVBQ2xCO1FBQ0osSUFBSTtZQUNBLE1BQU15QixNQUFNQyxPQUFPQyxZQUFZLENBQUNDLE9BQU8sQ0FBQztZQUN4Q04sZUFBZUc7UUFDbkIsRUFDQSxPQUFPSSxLQUFLO1lBQ1JDLFFBQVFDLElBQUksQ0FBQyx5REFBeURGO1FBQzFFO1FBQ0EsTUFBTUcsU0FBUyxJQUFJQyxnQkFBZ0JQLE9BQU9RLFFBQVEsQ0FBQ0YsTUFBTTtRQUN6RCxNQUFNRyxZQUFZSCxPQUFPSSxHQUFHLENBQUM7UUFDN0IsTUFBTUMsb0JBQW9CTCxPQUFPSSxHQUFHLENBQUM7UUFDckMsTUFBTUUsdUJBQXVCTixPQUFPSSxHQUFHLENBQUM7UUFDeEMsTUFBTUcsY0FBY1AsT0FBT0ksR0FBRyxDQUFDO1FBQy9CLE1BQU1JLHFCQUFxQlIsT0FBT0ksR0FBRyxDQUFDO1FBQ3RDLE1BQU1LLGdCQUFnQlQsT0FBT0ksR0FBRyxDQUFDO1FBQ2pDTixRQUFRWSxHQUFHLENBQUMsbUNBQW1DO1lBQzND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REFBSUEsQ0FBQyxPQUFPO3dCQUFFd00sV0FBVzt3QkFBNkJDLFVBQVU7b0JBQTRGO2lCQUFJO1lBQUM7U0FBSTtJQUFDO0FBQ3pOIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9sYS13ZWIvLi4vLi4vcGFja2FnZXMvYXBwL2ZlYXR1cmVzL2NhbGwvc2NyZWVucy9DYWxsU2NyZWVuLndlYi5qcz9iNzBkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVdlYlJUQyB9IGZyb20gJy4uLy4uLy4uL2hvb2tzL3VzZVdlYlJUQyc7XG5pbXBvcnQgeyB1c2VMaXZlS2l0IH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlTGl2ZUtpdCc7XG5pbXBvcnQgeyBnZXRDYWxsLCBlbmRDYWxsIGFzIGVuZENhbGxBUEksIGFjY2VwdENhbGwsIHJlamVjdENhbGwsIGdldExpdmVLaXRUb2tlbiwgfSBmcm9tICcuLi8uLi8uLi9hcGknO1xuaW1wb3J0IHsgZ2V0U29ja2V0IH0gZnJvbSAnLi4vLi4vLi4vc29ja2V0JztcbmltcG9ydCB7IHVzZU9wcG9uZW50SW5mbyB9IGZyb20gJy4uLy4uLy4uL2hvb2tzL3VzZU9wcG9uZW50SW5mbyc7XG5pbXBvcnQgeyBHcm91cENhbGxHcmlkIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9jYWxsL0dyb3VwQ2FsbEdyaWQnO1xuaW1wb3J0ICcuLi8uLi8uLi9zdHlsZXMvY2FsbC5jc3MnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2FsbFNjcmVlbigpIHtcbiAgICBjb25zdCBbY2FsbElkLCBzZXRDYWxsSWRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW2NhbGxJbmZvLCBzZXRDYWxsSW5mb10gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbaXNJbml0aWF0b3IsIHNldElzSW5pdGlhdG9yXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbbG9jYWxVc2VySWQsIHNldExvY2FsVXNlcklkXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFthY2NlcHRlZEZyb21Nb2RhbCwgc2V0QWNjZXB0ZWRGcm9tTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIC8vIFJlYWQgdXNlciBpZCAmIFVSTCBwYXJhbXMgb24gY2xpZW50XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdWlkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7XG4gICAgICAgICAgICBzZXRMb2NhbFVzZXJJZCh1aWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0NhbGxTY3JlZW5dIFVuYWJsZSB0byByZWFkIHVzZXJfaWQgZnJvbSBsb2NhbFN0b3JhZ2UnLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICAgIGNvbnN0IHVybENhbGxJZCA9IHNlYXJjaC5nZXQoJ2NhbGxJZCcpO1xuICAgICAgICBjb25zdCB1cmxDb252ZXJzYXRpb25JZCA9IHNlYXJjaC5nZXQoJ2NvbnZlcnNhdGlvbklkJyk7XG4gICAgICAgIGNvbnN0IHVybEFjY2VwdGVkRnJvbU1vZGFsID0gc2VhcmNoLmdldCgnYWNjZXB0ZWRGcm9tTW9kYWwnKTtcbiAgICAgICAgY29uc3QgdXJsQ2FsbFR5cGUgPSBzZWFyY2guZ2V0KCdjYWxsVHlwZScpO1xuICAgICAgICBjb25zdCB1cmxMaXZla2l0Um9vbU5hbWUgPSBzZWFyY2guZ2V0KCdsaXZla2l0Um9vbU5hbWUnKTtcbiAgICAgICAgY29uc3QgdXJsSXNJbmNvbWluZyA9IHNlYXJjaC5nZXQoJ2lzSW5jb21pbmcnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBQYXJzZWQgVVJMIHBhcmFtczonLCB7XG4gICAgICAgICAgICB1cmxDYWxsSWQsXG4gICAgICAgICAgICB1cmxDb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgIHVybEFjY2VwdGVkRnJvbU1vZGFsLFxuICAgICAgICAgICAgdXJsQ2FsbFR5cGUsXG4gICAgICAgICAgICB1cmxMaXZla2l0Um9vbU5hbWUsXG4gICAgICAgICAgICB1cmxJc0luY29taW5nXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodXJsQ2FsbElkKSB7XG4gICAgICAgICAgICBzZXRDYWxsSWQodXJsQ2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsQ29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgICAgIHNldENhbGxJbmZvKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3SW5mbyA9IHByZXZcbiAgICAgICAgICAgICAgICAgICAgPyB7IC4uLnByZXYsIGNvbnZlcnNhdGlvbklkOiB1cmxDb252ZXJzYXRpb25JZCB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IHVybENvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhdG9ySWQ6IGxvY2FsVXNlcklkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlVXNlcklkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlbycsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gQWRkIGNhbGxUeXBlIGFuZCBsaXZla2l0Um9vbU5hbWUgZnJvbSBVUkwgcGFyYW1zXG4gICAgICAgICAgICAgICAgaWYgKHVybENhbGxUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0luZm8uY2FsbFR5cGUgPSB1cmxDYWxsVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVybExpdmVraXRSb29tTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdJbmZvLmxpdmVraXRSb29tTmFtZSA9IHVybExpdmVraXRSb29tTmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld0luZm87XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGFjY2VwdGVkIGZyb20gR2xvYmFsSW5jb21pbmdDYWxsIG1vZGFsXG4gICAgICAgIGlmICh1cmxBY2NlcHRlZEZyb21Nb2RhbCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIFVzZXIgYWNjZXB0ZWQgZnJvbSBtb2RhbCwgc2tpcHBpbmcgaW5jb21pbmcgY2FsbCBVSScpO1xuICAgICAgICAgICAgc2V0QWNjZXB0ZWRGcm9tTW9kYWwodHJ1ZSk7XG4gICAgICAgICAgICAvLyBJZiBTRlUgY2FsbCBhbmQgd2UgaGF2ZSBsaXZla2l0Um9vbU5hbWUsIGZldGNoIHRoZSB0b2tlbiBpbW1lZGlhdGVseVxuICAgICAgICAgICAgaWYgKHVybENhbGxUeXBlID09PSAnc2Z1JyAmJiB1cmxMaXZla2l0Um9vbU5hbWUgJiYgdXJsQ2FsbElkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBGZXRjaGluZyBMaXZlS2l0IHRva2VuIGZvciBTRlUgY2FsbCBmcm9tIG1vZGFsLi4uJyk7XG4gICAgICAgICAgICAgICAgZ2V0TGl2ZUtpdFRva2VuKHVybENhbGxJZCkudGhlbih0b2tlbkRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRMaXZlS2l0VG9rZW4odG9rZW5EYXRhLnRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TGl2ZUtpdFVybCh0b2tlbkRhdGEudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBMaXZlS2l0IHRva2VuIG9idGFpbmVkIGZyb20gbW9kYWwgYWNjZXB0Jyk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0NhbGxTY3JlZW5dIEVycm9yIGdldHRpbmcgTGl2ZUtpdCB0b2tlbiBmcm9tIG1vZGFsIGFjY2VwdDonLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBpc0luaXRpYXRvciBiYXNlZCBvbiBVUkwgcGFyYW1cbiAgICAgICAgaWYgKHVybElzSW5jb21pbmcgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgIHNldElzSW5pdGlhdG9yKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVybElzSW5jb21pbmcgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgc2V0SXNJbml0aWF0b3IoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW2xvY2FsVXNlcklkXSk7XG4gICAgLy8gTG9nIGNvbXBvbmVudCBsaWZlY3ljbGVcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIENvbXBvbmVudCBtb3VudGVkLCBjYWxsSWQ6JywgY2FsbElkKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gQ29tcG9uZW50IHVubW91bnRpbmcsIGNhbGxJZDonLCBjYWxsSWQpO1xuICAgICAgICB9O1xuICAgIH0sIFtjYWxsSWRdKTtcbiAgICBjb25zdCBbY2FsbER1cmF0aW9uLCBzZXRDYWxsRHVyYXRpb25dID0gdXNlU3RhdGUoMCk7XG4gICAgY29uc3QgW2NhbGxTdGFydFRpbWUsIHNldENhbGxTdGFydFRpbWVdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgZHVyYXRpb25JbnRlcnZhbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCB7IGluZm86IG9wcG9uZW50SW5mbyB9ID0gdXNlT3Bwb25lbnRJbmZvKGNhbGxJbmZvPy5jb252ZXJzYXRpb25JZCB8fCAnJyk7XG4gICAgY29uc3QgZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgeyBpZDogJ25vbmUnLCBsYWJlbDogJ0fhu5FjJywgZW1vamk6ICfwn5mCJyB9LFxuICAgICAgICB7IGlkOiAnYmVhdXR5JywgbGFiZWw6ICdN4buLbicsIGVtb2ppOiAn4pyoJyB9LFxuICAgICAgICB7IGlkOiAnd2FybScsIGxhYmVsOiAn4bqkbScsIGVtb2ppOiAn8J+MhScgfSxcbiAgICAgICAgeyBpZDogJ2Nvb2wnLCBsYWJlbDogJ03DoXQnLCBlbW9qaTogJ+KdhO+4jycgfSxcbiAgICAgICAgeyBpZDogJ3BhcnR5JywgbGFiZWw6ICdQYXJ0eScsIGVtb2ppOiAn8J+OiScgfSxcbiAgICAgICAgeyBpZDogJ2JpcnRoZGF5JywgbGFiZWw6ICdTaW5oIG5o4bqtdCcsIGVtb2ppOiAn8J+OgicgfSxcbiAgICBdO1xuICAgIGNvbnN0IFtzaG93RmlsdGVyUGFuZWwsIHNldFNob3dGaWx0ZXJQYW5lbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgLy8gTGl2ZUtpdCBzdGF0ZVxuICAgIGNvbnN0IFtsaXZlS2l0VG9rZW4sIHNldExpdmVLaXRUb2tlbl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbbGl2ZUtpdFVybCwgc2V0TGl2ZUtpdFVybF0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgbGl2ZUtpdFRva2VuUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIC8vIEtlZXAgcmVmIGluIHN5bmMgd2l0aCBzdGF0ZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxpdmVLaXRUb2tlblJlZi5jdXJyZW50ID0gbGl2ZUtpdFRva2VuO1xuICAgIH0sIFtsaXZlS2l0VG9rZW5dKTtcbiAgICAvLyBDaOG7iSBz4butIGThu6VuZyB1c2VXZWJSVEMgY2hvIFAyUCBjYWxsc1xuICAgIGNvbnN0IGlzUDJQQ2FsbCA9ICFjYWxsSW5mbz8uY2FsbFR5cGUgfHwgY2FsbEluZm8uY2FsbFR5cGUgPT09ICdwMnAnO1xuICAgIC8vIEx1w7RuIGfhu41pIHVzZVdlYlJUQyDEkeG7gyDEkeG6o20gYuG6o28gaG9va3Mgb3JkZXIga2jDtG5nIMSR4buVaVxuICAgIGNvbnN0IHsgbG9jYWxTdHJlYW06IHAycExvY2FsU3RyZWFtLCByZW1vdGVTdHJlYW06IHAycFJlbW90ZVN0cmVhbSwgaXNDb25uZWN0ZWQ6IHAycElzQ29ubmVjdGVkLCBlcnJvcjogcDJwRXJyb3IsIHN0YXJ0Q2FsbCwgZW5kQ2FsbDogZW5kV2ViUlRDLCB0b2dnbGVWaWRlbzogcDJwVG9nZ2xlVmlkZW8sIHRvZ2dsZUF1ZGlvOiBwMnBUb2dnbGVBdWRpbywgaXNWaWRlb0VuYWJsZWQ6IHAycElzVmlkZW9FbmFibGVkLCBpc0F1ZGlvRW5hYmxlZDogcDJwSXNBdWRpb0VuYWJsZWQsIGFwcGx5RmlsdGVyLCBjdXJyZW50RmlsdGVyLCBzdGFydFNjcmVlblNoYXJlLCBzdG9wU2NyZWVuU2hhcmUsIGlzU2NyZWVuU2hhcmluZywgbG9jYWxWaWRlb1JlZiwgcmVtb3RlVmlkZW9SZWYsIH0gPSB1c2VXZWJSVEMoe1xuICAgICAgICBjYWxsSWQ6IGNhbGxJZCB8fCAnJyxcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IGNhbGxJbmZvPy5jb252ZXJzYXRpb25JZCB8fCAnJyxcbiAgICAgICAgaXNJbml0aWF0b3I6IGlzSW5pdGlhdG9yLFxuICAgICAgICBsb2NhbFVzZXJJZDogbG9jYWxVc2VySWQgfHwgJycsXG4gICAgICAgIHJlbW90ZVVzZXJJZDogY2FsbEluZm8/LnJlbW90ZVVzZXJJZCB8fCAnJyxcbiAgICB9KTtcbiAgICAvLyBMdcO0biBn4buNaSB1c2VMaXZlS2l0IMSR4buDIMSR4bqjbSBi4bqjbyBob29rcyBvcmRlciBraMO0bmcgxJHhu5VpXG4gICAgY29uc3QgeyBsb2NhbFN0cmVhbTogbGl2ZUtpdExvY2FsU3RyZWFtLCByZW1vdGVTdHJlYW1zOiBsaXZlS2l0UmVtb3RlU3RyZWFtcywgcmVtb3RlVHJhY2tzOiBsaXZlS2l0UmVtb3RlVHJhY2tzLCBpc0Nvbm5lY3RlZDogbGl2ZUtpdElzQ29ubmVjdGVkLCBlcnJvcjogbGl2ZUtpdEVycm9yLCBjb25uZWN0OiBjb25uZWN0TGl2ZUtpdCwgZGlzY29ubmVjdDogZGlzY29ubmVjdExpdmVLaXQsIHRvZ2dsZVZpZGVvOiBsaXZlS2l0VG9nZ2xlVmlkZW8sIHRvZ2dsZUF1ZGlvOiBsaXZlS2l0VG9nZ2xlQXVkaW8sIGlzVmlkZW9FbmFibGVkOiBsaXZlS2l0SXNWaWRlb0VuYWJsZWQsIGlzQXVkaW9FbmFibGVkOiBsaXZlS2l0SXNBdWRpb0VuYWJsZWQsIH0gPSB1c2VMaXZlS2l0KHtcbiAgICAgICAgcm9vbU5hbWU6IGNhbGxJbmZvPy5saXZla2l0Um9vbU5hbWUgfHwgJycsXG4gICAgICAgIHRva2VuOiBsaXZlS2l0VG9rZW4gfHwgJycsXG4gICAgICAgIHVybDogbGl2ZUtpdFVybCxcbiAgICB9KTtcbiAgICAvLyBDaOG7jW4gc3RyZWFtIHbDoCBjb250cm9scyBk4buxYSB0csOqbiBjYWxsIHR5cGVcbiAgICBjb25zdCBsb2NhbFN0cmVhbSA9IGlzUDJQQ2FsbCA/IHAycExvY2FsU3RyZWFtIDogbGl2ZUtpdExvY2FsU3RyZWFtO1xuICAgIGNvbnN0IHJlbW90ZVN0cmVhbSA9IGlzUDJQQ2FsbCA/IHAycFJlbW90ZVN0cmVhbSA6IG51bGw7XG4gICAgY29uc3QgaXNDb25uZWN0ZWQgPSBpc1AyUENhbGwgPyBwMnBJc0Nvbm5lY3RlZCA6IGxpdmVLaXRJc0Nvbm5lY3RlZDtcbiAgICBjb25zdCBlcnJvciA9IGlzUDJQQ2FsbCA/IHAycEVycm9yIDogbGl2ZUtpdEVycm9yO1xuICAgIGNvbnN0IHRvZ2dsZVZpZGVvID0gaXNQMlBDYWxsID8gcDJwVG9nZ2xlVmlkZW8gOiBsaXZlS2l0VG9nZ2xlVmlkZW87XG4gICAgY29uc3QgdG9nZ2xlQXVkaW8gPSBpc1AyUENhbGwgPyBwMnBUb2dnbGVBdWRpbyA6IGxpdmVLaXRUb2dnbGVBdWRpbztcbiAgICBjb25zdCBpc1ZpZGVvRW5hYmxlZCA9IGlzUDJQQ2FsbCA/IHAycElzVmlkZW9FbmFibGVkIDogbGl2ZUtpdElzVmlkZW9FbmFibGVkO1xuICAgIGNvbnN0IGlzQXVkaW9FbmFibGVkID0gaXNQMlBDYWxsID8gcDJwSXNBdWRpb0VuYWJsZWQgOiBsaXZlS2l0SXNBdWRpb0VuYWJsZWQ7XG4gICAgY29uc3QgY2FuVXNlRW5oYW5jZW1lbnRzID0gaXNQMlBDYWxsICYmIChjYWxsSW5mbz8udHlwZSA9PT0gJ3ZpZGVvJyk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjYW5Vc2VFbmhhbmNlbWVudHMpIHtcbiAgICAgICAgICAgIHNldFNob3dGaWx0ZXJQYW5lbChmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9LCBbY2FuVXNlRW5oYW5jZW1lbnRzXSk7XG4gICAgY29uc3QgaGFuZGxlVG9nZ2xlRmlsdGVyUGFuZWwgPSAoKSA9PiB7XG4gICAgICAgIGlmICghY2FuVXNlRW5oYW5jZW1lbnRzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZXRTaG93RmlsdGVyUGFuZWwoKHByZXYpID0+ICFwcmV2KTtcbiAgICB9O1xuICAgIC8vIFJlZiB0byB0cmFjayBpZiB3ZSd2ZSBhbHJlYWR5IGF1dG8tc3RhcnRlZFxuICAgIGNvbnN0IGhhc0F1dG9TdGFydGVkUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgICAvLyBSZWYgdG8gc3RvcmUgbGF0ZXN0IHN0YXJ0Q2FsbCBmdW5jdGlvbiB0byBhdm9pZCByZS10cmlnZ2VyaW5nXG4gICAgY29uc3Qgc3RhcnRDYWxsUmVmID0gdXNlUmVmKHN0YXJ0Q2FsbCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc3RhcnRDYWxsUmVmLmN1cnJlbnQgPSBzdGFydENhbGw7XG4gICAgfSwgW3N0YXJ0Q2FsbF0pO1xuICAgIC8vIENhbGN1bGF0ZSBjYWxsIGR1cmF0aW9uXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGlzQ29ubmVjdGVkICYmIGNhbGxTdGFydFRpbWUpIHtcbiAgICAgICAgICAgIGR1cmF0aW9uSW50ZXJ2YWxSZWYuY3VycmVudCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gY2FsbFN0YXJ0VGltZS5nZXRUaW1lKCkpIC8gMTAwMCk7XG4gICAgICAgICAgICAgICAgc2V0Q2FsbER1cmF0aW9uKGRpZmYpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZHVyYXRpb25JbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChkdXJhdGlvbkludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uSW50ZXJ2YWxSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkdXJhdGlvbkludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGR1cmF0aW9uSW50ZXJ2YWxSZWYuY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSwgW2lzQ29ubmVjdGVkLCBjYWxsU3RhcnRUaW1lXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGlzQ29ubmVjdGVkICYmICFjYWxsU3RhcnRUaW1lKSB7XG4gICAgICAgICAgICBzZXRDYWxsU3RhcnRUaW1lKG5ldyBEYXRlKCkpO1xuICAgICAgICB9XG4gICAgfSwgW2lzQ29ubmVjdGVkLCBjYWxsU3RhcnRUaW1lXSk7XG4gICAgLy8gRm9ybWF0IGR1cmF0aW9uIGFzIE1NOlNTIG9yIEhIOk1NOlNTXG4gICAgY29uc3QgZm9ybWF0RHVyYXRpb24gPSAoc2Vjb25kcykgPT4ge1xuICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICAgICAgICBjb25zdCBzZWNzID0gc2Vjb25kcyAlIDYwO1xuICAgICAgICBpZiAoaG91cnMgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgfTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGxJZCB8fCAhbG9jYWxVc2VySWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGxvYWRDYWxsSW5mbyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBMb2FkaW5nIGNhbGwgaW5mbyBmb3IgY2FsbElkOicsIGNhbGxJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbCA9IGF3YWl0IGdldENhbGwoY2FsbElkKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIENhbGwgaW5mbyBsb2FkZWQ6JywgY2FsbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3RlVXNlcklkID0gY2FsbC5wYXJ0aWNpcGFudHMuZmluZCgoaWQpID0+IFN0cmluZyhpZCkgIT09IGxvY2FsVXNlcklkKSB8fCAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBpc0luaXQgPSBTdHJpbmcoY2FsbC5pbml0aWF0b3JJZCkgPT09IGxvY2FsVXNlcklkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxUeXBlID0gY2FsbC5jYWxsVHlwZSB8fCAncDJwJztcbiAgICAgICAgICAgICAgICBzZXRDYWxsSW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBTdHJpbmcoY2FsbC5jb252ZXJzYXRpb25JZCksXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYXRvcklkOiBTdHJpbmcoY2FsbC5pbml0aWF0b3JJZCksXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVVzZXJJZDogU3RyaW5nKHJlbW90ZVVzZXJJZCksXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGNhbGwudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbFR5cGU6IGNhbGxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBsaXZla2l0Um9vbU5hbWU6IGNhbGwubWV0YWRhdGE/LmxpdmVraXRSb29tTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBjYWxsLnBhcnRpY2lwYW50cy5tYXAocCA9PiBTdHJpbmcocCkpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNldElzSW5pdGlhdG9yKGlzSW5pdCk7XG4gICAgICAgICAgICAgICAgLy8gTuG6v3UgbMOgIGN14buZYyBn4buNaSBuaMOzbSwgbOG6pXkgTGl2ZUtpdCB0b2tlblxuICAgICAgICAgICAgICAgIGlmIChjYWxsVHlwZSA9PT0gJ3NmdScgJiYgY2FsbC5tZXRhZGF0YT8ubGl2ZWtpdFJvb21OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCBnZXRMaXZlS2l0VG9rZW4oY2FsbElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExpdmVLaXRUb2tlbih0b2tlbkRhdGEudG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGl2ZUtpdFVybCh0b2tlbkRhdGEudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gTGl2ZUtpdCB0b2tlbiBvYnRhaW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYWxsU2NyZWVuXSBFcnJvciBnZXR0aW5nIExpdmVLaXQgdG9rZW46JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYWxsU2NyZWVuXSBFcnJvciBsb2FkaW5nIGNhbGwgaW5mbzonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gSWYgY2FsbCBub3QgZm91bmQsIHRyeSB0byBnZXQgaW5mbyBmcm9tIHNvY2tldCBvciB1c2UgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0NhbGxTY3JlZW5dIENhbGwgbm90IGZvdW5kICg0MDQpLCB0cnlpbmcgc29ja2V0IGV2ZW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZ2V0IGluZm8gZnJvbSBzb2NrZXQgZXZlbnRzIGluc3RlYWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gZ2V0U29ja2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgY2FsbCBpbmZvIGZyb20gc29ja2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXQub25jZSgnY2FsbDppbmZvJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jYWxsSWQgPT09IGNhbGxJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIEdvdCBjYWxsIGluZm8gZnJvbSBzb2NrZXQ6JywgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldENhbGxJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBkYXRhLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhdG9ySWQ6IGRhdGEuaW5pdGlhdG9ySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVVc2VySWQ6IGRhdGEucmVtb3RlVXNlcklkIHx8IGRhdGEuaW5pdGlhdG9ySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUgfHwgJ3ZpZGVvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzSW5pdGlhdG9yKFN0cmluZyhkYXRhLmluaXRpYXRvcklkKSA9PT0gbG9jYWxVc2VySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBsaXN0ZW4gZm9yIGluY29taW5nIGNhbGwgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldC5vbmNlKCdjYWxsOmluY29taW5nJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jYWxsSWQgPT09IGNhbGxJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIEdvdCBjYWxsIGluZm8gZnJvbSBjYWxsOmluY29taW5nOicsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDYWxsSW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogZGF0YS5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYXRvcklkOiBkYXRhLmluaXRpYXRvcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlVXNlcklkOiBkYXRhLmluaXRpYXRvcklkLCAvLyBGb3IgaW5jb21pbmcsIGluaXRpYXRvciBpcyB0aGUgcmVtb3RlIHVzZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSB8fCAndmlkZW8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXNJbml0aWF0b3IoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsb2FkQ2FsbEluZm8oKTtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gZ2V0U29ja2V0KCk7XG4gICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUNhbGxJbmNvbWluZyA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY2FsbElkICE9PSBjYWxsSWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIFJlY2VpdmVkIGNhbGw6aW5jb21pbmcgZXZlbnQ6JywgZGF0YSk7XG4gICAgICAgICAgICAgICAgc2V0Q2FsbEluZm8oe1xuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogZGF0YS5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhdG9ySWQ6IGRhdGEuaW5pdGlhdG9ySWQsXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVVzZXJJZDogZGF0YS5yZW1vdGVVc2VySWQgfHwgZGF0YS5pbml0aWF0b3JJZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBjYWxsVHlwZTogZGF0YS5jYWxsVHlwZSB8fCAncDJwJyxcbiAgICAgICAgICAgICAgICAgICAgbGl2ZWtpdFJvb21OYW1lOiBkYXRhLmxpdmVraXRSb29tTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLnBhcnRpY2lwYW50cyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZXRJc0luaXRpYXRvcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gTuG6v3UgbMOgIGN14buZYyBn4buNaSBuaMOzbSwgbOG6pXkgTGl2ZUtpdCB0b2tlblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNhbGxUeXBlID09PSAnc2Z1JyAmJiBkYXRhLmxpdmVraXRSb29tTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgZ2V0TGl2ZUtpdFRva2VuKGNhbGxJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMaXZlS2l0VG9rZW4odG9rZW5EYXRhLnRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExpdmVLaXRVcmwodG9rZW5EYXRhLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIExpdmVLaXQgdG9rZW4gb2J0YWluZWQgZnJvbSBpbmNvbWluZyBjYWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0NhbGxTY3JlZW5dIEVycm9yIGdldHRpbmcgTGl2ZUtpdCB0b2tlbjonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUNhbGxJbmZvID0gKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jYWxsSWQgIT09IGNhbGxJZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gUmVjZWl2ZWQgY2FsbDppbmZvIGV2ZW50OicsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW90ZVVzZXJJZCA9IGRhdGEucGFydGljaXBhbnRzLmZpbmQoKGlkKSA9PiBTdHJpbmcoaWQpICE9PSBsb2NhbFVzZXJJZCkgfHwgJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNJbml0ID0gU3RyaW5nKGRhdGEuaW5pdGlhdG9ySWQpID09PSBsb2NhbFVzZXJJZDtcbiAgICAgICAgICAgICAgICBzZXRDYWxsSW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBkYXRhLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWF0b3JJZDogU3RyaW5nKGRhdGEuaW5pdGlhdG9ySWQpLFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVVc2VySWQ6IFN0cmluZyhyZW1vdGVVc2VySWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2V0SXNJbml0aWF0b3IoaXNJbml0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVDYWxsQWNjZXB0ZWQgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNhbGxJZCAhPT0gY2FsbElkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBSZWNlaXZlZCBjYWxsOmFjY2VwdGVkIGV2ZW50OicsIGRhdGEpO1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjYWxsIGluZm8gaWYgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb252ZXJzYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1vdGVVc2VySWQgPSBkYXRhLnBhcnRpY2lwYW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBkYXRhLnBhcnRpY2lwYW50cy5maW5kKChpZCkgPT4gU3RyaW5nKGlkKSAhPT0gbG9jYWxVc2VySWQpIHx8ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGEucmVtb3RlVXNlcklkIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICBzZXRDYWxsSW5mbyhwcmV2ID0+IHByZXYgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGRhdGEuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVVc2VySWQ6IHJlbW90ZVVzZXJJZCB8fCBwcmV2LnJlbW90ZVVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSB8fCBwcmV2LnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogZGF0YS5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYXRvcklkOiBkYXRhLmluaXRpYXRvcklkIHx8IGxvY2FsVXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlVXNlcklkOiByZW1vdGVVc2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUgfHwgJ3ZpZGVvJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIHRoZSBpbml0aWF0b3IgYW5kIGNhbGwgaXMgYWNjZXB0ZWQsIGF1dG8tc3RhcnQgdGhlIGNhbGxcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGF1dG8tc3RhcnQgb25jZVxuICAgICAgICAgICAgICAgIGlmIChpc0luaXRpYXRvciAmJiAhaXNDb25uZWN0ZWQgJiYgIWhhc0F1dG9TdGFydGVkUmVmLmN1cnJlbnQgJiYgY2FsbEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBDYWxsIGFjY2VwdGVkLCBhdXRvLXN0YXJ0aW5nIGNhbGwuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBDYWxsSW5mbyBhdmFpbGFibGU6JywgY2FsbEluZm8pO1xuICAgICAgICAgICAgICAgICAgICBoYXNBdXRvU3RhcnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIEF0dGVtcHRpbmcgdG8gc3RhcnQgY2FsbCBhcyBpbml0aWF0b3IuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsSW5mby5jYWxsVHlwZSA9PT0gJ3NmdScgJiYgbGl2ZUtpdFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgTGl2ZUtpdCBjb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29ubmVjdExpdmVLaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSByZWYgdG8gY2FsbCBsYXRlc3Qgc3RhcnRDYWxsIHdpdGhvdXQgdHJpZ2dlcmluZyByZS1ydW5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRDYWxsUmVmLmN1cnJlbnQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBDYWxsIHN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5IGFzIGluaXRpYXRvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYWxsU2NyZWVuXSBFcnJvciBhdXRvLXN0YXJ0aW5nIGNhbGw6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXV0b1N0YXJ0ZWRSZWYuY3VycmVudCA9IGZhbHNlOyAvLyBSZXNldCBvbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlQ2FsbEFjdGl2ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY2FsbElkICE9PSBjYWxsSWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIFJlY2VpdmVkIGNhbGw6YWN0aXZlIGV2ZW50OicsIGRhdGEpO1xuICAgICAgICAgICAgICAgIC8vIENhbGwgaXMgbm93IGFjdGl2ZSwgZW5zdXJlIHdlJ3JlIGNvbm5lY3RlZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNvY2tldC5vbignY2FsbDppbmNvbWluZycsIGhhbmRsZUNhbGxJbmNvbWluZyk7XG4gICAgICAgICAgICBzb2NrZXQub24oJ2NhbGw6aW5mbycsIGhhbmRsZUNhbGxJbmZvKTtcbiAgICAgICAgICAgIHNvY2tldC5vbignY2FsbDphY2NlcHRlZCcsIGhhbmRsZUNhbGxBY2NlcHRlZCk7XG4gICAgICAgICAgICBzb2NrZXQub24oJ2NhbGw6YWN0aXZlJywgaGFuZGxlQ2FsbEFjdGl2ZSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNvY2tldC5vZmYoJ2NhbGw6aW5jb21pbmcnLCBoYW5kbGVDYWxsSW5jb21pbmcpO1xuICAgICAgICAgICAgICAgIHNvY2tldC5vZmYoJ2NhbGw6aW5mbycsIGhhbmRsZUNhbGxJbmZvKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQub2ZmKCdjYWxsOmFjY2VwdGVkJywgaGFuZGxlQ2FsbEFjY2VwdGVkKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQub2ZmKCdjYWxsOmFjdGl2ZScsIGhhbmRsZUNhbGxBY3RpdmUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sIFtjYWxsSWQsIGxvY2FsVXNlcklkXSk7XG4gICAgLy8gUmVzZXQgYXV0by1zdGFydCBmbGFnIHdoZW4gY2FsbCBjb25uZWN0c1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChpc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgaGFzQXV0b1N0YXJ0ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSwgW2lzQ29ubmVjdGVkXSk7XG4gICAgLy8gQXV0by1zdGFydCBjYWxsIGZvciBpbml0aWF0b3Igd2hlbiBjYWxsSW5mbyBpcyByZWFkeVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIC8vIFNraXAgaWYgYWxyZWFkeSBjb25uZWN0ZWQgb3IgYWxyZWFkeSBzdGFydGVkXG4gICAgICAgIGlmIChpc0Nvbm5lY3RlZCB8fCBoYXNBdXRvU3RhcnRlZFJlZi5jdXJyZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBJbml0aWF0b3I6IGF1dG8tc3RhcnQgd2hlbiBjYWxsSW5mbyBpcyBmdWxseSByZWFkeSAoaW5jbHVkaW5nIHJlbW90ZVVzZXJJZCBmb3IgUDJQKVxuICAgICAgICBjb25zdCBpc1NGVSA9IGNhbGxJbmZvPy5jYWxsVHlwZSA9PT0gJ3NmdSc7XG4gICAgICAgIGNvbnN0IGlzUDJQUmVhZHkgPSAhaXNTRlUgJiYgY2FsbEluZm8/LnJlbW90ZVVzZXJJZDtcbiAgICAgICAgY29uc3QgaXNTRlVSZWFkeSA9IGlzU0ZVICYmIGNhbGxJbmZvPy5saXZla2l0Um9vbU5hbWU7XG4gICAgICAgIGlmIChpc0luaXRpYXRvciAmJiBjYWxsSW5mbyAmJiBjYWxsSW5mby5jb252ZXJzYXRpb25JZCAmJiAoaXNQMlBSZWFkeSB8fCBpc1NGVVJlYWR5KSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBBdXRvLXN0YXJ0IGVmZmVjdCB0cmlnZ2VyZWQgZm9yIGluaXRpYXRvcjonLCB7XG4gICAgICAgICAgICAgICAgaXNJbml0aWF0b3IsXG4gICAgICAgICAgICAgICAgaXNDb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgY2FsbEluZm8sXG4gICAgICAgICAgICAgICAgaXNQMlBSZWFkeSxcbiAgICAgICAgICAgICAgICBpc1NGVVJlYWR5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoYXNBdXRvU3RhcnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gU3RhcnRpbmcgY2FsbCBhcyBpbml0aWF0b3IgZnJvbSBhdXRvLXN0YXJ0IGVmZmVjdC4uLicpO1xuICAgICAgICAgICAgLy8gRGVsYXkgc2xpZ2h0bHkgdG8gZW5zdXJlIGV2ZXJ5dGhpbmcgaXMgc2V0IHVwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTRlUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU0ZVOiBjb25uZWN0IHRvIExpdmVLaXRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpdmVLaXRUb2tlbiB8fCBjYWxsSW5mby5saXZla2l0Um9vbU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gQ29ubmVjdGluZyB0byBMaXZlS2l0Li4uJywgeyBoYXNUb2tlbjogISFsaXZlS2l0VG9rZW4gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbm5lY3RMaXZlS2l0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0NhbGxTY3JlZW5dIEVycm9yIGNvbm5lY3RpbmcgdG8gTGl2ZUtpdDonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0F1dG9TdGFydGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYWxsU2NyZWVuXSBMaXZlS2l0IHRva2VuIGFuZCByb29tIG5hbWUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXV0b1N0YXJ0ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBQMlA6IHN0YXJ0IFdlYlJUQyBjYWxsXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gU3RhcnRpbmcgUDJQIGNhbGwgd2l0aCByZW1vdGVVc2VySWQ6JywgY2FsbEluZm8ucmVtb3RlVXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDYWxsUmVmLmN1cnJlbnQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0g4pyFIENhbGwgc3RhcnRlZCBhcyBpbml0aWF0b3IgZnJvbSBhdXRvLXN0YXJ0IGVmZmVjdCcpO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0NhbGxTY3JlZW5dIOKdjCBFcnJvciBzdGFydGluZyBjYWxsIGFzIGluaXRpYXRvcjonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXV0b1N0YXJ0ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vbi1pbml0aWF0b3I6IGF1dG8tc3RhcnQgd2hlbiBhY2NlcHRlZCBmcm9tIG1vZGFsXG4gICAgICAgIGVsc2UgaWYgKGFjY2VwdGVkRnJvbU1vZGFsICYmICFpc0luaXRpYXRvciAmJiBjYWxsSW5mbyAmJiBjYWxsSW5mby5jb252ZXJzYXRpb25JZCAmJiAoaXNQMlBSZWFkeSB8fCBpc1NGVVJlYWR5KSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDYWxsU2NyZWVuXSBBdXRvLXN0YXJ0IGVmZmVjdCB0cmlnZ2VyZWQgZm9yIG5vbi1pbml0aWF0b3I6Jywge1xuICAgICAgICAgICAgICAgIGFjY2VwdGVkRnJvbU1vZGFsLFxuICAgICAgICAgICAgICAgIGlzSW5pdGlhdG9yLFxuICAgICAgICAgICAgICAgIGlzQ29ubmVjdGVkLFxuICAgICAgICAgICAgICAgIGNhbGxJbmZvLFxuICAgICAgICAgICAgICAgIGlzUDJQUmVhZHksXG4gICAgICAgICAgICAgICAgaXNTRlVSZWFkeSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFzQXV0b1N0YXJ0ZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIFN0YXJ0aW5nIGNhbGwgZnJvbSBhdXRvLXN0YXJ0IGVmZmVjdC4uLicpO1xuICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU0ZVKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNGVTogY29ubmVjdCB0byBMaXZlS2l0XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXZlS2l0VG9rZW4gfHwgY2FsbEluZm8ubGl2ZWtpdFJvb21OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIENvbm5lY3RpbmcgdG8gTGl2ZUtpdC4uLicsIHsgaGFzVG9rZW46ICEhbGl2ZUtpdFRva2VuIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0TGl2ZUtpdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tDYWxsU2NyZWVuXSBFcnJvciBjb25uZWN0aW5nIHRvIExpdmVLaXQ6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNBdXRvU3RhcnRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQ2FsbFNjcmVlbl0gTGl2ZUtpdCB0b2tlbiBhbmQgcm9vbSBuYW1lIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0F1dG9TdGFydGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUDJQOiBzdGFydCBXZWJSVEMgY2FsbFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIFN0YXJ0aW5nIFAyUCBjYWxsIHdpdGggcmVtb3RlVXNlcklkOicsIGNhbGxJbmZvLnJlbW90ZVVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Q2FsbFJlZi5jdXJyZW50KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIOKchSBDYWxsIHN0YXJ0ZWQgZnJvbSBhdXRvLXN0YXJ0IGVmZmVjdCcpO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0NhbGxTY3JlZW5dIOKdjCBFcnJvciBzdGFydGluZyBjYWxsIGZyb20gYXV0by1zdGFydCBlZmZlY3Q6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0F1dG9TdGFydGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuICAgIH0sIFthY2NlcHRlZEZyb21Nb2RhbCwgaXNJbml0aWF0b3IsIGlzQ29ubmVjdGVkLCBjYWxsSW5mbywgbGl2ZUtpdFRva2VuLCBjb25uZWN0TGl2ZUtpdF0pO1xuICAgIC8vIEF1dG8tY29ubmVjdCB0byBMaXZlS2l0IHdoZW4gdG9rZW4gYmVjb21lcyBhdmFpbGFibGUgKGZvciBTRlUgY2FsbHMpXG4gICAgY29uc3QgaGFzQXV0b0Nvbm5lY3RlZExpdmVLaXRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChsaXZlS2l0VG9rZW4gJiZcbiAgICAgICAgICAgIGNhbGxJbmZvPy5jYWxsVHlwZSA9PT0gJ3NmdScgJiZcbiAgICAgICAgICAgICFpc0Nvbm5lY3RlZCAmJlxuICAgICAgICAgICAgIWhhc0F1dG9Db25uZWN0ZWRMaXZlS2l0UmVmLmN1cnJlbnQgJiZcbiAgICAgICAgICAgIChhY2NlcHRlZEZyb21Nb2RhbCB8fCBpc0luaXRpYXRvcikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gTGl2ZUtpdCB0b2tlbiBhdmFpbGFibGUsIGF1dG8tY29ubmVjdGluZy4uLicsIHtcbiAgICAgICAgICAgICAgICBoYXNUb2tlbjogISFsaXZlS2l0VG9rZW4sXG4gICAgICAgICAgICAgICAgY2FsbFR5cGU6IGNhbGxJbmZvLmNhbGxUeXBlLFxuICAgICAgICAgICAgICAgIGlzQ29ubmVjdGVkLFxuICAgICAgICAgICAgICAgIGFjY2VwdGVkRnJvbU1vZGFsLFxuICAgICAgICAgICAgICAgIGlzSW5pdGlhdG9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhc0F1dG9Db25uZWN0ZWRMaXZlS2l0UmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgY29ubmVjdExpdmVLaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIOKchSBBdXRvLWNvbm5lY3RlZCB0byBMaXZlS2l0IHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQ2FsbFNjcmVlbl0g4p2MIEVycm9yIGF1dG8tY29ubmVjdGluZyB0byBMaXZlS2l0OicsIGVycik7XG4gICAgICAgICAgICAgICAgaGFzQXV0b0Nvbm5lY3RlZExpdmVLaXRSZWYuY3VycmVudCA9IGZhbHNlOyAvLyBBbGxvdyByZXRyeVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCBbbGl2ZUtpdFRva2VuLCBjYWxsSW5mbz8uY2FsbFR5cGUsIGlzQ29ubmVjdGVkLCBhY2NlcHRlZEZyb21Nb2RhbCwgaXNJbml0aWF0b3IsIGNvbm5lY3RMaXZlS2l0XSk7XG4gICAgY29uc3QgaGFuZGxlQWNjZXB0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGxJZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gQWNjZXB0aW5nIGNhbGw6JywgY2FsbElkKTtcbiAgICAgICAgICAgIGF3YWl0IGFjY2VwdENhbGwoY2FsbElkKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gQ2FsbCBhY2NlcHRlZCwgc3RhcnRpbmcgY2FsbC4uLicpO1xuICAgICAgICAgICAgLy8gU3RhcnQgdGhlIGNhbGwgaW1tZWRpYXRlbHkgYWZ0ZXIgYWNjZXB0aW5nXG4gICAgICAgICAgICBpZiAoY2FsbEluZm8/LmNhbGxUeXBlID09PSAnc2Z1JyAmJiBsaXZlS2l0VG9rZW4pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0TGl2ZUtpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc3RhcnRDYWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0NhbGxTY3JlZW5dIENhbGwgc3RhcnRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQ2FsbFNjcmVlbl0gRXJyb3IgYWNjZXB0aW5nIGNhbGw6JywgZXJyKTtcbiAgICAgICAgICAgIC8vIFRyeSB0byBzdGFydCBjYWxsIGFueXdheSBpZiBhY2NlcHQgc3VjY2VlZGVkIGJ1dCBzdGFydENhbGwgZmFpbGVkXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsSW5mbz8uY2FsbFR5cGUgPT09ICdzZnUnICYmIGxpdmVLaXRUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0TGl2ZUtpdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RhcnRDYWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKHN0YXJ0RXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0NhbGxTY3JlZW5dIEVycm9yIHN0YXJ0aW5nIGNhbGwgYWZ0ZXIgYWNjZXB0OicsIHN0YXJ0RXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlUmVqZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGxJZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHJlamVjdENhbGwoY2FsbElkKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWplY3RpbmcgY2FsbDonLCBlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVFbmRDYWxsID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGxJZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChpc1AyUENhbGwpIHtcbiAgICAgICAgICAgICAgICBlbmRXZWJSVEMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RMaXZlS2l0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBlbmRDYWxsQVBJKGNhbGxJZCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW5kaW5nIGNhbGw6JywgZXJyKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlRmlsdGVyU2VsZWN0ID0gYXN5bmMgKGZpbHRlcikgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXBwbHlGaWx0ZXIoZmlsdGVyKTtcbiAgICAgICAgICAgIHNldFNob3dGaWx0ZXJQYW5lbChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQ2FsbFNjcmVlbl0gRXJyb3IgYXBwbHlpbmcgZmlsdGVyOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlU2NyZWVuU2hhcmVUb2dnbGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoaXNTY3JlZW5TaGFyaW5nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc3RvcFNjcmVlblNoYXJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzdGFydFNjcmVlblNoYXJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQ2FsbFNjcmVlbl0gU2NyZWVuIHNoYXJlIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gQ2h1eeG7g24gxJHhu5VpIExpdmVLaXQgcmVtb3RlU3RyZWFtcyB0aMOgbmggZm9ybWF0IGNobyBHcm91cENhbGxHcmlkXG4gICAgLy8gUEjhuqJJIMSR4bq3dCB0csaw4bubYyBlYXJseSByZXR1cm5zIMSR4buDIHR1w6JuIHRo4bunIFJ1bGVzIG9mIEhvb2tzXG4gICAgY29uc3QgZ3JvdXBDYWxsUGFydGljaXBhbnRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICAgIGlmIChpc1AyUENhbGwpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gQnVpbGRpbmcgZ3JvdXBDYWxsUGFydGljaXBhbnRzIGZyb20gbGl2ZUtpdFJlbW90ZVN0cmVhbXM6Jywge1xuICAgICAgICAgICAgcmVtb3RlU3RyZWFtc1NpemU6IGxpdmVLaXRSZW1vdGVTdHJlYW1zLnNpemUsXG4gICAgICAgICAgICByZW1vdGVTdHJlYW1LZXlzOiBBcnJheS5mcm9tKGxpdmVLaXRSZW1vdGVTdHJlYW1zLmtleXMoKSlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IFtdO1xuICAgICAgICBsaXZlS2l0UmVtb3RlU3RyZWFtcy5mb3JFYWNoKChzdHJlYW0sIHBhcnRpY2lwYW50SWQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ2FsbFNjcmVlbl0gQWRkaW5nIHJlbW90ZSBwYXJ0aWNpcGFudDonLCB7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgICAgICB0cmFja0NvdW50OiBzdHJlYW0uZ2V0VHJhY2tzKCkubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHRyYWNrczogc3RyZWFtLmdldFRyYWNrcygpLm1hcCh0ID0+ICh7IGtpbmQ6IHQua2luZCwgZW5hYmxlZDogdC5lbmFibGVkIH0pKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYXJ0aWNpcGFudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogTOG6pXkgbmFtZSB2w6AgYXZhdGFyIHThu6sgcGFydGljaXBhbnQgaW5mb1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGFydGljaXBhbnRzO1xuICAgIH0sIFtsaXZlS2l0UmVtb3RlU3RyZWFtcywgaXNQMlBDYWxsXSk7XG4gICAgY29uc3Qgb3Bwb25lbnROYW1lID0gb3Bwb25lbnRJbmZvPy5uYW1lIHx8ICdVbmtub3duJztcbiAgICBjb25zdCBvcHBvbmVudEF2YXRhciA9IG9wcG9uZW50SW5mbz8uYXZhdGFyO1xuICAgIGlmICghY2FsbElkKSB7XG4gICAgICAgIHJldHVybiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLXNjcmVlblwiLCBjaGlsZHJlbjogX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLWxvYWRpbmdcIiwgY2hpbGRyZW46IFwiSW52YWxpZCBjYWxsIElEXCIgfSkgfSkpO1xuICAgIH1cbiAgICAvLyBTaG93IGxvYWRpbmcgb25seSBpZiB3ZSBkb24ndCBoYXZlIGNhbGxJbmZvIHlldFxuICAgIGlmICghY2FsbEluZm8pIHtcbiAgICAgICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLXNjcmVlblwiLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FsbC1sb2FkaW5nXCIsIGNoaWxkcmVuOiBcIkxvYWRpbmcgY2FsbC4uLlwiIH0pLCBfanN4cyhcImRpdlwiLCB7IHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogJzIwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJzUwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTRweCdcbiAgICAgICAgICAgICAgICAgICAgfSwgY2hpbGRyZW46IFtcIkNhbGwgSUQ6IFwiLCBjYWxsSWRdIH0pLCBfanN4KFwiZGl2XCIsIHsgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnNjBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnNTAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyknLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzQwMHB4J1xuICAgICAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbjogXCJOXFx1MUVCRnUgY2FsbCBraFxcdTAwRjRuZyB0XFx1MDBFQ20gdGhcXHUxRUE1eSwgY1xcdTAwRjMgdGhcXHUxRUMzIFxcdTAxMTFcXHUwMEUzIGJcXHUxRUNCIGtcXHUxRUJGdCB0aFxcdTAwRkFjIGhvXFx1MUVCN2MgYmFja2VuZCBjaFxcdTAxQjBhIGNcXHUwMEYzIGVuZHBvaW50IEdFVCAvY2FsbHMvOmNhbGxJZFwiIH0pXSB9KSk7XG4gICAgfVxuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FsbC1zY3JlZW5cIiwgY2hpbGRyZW46IFshaXNQMlBDYWxsICYmIGNhbGxJbmZvLmNhbGxUeXBlID09PSAnc2Z1JyA/IChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtbWFpbi12aWRlb1wiLCBzdHlsZTogeyB3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICcxMDAlJywgYmFja2dyb3VuZDogJyMwMDAnIH0sIGNoaWxkcmVuOiBpc0Nvbm5lY3RlZCAmJiAobG9jYWxTdHJlYW0gfHwgZ3JvdXBDYWxsUGFydGljaXBhbnRzLmxlbmd0aCA+IDApID8gKF9qc3goR3JvdXBDYWxsR3JpZCwgeyBwYXJ0aWNpcGFudHM6IGdyb3VwQ2FsbFBhcnRpY2lwYW50cywgbG9jYWxTdHJlYW06IGxvY2FsU3RyZWFtLCBsb2NhbFBhcnRpY2lwYW50SWQ6IGxvY2FsVXNlcklkIHx8ICcnLCByZW1vdGVUcmFja3M6IGxpdmVLaXRSZW1vdGVUcmFja3MgfSkpIDogKF9qc3hzKFwiZGl2XCIsIHsgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZidcbiAgICAgICAgICAgICAgICAgICAgfSwgY2hpbGRyZW46IFshbGl2ZUtpdFRva2VuID8gKF9qc3hzKF9GcmFnbWVudCwgeyBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBzdHlsZTogeyBmb250U2l6ZTogJzE4cHgnLCBtYXJnaW5Cb3R0b206ICcxMHB4JyB9LCBjaGlsZHJlbjogXCJcXHUwMTEwYW5nIGxcXHUxRUE1eSB0b2tlbi4uLlwiIH0pLCBfanN4KFwiZGl2XCIsIHsgc3R5bGU6IHsgZm9udFNpemU6ICcxNHB4JywgY29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNiknIH0sIGNoaWxkcmVuOiBcIlZ1aSBsXFx1MDBGMm5nIFxcdTAxMTFcXHUxRUUzaVwiIH0pXSB9KSkgOiAhaXNDb25uZWN0ZWQgPyAoX2pzeHMoX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IHN0eWxlOiB7IGZvbnRTaXplOiAnMThweCcsIG1hcmdpbkJvdHRvbTogJzEwcHgnIH0sIGNoaWxkcmVuOiBcIlxcdTAxMTBhbmcga1xcdTFFQkZ0IG5cXHUxRUQxaS4uLlwiIH0pLCBfanN4KFwiZGl2XCIsIHsgc3R5bGU6IHsgZm9udFNpemU6ICcxNHB4JywgY29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNiknIH0sIGNoaWxkcmVuOiBcIlxcdTAxMTBhbmcgdGhhbSBnaWEgY3VcXHUxRUQ5YyBnXFx1MUVDRGkgbmhcXHUwMEYzbVwiIH0pXSB9KSkgOiAoX2pzeHMoX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IHN0eWxlOiB7IGZvbnRTaXplOiAnMThweCcsIG1hcmdpbkJvdHRvbTogJzEwcHgnIH0sIGNoaWxkcmVuOiBcIlxcdTAxMTBhbmcgdFxcdTFFQTNpIHZpZGVvLi4uXCIgfSksIF9qc3goXCJkaXZcIiwgeyBzdHlsZTogeyBmb250U2l6ZTogJzE0cHgnLCBjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC42KScgfSwgY2hpbGRyZW46IFwiVnVpIGxcXHUwMEYybmcgXFx1MDExMVxcdTFFRTNpXCIgfSldIH0pKSwgZXJyb3IgJiYgKF9qc3goXCJkaXZcIiwgeyBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcyMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzEwcHggMjBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwwLDAsMC4yKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzhweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmNmI2YidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbjogZXJyb3IgfSkpXSB9KSkgfSkpIDogKF9qc3hzKF9GcmFnbWVudCwgeyBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FsbC1tYWluLXZpZGVvXCIsIGNoaWxkcmVuOiByZW1vdGVTdHJlYW0gPyAoX2pzeChcInZpZGVvXCIsIHsgcmVmOiByZW1vdGVWaWRlb1JlZiwgYXV0b1BsYXk6IHRydWUsIHBsYXlzSW5saW5lOiB0cnVlLCBjbGFzc05hbWU6IFwiY2FsbC12aWRlby1yZW1vdGVcIiB9KSkgOiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FsbC1hdmF0YXItY29udGFpbmVyXCIsIGNoaWxkcmVuOiBbb3Bwb25lbnRBdmF0YXIgPyAoX2pzeChcImltZ1wiLCB7IHNyYzogb3Bwb25lbnRBdmF0YXIsIGFsdDogb3Bwb25lbnROYW1lLCBjbGFzc05hbWU6IFwiY2FsbC1hdmF0YXJcIiB9KSkgOiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLWF2YXRhci1wbGFjZWhvbGRlclwiLCBjaGlsZHJlbjogb3Bwb25lbnROYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIH0pKSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLW5hbWVcIiwgY2hpbGRyZW46IG9wcG9uZW50TmFtZSB9KSwgIWlzQ29ubmVjdGVkICYmIChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtc3RhdHVzXCIsIGNoaWxkcmVuOiBpc0luaXRpYXRvciA/ICfEkGFuZyBn4buNaS4uLicgOiAoYWNjZXB0ZWRGcm9tTW9kYWwgPyAnxJBhbmcga+G6v3QgbuG7kWkuLi4nIDogJ0N14buZYyBn4buNaSDEkeG6v24uLi4nKSB9KSldIH0pKSB9KSwgY2FsbEluZm8udHlwZSA9PT0gJ3ZpZGVvJyAmJiBsb2NhbFN0cmVhbSAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLXNlbGYtdmlld1wiLCBjaGlsZHJlbjogX2pzeChcInZpZGVvXCIsIHsgcmVmOiBsb2NhbFZpZGVvUmVmLCBhdXRvUGxheTogdHJ1ZSwgcGxheXNJbmxpbmU6IHRydWUsIG11dGVkOiB0cnVlLCBjbGFzc05hbWU6IFwiY2FsbC12aWRlby1sb2NhbFwiIH0pIH0pKV0gfSkpLCBpc0Nvbm5lY3RlZCAmJiBjYWxsRHVyYXRpb24gPiAwICYmIChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtZHVyYXRpb25cIiwgY2hpbGRyZW46IGZvcm1hdER1cmF0aW9uKGNhbGxEdXJhdGlvbikgfSkpLCBlcnJvciAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLWVycm9yLWJhbm5lclwiLCBjaGlsZHJlbjogZXJyb3IgfSkpLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLWNvbnRyb2xzXCIsIGNoaWxkcmVuOiBbIWlzSW5pdGlhdG9yICYmICFpc0Nvbm5lY3RlZCAmJiAhYWNjZXB0ZWRGcm9tTW9kYWwgJiYgKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtaW5jb21pbmctY29udHJvbHNcIiwgY2hpbGRyZW46IFtfanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtY29udHJvbC1idG4gY2FsbC1jb250cm9sLWFjY2VwdFwiLCBvbkNsaWNrOiBoYW5kbGVBY2NlcHQsIHRpdGxlOiBcIkNoXFx1MUVBNXAgbmhcXHUxRUFEblwiLCBjaGlsZHJlbjogX2pzeChcInN2Z1wiLCB7IHdpZHRoOiBcIjI0XCIsIGhlaWdodDogXCIyNFwiLCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLCBmaWxsOiBcIm5vbmVcIiwgY2hpbGRyZW46IF9qc3goXCJwYXRoXCIsIHsgZDogXCJNMjAgNkw5IDE3TDQgMTJcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VXaWR0aDogXCIyXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KSB9KSB9KSwgX2pzeChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLWNvbnRyb2wtYnRuIGNhbGwtY29udHJvbC1yZWplY3RcIiwgb25DbGljazogaGFuZGxlUmVqZWN0LCB0aXRsZTogXCJUXFx1MUVFQiBjaFxcdTFFRDFpXCIsIGNoaWxkcmVuOiBfanN4KFwic3ZnXCIsIHsgd2lkdGg6IFwiMjRcIiwgaGVpZ2h0OiBcIjI0XCIsIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIsIGZpbGw6IFwibm9uZVwiLCBjaGlsZHJlbjogX2pzeChcInBhdGhcIiwgeyBkOiBcIk0xOCA2TDYgMThNNiA2TDE4IDE4XCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSkgfSkgfSldIH0pKSwgaXNDb25uZWN0ZWQgJiYgKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtYWN0aXZlLWNvbnRyb2xzXCIsIGNoaWxkcmVuOiBbX2pzeChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLWNvbnRyb2wtYnRuIGNhbGwtY29udHJvbC1zZWNvbmRhcnlcIiwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIGNhbGxJbmZvPy5jb252ZXJzYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9jaGF0LyR7Y2FsbEluZm8uY29udmVyc2F0aW9uSWR9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGl0bGU6IFwiVGluIG5oXFx1MUVBRm5cIiwgY2hpbGRyZW46IF9qc3goXCJzdmdcIiwgeyB3aWR0aDogXCIyNFwiLCBoZWlnaHQ6IFwiMjRcIiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiwgZmlsbDogXCJub25lXCIsIGNoaWxkcmVuOiBfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTIxIDE1QzIxIDE1LjUzMDQgMjAuNzg5MyAxNi4wMzkxIDIwLjQxNDIgMTYuNDE0MkMyMC4wMzkxIDE2Ljc4OTMgMTkuNTMwNCAxNyAxOSAxN0g3TDMgMjFWNUMzIDQuNDY5NTcgMy4yMTA3MSAzLjk2MDg2IDMuNTg1NzkgMy41ODU3OUMzLjk2MDg2IDMuMjEwNzEgNC40Njk1NyAzIDUgM0gxOUMxOS41MzA0IDMgMjAuMDM5MSAzLjIxMDcxIDIwLjQxNDIgMy41ODU3OUMyMC43ODkzIDMuOTYwODYgMjEgNC40Njk1NyAyMSA1VjE1WlwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjJcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiIH0pIH0pIH0pLCBjYW5Vc2VFbmhhbmNlbWVudHMgJiYgKF9qc3goXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGBjYWxsLWNvbnRyb2wtYnRuIGNhbGwtY29udHJvbC1zZWNvbmRhcnkgJHtzaG93RmlsdGVyUGFuZWwgfHwgY3VycmVudEZpbHRlciAhPT0gJ25vbmUnID8gJ2NhbGwtY29udHJvbC1hY3RpdmUnIDogJyd9YCwgdGl0bGU6IFwiQlxcdTFFRDkgbFxcdTFFQ0RjIGxcXHUwMEUwbSBcXHUwMTExXFx1MUVCOXBcIiwgb25DbGljazogaGFuZGxlVG9nZ2xlRmlsdGVyUGFuZWwsIGNoaWxkcmVuOiBfanN4cyhcInN2Z1wiLCB7IHdpZHRoOiBcIjIyXCIsIGhlaWdodDogXCIyMlwiLCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLCBmaWxsOiBcIm5vbmVcIiwgY2hpbGRyZW46IFtfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTEyIDNMMTMuNSA3LjVMMTggOUwxMy41IDEwLjVMMTIgMTVMMTAuNSAxMC41TDYgOUwxMC41IDcuNUwxMiAzWlwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjEuNlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNNSAxNkg5XCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMS42XCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiB9KSwgX2pzeChcInBhdGhcIiwgeyBkOiBcIk0xNSAxNkgxOVwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjEuNlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSldIH0pIH0pKSwgY2FuVXNlRW5oYW5jZW1lbnRzICYmIChfanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBgY2FsbC1jb250cm9sLWJ0biBjYWxsLWNvbnRyb2wtc2Vjb25kYXJ5ICR7aXNTY3JlZW5TaGFyaW5nID8gJ2NhbGwtY29udHJvbC1hY3RpdmUnIDogJyd9YCwgdGl0bGU6IGlzU2NyZWVuU2hhcmluZyA/ICdE4burbmcgY2hpYSBz4bq7IG3DoG4gaMOsbmgnIDogJ0NoaWEgc+G6uyBtw6BuIGjDrG5oJywgb25DbGljazogaGFuZGxlU2NyZWVuU2hhcmVUb2dnbGUsIGNoaWxkcmVuOiBpc1NjcmVlblNoYXJpbmcgPyAoX2pzeHMoXCJzdmdcIiwgeyB3aWR0aDogXCIyNFwiLCBoZWlnaHQ6IFwiMjRcIiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiwgZmlsbDogXCJub25lXCIsIGNoaWxkcmVuOiBbX2pzeChcInBhdGhcIiwgeyBkOiBcIk00IDVIMjBDMjEuMTA0NiA1IDIyIDUuODk1NDMgMjIgN1YxNUMyMiAxNi4xMDQ2IDIxLjEwNDYgMTcgMjAgMTdINEMyLjg5NTQzIDE3IDIgMTYuMTA0NiAyIDE1VjdDMiA1Ljg5NTQzIDIuODk1NDMgNSA0IDVaXCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMS44XCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KSwgX2pzeChcInBhdGhcIiwgeyBkOiBcIk0xMiAyMVYxN1wiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjEuOFwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNOCAyMUgxNlwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjEuOFwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNOCA5TDEyIDEzTDE2IDlcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VXaWR0aDogXCIxLjhcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiIH0pXSB9KSkgOiAoX2pzeHMoXCJzdmdcIiwgeyB3aWR0aDogXCIyNFwiLCBoZWlnaHQ6IFwiMjRcIiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiwgZmlsbDogXCJub25lXCIsIGNoaWxkcmVuOiBbX2pzeChcInBhdGhcIiwgeyBkOiBcIk00IDVIMjBDMjEuMTA0NiA1IDIyIDUuODk1NDMgMjIgN1YxNEMyMiAxNS4xMDQ2IDIxLjEwNDYgMTYgMjAgMTZINEMyLjg5NTQzIDE2IDIgMTUuMTA0NiAyIDE0VjdDMiA1Ljg5NTQzIDIuODk1NDMgNSA0IDVaXCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMS42XCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KSwgX2pzeChcInBhdGhcIiwgeyBkOiBcIk0xMiAyMFYxNlwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjEuNlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNOCAyMEgxNlwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjEuNlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIgfSldIH0pKSB9KSksIF9qc3goXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGBjYWxsLWNvbnRyb2wtYnRuICR7IWlzQXVkaW9FbmFibGVkID8gJ2NhbGwtY29udHJvbC1tdXRlZCcgOiAnJ31gLCBvbkNsaWNrOiB0b2dnbGVBdWRpbywgdGl0bGU6IGlzQXVkaW9FbmFibGVkID8gJ1Thuq90IG1pYycgOiAnQuG6rXQgbWljJywgY2hpbGRyZW46IGlzQXVkaW9FbmFibGVkID8gKF9qc3hzKFwic3ZnXCIsIHsgd2lkdGg6IFwiMjRcIiwgaGVpZ2h0OiBcIjI0XCIsIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIsIGZpbGw6IFwibm9uZVwiLCBjaGlsZHJlbjogW19qc3goXCJwYXRoXCIsIHsgZDogXCJNMTIgMUMxMC4zNCAxIDkgMi4zNCA5IDRWMTJDOSAxMy42NiAxMC4zNCAxNSAxMiAxNUMxMy42NiAxNSAxNSAxMy42NiAxNSAxMlY0QzE1IDIuMzQgMTMuNjYgMSAxMiAxWlwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjJcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiIH0pLCBfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTE5IDEwVjEyQzE5IDE1Ljg3IDE1Ljg3IDE5IDEyIDE5QzguMTMgMTkgNSAxNS44NyA1IDEyVjEwXCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNMTIgMTlWMjNcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VXaWR0aDogXCIyXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KSwgX2pzeChcInBhdGhcIiwgeyBkOiBcIk04IDIzSDE2XCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSldIH0pKSA6IChfanN4cyhcInN2Z1wiLCB7IHdpZHRoOiBcIjI0XCIsIGhlaWdodDogXCIyNFwiLCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLCBmaWxsOiBcIm5vbmVcIiwgY2hpbGRyZW46IFtfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTEgMUwyMyAyM1wiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjJcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiIH0pLCBfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTkgOVYxMkM5IDEzLjY2IDEwLjM0IDE1IDEyIDE1QzEyLjQxIDE1IDEyLjgxIDE0LjkyIDEzLjE3IDE0Ljc3XCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNNSAxMFYxMkM1IDE1Ljg3IDguMTMgMTkgMTIgMTlDMTIuNjkgMTkgMTMuMzUgMTguODkgMTMuOTcgMTguN1wiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjJcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiIH0pLCBfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTkgMVY0XCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNMTUgMVY0XCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNMTIgMTlWMjNcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VXaWR0aDogXCIyXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KSwgX2pzeChcInBhdGhcIiwgeyBkOiBcIk04IDIzSDE2XCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSldIH0pKSB9KSwgY2FsbEluZm8udHlwZSA9PT0gJ3ZpZGVvJyAmJiAoX2pzeChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogYGNhbGwtY29udHJvbC1idG4gJHshaXNWaWRlb0VuYWJsZWQgPyAnY2FsbC1jb250cm9sLW11dGVkJyA6ICcnfWAsIG9uQ2xpY2s6IHRvZ2dsZVZpZGVvLCB0aXRsZTogaXNWaWRlb0VuYWJsZWQgPyAnVOG6r3QgY2FtZXJhJyA6ICdC4bqtdCBjYW1lcmEnLCBjaGlsZHJlbjogaXNWaWRlb0VuYWJsZWQgPyAoX2pzeHMoXCJzdmdcIiwgeyB3aWR0aDogXCIyNFwiLCBoZWlnaHQ6IFwiMjRcIiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiwgZmlsbDogXCJub25lXCIsIGNoaWxkcmVuOiBbX2pzeChcInBhdGhcIiwgeyBkOiBcIk0yMyA3TDE2IDEyTDIzIDE3VjdaXCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNMTQgNUgzQzEuODk1NDMgNSAxIDUuODk1NDMgMSA3VjE3QzEgMTguMTA0NiAxLjg5NTQzIDE5IDMgMTlIMTRDMTUuMTA0NiAxOSAxNiAxOC4xMDQ2IDE2IDE3VjdDMTYgNS44OTU0MyAxNS4xMDQ2IDUgMTQgNVpcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VXaWR0aDogXCIyXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KV0gfSkpIDogKF9qc3hzKFwic3ZnXCIsIHsgd2lkdGg6IFwiMjRcIiwgaGVpZ2h0OiBcIjI0XCIsIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIsIGZpbGw6IFwibm9uZVwiLCBjaGlsZHJlbjogW19qc3goXCJwYXRoXCIsIHsgZDogXCJNMSAxTDIzIDIzXCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSksIF9qc3goXCJwYXRoXCIsIHsgZDogXCJNMTYgMTJMMjMgN1YxN0wxNiAxMlpcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VXaWR0aDogXCIyXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiB9KSwgX2pzeChcInBhdGhcIiwgeyBkOiBcIk0xNCA1SDNDMS44OTU0MyA1IDEgNS44OTU0MyAxIDdWMTdDMSAxOC4xMDQ2IDEuODk1NDMgMTkgMyAxOUgxNEMxNS4xMDQ2IDE5IDE2IDE4LjEwNDYgMTYgMTdWN0MxNiA1Ljg5NTQzIDE1LjEwNDYgNSAxNCA1WlwiLCBzdHJva2U6IFwiY3VycmVudENvbG9yXCIsIHN0cm9rZVdpZHRoOiBcIjJcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiIH0pXSB9KSkgfSkpLCBfanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtY29udHJvbC1idG4gY2FsbC1jb250cm9sLWVuZFwiLCBvbkNsaWNrOiBoYW5kbGVFbmRDYWxsLCB0aXRsZTogXCJLXFx1MUVCRnQgdGhcXHUwMEZBYyBjdVxcdTFFRDljIGdcXHUxRUNEaVwiLCBjaGlsZHJlbjogX2pzeChcInN2Z1wiLCB7IHdpZHRoOiBcIjI0XCIsIGhlaWdodDogXCIyNFwiLCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLCBmaWxsOiBcIm5vbmVcIiwgY2hpbGRyZW46IF9qc3goXCJwYXRoXCIsIHsgZDogXCJNMyA1QzMgMy44OTU0MyAzLjg5NTQzIDMgNSAzSDguMjc5MjRDOC43MDk2NyAzIDkuMDkxODEgMy4yNzU0MyA5LjIyNzkyIDMuNjgzNzdMMTAuNzI1NyA4LjE3NzIxQzEwLjg4MzEgOC42NDkzMiAxMC42Njk0IDkuMTY1MzEgMTAuMjI0MyA5LjM4Nzg3TDcuOTY3MDEgMTAuNTE2NUM5LjA2OTI1IDEyLjk2MTIgMTEuMDM4OCAxNC45MzA4IDEzLjQ4MzUgMTYuMDMzTDE0LjYxMjEgMTMuNzc1N0MxNC44MzQ3IDEzLjMzMDYgMTUuMzUwNyAxMy4xMTY5IDE1LjgyMjggMTMuMjc0M0wyMC4zMTYyIDE0Ljc3MjFDMjAuNzI0NiAxNC45MDgyIDIxIDE1LjI5MDMgMjEgMTUuNzIwOFYxOUMyMSAyMC4xMDQ2IDIwLjEwNDYgMjEgMTkgMjFIMThDOS43MTU3MyAyMSAzIDE0LjI4NDMgMyA2VjVaXCIsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlV2lkdGg6IFwiMlwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIgfSkgfSkgfSldIH0pKV0gfSksIGNhblVzZUVuaGFuY2VtZW50cyAmJiBpc1NjcmVlblNoYXJpbmcgJiYgKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtc2NyZWVuLXNoYXJlLWluZGljYXRvclwiLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IFwiXFx1MDExMGFuZyBjaGlhIHNcXHUxRUJCIG1cXHUwMEUwbiBoXFx1MDBFQ25oXCIgfSksIF9qc3goXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiBoYW5kbGVTY3JlZW5TaGFyZVRvZ2dsZSwgY2hpbGRyZW46IFwiRFxcdTFFRUJuZyBjaGlhIHNcXHUxRUJCXCIgfSldIH0pKSwgY2FuVXNlRW5oYW5jZW1lbnRzICYmIHNob3dGaWx0ZXJQYW5lbCAmJiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FsbC1maWx0ZXItcGFuZWxcIiwgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYWxsLWZpbHRlci1wYW5lbF9faGVhZGVyXCIsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjaGlsZHJlbjogXCJCXFx1MUVEOSBsXFx1MUVDRGMgJiBoaVxcdTFFQzd1IFxcdTFFRTluZ1wiIH0pLCBfanN4KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgb25DbGljazogKCkgPT4gc2V0U2hvd0ZpbHRlclBhbmVsKGZhbHNlKSwgXCJhcmlhLWxhYmVsXCI6IFwiXFx1MDExMFxcdTAwRjNuZ1wiLCBjaGlsZHJlbjogXCJcXHUwMEQ3XCIgfSldIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNhbGwtZmlsdGVyLXBhbmVsX19saXN0XCIsIGNoaWxkcmVuOiBmaWx0ZXJPcHRpb25zLm1hcCgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gY3VycmVudEZpbHRlciA9PT0gb3B0aW9uLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gaXNTY3JlZW5TaGFyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX2pzeHMoXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IGBmaWx0ZXItb3B0aW9uICR7YWN0aXZlID8gJ2FjdGl2ZScgOiAnJ30gJHtkaXNhYmxlZCA/ICdkaXNhYmxlZCcgOiAnJ31gLCBvbkNsaWNrOiAoKSA9PiAhZGlzYWJsZWQgJiYgaGFuZGxlRmlsdGVyU2VsZWN0KG9wdGlvbi5pZCksIGRpc2FibGVkOiBkaXNhYmxlZCwgY2hpbGRyZW46IFtfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJmaWx0ZXItb3B0aW9uX19lbW9qaVwiLCBjaGlsZHJlbjogb3B0aW9uLmVtb2ppIH0pLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJmaWx0ZXItb3B0aW9uX19sYWJlbFwiLCBjaGlsZHJlbjogb3B0aW9uLmxhYmVsIH0pXSB9LCBvcHRpb24uaWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIH0pLCBpc1NjcmVlblNoYXJpbmcgJiYgKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2FsbC1maWx0ZXItcGFuZWxfX25vdGljZVwiLCBjaGlsZHJlbjogXCJUXFx1MUVBRnQgY2hpYSBzXFx1MUVCQiBtXFx1MDBFMG4gaFxcdTAwRUNuaCBcXHUwMTExXFx1MUVDMyBzXFx1MUVFRCBkXFx1MUVFNW5nIGJcXHUxRUQ5IGxcXHUxRUNEYy5cIiB9KSldIH0pKV0gfSkpO1xufVxuIl0sIm5hbWVzIjpbImpzeCIsIl9qc3giLCJqc3hzIiwiX2pzeHMiLCJGcmFnbWVudCIsIl9GcmFnbWVudCIsIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VXZWJSVEMiLCJ1c2VMaXZlS2l0IiwiZ2V0Q2FsbCIsImVuZENhbGwiLCJlbmRDYWxsQVBJIiwiYWNjZXB0Q2FsbCIsInJlamVjdENhbGwiLCJnZXRMaXZlS2l0VG9rZW4iLCJnZXRTb2NrZXQiLCJ1c2VPcHBvbmVudEluZm8iLCJHcm91cENhbGxHcmlkIiwiQ2FsbFNjcmVlbiIsImNhbGxJZCIsInNldENhbGxJZCIsImNhbGxJbmZvIiwic2V0Q2FsbEluZm8iLCJpc0luaXRpYXRvciIsInNldElzSW5pdGlhdG9yIiwibG9jYWxVc2VySWQiLCJzZXRMb2NhbFVzZXJJZCIsImFjY2VwdGVkRnJvbU1vZGFsIiwic2V0QWNjZXB0ZWRGcm9tTW9kYWwiLCJ1aWQiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJzZWFyY2giLCJVUkxTZWFyY2hQYXJhbXMiLCJsb2NhdGlvbiIsInVybENhbGxJZCIsImdldCIsInVybENvbnZlcnNhdGlvbklkIiwidXJsQWNjZXB0ZWRGcm9tTW9kYWwiLCJ1cmxDYWxsVHlwZSIsInVybExpdmVraXRSb29tTmFtZSIsInVybElzSW5jb21pbmciLCJsb2ciLCJwcmV2IiwibmV3SW5mbyIsImNvbnZlcnNhdGlvbklkIiwiaW5pdGlhdG9ySWQiLCJyZW1vdGVVc2VySWQiLCJ0eXBlIiwiY2FsbFR5cGUiLCJsaXZla2l0Um9vbU5hbWUiLCJ0aGVuIiwidG9rZW5EYXRhIiwic2V0TGl2ZUtpdFRva2VuIiwidG9rZW4iLCJzZXRMaXZlS2l0VXJsIiwidXJsIiwiY2F0Y2giLCJlcnJvciIsImNhbGxEdXJhdGlvbiIsInNldENhbGxEdXJhdGlvbiIsImNhbGxTdGFydFRpbWUiLCJzZXRDYWxsU3RhcnRUaW1lIiwiZHVyYXRpb25JbnRlcnZhbFJlZiIsImluZm8iLCJvcHBvbmVudEluZm8iLCJmaWx0ZXJPcHRpb25zIiwiaWQiLCJsYWJlbCIsImVtb2ppIiwic2hvd0ZpbHRlclBhbmVsIiwic2V0U2hvd0ZpbHRlclBhbmVsIiwibGl2ZUtpdFRva2VuIiwibGl2ZUtpdFVybCIsImxpdmVLaXRUb2tlblJlZiIsImN1cnJlbnQiLCJpc1AyUENhbGwiLCJsb2NhbFN0cmVhbSIsInAycExvY2FsU3RyZWFtIiwicmVtb3RlU3RyZWFtIiwicDJwUmVtb3RlU3RyZWFtIiwiaXNDb25uZWN0ZWQiLCJwMnBJc0Nvbm5lY3RlZCIsInAycEVycm9yIiwic3RhcnRDYWxsIiwiZW5kV2ViUlRDIiwidG9nZ2xlVmlkZW8iLCJwMnBUb2dnbGVWaWRlbyIsInRvZ2dsZUF1ZGlvIiwicDJwVG9nZ2xlQXVkaW8iLCJpc1ZpZGVvRW5hYmxlZCIsInAycElzVmlkZW9FbmFibGVkIiwiaXNBdWRpb0VuYWJsZWQiLCJwMnBJc0F1ZGlvRW5hYmxlZCIsImFwcGx5RmlsdGVyIiwiY3VycmVudEZpbHRlciIsInN0YXJ0U2NyZWVuU2hhcmUiLCJzdG9wU2NyZWVuU2hhcmUiLCJpc1NjcmVlblNoYXJpbmciLCJsb2NhbFZpZGVvUmVmIiwicmVtb3RlVmlkZW9SZWYiLCJsaXZlS2l0TG9jYWxTdHJlYW0iLCJyZW1vdGVTdHJlYW1zIiwibGl2ZUtpdFJlbW90ZVN0cmVhbXMiLCJyZW1vdGVUcmFja3MiLCJsaXZlS2l0UmVtb3RlVHJhY2tzIiwibGl2ZUtpdElzQ29ubmVjdGVkIiwibGl2ZUtpdEVycm9yIiwiY29ubmVjdCIsImNvbm5lY3RMaXZlS2l0IiwiZGlzY29ubmVjdCIsImRpc2Nvbm5lY3RMaXZlS2l0IiwibGl2ZUtpdFRvZ2dsZVZpZGVvIiwibGl2ZUtpdFRvZ2dsZUF1ZGlvIiwibGl2ZUtpdElzVmlkZW9FbmFibGVkIiwibGl2ZUtpdElzQXVkaW9FbmFibGVkIiwicm9vbU5hbWUiLCJjYW5Vc2VFbmhhbmNlbWVudHMiLCJoYW5kbGVUb2dnbGVGaWx0ZXJQYW5lbCIsImhhc0F1dG9TdGFydGVkUmVmIiwic3RhcnRDYWxsUmVmIiwic2V0SW50ZXJ2YWwiLCJub3ciLCJEYXRlIiwiZGlmZiIsIk1hdGgiLCJmbG9vciIsImdldFRpbWUiLCJjbGVhckludGVydmFsIiwiZm9ybWF0RHVyYXRpb24iLCJzZWNvbmRzIiwiaG91cnMiLCJtaW51dGVzIiwic2VjcyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJsb2FkQ2FsbEluZm8iLCJjYWxsIiwicGFydGljaXBhbnRzIiwiZmluZCIsIlN0cmluZyIsImlzSW5pdCIsIm1ldGFkYXRhIiwibWFwIiwicCIsInJlc3BvbnNlIiwic3RhdHVzIiwic29ja2V0Iiwib25jZSIsImRhdGEiLCJoYW5kbGVDYWxsSW5jb21pbmciLCJoYW5kbGVDYWxsSW5mbyIsImhhbmRsZUNhbGxBY2NlcHRlZCIsInNldFRpbWVvdXQiLCJoYW5kbGVDYWxsQWN0aXZlIiwib24iLCJvZmYiLCJpc1NGVSIsImlzUDJQUmVhZHkiLCJpc1NGVVJlYWR5IiwiaGFzVG9rZW4iLCJoYXNBdXRvQ29ubmVjdGVkTGl2ZUtpdFJlZiIsImhhbmRsZUFjY2VwdCIsInN0YXJ0RXJyIiwiaGFuZGxlUmVqZWN0IiwiaGlzdG9yeSIsImJhY2siLCJoYW5kbGVFbmRDYWxsIiwiaGFuZGxlRmlsdGVyU2VsZWN0IiwiZmlsdGVyIiwiaGFuZGxlU2NyZWVuU2hhcmVUb2dnbGUiLCJncm91cENhbGxQYXJ0aWNpcGFudHMiLCJ1c2VNZW1vIiwicmVtb3RlU3RyZWFtc1NpemUiLCJzaXplIiwicmVtb3RlU3RyZWFtS2V5cyIsIkFycmF5IiwiZnJvbSIsImtleXMiLCJmb3JFYWNoIiwic3RyZWFtIiwicGFydGljaXBhbnRJZCIsInRyYWNrQ291bnQiLCJnZXRUcmFja3MiLCJsZW5ndGgiLCJ0cmFja3MiLCJ0Iiwia2luZCIsImVuYWJsZWQiLCJwdXNoIiwib3Bwb25lbnROYW1lIiwibmFtZSIsIm9wcG9uZW50QXZhdGFyIiwiYXZhdGFyIiwiY2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJzdHlsZSIsInBvc2l0aW9uIiwiYm90dG9tIiwibGVmdCIsInRyYW5zZm9ybSIsImNvbG9yIiwiZm9udFNpemUiLCJ0ZXh0QWxpZ24iLCJtYXhXaWR0aCIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZCIsImxvY2FsUGFydGljaXBhbnRJZCIsImRpc3BsYXkiLCJmbGV4RGlyZWN0aW9uIiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwibWFyZ2luQm90dG9tIiwibWFyZ2luVG9wIiwicGFkZGluZyIsImJvcmRlclJhZGl1cyIsInJlZiIsImF1dG9QbGF5IiwicGxheXNJbmxpbmUiLCJzcmMiLCJhbHQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsIm11dGVkIiwib25DbGljayIsInRpdGxlIiwidmlld0JveCIsImZpbGwiLCJkIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJocmVmIiwib3B0aW9uIiwiYWN0aXZlIiwiZGlzYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/features/call/screens/CallScreen.web.js\n");

/***/ }),

/***/ "(ssr)/../../packages/app/hooks/useLiveKit.js":
/*!**********************************************!*\
  !*** ../../packages/app/hooks/useLiveKit.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLiveKit: () => (/* binding */ useLiveKit)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/../../node_modules/.pnpm/livekit-client@2.16.0_@types+dom-mediacapture-record@1.0.22/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\nfunction useLiveKit({ roomName, token, url, autoSubscribe = true }) {\n    const [room, setRoom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [localStream, setLocalStream] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [remoteStreams, setRemoteStreams] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Map());\n    const [remoteTracks, setRemoteTracks] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Map());\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isVideoEnabled, setIsVideoEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [isAudioEnabled, setIsAudioEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const roomRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const connectPromiseRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const latestOptionsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        roomName,\n        token,\n        url\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        latestOptionsRef.current = {\n            roomName,\n            token,\n            url\n        };\n    }, [\n        roomName,\n        token,\n        url\n    ]);\n    const buildMediaStreamFromLocal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((currentRoom)=>{\n        try {\n            const publications = Array.from(currentRoom.localParticipant.trackPublications.values());\n            const tracks = [];\n            publications.forEach((pub)=>{\n                const lkTrack = pub.track;\n                if (lkTrack && (lkTrack instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalVideoTrack || lkTrack instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalAudioTrack)) {\n                    const mediaTrack = lkTrack.mediaStreamTrack;\n                    if (mediaTrack) {\n                        tracks.push(mediaTrack);\n                    }\n                }\n            });\n            if (tracks.length > 0) {\n                const stream = new MediaStream(tracks);\n                setLocalStream(stream);\n            }\n        } catch (err) {\n            console.warn(\"[LiveKit] Failed to build local stream:\", err);\n        }\n    }, []);\n    const addRemoteTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((participantId, mediaTrack)=>{\n        setRemoteStreams((prev)=>{\n            const next = new Map(prev);\n            const existing = next.get(participantId);\n            // Create a NEW MediaStream with all existing tracks + new track\n            // This ensures React detects the state change\n            const allTracks = [];\n            if (existing) {\n                existing.getTracks().forEach((t)=>{\n                    if (t.id !== mediaTrack.id) {\n                        allTracks.push(t);\n                    }\n                });\n            }\n            allTracks.push(mediaTrack);\n            const newStream = new MediaStream(allTracks);\n            next.set(participantId, newStream);\n            return next;\n        });\n    }, []);\n    const removeRemoteTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((participantId, mediaTrack)=>{\n        setRemoteStreams((prev)=>{\n            const next = new Map(prev);\n            const existing = next.get(participantId);\n            if (!existing) return prev;\n            if (mediaTrack) {\n                existing.removeTrack(mediaTrack);\n            }\n            if (existing.getTracks().length === 0) {\n                next.delete(participantId);\n            } else {\n                next.set(participantId, existing);\n            }\n            return next;\n        });\n    }, []);\n    const disconnect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (roomRef.current) {\n            roomRef.current.disconnect();\n            roomRef.current = null;\n        }\n        connectPromiseRef.current = null;\n        setRoom(null);\n        setIsConnected(false);\n        setLocalStream(null);\n        setRemoteStreams(new Map());\n        setError(null);\n    }, []);\n    const connect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        const { roomName: currentRoomName, token: currentToken, url: currentUrl } = latestOptionsRef.current;\n        if (!currentRoomName || !currentToken || !currentUrl) {\n            setError(\"Thiu th\\xf4ng tin LiveKit (room/token/url)\");\n            return;\n        }\n        if (roomRef.current && roomRef.current.state === \"connected\") {\n            return;\n        }\n        if (connectPromiseRef.current) {\n            return connectPromiseRef.current;\n        }\n        const promise = (async ()=>{\n            try {\n                setError(null);\n                // Optimized room options for better performance\n                const roomOptions = {\n                    adaptiveStream: true,\n                    dynacast: true,\n                    // Video capture settings - use 720p for better performance\n                    videoCaptureDefaults: {\n                        resolution: livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h720.resolution,\n                        facingMode: \"user\"\n                    },\n                    // Video publish settings - lower bitrate for smoother streaming\n                    publishDefaults: {\n                        videoSimulcastLayers: [\n                            livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h180,\n                            livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h360\n                        ],\n                        videoCodec: \"vp8\",\n                        dtx: true,\n                        red: true,\n                        stopMicTrackOnMute: false\n                    }\n                };\n                const newRoom = new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(roomOptions);\n                roomRef.current = newRoom;\n                setRoom(newRoom);\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Connected, ()=>{\n                    setIsConnected(true);\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Disconnected, ()=>{\n                    setIsConnected(false);\n                    setLocalStream(null);\n                    setRemoteStreams(new Map());\n                    setRemoteTracks(new Map());\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackSubscribed, (track, publication, participant)=>{\n                    if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        // Store the RemoteTrack for direct attachment in components\n                        setRemoteTracks((prev)=>{\n                            const next = new Map(prev);\n                            const existing = next.get(participant.identity) || {};\n                            if (track.kind === \"video\") {\n                                next.set(participant.identity, {\n                                    ...existing,\n                                    videoTrack: track\n                                });\n                            } else if (track.kind === \"audio\") {\n                                next.set(participant.identity, {\n                                    ...existing,\n                                    audioTrack: track\n                                });\n                            }\n                            return next;\n                        });\n                        // Also add to remoteStreams for backward compatibility\n                        const mediaTrack = track.mediaStreamTrack;\n                        if (mediaTrack) {\n                            addRemoteTrack(participant.identity, mediaTrack);\n                        }\n                    }\n                });\n                // Handle track unmuted events - re-add track when unmuted\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackUnmuted, (publication, participant)=>{\n                    if (publication.track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        const mediaTrack = publication.track.mediaStreamTrack;\n                        if (mediaTrack) {\n                            addRemoteTrack(participant.identity, mediaTrack);\n                        }\n                    }\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantConnected, ()=>{\n                // Participant connected - tracks will be handled by TrackSubscribed event\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackUnsubscribed, (track, publication, participant)=>{\n                    if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        // Remove from remoteTracks\n                        setRemoteTracks((prev)=>{\n                            const next = new Map(prev);\n                            const existing = next.get(participant.identity);\n                            if (existing) {\n                                if (track.kind === \"video\") {\n                                    next.set(participant.identity, {\n                                        ...existing,\n                                        videoTrack: undefined\n                                    });\n                                } else if (track.kind === \"audio\") {\n                                    next.set(participant.identity, {\n                                        ...existing,\n                                        audioTrack: undefined\n                                    });\n                                }\n                            }\n                            return next;\n                        });\n                        const mediaTrack = track.mediaStreamTrack;\n                        removeRemoteTrack(participant.identity, mediaTrack);\n                    }\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantDisconnected, (participant)=>{\n                    setRemoteStreams((prev)=>{\n                        const next = new Map(prev);\n                        next.delete(participant.identity);\n                        return next;\n                    });\n                    setRemoteTracks((prev)=>{\n                        const next = new Map(prev);\n                        next.delete(participant.identity);\n                        return next;\n                    });\n                });\n                await newRoom.connect(currentUrl, currentToken);\n                // Subscribe to any existing remote participant tracks\n                newRoom.remoteParticipants.forEach((participant)=>{\n                    participant.trackPublications.forEach((pub)=>{\n                        if (pub.track && pub.track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                            const mediaTrack = pub.track.mediaStreamTrack;\n                            if (mediaTrack) {\n                                addRemoteTrack(participant.identity, mediaTrack);\n                            }\n                        }\n                    });\n                });\n                await newRoom.localParticipant.enableCameraAndMicrophone();\n                buildMediaStreamFromLocal(newRoom);\n            } catch (err) {\n                console.error(\"[LiveKit] Error connecting:\", err);\n                setError(err?.message || \"Kh\\xf4ng th kt ni LiveKit\");\n                disconnect();\n            } finally{\n                connectPromiseRef.current = null;\n            }\n        })();\n        connectPromiseRef.current = promise;\n        return promise;\n    }, [\n        addRemoteTrack,\n        autoSubscribe,\n        buildMediaStreamFromLocal,\n        disconnect,\n        removeRemoteTrack\n    ]);\n    const toggleVideo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!roomRef.current) return;\n        const enabled = !isVideoEnabled;\n        roomRef.current.localParticipant.setCameraEnabled(enabled);\n        setIsVideoEnabled(enabled);\n    }, [\n        isVideoEnabled\n    ]);\n    const toggleAudio = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!roomRef.current) return;\n        const enabled = !isAudioEnabled;\n        roomRef.current.localParticipant.setMicrophoneEnabled(enabled);\n        setIsAudioEnabled(enabled);\n    }, [\n        isAudioEnabled\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        return ()=>{\n            disconnect();\n        };\n    }, [\n        disconnect\n    ]);\n    return {\n        room,\n        localStream,\n        remoteStreams,\n        remoteTracks,\n        isConnected,\n        error,\n        connect,\n        disconnect,\n        toggleVideo,\n        toggleAudio,\n        isVideoEnabled,\n        isAudioEnabled\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL2hvb2tzL3VzZUxpdmVLaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpRTtBQUM2QztBQUN2RyxTQUFTVSxXQUFXLEVBQUVDLFFBQVEsRUFBRUMsS0FBSyxFQUFFQyxHQUFHLEVBQUVDLGdCQUFnQixJQUFJLEVBQUc7SUFDdEUsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUdiLCtDQUFRQSxDQUFDO0lBQ2pDLE1BQU0sQ0FBQ2MsYUFBYUMsZUFBZSxHQUFHZiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNnQixlQUFlQyxpQkFBaUIsR0FBR2pCLCtDQUFRQSxDQUFDLElBQUlrQjtJQUN2RCxNQUFNLENBQUNDLGNBQWNDLGdCQUFnQixHQUFHcEIsK0NBQVFBLENBQUMsSUFBSWtCO0lBQ3JELE1BQU0sQ0FBQ0csYUFBYUMsZUFBZSxHQUFHdEIsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDdUIsT0FBT0MsU0FBUyxHQUFHeEIsK0NBQVFBLENBQUM7SUFDbkMsTUFBTSxDQUFDeUIsZ0JBQWdCQyxrQkFBa0IsR0FBRzFCLCtDQUFRQSxDQUFDO0lBQ3JELE1BQU0sQ0FBQzJCLGdCQUFnQkMsa0JBQWtCLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNNkIsVUFBVTlCLDZDQUFNQSxDQUFDO0lBQ3ZCLE1BQU0rQixvQkFBb0IvQiw2Q0FBTUEsQ0FBQztJQUNqQyxNQUFNZ0MsbUJBQW1CaEMsNkNBQU1BLENBQUM7UUFBRVM7UUFBVUM7UUFBT0M7SUFBSTtJQUN2RFosZ0RBQVNBLENBQUM7UUFDTmlDLGlCQUFpQkMsT0FBTyxHQUFHO1lBQUV4QjtZQUFVQztZQUFPQztRQUFJO0lBQ3RELEdBQUc7UUFBQ0Y7UUFBVUM7UUFBT0M7S0FBSTtJQUN6QixNQUFNdUIsNEJBQTRCcEMsa0RBQVdBLENBQUMsQ0FBQ3FDO1FBQzNDLElBQUk7WUFDQSxNQUFNQyxlQUFlQyxNQUFNQyxJQUFJLENBQUNILFlBQVlJLGdCQUFnQixD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S2l0LmpzP2QwMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFJvb20sIFJvb21FdmVudCwgUmVtb3RlVHJhY2ssIExvY2FsVmlkZW9UcmFjaywgTG9jYWxBdWRpb1RyYWNrLCBWaWRlb1ByZXNldHMgfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5leHBvcnQgZnVuY3Rpb24gdXNlTGl2ZUtpdCh7IHJvb21OYW1lLCB0b2tlbiwgdXJsLCBhdXRvU3Vic2NyaWJlID0gdHJ1ZSwgfSkge1xuICAgIGNvbnN0IFtyb29tLCBzZXRSb29tXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtsb2NhbFN0cmVhbSwgc2V0TG9jYWxTdHJlYW1dID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW3JlbW90ZVN0cmVhbXMsIHNldFJlbW90ZVN0cmVhbXNdID0gdXNlU3RhdGUobmV3IE1hcCgpKTtcbiAgICBjb25zdCBbcmVtb3RlVHJhY2tzLCBzZXRSZW1vdGVUcmFja3NdID0gdXNlU3RhdGUobmV3IE1hcCgpKTtcbiAgICBjb25zdCBbaXNDb25uZWN0ZWQsIHNldElzQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtpc1ZpZGVvRW5hYmxlZCwgc2V0SXNWaWRlb0VuYWJsZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW2lzQXVkaW9FbmFibGVkLCBzZXRJc0F1ZGlvRW5hYmxlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCByb29tUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IGNvbm5lY3RQcm9taXNlUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IGxhdGVzdE9wdGlvbnNSZWYgPSB1c2VSZWYoeyByb29tTmFtZSwgdG9rZW4sIHVybCB9KTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBsYXRlc3RPcHRpb25zUmVmLmN1cnJlbnQgPSB7IHJvb21OYW1lLCB0b2tlbiwgdXJsIH07XG4gICAgfSwgW3Jvb21OYW1lLCB0b2tlbiwgdXJsXSk7XG4gICAgY29uc3QgYnVpbGRNZWRpYVN0cmVhbUZyb21Mb2NhbCA9IHVzZUNhbGxiYWNrKChjdXJyZW50Um9vbSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHVibGljYXRpb25zID0gQXJyYXkuZnJvbShjdXJyZW50Um9vbS5sb2NhbFBhcnRpY2lwYW50LnRyYWNrUHVibGljYXRpb25zLnZhbHVlcygpKTtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrcyA9IFtdO1xuICAgICAgICAgICAgcHVibGljYXRpb25zLmZvckVhY2goKHB1YikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxrVHJhY2sgPSBwdWIudHJhY2s7XG4gICAgICAgICAgICAgICAgaWYgKGxrVHJhY2sgJiZcbiAgICAgICAgICAgICAgICAgICAgKGxrVHJhY2sgaW5zdGFuY2VvZiBMb2NhbFZpZGVvVHJhY2sgfHwgbGtUcmFjayBpbnN0YW5jZW9mIExvY2FsQXVkaW9UcmFjaykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUcmFjayA9IGxrVHJhY2subWVkaWFTdHJlYW1UcmFjaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lZGlhVHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrcy5wdXNoKG1lZGlhVHJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodHJhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0odHJhY2tzKTtcbiAgICAgICAgICAgICAgICBzZXRMb2NhbFN0cmVhbShzdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0xpdmVLaXRdIEZhaWxlZCB0byBidWlsZCBsb2NhbCBzdHJlYW06JywgZXJyKTtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcbiAgICBjb25zdCBhZGRSZW1vdGVUcmFjayA9IHVzZUNhbGxiYWNrKChwYXJ0aWNpcGFudElkLCBtZWRpYVRyYWNrKSA9PiB7XG4gICAgICAgIHNldFJlbW90ZVN0cmVhbXMoKHByZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBuZXh0LmdldChwYXJ0aWNpcGFudElkKTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIE5FVyBNZWRpYVN0cmVhbSB3aXRoIGFsbCBleGlzdGluZyB0cmFja3MgKyBuZXcgdHJhY2tcbiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyBSZWFjdCBkZXRlY3RzIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgIGNvbnN0IGFsbFRyYWNrcyA9IFtdO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmcuZ2V0VHJhY2tzKCkuZm9yRWFjaCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuaWQgIT09IG1lZGlhVHJhY2suaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFRyYWNrcy5wdXNoKHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGxUcmFja3MucHVzaChtZWRpYVRyYWNrKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbShhbGxUcmFja3MpO1xuICAgICAgICAgICAgbmV4dC5zZXQocGFydGljaXBhbnRJZCwgbmV3U3RyZWFtKTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9KTtcbiAgICB9LCBbXSk7XG4gICAgY29uc3QgcmVtb3ZlUmVtb3RlVHJhY2sgPSB1c2VDYWxsYmFjaygocGFydGljaXBhbnRJZCwgbWVkaWFUcmFjaykgPT4ge1xuICAgICAgICBzZXRSZW1vdGVTdHJlYW1zKChwcmV2KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gbmV4dC5nZXQocGFydGljaXBhbnRJZCk7XG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nKVxuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgaWYgKG1lZGlhVHJhY2spIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZy5yZW1vdmVUcmFjayhtZWRpYVRyYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleGlzdGluZy5nZXRUcmFja3MoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXh0LmRlbGV0ZShwYXJ0aWNpcGFudElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHQuc2V0KHBhcnRpY2lwYW50SWQsIGV4aXN0aW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9KTtcbiAgICB9LCBbXSk7XG4gICAgY29uc3QgZGlzY29ubmVjdCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKHJvb21SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgcm9vbVJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHJvb21SZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdFByb21pc2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIHNldFJvb20obnVsbCk7XG4gICAgICAgIHNldElzQ29ubmVjdGVkKGZhbHNlKTtcbiAgICAgICAgc2V0TG9jYWxTdHJlYW0obnVsbCk7XG4gICAgICAgIHNldFJlbW90ZVN0cmVhbXMobmV3IE1hcCgpKTtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgfSwgW10pO1xuICAgIGNvbnN0IGNvbm5lY3QgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcm9vbU5hbWU6IGN1cnJlbnRSb29tTmFtZSwgdG9rZW46IGN1cnJlbnRUb2tlbiwgdXJsOiBjdXJyZW50VXJsIH0gPSBsYXRlc3RPcHRpb25zUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghY3VycmVudFJvb21OYW1lIHx8ICFjdXJyZW50VG9rZW4gfHwgIWN1cnJlbnRVcmwpIHtcbiAgICAgICAgICAgIHNldEVycm9yKCdUaGnhur91IHRow7RuZyB0aW4gTGl2ZUtpdCAocm9vbS90b2tlbi91cmwpJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvb21SZWYuY3VycmVudCAmJiByb29tUmVmLmN1cnJlbnQuc3RhdGUgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbm5lY3RQcm9taXNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0UHJvbWlzZVJlZi5jdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgICAgICAvLyBPcHRpbWl6ZWQgcm9vbSBvcHRpb25zIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICAgICAgICAgICAgICBjb25zdCByb29tT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWRhcHRpdmVTdHJlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGR5bmFjYXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAvLyBWaWRlbyBjYXB0dXJlIHNldHRpbmdzIC0gdXNlIDcyMHAgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgICAgICAgICB2aWRlb0NhcHR1cmVEZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogVmlkZW9QcmVzZXRzLmg3MjAucmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2luZ01vZGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVmlkZW8gcHVibGlzaCBzZXR0aW5ncyAtIGxvd2VyIGJpdHJhdGUgZm9yIHNtb290aGVyIHN0cmVhbWluZ1xuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoRGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvU2ltdWxjYXN0TGF5ZXJzOiBbVmlkZW9QcmVzZXRzLmgxODAsIFZpZGVvUHJlc2V0cy5oMzYwXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvQ29kZWM6ICd2cDgnLCAvLyBWUDggaGFzIGJldHRlciBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICBkdHg6IHRydWUsIC8vIERpc2NvbnRpbnVvdXMgdHJhbnNtaXNzaW9uIGZvciBhdWRpbyAtIHNhdmVzIGJhbmR3aWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVkOiB0cnVlLCAvLyBSZWR1bmRhbnQgZW5jb2RpbmcgZm9yIGF1ZGlvIC0gYmV0dGVyIHF1YWxpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BNaWNUcmFja09uTXV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSb29tID0gbmV3IFJvb20ocm9vbU9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJvb21SZWYuY3VycmVudCA9IG5ld1Jvb207XG4gICAgICAgICAgICAgICAgc2V0Um9vbShuZXdSb29tKTtcbiAgICAgICAgICAgICAgICBuZXdSb29tLm9uKFJvb21FdmVudC5Db25uZWN0ZWQsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNDb25uZWN0ZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbmV3Um9vbS5vbihSb29tRXZlbnQuRGlzY29ubmVjdGVkLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldElzQ29ubmVjdGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9jYWxTdHJlYW0obnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFJlbW90ZVN0cmVhbXMobmV3IE1hcCgpKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVtb3RlVHJhY2tzKG5ldyBNYXAoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbmV3Um9vbS5vbihSb29tRXZlbnQuVHJhY2tTdWJzY3JpYmVkLCAodHJhY2ssIHB1YmxpY2F0aW9uLCBwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2sgaW5zdGFuY2VvZiBSZW1vdGVUcmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RvcmUgdGhlIFJlbW90ZVRyYWNrIGZvciBkaXJlY3QgYXR0YWNobWVudCBpbiBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZW1vdGVUcmFja3MoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IG5leHQuZ2V0KHBhcnRpY2lwYW50LmlkZW50aXR5KSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LnNldChwYXJ0aWNpcGFudC5pZGVudGl0eSwgeyAuLi5leGlzdGluZywgdmlkZW9UcmFjazogdHJhY2sgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5zZXQocGFydGljaXBhbnQuaWRlbnRpdHksIHsgLi4uZXhpc3RpbmcsIGF1ZGlvVHJhY2s6IHRyYWNrIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBhZGQgdG8gcmVtb3RlU3RyZWFtcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUcmFjayA9IHRyYWNrLm1lZGlhU3RyZWFtVHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVkaWFUcmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFJlbW90ZVRyYWNrKHBhcnRpY2lwYW50LmlkZW50aXR5LCBtZWRpYVRyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0cmFjayB1bm11dGVkIGV2ZW50cyAtIHJlLWFkZCB0cmFjayB3aGVuIHVubXV0ZWRcbiAgICAgICAgICAgICAgICBuZXdSb29tLm9uKFJvb21FdmVudC5UcmFja1VubXV0ZWQsIChwdWJsaWNhdGlvbiwgcGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHB1YmxpY2F0aW9uLnRyYWNrIGluc3RhbmNlb2YgUmVtb3RlVHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHJhY2sgPSBwdWJsaWNhdGlvbi50cmFjay5tZWRpYVN0cmVhbVRyYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lZGlhVHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRSZW1vdGVUcmFjayhwYXJ0aWNpcGFudC5pZGVudGl0eSwgbWVkaWFUcmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZXdSb29tLm9uKFJvb21FdmVudC5QYXJ0aWNpcGFudENvbm5lY3RlZCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBQYXJ0aWNpcGFudCBjb25uZWN0ZWQgLSB0cmFja3Mgd2lsbCBiZSBoYW5kbGVkIGJ5IFRyYWNrU3Vic2NyaWJlZCBldmVudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LlRyYWNrVW5zdWJzY3JpYmVkLCAodHJhY2ssIHB1YmxpY2F0aW9uLCBwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2sgaW5zdGFuY2VvZiBSZW1vdGVUcmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gcmVtb3RlVHJhY2tzXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZW1vdGVUcmFja3MoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IG5leHQuZ2V0KHBhcnRpY2lwYW50LmlkZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQuc2V0KHBhcnRpY2lwYW50LmlkZW50aXR5LCB7IC4uLmV4aXN0aW5nLCB2aWRlb1RyYWNrOiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5zZXQocGFydGljaXBhbnQuaWRlbnRpdHksIHsgLi4uZXhpc3RpbmcsIGF1ZGlvVHJhY2s6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUcmFjayA9IHRyYWNrLm1lZGlhU3RyZWFtVHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVSZW1vdGVUcmFjayhwYXJ0aWNpcGFudC5pZGVudGl0eSwgbWVkaWFUcmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZXdSb29tLm9uKFJvb21FdmVudC5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCwgKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJlbW90ZVN0cmVhbXMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5kZWxldGUocGFydGljaXBhbnQuaWRlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZW1vdGVUcmFja3MoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5kZWxldGUocGFydGljaXBhbnQuaWRlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF3YWl0IG5ld1Jvb20uY29ubmVjdChjdXJyZW50VXJsLCBjdXJyZW50VG9rZW4pO1xuICAgICAgICAgICAgICAgIC8vIFN1YnNjcmliZSB0byBhbnkgZXhpc3RpbmcgcmVtb3RlIHBhcnRpY2lwYW50IHRyYWNrc1xuICAgICAgICAgICAgICAgIG5ld1Jvb20ucmVtb3RlUGFydGljaXBhbnRzLmZvckVhY2goKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50LnRyYWNrUHVibGljYXRpb25zLmZvckVhY2goKHB1YikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHB1Yi50cmFjayAmJiBwdWIudHJhY2sgaW5zdGFuY2VvZiBSZW1vdGVUcmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHJhY2sgPSBwdWIudHJhY2subWVkaWFTdHJlYW1UcmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVkaWFUcmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRSZW1vdGVUcmFjayhwYXJ0aWNpcGFudC5pZGVudGl0eSwgbWVkaWFUcmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXdSb29tLmxvY2FsUGFydGljaXBhbnQuZW5hYmxlQ2FtZXJhQW5kTWljcm9waG9uZSgpO1xuICAgICAgICAgICAgICAgIGJ1aWxkTWVkaWFTdHJlYW1Gcm9tTG9jYWwobmV3Um9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0xpdmVLaXRdIEVycm9yIGNvbm5lY3Rpbmc6JywgZXJyKTtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcihlcnI/Lm1lc3NhZ2UgfHwgJ0tow7RuZyB0aOG7gyBr4bq/dCBu4buRaSBMaXZlS2l0Jyk7XG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdFByb21pc2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgICAgIGNvbm5lY3RQcm9taXNlUmVmLmN1cnJlbnQgPSBwcm9taXNlO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LCBbYWRkUmVtb3RlVHJhY2ssIGF1dG9TdWJzY3JpYmUsIGJ1aWxkTWVkaWFTdHJlYW1Gcm9tTG9jYWwsIGRpc2Nvbm5lY3QsIHJlbW92ZVJlbW90ZVRyYWNrXSk7XG4gICAgY29uc3QgdG9nZ2xlVmlkZW8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGlmICghcm9vbVJlZi5jdXJyZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBlbmFibGVkID0gIWlzVmlkZW9FbmFibGVkO1xuICAgICAgICByb29tUmVmLmN1cnJlbnQubG9jYWxQYXJ0aWNpcGFudC5zZXRDYW1lcmFFbmFibGVkKGVuYWJsZWQpO1xuICAgICAgICBzZXRJc1ZpZGVvRW5hYmxlZChlbmFibGVkKTtcbiAgICB9LCBbaXNWaWRlb0VuYWJsZWRdKTtcbiAgICBjb25zdCB0b2dnbGVBdWRpbyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKCFyb29tUmVmLmN1cnJlbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGVuYWJsZWQgPSAhaXNBdWRpb0VuYWJsZWQ7XG4gICAgICAgIHJvb21SZWYuY3VycmVudC5sb2NhbFBhcnRpY2lwYW50LnNldE1pY3JvcGhvbmVFbmFibGVkKGVuYWJsZWQpO1xuICAgICAgICBzZXRJc0F1ZGlvRW5hYmxlZChlbmFibGVkKTtcbiAgICB9LCBbaXNBdWRpb0VuYWJsZWRdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZGlzY29ubmVjdCgpO1xuICAgICAgICB9O1xuICAgIH0sIFtkaXNjb25uZWN0XSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm9vbSxcbiAgICAgICAgbG9jYWxTdHJlYW0sXG4gICAgICAgIHJlbW90ZVN0cmVhbXMsXG4gICAgICAgIHJlbW90ZVRyYWNrcyxcbiAgICAgICAgaXNDb25uZWN0ZWQsXG4gICAgICAgIGVycm9yLFxuICAgICAgICBjb25uZWN0LFxuICAgICAgICBkaXNjb25uZWN0LFxuICAgICAgICB0b2dnbGVWaWRlbyxcbiAgICAgICAgdG9nZ2xlQXVkaW8sXG4gICAgICAgIGlzVmlkZW9FbmFibGVkLFxuICAgICAgICBpc0F1ZGlvRW5hYmxlZCxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJSb29tIiwiUm9vbUV2ZW50IiwiUmVtb3RlVHJhY2siLCJMb2NhbFZpZGVvVHJhY2siLCJMb2NhbEF1ZGlvVHJhY2siLCJWaWRlb1ByZXNldHMiLCJ1c2VMaXZlS2l0Iiwicm9vbU5hbWUiLCJ0b2tlbiIsInVybCIsImF1dG9TdWJzY3JpYmUiLCJyb29tIiwic2V0Um9vbSIsImxvY2FsU3RyZWFtIiwic2V0TG9jYWxTdHJlYW0iLCJyZW1vdGVTdHJlYW1zIiwic2V0UmVtb3RlU3RyZWFtcyIsIk1hcCIsInJlbW90ZVRyYWNrcyIsInNldFJlbW90ZVRyYWNrcyIsImlzQ29ubmVjdGVkIiwic2V0SXNDb25uZWN0ZWQiLCJlcnJvciIsInNldEVycm9yIiwiaXNWaWRlb0VuYWJsZWQiLCJzZXRJc1ZpZGVvRW5hYmxlZCIsImlzQXVkaW9FbmFibGVkIiwic2V0SXNBdWRpb0VuYWJsZWQiLCJyb29tUmVmIiwiY29ubmVjdFByb21pc2VSZWYiLCJsYXRlc3RPcHRpb25zUmVmIiwiY3VycmVudCIsImJ1aWxkTWVkaWFTdHJlYW1Gcm9tTG9jYWwiLCJjdXJyZW50Um9vbSIsInB1YmxpY2F0aW9ucyIsIkFycmF5IiwiZnJvbSIsImxvY2FsUGFydGljaXBhbnQiLCJ0cmFja1B1YmxpY2F0aW9ucyIsInZhbHVlcyIsInRyYWNrcyIsImZvckVhY2giLCJwdWIiLCJsa1RyYWNrIiwidHJhY2siLCJtZWRpYVRyYWNrIiwibWVkaWFTdHJlYW1UcmFjayIsInB1c2giLCJsZW5ndGgiLCJzdHJlYW0iLCJNZWRpYVN0cmVhbSIsImVyciIsImNvbnNvbGUiLCJ3YXJuIiwiYWRkUmVtb3RlVHJhY2siLCJwYXJ0aWNpcGFudElkIiwicHJldiIsIm5leHQiLCJleGlzdGluZyIsImdldCIsImFsbFRyYWNrcyIsImdldFRyYWNrcyIsInQiLCJpZCIsIm5ld1N0cmVhbSIsInNldCIsInJlbW92ZVJlbW90ZVRyYWNrIiwicmVtb3ZlVHJhY2siLCJkZWxldGUiLCJkaXNjb25uZWN0IiwiY29ubmVjdCIsImN1cnJlbnRSb29tTmFtZSIsImN1cnJlbnRUb2tlbiIsImN1cnJlbnRVcmwiLCJzdGF0ZSIsInByb21pc2UiLCJyb29tT3B0aW9ucyIsImFkYXB0aXZlU3RyZWFtIiwiZHluYWNhc3QiLCJ2aWRlb0NhcHR1cmVEZWZhdWx0cyIsInJlc29sdXRpb24iLCJoNzIwIiwiZmFjaW5nTW9kZSIsInB1Ymxpc2hEZWZhdWx0cyIsInZpZGVvU2ltdWxjYXN0TGF5ZXJzIiwiaDE4MCIsImgzNjAiLCJ2aWRlb0NvZGVjIiwiZHR4IiwicmVkIiwic3RvcE1pY1RyYWNrT25NdXRlIiwibmV3Um9vbSIsIm9uIiwiQ29ubmVjdGVkIiwiRGlzY29ubmVjdGVkIiwiVHJhY2tTdWJzY3JpYmVkIiwicHVibGljYXRpb24iLCJwYXJ0aWNpcGFudCIsImlkZW50aXR5Iiwia2luZCIsInZpZGVvVHJhY2siLCJhdWRpb1RyYWNrIiwiVHJhY2tVbm11dGVkIiwiUGFydGljaXBhbnRDb25uZWN0ZWQiLCJUcmFja1Vuc3Vic2NyaWJlZCIsInVuZGVmaW5lZCIsIlBhcnRpY2lwYW50RGlzY29ubmVjdGVkIiwicmVtb3RlUGFydGljaXBhbnRzIiwiZW5hYmxlQ2FtZXJhQW5kTWljcm9waG9uZSIsIm1lc3NhZ2UiLCJ0b2dnbGVWaWRlbyIsImVuYWJsZWQiLCJzZXRDYW1lcmFFbmFibGVkIiwidG9nZ2xlQXVkaW8iLCJzZXRNaWNyb3Bob25lRW5hYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/hooks/useLiveKit.js\n");

/***/ }),

/***/ "(ssr)/../../packages/app/hooks/useOpponentInfo.js":
/*!***************************************************!*\
  !*** ../../packages/app/hooks/useOpponentInfo.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useOpponentInfo: () => (/* binding */ useOpponentInfo)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api */ \"(ssr)/../../packages/app/api.js\");\n\n\nfunction useOpponentInfo(conversationId) {\n    const [info, setInfo] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const load = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!conversationId) {\n            setInfo(null);\n            return;\n        }\n        try {\n            setLoading(true);\n            setError(null);\n            const response = await (0,_api__WEBPACK_IMPORTED_MODULE_1__.getOpponentInfo)(conversationId);\n            setInfo({\n                conversationId,\n                userId: response.user?._id,\n                name: response.user?.name ?? \"Ngi d\\xf9ng\",\n                avatar: response.user?.avatar ?? undefined,\n                status: response.status?.isOnline ? \"online\" : \"offline\",\n                lastSeen: response.status?.lastActive\n            });\n        } catch (err) {\n            console.error(\" Failed to load opponent info:\", err);\n            setError(err instanceof Error ? err.message : \"Failed to load opponent info\");\n        } finally{\n            setLoading(false);\n        }\n    }, [\n        conversationId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        load();\n    }, [\n        load\n    ]);\n    return {\n        info,\n        loading,\n        error,\n        reload: load\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL2hvb2tzL3VzZU9wcG9uZW50SW5mby5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlEO0FBQ2hCO0FBQ2xDLFNBQVNJLGdCQUFnQkMsY0FBYztJQUMxQyxNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR0wsK0NBQVFBLENBQUM7SUFDakMsTUFBTSxDQUFDTSxTQUFTQyxXQUFXLEdBQUdQLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ1EsT0FBT0MsU0FBUyxHQUFHVCwrQ0FBUUEsQ0FBQztJQUNuQyxNQUFNVSxPQUFPWixrREFBV0EsQ0FBQztRQUNyQixJQUFJLENBQUNLLGdCQUFnQjtZQUNqQkUsUUFBUTtZQUNSO1FBQ0o7UUFDQSxJQUFJO1lBQ0FFLFdBQVc7WUFDWEUsU0FBUztZQUNULE1BQU1FLFdBQVcsTUFBTVYscURBQWVBLENBQUNFO1lBQ3ZDRSxRQUFRO2dCQUNKRjtnQkFDQVMsUUFBUUQsU0FBU0UsSUFBSSxFQUFFQztnQkFDdkJDLE1BQU1KLFNBQVNFLElBQUksRUFBRUUsUUFBUTtnQkFDN0JDLFFBQVFMLFNBQVNFLElBQUksRUFBRUcsVUFBVUM7Z0JBQ2pDQyxRQUFRUCxTQUFTTyxNQUFNLEVBQUVDLFdBQVcsV0FBVztnQkFDL0NDLFVBQVVULFNBQVNPLE1BQU0sRUFBRUc7WUFDL0I7UUFDSixFQUNBLE9BQU9DLEtBQUs7WUFDUkMsUUFBUWYsS0FBSyxDQUFDLG1DQUFtQ2M7WUFDakRiLFNBQVNhLGVBQWVFLFFBQVFGLElBQUlHLE9BQU8sR0FBRztRQUNsRCxTQUNRO1lBQ0psQixXQUFXO1FBQ2Y7SUFDSixHQUFHO1FBQUNKO0tBQWU7SUFDbkJKLGdEQUFTQSxDQUFDO1FBQ05XO0lBQ0osR0FBRztRQUFDQTtLQUFLO0lBQ1QsT0FBTztRQUFFTjtRQUFNRTtRQUFTRTtRQUFPa0IsUUFBUWhCO0lBQUs7QUFDaEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96b2xhLXdlYi8uLi8uLi9wYWNrYWdlcy9hcHAvaG9va3MvdXNlT3Bwb25lbnRJbmZvLmpzPzAyZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBnZXRPcHBvbmVudEluZm8gfSBmcm9tICcuLi9hcGknO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZU9wcG9uZW50SW5mbyhjb252ZXJzYXRpb25JZCkge1xuICAgIGNvbnN0IFtpbmZvLCBzZXRJbmZvXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IGxvYWQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghY29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgICAgIHNldEluZm8obnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0T3Bwb25lbnRJbmZvKGNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgICAgIHNldEluZm8oe1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgIHVzZXJJZDogcmVzcG9uc2UudXNlcj8uX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLnVzZXI/Lm5hbWUgPz8gJ05nxrDhu51pIGTDuW5nJyxcbiAgICAgICAgICAgICAgICBhdmF0YXI6IHJlc3BvbnNlLnVzZXI/LmF2YXRhciA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXM/LmlzT25saW5lID8gJ29ubGluZScgOiAnb2ZmbGluZScsXG4gICAgICAgICAgICAgICAgbGFzdFNlZW46IHJlc3BvbnNlLnN0YXR1cz8ubGFzdEFjdGl2ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gbG9hZCBvcHBvbmVudCBpbmZvOicsIGVycik7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBsb2FkIG9wcG9uZW50IGluZm8nKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW2NvbnZlcnNhdGlvbklkXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgbG9hZCgpO1xuICAgIH0sIFtsb2FkXSk7XG4gICAgcmV0dXJuIHsgaW5mbywgbG9hZGluZywgZXJyb3IsIHJlbG9hZDogbG9hZCB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJnZXRPcHBvbmVudEluZm8iLCJ1c2VPcHBvbmVudEluZm8iLCJjb252ZXJzYXRpb25JZCIsImluZm8iLCJzZXRJbmZvIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwibG9hZCIsInJlc3BvbnNlIiwidXNlcklkIiwidXNlciIsIl9pZCIsIm5hbWUiLCJhdmF0YXIiLCJ1bmRlZmluZWQiLCJzdGF0dXMiLCJpc09ubGluZSIsImxhc3RTZWVuIiwibGFzdEFjdGl2ZSIsImVyciIsImNvbnNvbGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJyZWxvYWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/hooks/useOpponentInfo.js\n");

/***/ }),

/***/ "(ssr)/../../packages/app/hooks/useWebRTC.js":
/*!*********************************************!*\
  !*** ../../packages/app/hooks/useWebRTC.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useWebRTC: () => (/* binding */ useWebRTC)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _socket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../socket */ \"(ssr)/../../packages/app/socket.js\");\n\n\nconst FILTER_CONFIG = {\n    none: {\n        label: \"Gc\",\n        emoji: \"\\uD83D\\uDE42\"\n    },\n    beauty: {\n        label: \"Mn\",\n        emoji: \"\",\n        cssFilter: \"brightness(1.08) contrast(1.05) saturate(1.25)\"\n    },\n    warm: {\n        label: \"m\",\n        emoji: \"\\uD83C\\uDF05\",\n        cssFilter: \"brightness(1.05) saturate(1.25) hue-rotate(-5deg)\"\n    },\n    cool: {\n        label: \"M\\xe1t\",\n        emoji: \"\",\n        cssFilter: \"brightness(1.08) saturate(1.15) hue-rotate(185deg)\"\n    },\n    party: {\n        label: \"Party\",\n        emoji: \"\\uD83C\\uDF89\",\n        cssFilter: \"brightness(1.05) saturate(1.25)\",\n        overlay: (ctx, width, height, time)=>{\n            ctx.save();\n            ctx.globalAlpha = 0.35;\n            for(let i = 0; i < 20; i += 1){\n                const x = (i * 73 + time / 12 % width) % width;\n                const y = (i * 41 + time / 18 % height) % height;\n                const size = 12 + i % 5 * 3;\n                ctx.fillStyle = [\n                    \"#ff6b6b\",\n                    \"#ffd93d\",\n                    \"#6bc2ff\",\n                    \"#b070ff\"\n                ][i % 4];\n                ctx.beginPath();\n                ctx.arc(x, y, size, 0, Math.PI * 2);\n                ctx.fill();\n            }\n            ctx.restore();\n        }\n    },\n    birthday: {\n        label: \"Sinh nht\",\n        emoji: \"\\uD83C\\uDF82\",\n        cssFilter: \"brightness(1.05) saturate(1.15)\",\n        overlay: (ctx, width, height)=>{\n            ctx.save();\n            // Balloons\n            const balloonColors = [\n                \"#ff7eb6\",\n                \"#7dbbff\",\n                \"#ffd966\"\n            ];\n            balloonColors.forEach((color, index)=>{\n                const bx = index === 0 ? width * 0.15 : index === 1 ? width * 0.85 : width * 0.5;\n                const by = index === 2 ? height * 0.2 : height * 0.15;\n                const radius = index === 2 ? 80 : 70;\n                const gradient = ctx.createRadialGradient(bx - 20, by - 30, 20, bx, by, radius);\n                gradient.addColorStop(0, \"#ffffff\");\n                gradient.addColorStop(0.2, \"#ffffff\");\n                gradient.addColorStop(1, color);\n                ctx.fillStyle = gradient;\n                ctx.beginPath();\n                ctx.ellipse(bx, by, radius * 0.75, radius, 0, 0, Math.PI * 2);\n                ctx.fill();\n                ctx.strokeStyle = \"#ffffff\";\n                ctx.lineWidth = 2;\n                ctx.beginPath();\n                ctx.moveTo(bx, by + radius);\n                ctx.quadraticCurveTo(bx - 10, by + radius + 60, bx, by + radius + 110);\n                ctx.stroke();\n            });\n            // Party hat\n            ctx.fillStyle = \"#ff8ce6\";\n            ctx.beginPath();\n            ctx.moveTo(width / 2, height * 0.02);\n            ctx.lineTo(width / 2 - 80, height * 0.28);\n            ctx.lineTo(width / 2 + 80, height * 0.28);\n            ctx.closePath();\n            ctx.fill();\n            ctx.fillStyle = \"rgba(255,255,255,0.45)\";\n            for(let i = -60; i <= 60; i += 30){\n                ctx.beginPath();\n                ctx.arc(width / 2 + i, height * 0.18, 18, 0, Math.PI * 2);\n                ctx.fill();\n            }\n            // Cake base\n            const cakeHeight = 90;\n            ctx.fillStyle = \"#ffd1dc\";\n            ctx.fillRect(width * 0.2, height - cakeHeight - 20, width * 0.6, cakeHeight);\n            ctx.fillStyle = \"#ff9ebe\";\n            ctx.fillRect(width * 0.2, height - cakeHeight - 20, width * 0.6, 25);\n            // Candles\n            for(let i = -1; i <= 1; i++){\n                const cx = width / 2 + i * 35;\n                ctx.fillStyle = \"#5dade2\";\n                ctx.fillRect(cx - 6, height - cakeHeight - 60, 12, 40);\n                ctx.fillStyle = \"#ffd966\";\n                ctx.beginPath();\n                ctx.ellipse(cx, height - cakeHeight - 68, 7, 10, 0, 0, Math.PI * 2);\n                ctx.fill();\n            }\n            ctx.restore();\n        }\n    }\n};\nconst ICE_SERVERS = [\n    {\n        urls: \"stun:stun.l.google.com:19302\"\n    },\n    {\n        urls: \"stun:stun1.l.google.com:19302\"\n    },\n    {\n        urls: \"stun:stun2.l.google.com:19302\"\n    },\n    {\n        urls: \"stun:stun3.l.google.com:19302\"\n    },\n    {\n        urls: \"stun:stun4.l.google.com:19302\"\n    },\n    // Free TURN servers from Open Relay Project\n    {\n        urls: \"turn:openrelay.metered.ca:80\",\n        username: \"openrelayproject\",\n        credential: \"openrelayproject\"\n    },\n    {\n        urls: \"turn:openrelay.metered.ca:443\",\n        username: \"openrelayproject\",\n        credential: \"openrelayproject\"\n    },\n    {\n        urls: \"turn:openrelay.metered.ca:443?transport=tcp\",\n        username: \"openrelayproject\",\n        credential: \"openrelayproject\"\n    }\n];\nfunction useWebRTC({ callId, conversationId: _conversationId, isInitiator, localUserId: _localUserId, remoteUserId, videoDeviceId, audioDeviceId }) {\n    const [localStream, setLocalStream] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [remoteStream, setRemoteStream] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isVideoEnabled, setIsVideoEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [isAudioEnabled, setIsAudioEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [currentFilter, setCurrentFilter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"none\");\n    const [isScreenSharing, setIsScreenSharing] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const peerConnectionRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)((0,_socket__WEBPACK_IMPORTED_MODULE_1__.getSocket)());\n    const localVideoRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const remoteVideoRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // Queue for ICE candidates received before remote description is set\n    const iceCandidateQueueRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n    const hasReceivedOfferRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const offerRetryTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const rawCameraStreamRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const screenShareStreamRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const processedFilterStreamRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const filterCanvasRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const filterVideoRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const filterAnimationFrameRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const currentFilterRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(\"none\");\n    // Refs to store latest functions for use in socket handlers (will be set after functions are defined)\n    const initPeerConnectionRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const getUserMediaRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // Sync socketRef with current socket - poll every 500ms until connected\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const syncSocket = ()=>{\n            const currentSocket = (0,_socket__WEBPACK_IMPORTED_MODULE_1__.getSocket)();\n            if (currentSocket && currentSocket.connected) {\n                socketRef.current = currentSocket;\n                console.log(\"[useWebRTC] Socket synced, connected:\", currentSocket.id);\n            } else if (!socketRef.current || !socketRef.current.connected) {\n                socketRef.current = currentSocket;\n            }\n        };\n        // Initial sync\n        syncSocket();\n        // Poll for socket connection\n        const interval = setInterval(syncSocket, 500);\n        return ()=>clearInterval(interval);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        currentFilterRef.current = currentFilter;\n    }, [\n        currentFilter\n    ]);\n    const replaceVideoTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (track)=>{\n        if (!track) return;\n        const pc = peerConnectionRef.current;\n        if (!pc) return;\n        const sender = pc.getSenders().find((s)=>s.track && s.track.kind === \"video\");\n        if (sender) {\n            await sender.replaceTrack(track);\n        }\n    }, []);\n    const stopFilterProcessing = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (filterAnimationFrameRef.current) {\n            cancelAnimationFrame(filterAnimationFrameRef.current);\n            filterAnimationFrameRef.current = null;\n        }\n        if (processedFilterStreamRef.current) {\n            processedFilterStreamRef.current.getTracks().forEach((track)=>track.stop());\n            processedFilterStreamRef.current = null;\n        }\n        if (filterVideoRef.current) {\n            try {\n                filterVideoRef.current.pause();\n            } catch (err) {\n            // ignore\n            }\n            filterVideoRef.current.srcObject = null;\n            filterVideoRef.current = null;\n        }\n        filterCanvasRef.current = null;\n    }, []);\n    const startFilterProcessing = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((filter)=>{\n        const rawStream = rawCameraStreamRef.current;\n        if (!rawStream) return;\n        stopFilterProcessing();\n        const videoEl = document.createElement(\"video\");\n        videoEl.srcObject = rawStream;\n        videoEl.muted = true;\n        videoEl.playsInline = true;\n        videoEl.autoplay = true;\n        videoEl.play().catch(()=>{});\n        filterVideoRef.current = videoEl;\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n            console.error(\"[Filter] Canvas context unavailable\");\n            return;\n        }\n        filterCanvasRef.current = canvas;\n        const render = ()=>{\n            if (!filterVideoRef.current) {\n                return;\n            }\n            const video = filterVideoRef.current;\n            const width = video.videoWidth || 640;\n            const height = video.videoHeight || 480;\n            if (width === 0 || height === 0) {\n                filterAnimationFrameRef.current = requestAnimationFrame(render);\n                return;\n            }\n            if (canvas.width !== width || canvas.height !== height) {\n                canvas.width = width;\n                canvas.height = height;\n            }\n            ctx.clearRect(0, 0, width, height);\n            const config = FILTER_CONFIG[filter];\n            ctx.filter = config.cssFilter || \"none\";\n            ctx.drawImage(video, 0, 0, width, height);\n            ctx.filter = \"none\";\n            if (config.overlay) {\n                config.overlay(ctx, width, height, performance.now());\n            }\n            filterAnimationFrameRef.current = requestAnimationFrame(render);\n        };\n        render();\n        const processedStream = canvas.captureStream(30);\n        processedFilterStreamRef.current = processedStream;\n        const processedTrack = processedStream.getVideoTracks()[0];\n        replaceVideoTrack(processedTrack);\n        setLocalStream(processedStream);\n    }, [\n        replaceVideoTrack,\n        stopFilterProcessing\n    ]);\n    const stopScreenShare = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!screenShareStreamRef.current) return;\n        screenShareStreamRef.current.getTracks().forEach((track)=>track.stop());\n        screenShareStreamRef.current = null;\n        setIsScreenSharing(false);\n        const cameraStream = rawCameraStreamRef.current;\n        if (!cameraStream) return;\n        if (currentFilterRef.current !== \"none\") {\n            startFilterProcessing(currentFilterRef.current);\n        } else {\n            const cameraTrack = cameraStream.getVideoTracks()[0];\n            await replaceVideoTrack(cameraTrack);\n            setLocalStream(cameraStream);\n        }\n    }, [\n        replaceVideoTrack,\n        startFilterProcessing\n    ]);\n    const startScreenShare = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (isScreenSharing) return;\n        try {\n            const electronAPI =  false ? 0 : undefined;\n            let shareStream = null;\n            if (electronAPI?.selectScreenSource) {\n                const sourceId = await electronAPI.selectScreenSource();\n                if (!sourceId) {\n                    setError(\"Kh\\xf4ng t\\xecm thy m\\xe0n h\\xecnh  chia s.\");\n                    return;\n                }\n                const electronConstraints = {\n                    audio: false,\n                    video: {\n                        mandatory: {\n                            chromeMediaSource: \"desktop\",\n                            chromeMediaSourceId: sourceId,\n                            maxFrameRate: 30,\n                            minFrameRate: 5\n                        }\n                    }\n                };\n                shareStream = await navigator.mediaDevices.getUserMedia(electronConstraints);\n            } else if (navigator.mediaDevices?.getDisplayMedia) {\n                shareStream = await navigator.mediaDevices.getDisplayMedia({\n                    video: {\n                        frameRate: 30,\n                        width: {\n                            ideal: 1920\n                        },\n                        height: {\n                            ideal: 1080\n                        },\n                        displaySurface: \"monitor\"\n                    },\n                    audio: false\n                });\n            } else {\n                throw new Error(\"SCREEN_SHARE_NOT_SUPPORTED\");\n            }\n            screenShareStreamRef.current = shareStream;\n            const track = shareStream.getVideoTracks()[0];\n            track.onended = ()=>{\n                stopScreenShare().catch(()=>{});\n            };\n            stopFilterProcessing();\n            setLocalStream(shareStream);\n            await replaceVideoTrack(track);\n            setIsScreenSharing(true);\n        } catch (err) {\n            console.error(\"[ScreenShare] Error starting screen share:\", err);\n            if (err?.name === \"NotAllowedError\") {\n                setError(\"Bn \\xe3 t chi quyn chia s m\\xe0n h\\xecnh.\");\n            } else if (err?.name === \"NotFoundError\") {\n                setError(\"Kh\\xf4ng t\\xecm thy m\\xe0n h\\xecnh ph\\xf9 hp  chia s.\");\n            } else {\n                setError(\"Chia s m\\xe0n h\\xecnh cha c h tr trong m\\xf4i trng n\\xe0y.\");\n            }\n            throw err;\n        }\n    }, [\n        isScreenSharing,\n        replaceVideoTrack,\n        stopFilterProcessing,\n        stopScreenShare\n    ]);\n    const applyFilter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (filter)=>{\n        setCurrentFilter(filter);\n        if (isScreenSharing) {\n            console.warn(\"[Filter] Cannot apply filter while sharing screen\");\n            return;\n        }\n        if (!rawCameraStreamRef.current) return;\n        if (filter === \"none\") {\n            stopFilterProcessing();\n            const cameraTrack = rawCameraStreamRef.current.getVideoTracks()[0];\n            await replaceVideoTrack(cameraTrack);\n            setLocalStream(rawCameraStreamRef.current);\n            return;\n        }\n        startFilterProcessing(filter);\n    }, [\n        isScreenSharing,\n        replaceVideoTrack,\n        startFilterProcessing,\n        stopFilterProcessing\n    ]);\n    // ============================================================================\n    // ERROR HANDLING HELPERS\n    // ============================================================================\n    const handleGetUserMediaError = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((err)=>{\n        const timestamp = new Date().toISOString();\n        console.error(`[getUserMedia ERROR] ${timestamp}`);\n        console.error(`[getUserMedia ERROR] Error name: ${err.name}`);\n        console.error(`[getUserMedia ERROR] Error message: ${err.message}`);\n        console.error(`[getUserMedia ERROR] Full error:`, err);\n        switch(err.name){\n            case \"NotAllowedError\":\n                console.error(\"[getUserMedia ERROR] NotAllowedError: Permission denied by user or system\");\n                return \"Camera/microphone permission denied. Please allow access in Windows Settings (Privacy  Camera/Microphone).\";\n            case \"NotFoundError\":\n                console.error(\"[getUserMedia ERROR] NotFoundError: No media device found\");\n                return \"No camera/microphone found. Please connect a device.\";\n            case \"NotReadableError\":\n                console.error(\"[getUserMedia ERROR] NotReadableError: Device is already in use\");\n                return \"Camera/microphone is already in use by another application.\";\n            case \"OverconstrainedError\":\n                console.error(\"[getUserMedia ERROR] OverconstrainedError: Constraints cannot be satisfied\");\n                return \"Camera/microphone constraints cannot be satisfied. Please try different settings.\";\n            case \"SecurityError\":\n                console.error(\"[getUserMedia ERROR] SecurityError: Not in secure context\");\n                return \"Security error: App must run in secure context.\";\n            case \"TypeError\":\n                console.error(\"[getUserMedia ERROR] TypeError: Invalid constraints or API not available\");\n                return \"Invalid media constraints or API not available.\";\n            default:\n                console.error(`[getUserMedia ERROR] Unknown error: ${err.name}`);\n                return err.message || \"Failed to access camera/microphone.\";\n        }\n    }, []);\n    // ============================================================================\n    // GET USER MEDIA WITH DETAILED ERROR HANDLING\n    // ============================================================================\n    const getUserMedia = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (video, audio)=>{\n        const timestamp = new Date().toISOString();\n        console.log(`[getUserMedia] ${timestamp} - Starting request`);\n        console.log(`[getUserMedia] Video: ${video}, Audio: ${audio}`);\n        // Check if mediaDevices API is available\n        if (!navigator.mediaDevices) {\n            const errorMsg = \"MediaDevices API is not available in this browser.\";\n            console.error(`[getUserMedia ERROR] ${errorMsg}`);\n            throw new Error(errorMsg);\n        }\n        if (!navigator.mediaDevices.getUserMedia) {\n            const errorMsg = \"getUserMedia is not supported in this browser.\";\n            console.error(`[getUserMedia ERROR] ${errorMsg}`);\n            throw new Error(errorMsg);\n        }\n        // Log environment info\n        console.log(`[getUserMedia] Environment info:`);\n        console.log(`[getUserMedia] Origin: ${window.location.origin}`);\n        console.log(`[getUserMedia] URL: ${window.location.href}`);\n        console.log(`[getUserMedia] Is secure context: ${window.isSecureContext}`);\n        console.log(`[getUserMedia] MediaDevices available: ${!!navigator.mediaDevices}`);\n        // Prepare constraints with device selection\n        const constraints = {\n            video: video ? videoDeviceId ? {\n                deviceId: {\n                    exact: videoDeviceId\n                },\n                width: {\n                    ideal: 1280\n                },\n                height: {\n                    ideal: 720\n                }\n            } : {\n                width: {\n                    ideal: 1280\n                },\n                height: {\n                    ideal: 720\n                },\n                facingMode: \"user\"\n            } : false,\n            audio: audio ? audioDeviceId ? {\n                deviceId: {\n                    exact: audioDeviceId\n                },\n                echoCancellation: true,\n                noiseSuppression: true,\n                autoGainControl: true\n            } : {\n                echoCancellation: true,\n                noiseSuppression: true,\n                autoGainControl: true\n            } : false\n        };\n        if (videoDeviceId) {\n            console.log(`[getUserMedia] Using selected video device: ${videoDeviceId}`);\n        }\n        if (audioDeviceId) {\n            console.log(`[getUserMedia] Using selected audio device: ${audioDeviceId}`);\n        }\n        console.log(`[getUserMedia] Constraints:`, JSON.stringify(constraints, null, 2));\n        try {\n            console.log(`[getUserMedia] Calling navigator.mediaDevices.getUserMedia...`);\n            const stream = await navigator.mediaDevices.getUserMedia(constraints);\n            console.log(`[getUserMedia]  Success! Stream obtained`);\n            console.log(`[getUserMedia] Stream ID: ${stream.id}`);\n            console.log(`[getUserMedia] Stream active: ${stream.active}`);\n            console.log(`[getUserMedia] Tracks:`, stream.getTracks().map((track)=>({\n                    kind: track.kind,\n                    id: track.id,\n                    label: track.label,\n                    enabled: track.enabled,\n                    muted: track.muted,\n                    readyState: track.readyState\n                })));\n            if (rawCameraStreamRef.current && rawCameraStreamRef.current !== stream) {\n                rawCameraStreamRef.current.getTracks().forEach((track)=>track.stop());\n            }\n            rawCameraStreamRef.current = stream;\n            if (!isScreenSharing && currentFilterRef.current === \"none\") {\n                setLocalStream(stream);\n            }\n            setError(null);\n            // Add tracks to peer connection if it exists\n            if (peerConnectionRef.current) {\n                stream.getTracks().forEach((track)=>{\n                    console.log(`[getUserMedia] Adding ${track.kind} track to peer connection`);\n                    peerConnectionRef.current?.addTrack(track, stream);\n                });\n            }\n            if (!isScreenSharing && currentFilterRef.current !== \"none\") {\n                startFilterProcessing(currentFilterRef.current);\n            }\n            return stream;\n        } catch (err) {\n            const errorMessage = handleGetUserMediaError(err);\n            setError(errorMessage);\n            throw err;\n        }\n    }, [\n        handleGetUserMediaError,\n        isScreenSharing,\n        startFilterProcessing\n    ]);\n    // Update getUserMedia ref\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        getUserMediaRef.current = getUserMedia;\n    }, [\n        getUserMedia\n    ]);\n    // ============================================================================\n    // INITIALIZE PEER CONNECTION\n    // ============================================================================\n    const initPeerConnection = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        console.log(\"[PeerConnection] Initializing...\");\n        if (peerConnectionRef.current) {\n            console.log(\"[PeerConnection] Closing existing connection\");\n            peerConnectionRef.current.close();\n        }\n        const pc = new RTCPeerConnection({\n            iceServers: ICE_SERVERS\n        });\n        console.log(\"[PeerConnection] Created new RTCPeerConnection\");\n        // Handle ICE candidates\n        pc.onicecandidate = (event)=>{\n            if (event.candidate) {\n                console.log(\"[PeerConnection] ICE candidate:\", event.candidate);\n                const socket = socketRef.current;\n                if (socket) {\n                    socket.emit(\"webrtc:ice-candidate\", {\n                        callId,\n                        candidate: event.candidate,\n                        targetUserId: remoteUserId\n                    });\n                }\n            } else {\n                console.log(\"[PeerConnection] ICE gathering complete\");\n            }\n        };\n        // Handle connection state changes\n        pc.onconnectionstatechange = ()=>{\n            const state = pc.connectionState;\n            console.log(`[PeerConnection] Connection state: ${state}`);\n            if (state === \"connected\") {\n                setIsConnected(true);\n                setError(null);\n            } else if (state === \"disconnected\" || state === \"failed\" || state === \"closed\") {\n                setIsConnected(false);\n            }\n        };\n        // Handle remote stream\n        pc.ontrack = (event)=>{\n            console.log(\"[PeerConnection] Received remote track:\", event.track.kind);\n            if (event.streams && event.streams[0]) {\n                console.log(\"[PeerConnection] Setting remote stream\");\n                setRemoteStream(event.streams[0]);\n            }\n        };\n        // Handle ICE connection state\n        pc.oniceconnectionstatechange = ()=>{\n            const state = pc.iceConnectionState;\n            console.log(`[PeerConnection] ICE connection state: ${state}`);\n            if (state === \"failed\") {\n                console.error(\"[PeerConnection] ICE connection failed\");\n                setError(\"Connection failed. Please try again.\");\n            }\n        };\n        peerConnectionRef.current = pc;\n        return pc;\n    }, [\n        callId,\n        remoteUserId\n    ]);\n    // Update initPeerConnection ref\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        initPeerConnectionRef.current = initPeerConnection;\n    }, [\n        initPeerConnection\n    ]);\n    const requestOffer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((reason)=>{\n        const socket = socketRef.current;\n        if (!socket) {\n            console.warn(\"[Socket] Cannot request offer - socket not available\");\n            return;\n        }\n        console.log(`[Socket] Requesting offer (${reason}) for callId ${callId}`);\n        socket.emit(\"webrtc:request-offer\", {\n            callId,\n            fromUserId: _localUserId,\n            targetUserId: remoteUserId\n        });\n    }, [\n        callId,\n        _localUserId,\n        remoteUserId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        return ()=>{\n            if (offerRetryTimerRef.current) {\n                clearInterval(offerRetryTimerRef.current);\n                offerRetryTimerRef.current = null;\n            }\n        };\n    }, []);\n    // ============================================================================\n    // START CALL\n    // ============================================================================\n    const startCall = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        const timestamp = new Date().toISOString();\n        console.log(`[startCall] ${timestamp} - Starting call`);\n        console.log(`[startCall] Call ID: ${callId}`);\n        console.log(`[startCall] Is initiator: ${isInitiator}`);\n        try {\n            setError(null);\n            const socket = socketRef.current;\n            if (!socket) {\n                throw new Error(\"Socket not connected\");\n            }\n            // Initialize peer connection\n            const pc = initPeerConnection();\n            // Get user media (both initiator and non-initiator need this)\n            console.log(\"[startCall] Requesting user media...\");\n            await getUserMedia(isVideoEnabled, isAudioEnabled);\n            if (isInitiator) {\n                // Initiator: Create and send offer\n                console.log(\"[startCall] Creating offer...\");\n                console.log(\"[startCall] Initiator details:\", {\n                    callId,\n                    remoteUserId,\n                    socketConnected: socket.connected,\n                    socketId: socket.id\n                });\n                const offer = await pc.createOffer();\n                console.log(\"[startCall] Offer created:\", {\n                    type: offer.type,\n                    sdpLength: offer.sdp?.length\n                });\n                await pc.setLocalDescription(offer);\n                console.log(\"[startCall] Local description set, signalingState:\", pc.signalingState);\n                // Send offer\n                console.log(\"[startCall] Sending offer via socket...\");\n                const offerData = {\n                    callId,\n                    offer: offer,\n                    targetUserId: remoteUserId\n                };\n                console.log(\"[startCall] Offer data to send:\", {\n                    callId: offerData.callId,\n                    targetUserId: offerData.targetUserId,\n                    offerType: offerData.offer.type\n                });\n                socket.emit(\"webrtc:offer\", offerData);\n                console.log(\"[startCall]  Offer emitted to socket\");\n                // Verify socket is connected\n                if (!socket.connected) {\n                    console.error(\"[startCall]  Socket not connected when sending offer!\");\n                }\n            } else {\n                // Non-initiator: Just setup peer connection and wait for offer\n                // The offer handler will create answer when offer is received\n                console.log(\"[startCall] Non-initiator: Peer connection ready, waiting for offer...\");\n                console.log(\"[startCall] Socket listeners should be set up to receive offer\");\n                hasReceivedOfferRef.current = false;\n                requestOffer(\"start\");\n                if (offerRetryTimerRef.current) {\n                    clearInterval(offerRetryTimerRef.current);\n                }\n                offerRetryTimerRef.current = setInterval(()=>{\n                    if (hasReceivedOfferRef.current) {\n                        if (offerRetryTimerRef.current) {\n                            clearInterval(offerRetryTimerRef.current);\n                            offerRetryTimerRef.current = null;\n                        }\n                        return;\n                    }\n                    requestOffer(\"retry\");\n                }, 2000);\n            }\n        } catch (err) {\n            console.error(\"[startCall] Error:\", err);\n            const errorMessage = err.message || \"Failed to start call\";\n            setError(errorMessage);\n        }\n    }, [\n        callId,\n        isInitiator,\n        remoteUserId,\n        isVideoEnabled,\n        isAudioEnabled,\n        initPeerConnection,\n        getUserMedia,\n        requestOffer\n    ]);\n    // ============================================================================\n    // END CALL\n    // ============================================================================\n    const endCall = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        console.log(\"[endCall] Ending call...\");\n        stopFilterProcessing();\n        stopScreenShare().catch(()=>{});\n        // Stop local stream tracks\n        if (localStream) {\n            console.log(\"[endCall] Stopping local stream tracks\");\n            localStream.getTracks().forEach((track)=>{\n                track.stop();\n                console.log(`[endCall] Stopped ${track.kind} track`);\n            });\n            setLocalStream(null);\n        }\n        if (rawCameraStreamRef.current) {\n            rawCameraStreamRef.current.getTracks().forEach((track)=>track.stop());\n            rawCameraStreamRef.current = null;\n        }\n        // Stop remote stream tracks\n        if (remoteStream) {\n            console.log(\"[endCall] Stopping remote stream tracks\");\n            remoteStream.getTracks().forEach((track)=>{\n                track.stop();\n            });\n            setRemoteStream(null);\n        }\n        // Close peer connection\n        if (peerConnectionRef.current) {\n            console.log(\"[endCall] Closing peer connection\");\n            peerConnectionRef.current.close();\n            peerConnectionRef.current = null;\n        }\n        setIsConnected(false);\n        setError(null);\n        console.log(\"[endCall] Call ended\");\n    }, [\n        localStream,\n        remoteStream,\n        stopFilterProcessing,\n        stopScreenShare\n    ]);\n    // ============================================================================\n    // TOGGLE VIDEO/AUDIO\n    // ============================================================================\n    const toggleVideo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        console.log(`[toggleVideo] Current state: ${isVideoEnabled}, toggling...`);\n        setIsVideoEnabled(!isVideoEnabled);\n        if (localStream) {\n            const videoTracks = localStream.getVideoTracks();\n            videoTracks.forEach((track)=>{\n                track.enabled = !isVideoEnabled;\n                console.log(`[toggleVideo] Video track ${track.id} enabled: ${track.enabled}`);\n            });\n        }\n    }, [\n        isVideoEnabled,\n        localStream\n    ]);\n    const toggleAudio = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        console.log(`[toggleAudio] Current state: ${isAudioEnabled}, toggling...`);\n        setIsAudioEnabled(!isAudioEnabled);\n        if (localStream) {\n            const audioTracks = localStream.getAudioTracks();\n            audioTracks.forEach((track)=>{\n                track.enabled = !isAudioEnabled;\n                console.log(`[toggleAudio] Audio track ${track.id} enabled: ${track.enabled}`);\n            });\n        }\n    }, [\n        isAudioEnabled,\n        localStream\n    ]);\n    // ============================================================================\n    // SETUP SOCKET LISTENERS\n    // ============================================================================\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const socket = socketRef.current;\n        if (!socket) {\n            console.log(\"[Socket] Socket not available, skipping listener setup\");\n            return;\n        }\n        // Setup listeners even if peer connection not ready yet\n        // Peer connection will be created in startCall()\n        console.log(\"[Socket] Setting up WebRTC listeners for callId:\", callId);\n        const handleOffer = async (data)=>{\n            console.log(\"[Socket] ===== OFFER RECEIVED =====\");\n            console.log(\"[Socket] Offer data:\", {\n                callId: data.callId,\n                expectedCallId: callId,\n                fromUserId: data.fromUserId,\n                offerType: data.offer?.type,\n                offerSdpLength: data.offer?.sdp?.length\n            });\n            hasReceivedOfferRef.current = true;\n            if (offerRetryTimerRef.current) {\n                clearInterval(offerRetryTimerRef.current);\n                offerRetryTimerRef.current = null;\n            }\n            if (data.callId !== callId) {\n                console.log(\"[Socket]  Offer callId mismatch:\", data.callId, \"expected:\", callId);\n                return;\n            }\n            console.log(\"[Socket]  Offer callId matches, processing...\");\n            try {\n                let pc = peerConnectionRef.current;\n                // If peer connection doesn't exist or is closed, create a new one\n                const isClosed = !pc || pc.signalingState === \"closed\" || pc.connectionState === \"closed\";\n                if (isClosed) {\n                    console.log(\"[Socket] Peer connection not found or closed, creating new one...\");\n                    if (!initPeerConnectionRef.current) {\n                        console.error(\"[Socket] initPeerConnection not available\");\n                        return;\n                    }\n                    pc = initPeerConnectionRef.current();\n                    // Get user media if not already obtained\n                    if (!localStream) {\n                        console.log(\"[Socket] Getting user media for answer...\");\n                        if (!getUserMediaRef.current) {\n                            console.error(\"[Socket] getUserMedia not available\");\n                            return;\n                        }\n                        await getUserMediaRef.current(isVideoEnabled, isAudioEnabled);\n                    }\n                    // Double check after creating - if still closed, something went wrong\n                    if (pc.signalingState === \"closed\" || pc.connectionState === \"closed\") {\n                        console.error(\"[Socket] Peer connection was closed immediately after creation\");\n                        return;\n                    }\n                }\n                // Final check - ensure pc is not null\n                if (!pc) {\n                    console.error(\"[Socket] Peer connection is null after creation\");\n                    return;\n                }\n                // Final check signaling state before setting remote description\n                if (pc.signalingState === \"closed\" || pc.connectionState === \"closed\") {\n                    console.error(\"[Socket] Cannot set remote description: peer connection is closed\");\n                    console.error(\"[Socket] Signaling state:\", pc.signalingState, \"Connection state:\", pc.connectionState);\n                    return;\n                }\n                await pc.setRemoteDescription(new RTCSessionDescription(data.offer));\n                console.log(\"[Socket] Remote description set\");\n                // Process queued ICE candidates now that remote description is set\n                if (iceCandidateQueueRef.current.length > 0) {\n                    console.log(`[Socket] Processing ${iceCandidateQueueRef.current.length} queued ICE candidates`);\n                    for (const candidate of iceCandidateQueueRef.current){\n                        try {\n                            await pc.addIceCandidate(new RTCIceCandidate(candidate));\n                            console.log(\"[Socket] Queued ICE candidate added\");\n                        } catch (err) {\n                            console.error(\"[Socket] Error adding queued ICE candidate:\", err);\n                        }\n                    }\n                    iceCandidateQueueRef.current = [];\n                }\n                const answer = await pc.createAnswer();\n                await pc.setLocalDescription(answer);\n                console.log(\"[Socket] Answer created and set, signalingState:\", pc.signalingState);\n                const answerData = {\n                    callId,\n                    answer: answer,\n                    targetUserId: data.fromUserId\n                };\n                console.log(\"[Socket] Sending answer:\", {\n                    callId: answerData.callId,\n                    targetUserId: answerData.targetUserId,\n                    answerType: answerData.answer.type,\n                    socketConnected: socket.connected,\n                    socketId: socket.id\n                });\n                socket.emit(\"webrtc:answer\", answerData);\n                console.log(\"[Socket]  Answer emitted to socket\");\n                // Verify socket is connected\n                if (!socket.connected) {\n                    console.error(\"[Socket]  Socket not connected when sending answer!\");\n                }\n            } catch (err) {\n                console.error(\"[Socket] Error handling offer:\", err);\n                setError(\"Failed to handle incoming call\");\n            }\n        };\n        const handleAnswer = async (data)=>{\n            console.log(\"[Socket] ===== ANSWER RECEIVED =====\");\n            console.log(\"[Socket] Answer data:\", {\n                callId: data.callId,\n                expectedCallId: callId,\n                fromUserId: data.fromUserId,\n                answerType: data.answer?.type,\n                answerSdpLength: data.answer?.sdp?.length\n            });\n            if (data.callId !== callId) {\n                console.log(\"[Socket]  Answer callId mismatch:\", data.callId, \"expected:\", callId);\n                return;\n            }\n            console.log(\"[Socket]  Answer callId matches, processing...\");\n            try {\n                const pc = peerConnectionRef.current;\n                if (!pc) return;\n                await pc.setRemoteDescription(new RTCSessionDescription(data.answer));\n                console.log(\"[Socket] Remote description set from answer\");\n                // Process queued ICE candidates now that remote description is set\n                if (iceCandidateQueueRef.current.length > 0) {\n                    console.log(`[Socket] Processing ${iceCandidateQueueRef.current.length} queued ICE candidates`);\n                    for (const candidate of iceCandidateQueueRef.current){\n                        try {\n                            await pc.addIceCandidate(new RTCIceCandidate(candidate));\n                            console.log(\"[Socket] Queued ICE candidate added\");\n                        } catch (err) {\n                            console.error(\"[Socket] Error adding queued ICE candidate:\", err);\n                        }\n                    }\n                    iceCandidateQueueRef.current = [];\n                }\n            } catch (err) {\n                console.error(\"[Socket] Error handling answer:\", err);\n                setError(\"Failed to handle call answer\");\n            }\n        };\n        const handleIceCandidate = async (data)=>{\n            if (data.callId !== callId) return;\n            console.log(\"[Socket] Received ICE candidate:\", data);\n            try {\n                const pc = peerConnectionRef.current;\n                if (!pc) {\n                    console.log(\"[Socket] Peer connection not ready, queueing ICE candidate\");\n                    iceCandidateQueueRef.current.push(data.candidate);\n                    return;\n                }\n                // Check if remote description is set\n                if (!pc.remoteDescription) {\n                    console.log(\"[Socket] Remote description not set yet, queueing ICE candidate\");\n                    iceCandidateQueueRef.current.push(data.candidate);\n                    return;\n                }\n                await pc.addIceCandidate(new RTCIceCandidate(data.candidate));\n                console.log(\"[Socket] ICE candidate added\");\n            } catch (err) {\n                // If error is because remote description is null, queue it\n                if (err instanceof Error && err.message.includes(\"remote description\")) {\n                    console.log(\"[Socket] Remote description not set, queueing ICE candidate\");\n                    iceCandidateQueueRef.current.push(data.candidate);\n                } else {\n                    console.error(\"[Socket] Error handling ICE candidate:\", err);\n                }\n            }\n        };\n        socket.on(\"webrtc:offer\", handleOffer);\n        socket.on(\"webrtc:answer\", handleAnswer);\n        socket.on(\"webrtc:ice-candidate\", handleIceCandidate);\n        return ()=>{\n            console.log(\"[Socket] Cleaning up WebRTC listeners\");\n            socket.off(\"webrtc:offer\", handleOffer);\n            socket.off(\"webrtc:answer\", handleAnswer);\n            socket.off(\"webrtc:ice-candidate\", handleIceCandidate);\n        };\n    // Note: We intentionally don't include initPeerConnection, getUserMedia, etc. in deps\n    // to avoid re-setting up listeners. These functions are stable (useCallback).\n    // The handlers use refs/current values when needed.\n    }, [\n        callId\n    ]);\n    // ============================================================================\n    // ATTACH STREAMS TO VIDEO ELEMENTS\n    // ============================================================================\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (localVideoRef.current && localStream) {\n            console.log(\"[Video] Attaching local stream to video element\");\n            localVideoRef.current.srcObject = localStream;\n        }\n    }, [\n        localStream\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (remoteVideoRef.current && remoteStream) {\n            console.log(\"[Video] Attaching remote stream to video element\");\n            remoteVideoRef.current.srcObject = remoteStream;\n        }\n    }, [\n        remoteStream\n    ]);\n    // ============================================================================\n    // CLEANUP ON UNMOUNT\n    // ============================================================================\n    // Use ref to store latest endCall function to avoid cleanup re-running\n    const endCallRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(endCall);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        endCallRef.current = endCall;\n    }, [\n        endCall\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        return ()=>{\n            console.log(\"[Cleanup] Component unmounting, cleaning up...\");\n            // Use ref to call latest endCall without triggering re-runs\n            endCallRef.current();\n        };\n    // Empty deps - only run on unmount\n    }, []);\n    return {\n        localStream,\n        remoteStream,\n        isConnected,\n        error,\n        startCall,\n        endCall,\n        toggleVideo,\n        toggleAudio,\n        isVideoEnabled,\n        isAudioEnabled,\n        applyFilter,\n        currentFilter,\n        startScreenShare,\n        stopScreenShare,\n        isScreenSharing,\n        localVideoRef,\n        remoteVideoRef\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL2hvb2tzL3VzZVdlYlJUQy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlFO0FBQzNCO0FBQ3RDLE1BQU1LLGdCQUFnQjtJQUNsQkMsTUFBTTtRQUFFQyxPQUFPO1FBQU9DLE9BQU87SUFBSztJQUNsQ0MsUUFBUTtRQUNKRixPQUFPO1FBQ1BDLE9BQU87UUFDUEUsV0FBVztJQUNmO0lBQ0FDLE1BQU07UUFDRkosT0FBTztRQUNQQyxPQUFPO1FBQ1BFLFdBQVc7SUFDZjtJQUNBRSxNQUFNO1FBQ0ZMLE9BQU87UUFDUEMsT0FBTztRQUNQRSxXQUFXO0lBQ2Y7SUFDQUcsT0FBTztRQUNITixPQUFPO1FBQ1BDLE9BQU87UUFDUEUsV0FBVztRQUNYSSxTQUFTLENBQUNDLEtBQUtDLE9BQU9DLFFBQVFDO1lBQzFCSCxJQUFJSSxJQUFJO1lBQ1JKLElBQUlLLFdBQVcsR0FBRztZQUNsQixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSSxJQUFJQSxLQUFLLEVBQUc7Z0JBQzVCLE1BQU1DLElBQUksQ0FBQ0QsSUFBSSxLQUFLLE9BQVEsS0FBTUwsS0FBSSxJQUFLQTtnQkFDM0MsTUFBTU8sSUFBSSxDQUFDRixJQUFJLEtBQUssT0FBUSxLQUFNSixNQUFLLElBQUtBO2dCQUM1QyxNQUFNTyxPQUFPLEtBQUssSUFBSyxJQUFLO2dCQUM1QlQsSUFBSVUsU0FBUyxHQUFHO29CQUFDO29CQUFXO29CQUFXO29CQUFXO2lCQUFVLENBQUNKLElBQUksRUFBRTtnQkFDbkVOLElBQUlXLFNBQVM7Z0JBQ2JYLElBQUlZLEdBQUcsQ0FBQ0wsR0FBR0MsR0FBR0MsTUFBTSxHQUFHSSxLQUFLQyxFQUFFLEdBQUc7Z0JBQ2pDZCxJQUFJZSxJQUFJO1lBQ1o7WUFDQWYsSUFBSWdCLE9BQU87UUFDZjtJQUNKO0lBQ0FDLFVBQVU7UUFDTnpCLE9BQU87UUFDUEMsT0FBTztRQUNQRSxXQUFXO1FBQ1hJLFNBQVMsQ0FBQ0MsS0FBS0MsT0FBT0M7WUFDbEJGLElBQUlJLElBQUk7WUFDUixXQUFXO1lBQ1gsTUFBTWMsZ0JBQWdCO2dCQUFDO2dCQUFXO2dCQUFXO2FBQVU7WUFDdkRBLGNBQWNDLE9BQU8sQ0FBQyxDQUFDQyxPQUFPQztnQkFDMUIsTUFBTUMsS0FBS0QsVUFBVSxJQUFJcEIsUUFBUSxPQUFPb0IsVUFBVSxJQUFJcEIsUUFBUSxPQUFPQSxRQUFRO2dCQUM3RSxNQUFNc0IsS0FBS0YsVUFBVSxJQUFJbkIsU0FBUyxNQUFNQSxTQUFTO2dCQUNqRCxNQUFNc0IsU0FBU0gsVUFBVSxJQUFJLEtBQUs7Z0JBQ2xDLE1BQU1JLFdBQVd6QixJQUFJMEIsb0JBQW9CLENBQUNKLEtBQUssSUFBSUMsS0FBSyxJQUFJLElBQUlELElBQUlDLElBQUlDO2dCQUN4RUMsU0FBU0UsWUFBWSxDQUFDLEdBQUc7Z0JBQ3pCRixTQUFTRSxZQUFZLENBQUMsS0FBSztnQkFDM0JGLFNBQVNFLFlBQVksQ0FBQyxHQUFHUDtnQkFDekJwQixJQUFJVSxTQUFTLEdBQUdlO2dCQUNoQnpCLElBQUlXLFNBQVM7Z0JBQ2JYLElBQUk0QixPQUFPLENBQUNOLElBQUlDLElBQUlDLFNBQVMsTUFBTUEsUUFBUSxHQUFHLEdBQUdYLEtBQUtDLEVBQUUsR0FBRztnQkFDM0RkLElBQUllLElBQUk7Z0JBQ1JmLElBQUk2QixXQUFXLEdBQUc7Z0JBQ2xCN0IsSUFBSThCLFNBQVMsR0FBRztnQkFDaEI5QixJQUFJVyxTQUFTO2dCQUNiWCxJQUFJK0IsTUFBTSxDQUFDVCxJQUFJQyxLQUFLQztnQkFDcEJ4QixJQUFJZ0MsZ0JBQWdCLENBQUNWLEtBQUssSUFBSUMsS0FBS0MsU0FBUyxJQUFJRixJQUFJQyxLQUFLQyxTQUFTO2dCQUNsRXhCLElBQUlpQyxNQUFNO1lBQ2Q7WUFDQSxZQUFZO1lBQ1pqQyxJQUFJVSxTQUFTLEdBQUc7WUFDaEJWLElBQUlXLFNBQVM7WUFDYlgsSUFBSStCLE1BQU0sQ0FBQzlCLFFBQVEsR0FBR0MsU0FBUztZQUMvQkYsSUFBSWtDLE1BQU0sQ0FBQ2pDLFFBQVEsSUFBSSxJQUFJQyxTQUFTO1lBQ3BDRixJQUFJa0MsTUFBTSxDQUFDakMsUUFBUSxJQUFJLElBQUlDLFNBQVM7WUFDcENGLElBQUltQyxTQUFTO1lBQ2JuQyxJQUFJZSxJQUFJO1lBQ1JmLElBQUlVLFNBQVMsR0FBRztZQUNoQixJQUFLLElBQUlKLElBQUksQ0FBQyxJQUFJQSxLQUFLLElBQUlBLEtBQUssR0FBSTtnQkFDaENOLElBQUlXLFNBQVM7Z0JBQ2JYLElBQUlZLEdBQUcsQ0FBQ1gsUUFBUSxJQUFJSyxHQUFHSixTQUFTLE1BQU0sSUFBSSxHQUFHVyxLQUFLQyxFQUFFLEdBQUc7Z0JBQ3ZEZCxJQUFJZSxJQUFJO1lBQ1o7WUFDQSxZQUFZO1lBQ1osTUFBTXFCLGFBQWE7WUFDbkJwQyxJQUFJVSxTQUFTLEdBQUc7WUFDaEJWLElBQUlxQyxRQUFRLENBQUNwQyxRQUFRLEtBQUtDLFNBQVNrQyxhQUFhLElBQUluQyxRQUFRLEtBQUttQztZQUNqRXBDLElBQUlVLFNBQVMsR0FBRztZQUNoQlYsSUFBSXFDLFFBQVEsQ0FBQ3BDLFFBQVEsS0FBS0MsU0FBU2tDLGFBQWEsSUFBSW5DLFFBQVEsS0FBSztZQUNqRSxVQUFVO1lBQ1YsSUFBSyxJQUFJSyxJQUFJLENBQUMsR0FBR0EsS0FBSyxHQUFHQSxJQUFLO2dCQUMxQixNQUFNZ0MsS0FBS3JDLFFBQVEsSUFBSUssSUFBSTtnQkFDM0JOLElBQUlVLFNBQVMsR0FBRztnQkFDaEJWLElBQUlxQyxRQUFRLENBQUNDLEtBQUssR0FBR3BDLFNBQVNrQyxhQUFhLElBQUksSUFBSTtnQkFDbkRwQyxJQUFJVSxTQUFTLEdBQUc7Z0JBQ2hCVixJQUFJVyxTQUFTO2dCQUNiWCxJQUFJNEIsT0FBTyxDQUFDVSxJQUFJcEMsU0FBU2tDLGFBQWEsSUFBSSxHQUFHLElBQUksR0FBRyxHQUFHdkIsS0FBS0MsRUFBRSxHQUFHO2dCQUNqRWQsSUFBSWUsSUFBSTtZQUNaO1lBQ0FmLElBQUlnQixPQUFPO1FBQ2Y7SUFDSjtBQUNKO0FBQ0EsTUFBTXVCLGNBQWM7SUFDaEI7UUFBRUMsTUFBTTtJQUErQjtJQUN2QztRQUFFQSxNQUFNO0lBQWdDO0lBQ3hDO1FBQUVBLE1BQU07SUFBZ0M7SUFDeEM7UUFBRUEsTUFBTTtJQUFnQztJQUN4QztRQUFFQSxNQUFNO0lBQWdDO0lBQ3hDLDRDQUE0QztJQUM1QztRQUNJQSxNQUFNO1FBQ05DLFVBQVU7UUFDVkMsWUFBWTtJQUNoQjtJQUNBO1FBQ0lGLE1BQU07UUFDTkMsVUFBVTtRQUNWQyxZQUFZO0lBQ2hCO0lBQ0E7UUFDSUYsTUFBTTtRQUNOQyxVQUFVO1FBQ1ZDLFlBQVk7SUFDaEI7Q0FDSDtBQUNNLFNBQVNDLFVBQVUsRUFBRUMsTUFBTSxFQUFFQyxnQkFBZ0JDLGVBQWUsRUFBRUMsV0FBVyxFQUFFQyxhQUFhQyxZQUFZLEVBQUVDLFlBQVksRUFBRUMsYUFBYSxFQUFFQyxhQUFhLEVBQUc7SUFDdEosTUFBTSxDQUFDQyxhQUFhQyxlQUFlLEdBQUduRSwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNvRSxjQUFjQyxnQkFBZ0IsR0FBR3JFLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3NFLGFBQWFDLGVBQWUsR0FBR3ZFLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ3dFLE9BQU9DLFNBQVMsR0FBR3pFLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU0sQ0FBQzBFLGdCQUFnQkMsa0JBQWtCLEdBQUczRSwrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUM0RSxnQkFBZ0JDLGtCQUFrQixHQUFHN0UsK0NBQVFBLENBQUM7SUFDckQsTUFBTSxDQUFDOEUsZUFBZUMsaUJBQWlCLEdBQUcvRSwrQ0FBUUEsQ0FBQztJQUNuRCxNQUFNLENBQUNnRixpQkFBaUJDLG1CQUFtQixHQUFHakYsK0NBQVFBLENBQUM7SUFDdkQsTUFBTWtGLG9CQUFvQm5GLDZDQUFNQSxDQUFDO0lBQ2pDLE1BQU1vRixZQUFZcEYsNkNBQU1BLENBQUNHLGtEQUFTQTtJQUNsQyxNQUFNa0YsZ0JBQWdCckYsNkNBQU1BLENBQUM7SUFDN0IsTUFBTXNGLGlCQUFpQnRGLDZDQUFNQSxDQUFDO0lBQzlCLHFFQUFxRTtJQUNyRSxNQUFNdUYsdUJBQXVCdkYsNkNBQU1BLENBQUMsRUFBRTtJQUN0QyxNQUFNd0Ysc0JBQXNCeEYsNkNBQU1BLENBQUM7SUFDbkMsTUFBTXlGLHFCQUFxQnpGLDZDQUFNQSxDQUFDO0lBQ2xDLE1BQU0wRixxQkFBcUIxRiw2Q0FBTUEsQ0FBQztJQUNsQyxNQUFNMkYsdUJBQXVCM0YsNkNBQU1BLENBQUM7SUFDcEMsTUFBTTRGLDJCQUEyQjVGLDZDQUFNQSxDQUFDO0lBQ3hDLE1BQU02RixrQkFBa0I3Riw2Q0FBTUEsQ0FBQztJQUMvQixNQUFNOEYsaUJBQWlCOUYsNkNBQU1BLENBQUM7SUFDOUIsTUFBTStGLDBCQUEwQi9GLDZDQUFNQSxDQUFDO0lBQ3ZDLE1BQU1nRyxtQkFBbUJoRyw2Q0FBTUEsQ0FBQztJQUNoQyxzR0FBc0c7SUFDdEcsTUFBTWlHLHdCQUF3QmpHLDZDQUFNQSxDQUFDO0lBQ3JDLE1BQU1rRyxrQkFBa0JsRyw2Q0FBTUEsQ0FBQztJQUMvQix3RUFBd0U7SUFDeEVELGdEQUFTQSxDQUFDO1FBQ04sTUFBTW9HLGFBQWE7WUFDZixNQUFNQyxnQkFBZ0JqRyxrREFBU0E7WUFDL0IsSUFBSWlHLGlCQUFpQkEsY0FBY0MsU0FBUyxFQUFFO2dCQUMxQ2pCLFVBQVVrQixPQUFPLEdBQUdGO2dCQUNwQkcsUUFBUUMsR0FBRyxDQUFDLHlDQUF5Q0osY0FBY0ssRUFBRTtZQUN6RSxPQUNLLElBQUksQ0FBQ3JCLFVBQVVrQixPQUFPLElBQUksQ0FBQ2xCLFVBQVVrQixPQUFPLENBQUNELFNBQVMsRUFBRTtnQkFDekRqQixVQUFVa0IsT0FBTyxHQUFHRjtZQUN4QjtRQUNKO1FBQ0EsZUFBZTtRQUNmRDtRQUNBLDZCQUE2QjtRQUM3QixNQUFNTyxXQUFXQyxZQUFZUixZQUFZO1FBQ3pDLE9BQU8sSUFBTVMsY0FBY0Y7SUFDL0IsR0FBRyxFQUFFO0lBQ0wzRyxnREFBU0EsQ0FBQztRQUNOaUcsaUJBQWlCTSxPQUFPLEdBQUd2QjtJQUMvQixHQUFHO1FBQUNBO0tBQWM7SUFDbEIsTUFBTThCLG9CQUFvQjNHLGtEQUFXQSxDQUFDLE9BQU80RztRQUN6QyxJQUFJLENBQUNBLE9BQ0Q7UUFDSixNQUFNQyxLQUFLNUIsa0JBQWtCbUIsT0FBTztRQUNwQyxJQUFJLENBQUNTLElBQ0Q7UUFDSixNQUFNQyxTQUFTRCxHQUFHRSxVQUFVLEdBQUdDLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFTCxLQUFLLElBQUlLLEVBQUVMLEtBQUssQ0FBQ00sSUFBSSxLQUFLO1FBQ3ZFLElBQUlKLFFBQVE7WUFDUixNQUFNQSxPQUFPSyxZQUFZLENBQUNQO1FBQzlCO0lBQ0osR0FBRyxFQUFFO0lBQ0wsTUFBTVEsdUJBQXVCcEgsa0RBQVdBLENBQUM7UUFDckMsSUFBSTZGLHdCQUF3Qk8sT0FBTyxFQUFFO1lBQ2pDaUIscUJBQXFCeEIsd0JBQXdCTyxPQUFPO1lBQ3BEUCx3QkFBd0JPLE9BQU8sR0FBRztRQUN0QztRQUNBLElBQUlWLHlCQUF5QlUsT0FBTyxFQUFFO1lBQ2xDVix5QkFBeUJVLE9BQU8sQ0FBQ2tCLFNBQVMsR0FBR3ZGLE9BQU8sQ0FBQyxDQUFDNkUsUUFBVUEsTUFBTVcsSUFBSTtZQUMxRTdCLHlCQUF5QlUsT0FBTyxHQUFHO1FBQ3ZDO1FBQ0EsSUFBSVIsZUFBZVEsT0FBTyxFQUFFO1lBQ3hCLElBQUk7Z0JBQ0FSLGVBQWVRLE9BQU8sQ0FBQ29CLEtBQUs7WUFDaEMsRUFDQSxPQUFPQyxLQUFLO1lBQ1IsU0FBUztZQUNiO1lBQ0E3QixlQUFlUSxPQUFPLENBQUNzQixTQUFTLEdBQUc7WUFDbkM5QixlQUFlUSxPQUFPLEdBQUc7UUFDN0I7UUFDQVQsZ0JBQWdCUyxPQUFPLEdBQUc7SUFDOUIsR0FBRyxFQUFFO0lBQ0wsTUFBTXVCLHdCQUF3QjNILGtEQUFXQSxDQUFDLENBQUM0SDtRQUN2QyxNQUFNQyxZQUFZckMsbUJBQW1CWSxPQUFPO1FBQzVDLElBQUksQ0FBQ3lCLFdBQ0Q7UUFDSlQ7UUFDQSxNQUFNVSxVQUFVQyxTQUFTQyxhQUFhLENBQUM7UUFDdkNGLFFBQVFKLFNBQVMsR0FBR0c7UUFDcEJDLFFBQVFHLEtBQUssR0FBRztRQUNoQkgsUUFBUUksV0FBVyxHQUFHO1FBQ3RCSixRQUFRSyxRQUFRLEdBQUc7UUFDbkJMLFFBQVFNLElBQUksR0FBR0MsS0FBSyxDQUFDLEtBQVE7UUFDN0J6QyxlQUFlUSxPQUFPLEdBQUcwQjtRQUN6QixNQUFNUSxTQUFTUCxTQUFTQyxhQUFhLENBQUM7UUFDdEMsTUFBTXBILE1BQU0wSCxPQUFPQyxVQUFVLENBQUM7UUFDOUIsSUFBSSxDQUFDM0gsS0FBSztZQUNOeUYsUUFBUTlCLEtBQUssQ0FBQztZQUNkO1FBQ0o7UUFDQW9CLGdCQUFnQlMsT0FBTyxHQUFHa0M7UUFDMUIsTUFBTUUsU0FBUztZQUNYLElBQUksQ0FBQzVDLGVBQWVRLE9BQU8sRUFBRTtnQkFDekI7WUFDSjtZQUNBLE1BQU1xQyxRQUFRN0MsZUFBZVEsT0FBTztZQUNwQyxNQUFNdkYsUUFBUTRILE1BQU1DLFVBQVUsSUFBSTtZQUNsQyxNQUFNNUgsU0FBUzJILE1BQU1FLFdBQVcsSUFBSTtZQUNwQyxJQUFJOUgsVUFBVSxLQUFLQyxXQUFXLEdBQUc7Z0JBQzdCK0Usd0JBQXdCTyxPQUFPLEdBQUd3QyxzQkFBc0JKO2dCQUN4RDtZQUNKO1lBQ0EsSUFBSUYsT0FBT3pILEtBQUssS0FBS0EsU0FBU3lILE9BQU94SCxNQUFNLEtBQUtBLFFBQVE7Z0JBQ3BEd0gsT0FBT3pILEtBQUssR0FBR0E7Z0JBQ2Z5SCxPQUFPeEgsTUFBTSxHQUFHQTtZQUNwQjtZQUNBRixJQUFJaUksU0FBUyxDQUFDLEdBQUcsR0FBR2hJLE9BQU9DO1lBQzNCLE1BQU1nSSxTQUFTNUksYUFBYSxDQUFDMEgsT0FBTztZQUNwQ2hILElBQUlnSCxNQUFNLEdBQUdrQixPQUFPdkksU0FBUyxJQUFJO1lBQ2pDSyxJQUFJbUksU0FBUyxDQUFDTixPQUFPLEdBQUcsR0FBRzVILE9BQU9DO1lBQ2xDRixJQUFJZ0gsTUFBTSxHQUFHO1lBQ2IsSUFBSWtCLE9BQU9uSSxPQUFPLEVBQUU7Z0JBQ2hCbUksT0FBT25JLE9BQU8sQ0FBQ0MsS0FBS0MsT0FBT0MsUUFBUWtJLFlBQVlDLEdBQUc7WUFDdEQ7WUFDQXBELHdCQUF3Qk8sT0FBTyxHQUFHd0Msc0JBQXNCSjtRQUM1RDtRQUNBQTtRQUNBLE1BQU1VLGtCQUFrQlosT0FBT2EsYUFBYSxDQUFDO1FBQzdDekQseUJBQXlCVSxPQUFPLEdBQUc4QztRQUNuQyxNQUFNRSxpQkFBaUJGLGdCQUFnQkcsY0FBYyxFQUFFLENBQUMsRUFBRTtRQUMxRDFDLGtCQUFrQnlDO1FBQ2xCbEYsZUFBZWdGO0lBQ25CLEdBQUc7UUFBQ3ZDO1FBQW1CUztLQUFxQjtJQUM1QyxNQUFNa0Msa0JBQWtCdEosa0RBQVdBLENBQUM7UUFDaEMsSUFBSSxDQUFDeUYscUJBQXFCVyxPQUFPLEVBQzdCO1FBQ0pYLHFCQUFxQlcsT0FBTyxDQUFDa0IsU0FBUyxHQUFHdkYsT0FBTyxDQUFDLENBQUM2RSxRQUFVQSxNQUFNVyxJQUFJO1FBQ3RFOUIscUJBQXFCVyxPQUFPLEdBQUc7UUFDL0JwQixtQkFBbUI7UUFDbkIsTUFBTXVFLGVBQWUvRCxtQkFBbUJZLE9BQU87UUFDL0MsSUFBSSxDQUFDbUQsY0FDRDtRQUNKLElBQUl6RCxpQkFBaUJNLE9BQU8sS0FBSyxRQUFRO1lBQ3JDdUIsc0JBQXNCN0IsaUJBQWlCTSxPQUFPO1FBQ2xELE9BQ0s7WUFDRCxNQUFNb0QsY0FBY0QsYUFBYUYsY0FBYyxFQUFFLENBQUMsRUFBRTtZQUNwRCxNQUFNMUMsa0JBQWtCNkM7WUFDeEJ0RixlQUFlcUY7UUFDbkI7SUFDSixHQUFHO1FBQUM1QztRQUFtQmdCO0tBQXNCO0lBQzdDLE1BQU04QixtQkFBbUJ6SixrREFBV0EsQ0FBQztRQUNqQyxJQUFJK0UsaUJBQ0E7UUFDSixJQUFJO1lBQ0EsTUFBTTJFLGNBQWMsTUFBa0IsR0FBY0MsQ0FBa0IsR0FBR0M7WUFDekUsSUFBSUMsY0FBYztZQUNsQixJQUFJSCxhQUFhSSxvQkFBb0I7Z0JBQ2pDLE1BQU1DLFdBQVcsTUFBTUwsWUFBWUksa0JBQWtCO2dCQUNyRCxJQUFJLENBQUNDLFVBQVU7b0JBQ1h2RixTQUFTO29CQUNUO2dCQUNKO2dCQUNBLE1BQU13RixzQkFBc0I7b0JBQ3hCQyxPQUFPO29CQUNQeEIsT0FBTzt3QkFDSHlCLFdBQVc7NEJBQ1BDLG1CQUFtQjs0QkFDbkJDLHFCQUFxQkw7NEJBQ3JCTSxjQUFjOzRCQUNkQyxjQUFjO3dCQUNsQjtvQkFDSjtnQkFDSjtnQkFDQVQsY0FBYyxNQUFNVSxVQUFVQyxZQUFZLENBQUNDLFlBQVksQ0FBQ1Q7WUFDNUQsT0FDSyxJQUFJTyxVQUFVQyxZQUFZLEVBQUVFLGlCQUFpQjtnQkFDOUNiLGNBQWMsTUFBTVUsVUFBVUMsWUFBWSxDQUFDRSxlQUFlLENBQUM7b0JBQ3ZEakMsT0FBTzt3QkFDSGtDLFdBQVc7d0JBQ1g5SixPQUFPOzRCQUFFK0osT0FBTzt3QkFBSzt3QkFDckI5SixRQUFROzRCQUFFOEosT0FBTzt3QkFBSzt3QkFDdEJDLGdCQUFnQjtvQkFDcEI7b0JBQ0FaLE9BQU87Z0JBQ1g7WUFDSixPQUNLO2dCQUNELE1BQU0sSUFBSWEsTUFBTTtZQUNwQjtZQUNBckYscUJBQXFCVyxPQUFPLEdBQUd5RDtZQUMvQixNQUFNakQsUUFBUWlELFlBQVlSLGNBQWMsRUFBRSxDQUFDLEVBQUU7WUFDN0N6QyxNQUFNbUUsT0FBTyxHQUFHO2dCQUNaekIsa0JBQWtCakIsS0FBSyxDQUFDLEtBQVE7WUFDcEM7WUFDQWpCO1lBQ0FsRCxlQUFlMkY7WUFDZixNQUFNbEQsa0JBQWtCQztZQUN4QjVCLG1CQUFtQjtRQUN2QixFQUNBLE9BQU95QyxLQUFLO1lBQ1JwQixRQUFROUIsS0FBSyxDQUFDLDhDQUE4Q2tEO1lBQzVELElBQUlBLEtBQUt1RCxTQUFTLG1CQUFtQjtnQkFDakN4RyxTQUFTO1lBQ2IsT0FDSyxJQUFJaUQsS0FBS3VELFNBQVMsaUJBQWlCO2dCQUNwQ3hHLFNBQVM7WUFDYixPQUNLO2dCQUNEQSxTQUFTO1lBQ2I7WUFDQSxNQUFNaUQ7UUFDVjtJQUNKLEdBQUc7UUFBQzFDO1FBQWlCNEI7UUFBbUJTO1FBQXNCa0M7S0FBZ0I7SUFDOUUsTUFBTTJCLGNBQWNqTCxrREFBV0EsQ0FBQyxPQUFPNEg7UUFDbkM5QyxpQkFBaUI4QztRQUNqQixJQUFJN0MsaUJBQWlCO1lBQ2pCc0IsUUFBUTZFLElBQUksQ0FBQztZQUNiO1FBQ0o7UUFDQSxJQUFJLENBQUMxRixtQkFBbUJZLE9BQU8sRUFDM0I7UUFDSixJQUFJd0IsV0FBVyxRQUFRO1lBQ25CUjtZQUNBLE1BQU1vQyxjQUFjaEUsbUJBQW1CWSxPQUFPLENBQUNpRCxjQUFjLEVBQUUsQ0FBQyxFQUFFO1lBQ2xFLE1BQU0xQyxrQkFBa0I2QztZQUN4QnRGLGVBQWVzQixtQkFBbUJZLE9BQU87WUFDekM7UUFDSjtRQUNBdUIsc0JBQXNCQztJQUMxQixHQUFHO1FBQUM3QztRQUFpQjRCO1FBQW1CZ0I7UUFBdUJQO0tBQXFCO0lBQ3BGLCtFQUErRTtJQUMvRSx5QkFBeUI7SUFDekIsK0VBQStFO0lBQy9FLE1BQU0rRCwwQkFBMEJuTCxrREFBV0EsQ0FBQyxDQUFDeUg7UUFDekMsTUFBTTJELFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUN4Q2pGLFFBQVE5QixLQUFLLENBQUMsQ0FBQyxxQkFBcUIsRUFBRTZHLFVBQVUsQ0FBQztRQUNqRC9FLFFBQVE5QixLQUFLLENBQUMsQ0FBQyxpQ0FBaUMsRUFBRWtELElBQUl1RCxJQUFJLENBQUMsQ0FBQztRQUM1RDNFLFFBQVE5QixLQUFLLENBQUMsQ0FBQyxvQ0FBb0MsRUFBRWtELElBQUk4RCxPQUFPLENBQUMsQ0FBQztRQUNsRWxGLFFBQVE5QixLQUFLLENBQUMsQ0FBQyxnQ0FBZ0MsQ0FBQyxFQUFFa0Q7UUFDbEQsT0FBUUEsSUFBSXVELElBQUk7WUFDWixLQUFLO2dCQUNEM0UsUUFBUTlCLEtBQUssQ0FBQztnQkFDZCxPQUFPO1lBQ1gsS0FBSztnQkFDRDhCLFFBQVE5QixLQUFLLENBQUM7Z0JBQ2QsT0FBTztZQUNYLEtBQUs7Z0JBQ0Q4QixRQUFROUIsS0FBSyxDQUFDO2dCQUNkLE9BQU87WUFDWCxLQUFLO2dCQUNEOEIsUUFBUTlCLEtBQUssQ0FBQztnQkFDZCxPQUFPO1lBQ1gsS0FBSztnQkFDRDhCLFFBQVE5QixLQUFLLENBQUM7Z0JBQ2QsT0FBTztZQUNYLEtBQUs7Z0JBQ0Q4QixRQUFROUIsS0FBSyxDQUFDO2dCQUNkLE9BQU87WUFDWDtnQkFDSThCLFFBQVE5QixLQUFLLENBQUMsQ0FBQyxvQ0FBb0MsRUFBRWtELElBQUl1RCxJQUFJLENBQUMsQ0FBQztnQkFDL0QsT0FBT3ZELElBQUk4RCxPQUFPLElBQUk7UUFDOUI7SUFDSixHQUFHLEVBQUU7SUFDTCwrRUFBK0U7SUFDL0UsOENBQThDO0lBQzlDLCtFQUErRTtJQUMvRSxNQUFNZCxlQUFlekssa0RBQVdBLENBQUMsT0FBT3lJLE9BQU93QjtRQUMzQyxNQUFNbUIsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ3hDakYsUUFBUUMsR0FBRyxDQUFDLENBQUMsZUFBZSxFQUFFOEUsVUFBVSxtQkFBbUIsQ0FBQztRQUM1RC9FLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHNCQUFzQixFQUFFbUMsTUFBTSxTQUFTLEVBQUV3QixNQUFNLENBQUM7UUFDN0QseUNBQXlDO1FBQ3pDLElBQUksQ0FBQ00sVUFBVUMsWUFBWSxFQUFFO1lBQ3pCLE1BQU1nQixXQUFXO1lBQ2pCbkYsUUFBUTlCLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixFQUFFaUgsU0FBUyxDQUFDO1lBQ2hELE1BQU0sSUFBSVYsTUFBTVU7UUFDcEI7UUFDQSxJQUFJLENBQUNqQixVQUFVQyxZQUFZLENBQUNDLFlBQVksRUFBRTtZQUN0QyxNQUFNZSxXQUFXO1lBQ2pCbkYsUUFBUTlCLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixFQUFFaUgsU0FBUyxDQUFDO1lBQ2hELE1BQU0sSUFBSVYsTUFBTVU7UUFDcEI7UUFDQSx1QkFBdUI7UUFDdkJuRixRQUFRQyxHQUFHLENBQUMsQ0FBQyxnQ0FBZ0MsQ0FBQztRQUM5Q0QsUUFBUUMsR0FBRyxDQUFDLENBQUMsdUJBQXVCLEVBQUVxRCxPQUFPOEIsUUFBUSxDQUFDQyxNQUFNLENBQUMsQ0FBQztRQUM5RHJGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixFQUFFcUQsT0FBTzhCLFFBQVEsQ0FBQ0UsSUFBSSxDQUFDLENBQUM7UUFDekR0RixRQUFRQyxHQUFHLENBQUMsQ0FBQyxrQ0FBa0MsRUFBRXFELE9BQU9pQyxlQUFlLENBQUMsQ0FBQztRQUN6RXZGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFLENBQUMsQ0FBQ2lFLFVBQVVDLFlBQVksQ0FBQyxDQUFDO1FBQ2hGLDRDQUE0QztRQUM1QyxNQUFNcUIsY0FBYztZQUNoQnBELE9BQU9BLFFBQ0QxRSxnQkFDSTtnQkFDRStILFVBQVU7b0JBQUVDLE9BQU9oSTtnQkFBYztnQkFDakNsRCxPQUFPO29CQUFFK0osT0FBTztnQkFBSztnQkFDckI5SixRQUFRO29CQUFFOEosT0FBTztnQkFBSTtZQUN6QixJQUNFO2dCQUNFL0osT0FBTztvQkFBRStKLE9BQU87Z0JBQUs7Z0JBQ3JCOUosUUFBUTtvQkFBRThKLE9BQU87Z0JBQUk7Z0JBQ3JCb0IsWUFBWTtZQUNoQixJQUNGO1lBQ04vQixPQUFPQSxRQUNEakcsZ0JBQ0k7Z0JBQ0U4SCxVQUFVO29CQUFFQyxPQUFPL0g7Z0JBQWM7Z0JBQ2pDaUksa0JBQWtCO2dCQUNsQkMsa0JBQWtCO2dCQUNsQkMsaUJBQWlCO1lBQ3JCLElBQ0U7Z0JBQ0VGLGtCQUFrQjtnQkFDbEJDLGtCQUFrQjtnQkFDbEJDLGlCQUFpQjtZQUNyQixJQUNGO1FBQ1Y7UUFDQSxJQUFJcEksZUFBZTtZQUNmc0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsNENBQTRDLEVBQUV2QyxjQUFjLENBQUM7UUFDOUU7UUFDQSxJQUFJQyxlQUFlO1lBQ2ZxQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyw0Q0FBNEMsRUFBRXRDLGNBQWMsQ0FBQztRQUM5RTtRQUNBcUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsMkJBQTJCLENBQUMsRUFBRThGLEtBQUtDLFNBQVMsQ0FBQ1IsYUFBYSxNQUFNO1FBQzdFLElBQUk7WUFDQXhGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDZEQUE2RCxDQUFDO1lBQzNFLE1BQU1nRyxTQUFTLE1BQU0vQixVQUFVQyxZQUFZLENBQUNDLFlBQVksQ0FBQ29CO1lBQ3pEeEYsUUFBUUMsR0FBRyxDQUFDLENBQUMseUNBQXlDLENBQUM7WUFDdkRELFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDBCQUEwQixFQUFFZ0csT0FBTy9GLEVBQUUsQ0FBQyxDQUFDO1lBQ3BERixRQUFRQyxHQUFHLENBQUMsQ0FBQyw4QkFBOEIsRUFBRWdHLE9BQU9DLE1BQU0sQ0FBQyxDQUFDO1lBQzVEbEcsUUFBUUMsR0FBRyxDQUFDLENBQUMsc0JBQXNCLENBQUMsRUFBRWdHLE9BQU9oRixTQUFTLEdBQUdrRixHQUFHLENBQUM1RixDQUFBQSxRQUFVO29CQUNuRU0sTUFBTU4sTUFBTU0sSUFBSTtvQkFDaEJYLElBQUlLLE1BQU1MLEVBQUU7b0JBQ1puRyxPQUFPd0csTUFBTXhHLEtBQUs7b0JBQ2xCcU0sU0FBUzdGLE1BQU02RixPQUFPO29CQUN0QnhFLE9BQU9yQixNQUFNcUIsS0FBSztvQkFDbEJ5RSxZQUFZOUYsTUFBTThGLFVBQVU7Z0JBQ2hDO1lBQ0EsSUFBSWxILG1CQUFtQlksT0FBTyxJQUFJWixtQkFBbUJZLE9BQU8sS0FBS2tHLFFBQVE7Z0JBQ3JFOUcsbUJBQW1CWSxPQUFPLENBQUNrQixTQUFTLEdBQUd2RixPQUFPLENBQUMsQ0FBQzZFLFFBQVVBLE1BQU1XLElBQUk7WUFDeEU7WUFDQS9CLG1CQUFtQlksT0FBTyxHQUFHa0c7WUFDN0IsSUFBSSxDQUFDdkgsbUJBQW1CZSxpQkFBaUJNLE9BQU8sS0FBSyxRQUFRO2dCQUN6RGxDLGVBQWVvSTtZQUNuQjtZQUNBOUgsU0FBUztZQUNULDZDQUE2QztZQUM3QyxJQUFJUyxrQkFBa0JtQixPQUFPLEVBQUU7Z0JBQzNCa0csT0FBT2hGLFNBQVMsR0FBR3ZGLE9BQU8sQ0FBQyxDQUFDNkU7b0JBQ3hCUCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxzQkFBc0IsRUFBRU0sTUFBTU0sSUFBSSxDQUFDLHlCQUF5QixDQUFDO29CQUMxRWpDLGtCQUFrQm1CLE9BQU8sRUFBRXVHLFNBQVMvRixPQUFPMEY7Z0JBQy9DO1lBQ0o7WUFDQSxJQUFJLENBQUN2SCxtQkFBbUJlLGlCQUFpQk0sT0FBTyxLQUFLLFFBQVE7Z0JBQ3pEdUIsc0JBQXNCN0IsaUJBQWlCTSxPQUFPO1lBQ2xEO1lBQ0EsT0FBT2tHO1FBQ1gsRUFDQSxPQUFPN0UsS0FBSztZQUNSLE1BQU1tRixlQUFlekIsd0JBQXdCMUQ7WUFDN0NqRCxTQUFTb0k7WUFDVCxNQUFNbkY7UUFDVjtJQUNKLEdBQUc7UUFBQzBEO1FBQXlCcEc7UUFBaUI0QztLQUFzQjtJQUNwRSwwQkFBMEI7SUFDMUI5SCxnREFBU0EsQ0FBQztRQUNObUcsZ0JBQWdCSSxPQUFPLEdBQUdxRTtJQUM5QixHQUFHO1FBQUNBO0tBQWE7SUFDakIsK0VBQStFO0lBQy9FLDZCQUE2QjtJQUM3QiwrRUFBK0U7SUFDL0UsTUFBTW9DLHFCQUFxQjdNLGtEQUFXQSxDQUFDO1FBQ25DcUcsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSXJCLGtCQUFrQm1CLE9BQU8sRUFBRTtZQUMzQkMsUUFBUUMsR0FBRyxDQUFDO1lBQ1pyQixrQkFBa0JtQixPQUFPLENBQUMwRyxLQUFLO1FBQ25DO1FBQ0EsTUFBTWpHLEtBQUssSUFBSWtHLGtCQUFrQjtZQUFFQyxZQUFZN0o7UUFBWTtRQUMzRGtELFFBQVFDLEdBQUcsQ0FBQztRQUNaLHdCQUF3QjtRQUN4Qk8sR0FBR29HLGNBQWMsR0FBRyxDQUFDQztZQUNqQixJQUFJQSxNQUFNQyxTQUFTLEVBQUU7Z0JBQ2pCOUcsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQzRHLE1BQU1DLFNBQVM7Z0JBQzlELE1BQU1DLFNBQVNsSSxVQUFVa0IsT0FBTztnQkFDaEMsSUFBSWdILFFBQVE7b0JBQ1JBLE9BQU9DLElBQUksQ0FBQyx3QkFBd0I7d0JBQ2hDN0o7d0JBQ0EySixXQUFXRCxNQUFNQyxTQUFTO3dCQUMxQkcsY0FBY3hKO29CQUNsQjtnQkFDSjtZQUNKLE9BQ0s7Z0JBQ0R1QyxRQUFRQyxHQUFHLENBQUM7WUFDaEI7UUFDSjtRQUNBLGtDQUFrQztRQUNsQ08sR0FBRzBHLHVCQUF1QixHQUFHO1lBQ3pCLE1BQU1DLFFBQVEzRyxHQUFHNEcsZUFBZTtZQUNoQ3BILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG1DQUFtQyxFQUFFa0gsTUFBTSxDQUFDO1lBQ3pELElBQUlBLFVBQVUsYUFBYTtnQkFDdkJsSixlQUFlO2dCQUNmRSxTQUFTO1lBQ2IsT0FDSyxJQUFJZ0osVUFBVSxrQkFBa0JBLFVBQVUsWUFBWUEsVUFBVSxVQUFVO2dCQUMzRWxKLGVBQWU7WUFDbkI7UUFDSjtRQUNBLHVCQUF1QjtRQUN2QnVDLEdBQUc2RyxPQUFPLEdBQUcsQ0FBQ1I7WUFDVjdHLFFBQVFDLEdBQUcsQ0FBQywyQ0FBMkM0RyxNQUFNdEcsS0FBSyxDQUFDTSxJQUFJO1lBQ3ZFLElBQUlnRyxNQUFNUyxPQUFPLElBQUlULE1BQU1TLE9BQU8sQ0FBQyxFQUFFLEVBQUU7Z0JBQ25DdEgsUUFBUUMsR0FBRyxDQUFDO2dCQUNabEMsZ0JBQWdCOEksTUFBTVMsT0FBTyxDQUFDLEVBQUU7WUFDcEM7UUFDSjtRQUNBLDhCQUE4QjtRQUM5QjlHLEdBQUcrRywwQkFBMEIsR0FBRztZQUM1QixNQUFNSixRQUFRM0csR0FBR2dILGtCQUFrQjtZQUNuQ3hILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFa0gsTUFBTSxDQUFDO1lBQzdELElBQUlBLFVBQVUsVUFBVTtnQkFDcEJuSCxRQUFROUIsS0FBSyxDQUFDO2dCQUNkQyxTQUFTO1lBQ2I7UUFDSjtRQUNBUyxrQkFBa0JtQixPQUFPLEdBQUdTO1FBQzVCLE9BQU9BO0lBQ1gsR0FBRztRQUFDckQ7UUFBUU07S0FBYTtJQUN6QixnQ0FBZ0M7SUFDaENqRSxnREFBU0EsQ0FBQztRQUNOa0csc0JBQXNCSyxPQUFPLEdBQUd5RztJQUNwQyxHQUFHO1FBQUNBO0tBQW1CO0lBQ3ZCLE1BQU1pQixlQUFlOU4sa0RBQVdBLENBQUMsQ0FBQytOO1FBQzlCLE1BQU1YLFNBQVNsSSxVQUFVa0IsT0FBTztRQUNoQyxJQUFJLENBQUNnSCxRQUFRO1lBQ1QvRyxRQUFRNkUsSUFBSSxDQUFDO1lBQ2I7UUFDSjtRQUNBN0UsUUFBUUMsR0FBRyxDQUFDLENBQUMsMkJBQTJCLEVBQUV5SCxPQUFPLGFBQWEsRUFBRXZLLE9BQU8sQ0FBQztRQUN4RTRKLE9BQU9DLElBQUksQ0FBQyx3QkFBd0I7WUFDaEM3SjtZQUNBd0ssWUFBWW5LO1lBQ1p5SixjQUFjeEo7UUFDbEI7SUFDSixHQUFHO1FBQUNOO1FBQVFLO1FBQWNDO0tBQWE7SUFDdkNqRSxnREFBU0EsQ0FBQztRQUNOLE9BQU87WUFDSCxJQUFJMEYsbUJBQW1CYSxPQUFPLEVBQUU7Z0JBQzVCTSxjQUFjbkIsbUJBQW1CYSxPQUFPO2dCQUN4Q2IsbUJBQW1CYSxPQUFPLEdBQUc7WUFDakM7UUFDSjtJQUNKLEdBQUcsRUFBRTtJQUNMLCtFQUErRTtJQUMvRSxhQUFhO0lBQ2IsK0VBQStFO0lBQy9FLE1BQU02SCxZQUFZak8sa0RBQVdBLENBQUM7UUFDMUIsTUFBTW9MLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUN4Q2pGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRThFLFVBQVUsZ0JBQWdCLENBQUM7UUFDdEQvRSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRTlDLE9BQU8sQ0FBQztRQUM1QzZDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDBCQUEwQixFQUFFM0MsWUFBWSxDQUFDO1FBQ3RELElBQUk7WUFDQWEsU0FBUztZQUNULE1BQU00SSxTQUFTbEksVUFBVWtCLE9BQU87WUFDaEMsSUFBSSxDQUFDZ0gsUUFBUTtnQkFDVCxNQUFNLElBQUl0QyxNQUFNO1lBQ3BCO1lBQ0EsNkJBQTZCO1lBQzdCLE1BQU1qRSxLQUFLZ0c7WUFDWCw4REFBOEQ7WUFDOUR4RyxRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNbUUsYUFBYWhHLGdCQUFnQkU7WUFDbkMsSUFBSWhCLGFBQWE7Z0JBQ2IsbUNBQW1DO2dCQUNuQzBDLFFBQVFDLEdBQUcsQ0FBQztnQkFDWkQsUUFBUUMsR0FBRyxDQUFDLGtDQUFrQztvQkFDMUM5QztvQkFDQU07b0JBQ0FvSyxpQkFBaUJkLE9BQU9qSCxTQUFTO29CQUNqQ2dJLFVBQVVmLE9BQU83RyxFQUFFO2dCQUN2QjtnQkFDQSxNQUFNNkgsUUFBUSxNQUFNdkgsR0FBR3dILFdBQVc7Z0JBQ2xDaEksUUFBUUMsR0FBRyxDQUFDLDhCQUE4QjtvQkFDdENnSSxNQUFNRixNQUFNRSxJQUFJO29CQUNoQkMsV0FBV0gsTUFBTUksR0FBRyxFQUFFQztnQkFDMUI7Z0JBQ0EsTUFBTTVILEdBQUc2SCxtQkFBbUIsQ0FBQ047Z0JBQzdCL0gsUUFBUUMsR0FBRyxDQUFDLHNEQUFzRE8sR0FBRzhILGNBQWM7Z0JBQ25GLGFBQWE7Z0JBQ2J0SSxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osTUFBTXNJLFlBQVk7b0JBQ2RwTDtvQkFDQTRLLE9BQU9BO29CQUNQZCxjQUFjeEo7Z0JBQ2xCO2dCQUNBdUMsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQztvQkFDM0M5QyxRQUFRb0wsVUFBVXBMLE1BQU07b0JBQ3hCOEosY0FBY3NCLFVBQVV0QixZQUFZO29CQUNwQ3VCLFdBQVdELFVBQVVSLEtBQUssQ0FBQ0UsSUFBSTtnQkFDbkM7Z0JBQ0FsQixPQUFPQyxJQUFJLENBQUMsZ0JBQWdCdUI7Z0JBQzVCdkksUUFBUUMsR0FBRyxDQUFDO2dCQUNaLDZCQUE2QjtnQkFDN0IsSUFBSSxDQUFDOEcsT0FBT2pILFNBQVMsRUFBRTtvQkFDbkJFLFFBQVE5QixLQUFLLENBQUM7Z0JBQ2xCO1lBQ0osT0FDSztnQkFDRCwrREFBK0Q7Z0JBQy9ELDhEQUE4RDtnQkFDOUQ4QixRQUFRQyxHQUFHLENBQUM7Z0JBQ1pELFFBQVFDLEdBQUcsQ0FBQztnQkFDWmhCLG9CQUFvQmMsT0FBTyxHQUFHO2dCQUM5QjBILGFBQWE7Z0JBQ2IsSUFBSXZJLG1CQUFtQmEsT0FBTyxFQUFFO29CQUM1Qk0sY0FBY25CLG1CQUFtQmEsT0FBTztnQkFDNUM7Z0JBQ0FiLG1CQUFtQmEsT0FBTyxHQUFHSyxZQUFZO29CQUNyQyxJQUFJbkIsb0JBQW9CYyxPQUFPLEVBQUU7d0JBQzdCLElBQUliLG1CQUFtQmEsT0FBTyxFQUFFOzRCQUM1Qk0sY0FBY25CLG1CQUFtQmEsT0FBTzs0QkFDeENiLG1CQUFtQmEsT0FBTyxHQUFHO3dCQUNqQzt3QkFDQTtvQkFDSjtvQkFDQTBILGFBQWE7Z0JBQ2pCLEdBQUc7WUFDUDtRQUNKLEVBQ0EsT0FBT3JHLEtBQUs7WUFDUnBCLFFBQVE5QixLQUFLLENBQUMsc0JBQXNCa0Q7WUFDcEMsTUFBTW1GLGVBQWVuRixJQUFJOEQsT0FBTyxJQUFJO1lBQ3BDL0csU0FBU29JO1FBQ2I7SUFDSixHQUFHO1FBQUNwSjtRQUFRRztRQUFhRztRQUFjVztRQUFnQkU7UUFBZ0JrSTtRQUFvQnBDO1FBQWNxRDtLQUFhO0lBQ3RILCtFQUErRTtJQUMvRSxXQUFXO0lBQ1gsK0VBQStFO0lBQy9FLE1BQU1nQixVQUFVOU8sa0RBQVdBLENBQUM7UUFDeEJxRyxRQUFRQyxHQUFHLENBQUM7UUFDWmM7UUFDQWtDLGtCQUFrQmpCLEtBQUssQ0FBQyxLQUFRO1FBQ2hDLDJCQUEyQjtRQUMzQixJQUFJcEUsYUFBYTtZQUNib0MsUUFBUUMsR0FBRyxDQUFDO1lBQ1pyQyxZQUFZcUQsU0FBUyxHQUFHdkYsT0FBTyxDQUFDLENBQUM2RTtnQkFDN0JBLE1BQU1XLElBQUk7Z0JBQ1ZsQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxrQkFBa0IsRUFBRU0sTUFBTU0sSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUN2RDtZQUNBaEQsZUFBZTtRQUNuQjtRQUNBLElBQUlzQixtQkFBbUJZLE9BQU8sRUFBRTtZQUM1QlosbUJBQW1CWSxPQUFPLENBQUNrQixTQUFTLEdBQUd2RixPQUFPLENBQUMsQ0FBQzZFLFFBQVVBLE1BQU1XLElBQUk7WUFDcEUvQixtQkFBbUJZLE9BQU8sR0FBRztRQUNqQztRQUNBLDRCQUE0QjtRQUM1QixJQUFJakMsY0FBYztZQUNka0MsUUFBUUMsR0FBRyxDQUFDO1lBQ1puQyxhQUFhbUQsU0FBUyxHQUFHdkYsT0FBTyxDQUFDLENBQUM2RTtnQkFDOUJBLE1BQU1XLElBQUk7WUFDZDtZQUNBbkQsZ0JBQWdCO1FBQ3BCO1FBQ0Esd0JBQXdCO1FBQ3hCLElBQUlhLGtCQUFrQm1CLE9BQU8sRUFBRTtZQUMzQkMsUUFBUUMsR0FBRyxDQUFDO1lBQ1pyQixrQkFBa0JtQixPQUFPLENBQUMwRyxLQUFLO1lBQy9CN0gsa0JBQWtCbUIsT0FBTyxHQUFHO1FBQ2hDO1FBQ0E5QixlQUFlO1FBQ2ZFLFNBQVM7UUFDVDZCLFFBQVFDLEdBQUcsQ0FBQztJQUNoQixHQUFHO1FBQUNyQztRQUFhRTtRQUFjaUQ7UUFBc0JrQztLQUFnQjtJQUNyRSwrRUFBK0U7SUFDL0UscUJBQXFCO0lBQ3JCLCtFQUErRTtJQUMvRSxNQUFNeUYsY0FBYy9PLGtEQUFXQSxDQUFDO1FBQzVCcUcsUUFBUUMsR0FBRyxDQUFDLENBQUMsNkJBQTZCLEVBQUU3QixlQUFlLGFBQWEsQ0FBQztRQUN6RUMsa0JBQWtCLENBQUNEO1FBQ25CLElBQUlSLGFBQWE7WUFDYixNQUFNK0ssY0FBYy9LLFlBQVlvRixjQUFjO1lBQzlDMkYsWUFBWWpOLE9BQU8sQ0FBQyxDQUFDNkU7Z0JBQ2pCQSxNQUFNNkYsT0FBTyxHQUFHLENBQUNoSTtnQkFDakI0QixRQUFRQyxHQUFHLENBQUMsQ0FBQywwQkFBMEIsRUFBRU0sTUFBTUwsRUFBRSxDQUFDLFVBQVUsRUFBRUssTUFBTTZGLE9BQU8sQ0FBQyxDQUFDO1lBQ2pGO1FBQ0o7SUFDSixHQUFHO1FBQUNoSTtRQUFnQlI7S0FBWTtJQUNoQyxNQUFNZ0wsY0FBY2pQLGtEQUFXQSxDQUFDO1FBQzVCcUcsUUFBUUMsR0FBRyxDQUFDLENBQUMsNkJBQTZCLEVBQUUzQixlQUFlLGFBQWEsQ0FBQztRQUN6RUMsa0JBQWtCLENBQUNEO1FBQ25CLElBQUlWLGFBQWE7WUFDYixNQUFNaUwsY0FBY2pMLFlBQVlrTCxjQUFjO1lBQzlDRCxZQUFZbk4sT0FBTyxDQUFDLENBQUM2RTtnQkFDakJBLE1BQU02RixPQUFPLEdBQUcsQ0FBQzlIO2dCQUNqQjBCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDBCQUEwQixFQUFFTSxNQUFNTCxFQUFFLENBQUMsVUFBVSxFQUFFSyxNQUFNNkYsT0FBTyxDQUFDLENBQUM7WUFDakY7UUFDSjtJQUNKLEdBQUc7UUFBQzlIO1FBQWdCVjtLQUFZO0lBQ2hDLCtFQUErRTtJQUMvRSx5QkFBeUI7SUFDekIsK0VBQStFO0lBQy9FcEUsZ0RBQVNBLENBQUM7UUFDTixNQUFNdU4sU0FBU2xJLFVBQVVrQixPQUFPO1FBQ2hDLElBQUksQ0FBQ2dILFFBQVE7WUFDVC9HLFFBQVFDLEdBQUcsQ0FBQztZQUNaO1FBQ0o7UUFDQSx3REFBd0Q7UUFDeEQsaURBQWlEO1FBQ2pERCxRQUFRQyxHQUFHLENBQUMsb0RBQW9EOUM7UUFDaEUsTUFBTTRMLGNBQWMsT0FBT0M7WUFDdkJoSixRQUFRQyxHQUFHLENBQUM7WUFDWkQsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QjtnQkFDaEM5QyxRQUFRNkwsS0FBSzdMLE1BQU07Z0JBQ25COEwsZ0JBQWdCOUw7Z0JBQ2hCd0ssWUFBWXFCLEtBQUtyQixVQUFVO2dCQUMzQmEsV0FBV1EsS0FBS2pCLEtBQUssRUFBRUU7Z0JBQ3ZCaUIsZ0JBQWdCRixLQUFLakIsS0FBSyxFQUFFSSxLQUFLQztZQUNyQztZQUNBbkosb0JBQW9CYyxPQUFPLEdBQUc7WUFDOUIsSUFBSWIsbUJBQW1CYSxPQUFPLEVBQUU7Z0JBQzVCTSxjQUFjbkIsbUJBQW1CYSxPQUFPO2dCQUN4Q2IsbUJBQW1CYSxPQUFPLEdBQUc7WUFDakM7WUFDQSxJQUFJaUosS0FBSzdMLE1BQU0sS0FBS0EsUUFBUTtnQkFDeEI2QyxRQUFRQyxHQUFHLENBQUMscUNBQXFDK0ksS0FBSzdMLE1BQU0sRUFBRSxhQUFhQTtnQkFDM0U7WUFDSjtZQUNBNkMsUUFBUUMsR0FBRyxDQUFDO1lBQ1osSUFBSTtnQkFDQSxJQUFJTyxLQUFLNUIsa0JBQWtCbUIsT0FBTztnQkFDbEMsa0VBQWtFO2dCQUNsRSxNQUFNb0osV0FBVyxDQUFDM0ksTUFBTUEsR0FBRzhILGNBQWMsS0FBSyxZQUFZOUgsR0FBRzRHLGVBQWUsS0FBSztnQkFDakYsSUFBSStCLFVBQVU7b0JBQ1ZuSixRQUFRQyxHQUFHLENBQUM7b0JBQ1osSUFBSSxDQUFDUCxzQkFBc0JLLE9BQU8sRUFBRTt3QkFDaENDLFFBQVE5QixLQUFLLENBQUM7d0JBQ2Q7b0JBQ0o7b0JBQ0FzQyxLQUFLZCxzQkFBc0JLLE9BQU87b0JBQ2xDLHlDQUF5QztvQkFDekMsSUFBSSxDQUFDbkMsYUFBYTt3QkFDZG9DLFFBQVFDLEdBQUcsQ0FBQzt3QkFDWixJQUFJLENBQUNOLGdCQUFnQkksT0FBTyxFQUFFOzRCQUMxQkMsUUFBUTlCLEtBQUssQ0FBQzs0QkFDZDt3QkFDSjt3QkFDQSxNQUFNeUIsZ0JBQWdCSSxPQUFPLENBQUMzQixnQkFBZ0JFO29CQUNsRDtvQkFDQSxzRUFBc0U7b0JBQ3RFLElBQUlrQyxHQUFHOEgsY0FBYyxLQUFLLFlBQVk5SCxHQUFHNEcsZUFBZSxLQUFLLFVBQVU7d0JBQ25FcEgsUUFBUTlCLEtBQUssQ0FBQzt3QkFDZDtvQkFDSjtnQkFDSjtnQkFDQSxzQ0FBc0M7Z0JBQ3RDLElBQUksQ0FBQ3NDLElBQUk7b0JBQ0xSLFFBQVE5QixLQUFLLENBQUM7b0JBQ2Q7Z0JBQ0o7Z0JBQ0EsZ0VBQWdFO2dCQUNoRSxJQUFJc0MsR0FBRzhILGNBQWMsS0FBSyxZQUFZOUgsR0FBRzRHLGVBQWUsS0FBSyxVQUFVO29CQUNuRXBILFFBQVE5QixLQUFLLENBQUM7b0JBQ2Q4QixRQUFROUIsS0FBSyxDQUFDLDZCQUE2QnNDLEdBQUc4SCxjQUFjLEVBQUUscUJBQXFCOUgsR0FBRzRHLGVBQWU7b0JBQ3JHO2dCQUNKO2dCQUNBLE1BQU01RyxHQUFHNEksb0JBQW9CLENBQUMsSUFBSUMsc0JBQXNCTCxLQUFLakIsS0FBSztnQkFDbEUvSCxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osbUVBQW1FO2dCQUNuRSxJQUFJakIscUJBQXFCZSxPQUFPLENBQUNxSSxNQUFNLEdBQUcsR0FBRztvQkFDekNwSSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsRUFBRWpCLHFCQUFxQmUsT0FBTyxDQUFDcUksTUFBTSxDQUFDLHNCQUFzQixDQUFDO29CQUM5RixLQUFLLE1BQU10QixhQUFhOUgscUJBQXFCZSxPQUFPLENBQUU7d0JBQ2xELElBQUk7NEJBQ0EsTUFBTVMsR0FBRzhJLGVBQWUsQ0FBQyxJQUFJQyxnQkFBZ0J6Qzs0QkFDN0M5RyxRQUFRQyxHQUFHLENBQUM7d0JBQ2hCLEVBQ0EsT0FBT21CLEtBQUs7NEJBQ1JwQixRQUFROUIsS0FBSyxDQUFDLCtDQUErQ2tEO3dCQUNqRTtvQkFDSjtvQkFDQXBDLHFCQUFxQmUsT0FBTyxHQUFHLEVBQUU7Z0JBQ3JDO2dCQUNBLE1BQU15SixTQUFTLE1BQU1oSixHQUFHaUosWUFBWTtnQkFDcEMsTUFBTWpKLEdBQUc2SCxtQkFBbUIsQ0FBQ21CO2dCQUM3QnhKLFFBQVFDLEdBQUcsQ0FBQyxvREFBb0RPLEdBQUc4SCxjQUFjO2dCQUNqRixNQUFNb0IsYUFBYTtvQkFDZnZNO29CQUNBcU0sUUFBUUE7b0JBQ1J2QyxjQUFjK0IsS0FBS3JCLFVBQVU7Z0JBQ2pDO2dCQUNBM0gsUUFBUUMsR0FBRyxDQUFDLDRCQUE0QjtvQkFDcEM5QyxRQUFRdU0sV0FBV3ZNLE1BQU07b0JBQ3pCOEosY0FBY3lDLFdBQVd6QyxZQUFZO29CQUNyQzBDLFlBQVlELFdBQVdGLE1BQU0sQ0FBQ3ZCLElBQUk7b0JBQ2xDSixpQkFBaUJkLE9BQU9qSCxTQUFTO29CQUNqQ2dJLFVBQVVmLE9BQU83RyxFQUFFO2dCQUN2QjtnQkFDQTZHLE9BQU9DLElBQUksQ0FBQyxpQkFBaUIwQztnQkFDN0IxSixRQUFRQyxHQUFHLENBQUM7Z0JBQ1osNkJBQTZCO2dCQUM3QixJQUFJLENBQUM4RyxPQUFPakgsU0FBUyxFQUFFO29CQUNuQkUsUUFBUTlCLEtBQUssQ0FBQztnQkFDbEI7WUFDSixFQUNBLE9BQU9rRCxLQUFLO2dCQUNScEIsUUFBUTlCLEtBQUssQ0FBQyxrQ0FBa0NrRDtnQkFDaERqRCxTQUFTO1lBQ2I7UUFDSjtRQUNBLE1BQU15TCxlQUFlLE9BQU9aO1lBQ3hCaEosUUFBUUMsR0FBRyxDQUFDO1lBQ1pELFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUI7Z0JBQ2pDOUMsUUFBUTZMLEtBQUs3TCxNQUFNO2dCQUNuQjhMLGdCQUFnQjlMO2dCQUNoQndLLFlBQVlxQixLQUFLckIsVUFBVTtnQkFDM0JnQyxZQUFZWCxLQUFLUSxNQUFNLEVBQUV2QjtnQkFDekI0QixpQkFBaUJiLEtBQUtRLE1BQU0sRUFBRXJCLEtBQUtDO1lBQ3ZDO1lBQ0EsSUFBSVksS0FBSzdMLE1BQU0sS0FBS0EsUUFBUTtnQkFDeEI2QyxRQUFRQyxHQUFHLENBQUMsc0NBQXNDK0ksS0FBSzdMLE1BQU0sRUFBRSxhQUFhQTtnQkFDNUU7WUFDSjtZQUNBNkMsUUFBUUMsR0FBRyxDQUFDO1lBQ1osSUFBSTtnQkFDQSxNQUFNTyxLQUFLNUIsa0JBQWtCbUIsT0FBTztnQkFDcEMsSUFBSSxDQUFDUyxJQUNEO2dCQUNKLE1BQU1BLEdBQUc0SSxvQkFBb0IsQ0FBQyxJQUFJQyxzQkFBc0JMLEtBQUtRLE1BQU07Z0JBQ25FeEosUUFBUUMsR0FBRyxDQUFDO2dCQUNaLG1FQUFtRTtnQkFDbkUsSUFBSWpCLHFCQUFxQmUsT0FBTyxDQUFDcUksTUFBTSxHQUFHLEdBQUc7b0JBQ3pDcEksUUFBUUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLEVBQUVqQixxQkFBcUJlLE9BQU8sQ0FBQ3FJLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQztvQkFDOUYsS0FBSyxNQUFNdEIsYUFBYTlILHFCQUFxQmUsT0FBTyxDQUFFO3dCQUNsRCxJQUFJOzRCQUNBLE1BQU1TLEdBQUc4SSxlQUFlLENBQUMsSUFBSUMsZ0JBQWdCekM7NEJBQzdDOUcsUUFBUUMsR0FBRyxDQUFDO3dCQUNoQixFQUNBLE9BQU9tQixLQUFLOzRCQUNScEIsUUFBUTlCLEtBQUssQ0FBQywrQ0FBK0NrRDt3QkFDakU7b0JBQ0o7b0JBQ0FwQyxxQkFBcUJlLE9BQU8sR0FBRyxFQUFFO2dCQUNyQztZQUNKLEVBQ0EsT0FBT3FCLEtBQUs7Z0JBQ1JwQixRQUFROUIsS0FBSyxDQUFDLG1DQUFtQ2tEO2dCQUNqRGpELFNBQVM7WUFDYjtRQUNKO1FBQ0EsTUFBTTJMLHFCQUFxQixPQUFPZDtZQUM5QixJQUFJQSxLQUFLN0wsTUFBTSxLQUFLQSxRQUNoQjtZQUNKNkMsUUFBUUMsR0FBRyxDQUFDLG9DQUFvQytJO1lBQ2hELElBQUk7Z0JBQ0EsTUFBTXhJLEtBQUs1QixrQkFBa0JtQixPQUFPO2dCQUNwQyxJQUFJLENBQUNTLElBQUk7b0JBQ0xSLFFBQVFDLEdBQUcsQ0FBQztvQkFDWmpCLHFCQUFxQmUsT0FBTyxDQUFDZ0ssSUFBSSxDQUFDZixLQUFLbEMsU0FBUztvQkFDaEQ7Z0JBQ0o7Z0JBQ0EscUNBQXFDO2dCQUNyQyxJQUFJLENBQUN0RyxHQUFHd0osaUJBQWlCLEVBQUU7b0JBQ3ZCaEssUUFBUUMsR0FBRyxDQUFDO29CQUNaakIscUJBQXFCZSxPQUFPLENBQUNnSyxJQUFJLENBQUNmLEtBQUtsQyxTQUFTO29CQUNoRDtnQkFDSjtnQkFDQSxNQUFNdEcsR0FBRzhJLGVBQWUsQ0FBQyxJQUFJQyxnQkFBZ0JQLEtBQUtsQyxTQUFTO2dCQUMzRDlHLFFBQVFDLEdBQUcsQ0FBQztZQUNoQixFQUNBLE9BQU9tQixLQUFLO2dCQUNSLDJEQUEyRDtnQkFDM0QsSUFBSUEsZUFBZXFELFNBQVNyRCxJQUFJOEQsT0FBTyxDQUFDK0UsUUFBUSxDQUFDLHVCQUF1QjtvQkFDcEVqSyxRQUFRQyxHQUFHLENBQUM7b0JBQ1pqQixxQkFBcUJlLE9BQU8sQ0FBQ2dLLElBQUksQ0FBQ2YsS0FBS2xDLFNBQVM7Z0JBQ3BELE9BQ0s7b0JBQ0Q5RyxRQUFROUIsS0FBSyxDQUFDLDBDQUEwQ2tEO2dCQUM1RDtZQUNKO1FBQ0o7UUFDQTJGLE9BQU9tRCxFQUFFLENBQUMsZ0JBQWdCbkI7UUFDMUJoQyxPQUFPbUQsRUFBRSxDQUFDLGlCQUFpQk47UUFDM0I3QyxPQUFPbUQsRUFBRSxDQUFDLHdCQUF3Qko7UUFDbEMsT0FBTztZQUNIOUosUUFBUUMsR0FBRyxDQUFDO1lBQ1o4RyxPQUFPb0QsR0FBRyxDQUFDLGdCQUFnQnBCO1lBQzNCaEMsT0FBT29ELEdBQUcsQ0FBQyxpQkFBaUJQO1lBQzVCN0MsT0FBT29ELEdBQUcsQ0FBQyx3QkFBd0JMO1FBQ3ZDO0lBQ0Esc0ZBQXNGO0lBQ3RGLDhFQUE4RTtJQUM5RSxvREFBb0Q7SUFDeEQsR0FBRztRQUFDM007S0FBTztJQUNYLCtFQUErRTtJQUMvRSxtQ0FBbUM7SUFDbkMsK0VBQStFO0lBQy9FM0QsZ0RBQVNBLENBQUM7UUFDTixJQUFJc0YsY0FBY2lCLE9BQU8sSUFBSW5DLGFBQWE7WUFDdENvQyxRQUFRQyxHQUFHLENBQUM7WUFDWm5CLGNBQWNpQixPQUFPLENBQUNzQixTQUFTLEdBQUd6RDtRQUN0QztJQUNKLEdBQUc7UUFBQ0E7S0FBWTtJQUNoQnBFLGdEQUFTQSxDQUFDO1FBQ04sSUFBSXVGLGVBQWVnQixPQUFPLElBQUlqQyxjQUFjO1lBQ3hDa0MsUUFBUUMsR0FBRyxDQUFDO1lBQ1psQixlQUFlZ0IsT0FBTyxDQUFDc0IsU0FBUyxHQUFHdkQ7UUFDdkM7SUFDSixHQUFHO1FBQUNBO0tBQWE7SUFDakIsK0VBQStFO0lBQy9FLHFCQUFxQjtJQUNyQiwrRUFBK0U7SUFDL0UsdUVBQXVFO0lBQ3ZFLE1BQU1zTSxhQUFhM1EsNkNBQU1BLENBQUNnUDtJQUMxQmpQLGdEQUFTQSxDQUFDO1FBQ040USxXQUFXckssT0FBTyxHQUFHMEk7SUFDekIsR0FBRztRQUFDQTtLQUFRO0lBQ1pqUCxnREFBU0EsQ0FBQztRQUNOLE9BQU87WUFDSHdHLFFBQVFDLEdBQUcsQ0FBQztZQUNaLDREQUE0RDtZQUM1RG1LLFdBQVdySyxPQUFPO1FBQ3RCO0lBQ0EsbUNBQW1DO0lBQ3ZDLEdBQUcsRUFBRTtJQUNMLE9BQU87UUFDSG5DO1FBQ0FFO1FBQ0FFO1FBQ0FFO1FBQ0EwSjtRQUNBYTtRQUNBQztRQUNBRTtRQUNBeEs7UUFDQUU7UUFDQXNHO1FBQ0FwRztRQUNBNEU7UUFDQUg7UUFDQXZFO1FBQ0FJO1FBQ0FDO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvbGEtd2ViLy4uLy4uL3BhY2thZ2VzL2FwcC9ob29rcy91c2VXZWJSVEMuanM/YTYzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0U29ja2V0IH0gZnJvbSAnLi4vc29ja2V0JztcbmNvbnN0IEZJTFRFUl9DT05GSUcgPSB7XG4gICAgbm9uZTogeyBsYWJlbDogJ0fhu5FjJywgZW1vamk6ICfwn5mCJyB9LFxuICAgIGJlYXV0eToge1xuICAgICAgICBsYWJlbDogJ03hu4tuJyxcbiAgICAgICAgZW1vamk6ICfinKgnLFxuICAgICAgICBjc3NGaWx0ZXI6ICdicmlnaHRuZXNzKDEuMDgpIGNvbnRyYXN0KDEuMDUpIHNhdHVyYXRlKDEuMjUpJyxcbiAgICB9LFxuICAgIHdhcm06IHtcbiAgICAgICAgbGFiZWw6ICfhuqRtJyxcbiAgICAgICAgZW1vamk6ICfwn4yFJyxcbiAgICAgICAgY3NzRmlsdGVyOiAnYnJpZ2h0bmVzcygxLjA1KSBzYXR1cmF0ZSgxLjI1KSBodWUtcm90YXRlKC01ZGVnKScsXG4gICAgfSxcbiAgICBjb29sOiB7XG4gICAgICAgIGxhYmVsOiAnTcOhdCcsXG4gICAgICAgIGVtb2ppOiAn4p2E77iPJyxcbiAgICAgICAgY3NzRmlsdGVyOiAnYnJpZ2h0bmVzcygxLjA4KSBzYXR1cmF0ZSgxLjE1KSBodWUtcm90YXRlKDE4NWRlZyknLFxuICAgIH0sXG4gICAgcGFydHk6IHtcbiAgICAgICAgbGFiZWw6ICdQYXJ0eScsXG4gICAgICAgIGVtb2ppOiAn8J+OiScsXG4gICAgICAgIGNzc0ZpbHRlcjogJ2JyaWdodG5lc3MoMS4wNSkgc2F0dXJhdGUoMS4yNSknLFxuICAgICAgICBvdmVybGF5OiAoY3R4LCB3aWR0aCwgaGVpZ2h0LCB0aW1lKSA9PiB7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC4zNTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHggPSAoaSAqIDczICsgKHRpbWUgLyAxMikgJSB3aWR0aCkgJSB3aWR0aDtcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gKGkgKiA0MSArICh0aW1lIC8gMTgpICUgaGVpZ2h0KSAlIGhlaWdodDtcbiAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gMTIgKyAoaSAlIDUpICogMztcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gWycjZmY2YjZiJywgJyNmZmQ5M2QnLCAnIzZiYzJmZicsICcjYjA3MGZmJ11baSAlIDRdO1xuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBjdHguYXJjKHgsIHksIHNpemUsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGJpcnRoZGF5OiB7XG4gICAgICAgIGxhYmVsOiAnU2luaCBuaOG6rXQnLFxuICAgICAgICBlbW9qaTogJ/CfjoInLFxuICAgICAgICBjc3NGaWx0ZXI6ICdicmlnaHRuZXNzKDEuMDUpIHNhdHVyYXRlKDEuMTUpJyxcbiAgICAgICAgb3ZlcmxheTogKGN0eCwgd2lkdGgsIGhlaWdodCkgPT4ge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIC8vIEJhbGxvb25zXG4gICAgICAgICAgICBjb25zdCBiYWxsb29uQ29sb3JzID0gWycjZmY3ZWI2JywgJyM3ZGJiZmYnLCAnI2ZmZDk2NiddO1xuICAgICAgICAgICAgYmFsbG9vbkNvbG9ycy5mb3JFYWNoKChjb2xvciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBieCA9IGluZGV4ID09PSAwID8gd2lkdGggKiAwLjE1IDogaW5kZXggPT09IDEgPyB3aWR0aCAqIDAuODUgOiB3aWR0aCAqIDAuNTtcbiAgICAgICAgICAgICAgICBjb25zdCBieSA9IGluZGV4ID09PSAyID8gaGVpZ2h0ICogMC4yIDogaGVpZ2h0ICogMC4xNTtcbiAgICAgICAgICAgICAgICBjb25zdCByYWRpdXMgPSBpbmRleCA9PT0gMiA/IDgwIDogNzA7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JhZGllbnQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoYnggLSAyMCwgYnkgLSAzMCwgMjAsIGJ4LCBieSwgcmFkaXVzKTtcbiAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJyNmZmZmZmYnKTtcbiAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMC4yLCAnI2ZmZmZmZicpO1xuICAgICAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBjb2xvcik7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBjdHguZWxsaXBzZShieCwgYnksIHJhZGl1cyAqIDAuNzUsIHJhZGl1cywgMCwgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNmZmZmZmYnO1xuICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKGJ4LCBieSArIHJhZGl1cyk7XG4gICAgICAgICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oYnggLSAxMCwgYnkgKyByYWRpdXMgKyA2MCwgYngsIGJ5ICsgcmFkaXVzICsgMTEwKTtcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFBhcnR5IGhhdFxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmY4Y2U2JztcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8od2lkdGggLyAyLCBoZWlnaHQgKiAwLjAyKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8od2lkdGggLyAyIC0gODAsIGhlaWdodCAqIDAuMjgpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh3aWR0aCAvIDIgKyA4MCwgaGVpZ2h0ICogMC4yOCk7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNDUpJztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAtNjA7IGkgPD0gNjA7IGkgKz0gMzApIHtcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgY3R4LmFyYyh3aWR0aCAvIDIgKyBpLCBoZWlnaHQgKiAwLjE4LCAxOCwgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDYWtlIGJhc2VcbiAgICAgICAgICAgIGNvbnN0IGNha2VIZWlnaHQgPSA5MDtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZDFkYyc7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3Qod2lkdGggKiAwLjIsIGhlaWdodCAtIGNha2VIZWlnaHQgLSAyMCwgd2lkdGggKiAwLjYsIGNha2VIZWlnaHQpO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmY5ZWJlJztcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCh3aWR0aCAqIDAuMiwgaGVpZ2h0IC0gY2FrZUhlaWdodCAtIDIwLCB3aWR0aCAqIDAuNiwgMjUpO1xuICAgICAgICAgICAgLy8gQ2FuZGxlc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IC0xOyBpIDw9IDE7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gd2lkdGggLyAyICsgaSAqIDM1O1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzVkYWRlMic7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGN4IC0gNiwgaGVpZ2h0IC0gY2FrZUhlaWdodCAtIDYwLCAxMiwgNDApO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZDk2Nic7XG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGN0eC5lbGxpcHNlKGN4LCBoZWlnaHQgLSBjYWtlSGVpZ2h0IC0gNjgsIDcsIDEwLCAwLCAwLCBNYXRoLlBJICogMik7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5jb25zdCBJQ0VfU0VSVkVSUyA9IFtcbiAgICB7IHVybHM6ICdzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyJyB9LFxuICAgIHsgdXJsczogJ3N0dW46c3R1bjEubC5nb29nbGUuY29tOjE5MzAyJyB9LFxuICAgIHsgdXJsczogJ3N0dW46c3R1bjIubC5nb29nbGUuY29tOjE5MzAyJyB9LFxuICAgIHsgdXJsczogJ3N0dW46c3R1bjMubC5nb29nbGUuY29tOjE5MzAyJyB9LFxuICAgIHsgdXJsczogJ3N0dW46c3R1bjQubC5nb29nbGUuY29tOjE5MzAyJyB9LFxuICAgIC8vIEZyZWUgVFVSTiBzZXJ2ZXJzIGZyb20gT3BlbiBSZWxheSBQcm9qZWN0XG4gICAge1xuICAgICAgICB1cmxzOiAndHVybjpvcGVucmVsYXkubWV0ZXJlZC5jYTo4MCcsXG4gICAgICAgIHVzZXJuYW1lOiAnb3BlbnJlbGF5cHJvamVjdCcsXG4gICAgICAgIGNyZWRlbnRpYWw6ICdvcGVucmVsYXlwcm9qZWN0JyxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdXJsczogJ3R1cm46b3BlbnJlbGF5Lm1ldGVyZWQuY2E6NDQzJyxcbiAgICAgICAgdXNlcm5hbWU6ICdvcGVucmVsYXlwcm9qZWN0JyxcbiAgICAgICAgY3JlZGVudGlhbDogJ29wZW5yZWxheXByb2plY3QnLFxuICAgIH0sXG4gICAge1xuICAgICAgICB1cmxzOiAndHVybjpvcGVucmVsYXkubWV0ZXJlZC5jYTo0NDM/dHJhbnNwb3J0PXRjcCcsXG4gICAgICAgIHVzZXJuYW1lOiAnb3BlbnJlbGF5cHJvamVjdCcsXG4gICAgICAgIGNyZWRlbnRpYWw6ICdvcGVucmVsYXlwcm9qZWN0JyxcbiAgICB9LFxuXTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VXZWJSVEMoeyBjYWxsSWQsIGNvbnZlcnNhdGlvbklkOiBfY29udmVyc2F0aW9uSWQsIGlzSW5pdGlhdG9yLCBsb2NhbFVzZXJJZDogX2xvY2FsVXNlcklkLCByZW1vdGVVc2VySWQsIHZpZGVvRGV2aWNlSWQsIGF1ZGlvRGV2aWNlSWQsIH0pIHtcbiAgICBjb25zdCBbbG9jYWxTdHJlYW0sIHNldExvY2FsU3RyZWFtXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtyZW1vdGVTdHJlYW0sIHNldFJlbW90ZVN0cmVhbV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbaXNDb25uZWN0ZWQsIHNldElzQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtpc1ZpZGVvRW5hYmxlZCwgc2V0SXNWaWRlb0VuYWJsZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW2lzQXVkaW9FbmFibGVkLCBzZXRJc0F1ZGlvRW5hYmxlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBbY3VycmVudEZpbHRlciwgc2V0Q3VycmVudEZpbHRlcl0gPSB1c2VTdGF0ZSgnbm9uZScpO1xuICAgIGNvbnN0IFtpc1NjcmVlblNoYXJpbmcsIHNldElzU2NyZWVuU2hhcmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgcGVlckNvbm5lY3Rpb25SZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3Qgc29ja2V0UmVmID0gdXNlUmVmKGdldFNvY2tldCgpKTtcbiAgICBjb25zdCBsb2NhbFZpZGVvUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IHJlbW90ZVZpZGVvUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIC8vIFF1ZXVlIGZvciBJQ0UgY2FuZGlkYXRlcyByZWNlaXZlZCBiZWZvcmUgcmVtb3RlIGRlc2NyaXB0aW9uIGlzIHNldFxuICAgIGNvbnN0IGljZUNhbmRpZGF0ZVF1ZXVlUmVmID0gdXNlUmVmKFtdKTtcbiAgICBjb25zdCBoYXNSZWNlaXZlZE9mZmVyUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgICBjb25zdCBvZmZlclJldHJ5VGltZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgcmF3Q2FtZXJhU3RyZWFtUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IHNjcmVlblNoYXJlU3RyZWFtUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IHByb2Nlc3NlZEZpbHRlclN0cmVhbVJlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCBmaWx0ZXJDYW52YXNSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgZmlsdGVyVmlkZW9SZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgZmlsdGVyQW5pbWF0aW9uRnJhbWVSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgY3VycmVudEZpbHRlclJlZiA9IHVzZVJlZignbm9uZScpO1xuICAgIC8vIFJlZnMgdG8gc3RvcmUgbGF0ZXN0IGZ1bmN0aW9ucyBmb3IgdXNlIGluIHNvY2tldCBoYW5kbGVycyAod2lsbCBiZSBzZXQgYWZ0ZXIgZnVuY3Rpb25zIGFyZSBkZWZpbmVkKVxuICAgIGNvbnN0IGluaXRQZWVyQ29ubmVjdGlvblJlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCBnZXRVc2VyTWVkaWFSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgLy8gU3luYyBzb2NrZXRSZWYgd2l0aCBjdXJyZW50IHNvY2tldCAtIHBvbGwgZXZlcnkgNTAwbXMgdW50aWwgY29ubmVjdGVkXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgc3luY1NvY2tldCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTb2NrZXQgPSBnZXRTb2NrZXQoKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U29ja2V0ICYmIGN1cnJlbnRTb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQgPSBjdXJyZW50U29ja2V0O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbdXNlV2ViUlRDXSBTb2NrZXQgc3luY2VkLCBjb25uZWN0ZWQ6JywgY3VycmVudFNvY2tldC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghc29ja2V0UmVmLmN1cnJlbnQgfHwgIXNvY2tldFJlZi5jdXJyZW50LmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHNvY2tldFJlZi5jdXJyZW50ID0gY3VycmVudFNvY2tldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSW5pdGlhbCBzeW5jXG4gICAgICAgIHN5bmNTb2NrZXQoKTtcbiAgICAgICAgLy8gUG9sbCBmb3Igc29ja2V0IGNvbm5lY3Rpb25cbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChzeW5jU29ja2V0LCA1MDApO1xuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfSwgW10pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGN1cnJlbnRGaWx0ZXJSZWYuY3VycmVudCA9IGN1cnJlbnRGaWx0ZXI7XG4gICAgfSwgW2N1cnJlbnRGaWx0ZXJdKTtcbiAgICBjb25zdCByZXBsYWNlVmlkZW9UcmFjayA9IHVzZUNhbGxiYWNrKGFzeW5jICh0cmFjaykgPT4ge1xuICAgICAgICBpZiAoIXRyYWNrKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBwYyA9IHBlZXJDb25uZWN0aW9uUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghcGMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHNlbmRlciA9IHBjLmdldFNlbmRlcnMoKS5maW5kKChzKSA9PiBzLnRyYWNrICYmIHMudHJhY2sua2luZCA9PT0gJ3ZpZGVvJyk7XG4gICAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHNlbmRlci5yZXBsYWNlVHJhY2sodHJhY2spO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuICAgIGNvbnN0IHN0b3BGaWx0ZXJQcm9jZXNzaW5nID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBpZiAoZmlsdGVyQW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoZmlsdGVyQW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCk7XG4gICAgICAgICAgICBmaWx0ZXJBbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzc2VkRmlsdGVyU3RyZWFtUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHByb2Nlc3NlZEZpbHRlclN0cmVhbVJlZi5jdXJyZW50LmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgICAgICAgcHJvY2Vzc2VkRmlsdGVyU3RyZWFtUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWx0ZXJWaWRlb1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZpbHRlclZpZGVvUmVmLmN1cnJlbnQucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbHRlclZpZGVvUmVmLmN1cnJlbnQuc3JjT2JqZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIGZpbHRlclZpZGVvUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGZpbHRlckNhbnZhc1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9LCBbXSk7XG4gICAgY29uc3Qgc3RhcnRGaWx0ZXJQcm9jZXNzaW5nID0gdXNlQ2FsbGJhY2soKGZpbHRlcikgPT4ge1xuICAgICAgICBjb25zdCByYXdTdHJlYW0gPSByYXdDYW1lcmFTdHJlYW1SZWYuY3VycmVudDtcbiAgICAgICAgaWYgKCFyYXdTdHJlYW0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHN0b3BGaWx0ZXJQcm9jZXNzaW5nKCk7XG4gICAgICAgIGNvbnN0IHZpZGVvRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICB2aWRlb0VsLnNyY09iamVjdCA9IHJhd1N0cmVhbTtcbiAgICAgICAgdmlkZW9FbC5tdXRlZCA9IHRydWU7XG4gICAgICAgIHZpZGVvRWwucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgICAgICB2aWRlb0VsLmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgdmlkZW9FbC5wbGF5KCkuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgZmlsdGVyVmlkZW9SZWYuY3VycmVudCA9IHZpZGVvRWw7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaWx0ZXJdIENhbnZhcyBjb250ZXh0IHVuYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyQ2FudmFzUmVmLmN1cnJlbnQgPSBjYW52YXM7XG4gICAgICAgIGNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghZmlsdGVyVmlkZW9SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZpZGVvID0gZmlsdGVyVmlkZW9SZWYuY3VycmVudDtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdmlkZW8udmlkZW9XaWR0aCB8fCA2NDA7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodCB8fCA0ODA7XG4gICAgICAgICAgICBpZiAod2lkdGggPT09IDAgfHwgaGVpZ2h0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyQW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYW52YXMud2lkdGggIT09IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT09IGhlaWdodCkge1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gRklMVEVSX0NPTkZJR1tmaWx0ZXJdO1xuICAgICAgICAgICAgY3R4LmZpbHRlciA9IGNvbmZpZy5jc3NGaWx0ZXIgfHwgJ25vbmUnO1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBjdHguZmlsdGVyID0gJ25vbmUnO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5vdmVybGF5KSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLm92ZXJsYXkoY3R4LCB3aWR0aCwgaGVpZ2h0LCBwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWx0ZXJBbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIHJlbmRlcigpO1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRTdHJlYW0gPSBjYW52YXMuY2FwdHVyZVN0cmVhbSgzMCk7XG4gICAgICAgIHByb2Nlc3NlZEZpbHRlclN0cmVhbVJlZi5jdXJyZW50ID0gcHJvY2Vzc2VkU3RyZWFtO1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRUcmFjayA9IHByb2Nlc3NlZFN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgICByZXBsYWNlVmlkZW9UcmFjayhwcm9jZXNzZWRUcmFjayk7XG4gICAgICAgIHNldExvY2FsU3RyZWFtKHByb2Nlc3NlZFN0cmVhbSk7XG4gICAgfSwgW3JlcGxhY2VWaWRlb1RyYWNrLCBzdG9wRmlsdGVyUHJvY2Vzc2luZ10pO1xuICAgIGNvbnN0IHN0b3BTY3JlZW5TaGFyZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFzY3JlZW5TaGFyZVN0cmVhbVJlZi5jdXJyZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzY3JlZW5TaGFyZVN0cmVhbVJlZi5jdXJyZW50LmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgICBzY3JlZW5TaGFyZVN0cmVhbVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgc2V0SXNTY3JlZW5TaGFyaW5nKGZhbHNlKTtcbiAgICAgICAgY29uc3QgY2FtZXJhU3RyZWFtID0gcmF3Q2FtZXJhU3RyZWFtUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghY2FtZXJhU3RyZWFtKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoY3VycmVudEZpbHRlclJlZi5jdXJyZW50ICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHN0YXJ0RmlsdGVyUHJvY2Vzc2luZyhjdXJyZW50RmlsdGVyUmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2FtZXJhVHJhY2sgPSBjYW1lcmFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtcbiAgICAgICAgICAgIGF3YWl0IHJlcGxhY2VWaWRlb1RyYWNrKGNhbWVyYVRyYWNrKTtcbiAgICAgICAgICAgIHNldExvY2FsU3RyZWFtKGNhbWVyYVN0cmVhbSk7XG4gICAgICAgIH1cbiAgICB9LCBbcmVwbGFjZVZpZGVvVHJhY2ssIHN0YXJ0RmlsdGVyUHJvY2Vzc2luZ10pO1xuICAgIGNvbnN0IHN0YXJ0U2NyZWVuU2hhcmUgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChpc1NjcmVlblNoYXJpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbGVjdHJvbkFQSSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmVsZWN0cm9uQVBJIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgbGV0IHNoYXJlU3RyZWFtID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChlbGVjdHJvbkFQST8uc2VsZWN0U2NyZWVuU291cmNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlSWQgPSBhd2FpdCBlbGVjdHJvbkFQSS5zZWxlY3RTY3JlZW5Tb3VyY2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKCdLaMO0bmcgdMOsbSB0aOG6pXkgbcOgbiBow6xuaCDEkeG7gyBjaGlhIHPhursuJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlY3Ryb25Db25zdHJhaW50cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW86IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lTWVkaWFTb3VyY2U6ICdkZXNrdG9wJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVNZWRpYVNvdXJjZUlkOiBzb3VyY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhGcmFtZVJhdGU6IDMwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkZyYW1lUmF0ZTogNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzaGFyZVN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGVsZWN0cm9uQ29uc3RyYWludHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcz8uZ2V0RGlzcGxheU1lZGlhKSB7XG4gICAgICAgICAgICAgICAgc2hhcmVTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVJhdGU6IDMwLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHsgaWRlYWw6IDE5MjAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogeyBpZGVhbDogMTA4MCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVN1cmZhY2U6ICdtb25pdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXVkaW86IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTQ1JFRU5fU0hBUkVfTk9UX1NVUFBPUlRFRCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NyZWVuU2hhcmVTdHJlYW1SZWYuY3VycmVudCA9IHNoYXJlU3RyZWFtO1xuICAgICAgICAgICAgY29uc3QgdHJhY2sgPSBzaGFyZVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgICAgICAgdHJhY2sub25lbmRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzdG9wU2NyZWVuU2hhcmUoKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHN0b3BGaWx0ZXJQcm9jZXNzaW5nKCk7XG4gICAgICAgICAgICBzZXRMb2NhbFN0cmVhbShzaGFyZVN0cmVhbSk7XG4gICAgICAgICAgICBhd2FpdCByZXBsYWNlVmlkZW9UcmFjayh0cmFjayk7XG4gICAgICAgICAgICBzZXRJc1NjcmVlblNoYXJpbmcodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NjcmVlblNoYXJlXSBFcnJvciBzdGFydGluZyBzY3JlZW4gc2hhcmU6JywgZXJyKTtcbiAgICAgICAgICAgIGlmIChlcnI/Lm5hbWUgPT09ICdOb3RBbGxvd2VkRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0LhuqFuIMSRw6MgdOG7qyBjaOG7kWkgcXV54buBbiBjaGlhIHPhursgbcOgbiBow6xuaC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVycj8ubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0tow7RuZyB0w6xtIHRo4bqleSBtw6BuIGjDrG5oIHBow7kgaOG7o3AgxJHhu4MgY2hpYSBz4bq7LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0NoaWEgc+G6uyBtw6BuIGjDrG5oIGNoxrBhIMSRxrDhu6NjIGjhu5cgdHLhu6MgdHJvbmcgbcO0aSB0csaw4budbmcgbsOgeS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH0sIFtpc1NjcmVlblNoYXJpbmcsIHJlcGxhY2VWaWRlb1RyYWNrLCBzdG9wRmlsdGVyUHJvY2Vzc2luZywgc3RvcFNjcmVlblNoYXJlXSk7XG4gICAgY29uc3QgYXBwbHlGaWx0ZXIgPSB1c2VDYWxsYmFjayhhc3luYyAoZmlsdGVyKSA9PiB7XG4gICAgICAgIHNldEN1cnJlbnRGaWx0ZXIoZmlsdGVyKTtcbiAgICAgICAgaWYgKGlzU2NyZWVuU2hhcmluZykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRmlsdGVyXSBDYW5ub3QgYXBwbHkgZmlsdGVyIHdoaWxlIHNoYXJpbmcgc2NyZWVuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyYXdDYW1lcmFTdHJlYW1SZWYuY3VycmVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGZpbHRlciA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBzdG9wRmlsdGVyUHJvY2Vzc2luZygpO1xuICAgICAgICAgICAgY29uc3QgY2FtZXJhVHJhY2sgPSByYXdDYW1lcmFTdHJlYW1SZWYuY3VycmVudC5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgICAgICAgYXdhaXQgcmVwbGFjZVZpZGVvVHJhY2soY2FtZXJhVHJhY2spO1xuICAgICAgICAgICAgc2V0TG9jYWxTdHJlYW0ocmF3Q2FtZXJhU3RyZWFtUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0RmlsdGVyUHJvY2Vzc2luZyhmaWx0ZXIpO1xuICAgIH0sIFtpc1NjcmVlblNoYXJpbmcsIHJlcGxhY2VWaWRlb1RyYWNrLCBzdGFydEZpbHRlclByb2Nlc3NpbmcsIHN0b3BGaWx0ZXJQcm9jZXNzaW5nXSk7XG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIEVSUk9SIEhBTkRMSU5HIEhFTFBFUlNcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY29uc3QgaGFuZGxlR2V0VXNlck1lZGlhRXJyb3IgPSB1c2VDYWxsYmFjaygoZXJyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW2dldFVzZXJNZWRpYSBFUlJPUl0gJHt0aW1lc3RhbXB9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtnZXRVc2VyTWVkaWEgRVJST1JdIEVycm9yIG5hbWU6ICR7ZXJyLm5hbWV9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtnZXRVc2VyTWVkaWEgRVJST1JdIEVycm9yIG1lc3NhZ2U6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtnZXRVc2VyTWVkaWEgRVJST1JdIEZ1bGwgZXJyb3I6YCwgZXJyKTtcbiAgICAgICAgc3dpdGNoIChlcnIubmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnTm90QWxsb3dlZEVycm9yJzpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbZ2V0VXNlck1lZGlhIEVSUk9SXSBOb3RBbGxvd2VkRXJyb3I6IFBlcm1pc3Npb24gZGVuaWVkIGJ5IHVzZXIgb3Igc3lzdGVtJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdDYW1lcmEvbWljcm9waG9uZSBwZXJtaXNzaW9uIGRlbmllZC4gUGxlYXNlIGFsbG93IGFjY2VzcyBpbiBXaW5kb3dzIFNldHRpbmdzIChQcml2YWN5IOKGkiBDYW1lcmEvTWljcm9waG9uZSkuJztcbiAgICAgICAgICAgIGNhc2UgJ05vdEZvdW5kRXJyb3InOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tnZXRVc2VyTWVkaWEgRVJST1JdIE5vdEZvdW5kRXJyb3I6IE5vIG1lZGlhIGRldmljZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnTm8gY2FtZXJhL21pY3JvcGhvbmUgZm91bmQuIFBsZWFzZSBjb25uZWN0IGEgZGV2aWNlLic7XG4gICAgICAgICAgICBjYXNlICdOb3RSZWFkYWJsZUVycm9yJzpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbZ2V0VXNlck1lZGlhIEVSUk9SXSBOb3RSZWFkYWJsZUVycm9yOiBEZXZpY2UgaXMgYWxyZWFkeSBpbiB1c2UnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0NhbWVyYS9taWNyb3Bob25lIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYXBwbGljYXRpb24uJztcbiAgICAgICAgICAgIGNhc2UgJ092ZXJjb25zdHJhaW5lZEVycm9yJzpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbZ2V0VXNlck1lZGlhIEVSUk9SXSBPdmVyY29uc3RyYWluZWRFcnJvcjogQ29uc3RyYWludHMgY2Fubm90IGJlIHNhdGlzZmllZCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnQ2FtZXJhL21pY3JvcGhvbmUgY29uc3RyYWludHMgY2Fubm90IGJlIHNhdGlzZmllZC4gUGxlYXNlIHRyeSBkaWZmZXJlbnQgc2V0dGluZ3MuJztcbiAgICAgICAgICAgIGNhc2UgJ1NlY3VyaXR5RXJyb3InOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tnZXRVc2VyTWVkaWEgRVJST1JdIFNlY3VyaXR5RXJyb3I6IE5vdCBpbiBzZWN1cmUgY29udGV4dCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnU2VjdXJpdHkgZXJyb3I6IEFwcCBtdXN0IHJ1biBpbiBzZWN1cmUgY29udGV4dC4nO1xuICAgICAgICAgICAgY2FzZSAnVHlwZUVycm9yJzpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbZ2V0VXNlck1lZGlhIEVSUk9SXSBUeXBlRXJyb3I6IEludmFsaWQgY29uc3RyYWludHMgb3IgQVBJIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0ludmFsaWQgbWVkaWEgY29uc3RyYWludHMgb3IgQVBJIG5vdCBhdmFpbGFibGUuJztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW2dldFVzZXJNZWRpYSBFUlJPUl0gVW5rbm93biBlcnJvcjogJHtlcnIubmFtZX1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBhY2Nlc3MgY2FtZXJhL21pY3JvcGhvbmUuJztcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gR0VUIFVTRVIgTUVESUEgV0lUSCBERVRBSUxFRCBFUlJPUiBIQU5ETElOR1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjb25zdCBnZXRVc2VyTWVkaWEgPSB1c2VDYWxsYmFjayhhc3luYyAodmlkZW8sIGF1ZGlvKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtnZXRVc2VyTWVkaWFdICR7dGltZXN0YW1wfSAtIFN0YXJ0aW5nIHJlcXVlc3RgKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtnZXRVc2VyTWVkaWFdIFZpZGVvOiAke3ZpZGVvfSwgQXVkaW86ICR7YXVkaW99YCk7XG4gICAgICAgIC8vIENoZWNrIGlmIG1lZGlhRGV2aWNlcyBBUEkgaXMgYXZhaWxhYmxlXG4gICAgICAgIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSAnTWVkaWFEZXZpY2VzIEFQSSBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgYnJvd3Nlci4nO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW2dldFVzZXJNZWRpYSBFUlJPUl0gJHtlcnJvck1zZ31gKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSAnZ2V0VXNlck1lZGlhIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLic7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbZ2V0VXNlck1lZGlhIEVSUk9SXSAke2Vycm9yTXNnfWApO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMb2cgZW52aXJvbm1lbnQgaW5mb1xuICAgICAgICBjb25zb2xlLmxvZyhgW2dldFVzZXJNZWRpYV0gRW52aXJvbm1lbnQgaW5mbzpgKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtnZXRVc2VyTWVkaWFdIE9yaWdpbjogJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW2dldFVzZXJNZWRpYV0gVVJMOiAke3dpbmRvdy5sb2NhdGlvbi5ocmVmfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW2dldFVzZXJNZWRpYV0gSXMgc2VjdXJlIGNvbnRleHQ6ICR7d2luZG93LmlzU2VjdXJlQ29udGV4dH1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtnZXRVc2VyTWVkaWFdIE1lZGlhRGV2aWNlcyBhdmFpbGFibGU6ICR7ISFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzfWApO1xuICAgICAgICAvLyBQcmVwYXJlIGNvbnN0cmFpbnRzIHdpdGggZGV2aWNlIHNlbGVjdGlvblxuICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgICAgIHZpZGVvOiB2aWRlb1xuICAgICAgICAgICAgICAgID8gdmlkZW9EZXZpY2VJZFxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZUlkOiB7IGV4YWN0OiB2aWRlb0RldmljZUlkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogeyBpZGVhbDogMTI4MCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB7IGlkZWFsOiA3MjAgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB7IGlkZWFsOiAxMjgwIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHsgaWRlYWw6IDcyMCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjaW5nTW9kZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGF1ZGlvOiBhdWRpb1xuICAgICAgICAgICAgICAgID8gYXVkaW9EZXZpY2VJZFxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZUlkOiB7IGV4YWN0OiBhdWRpb0RldmljZUlkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlY2hvQ2FuY2VsbGF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9pc2VTdXBwcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9HYWluQ29udHJvbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVjaG9DYW5jZWxsYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2lzZVN1cHByZXNzaW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0dhaW5Db250cm9sOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHZpZGVvRGV2aWNlSWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbZ2V0VXNlck1lZGlhXSBVc2luZyBzZWxlY3RlZCB2aWRlbyBkZXZpY2U6ICR7dmlkZW9EZXZpY2VJZH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXVkaW9EZXZpY2VJZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtnZXRVc2VyTWVkaWFdIFVzaW5nIHNlbGVjdGVkIGF1ZGlvIGRldmljZTogJHthdWRpb0RldmljZUlkfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBbZ2V0VXNlck1lZGlhXSBDb25zdHJhaW50czpgLCBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cywgbnVsbCwgMikpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtnZXRVc2VyTWVkaWFdIENhbGxpbmcgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuLi5gKTtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbZ2V0VXNlck1lZGlhXSDinIUgU3VjY2VzcyEgU3RyZWFtIG9idGFpbmVkYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW2dldFVzZXJNZWRpYV0gU3RyZWFtIElEOiAke3N0cmVhbS5pZH1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbZ2V0VXNlck1lZGlhXSBTdHJlYW0gYWN0aXZlOiAke3N0cmVhbS5hY3RpdmV9YCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW2dldFVzZXJNZWRpYV0gVHJhY2tzOmAsIHN0cmVhbS5nZXRUcmFja3MoKS5tYXAodHJhY2sgPT4gKHtcbiAgICAgICAgICAgICAgICBraW5kOiB0cmFjay5raW5kLFxuICAgICAgICAgICAgICAgIGlkOiB0cmFjay5pZCxcbiAgICAgICAgICAgICAgICBsYWJlbDogdHJhY2subGFiZWwsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJhY2suZW5hYmxlZCxcbiAgICAgICAgICAgICAgICBtdXRlZDogdHJhY2subXV0ZWQsXG4gICAgICAgICAgICAgICAgcmVhZHlTdGF0ZTogdHJhY2sucmVhZHlTdGF0ZSxcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICBpZiAocmF3Q2FtZXJhU3RyZWFtUmVmLmN1cnJlbnQgJiYgcmF3Q2FtZXJhU3RyZWFtUmVmLmN1cnJlbnQgIT09IHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHJhd0NhbWVyYVN0cmVhbVJlZi5jdXJyZW50LmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmF3Q2FtZXJhU3RyZWFtUmVmLmN1cnJlbnQgPSBzdHJlYW07XG4gICAgICAgICAgICBpZiAoIWlzU2NyZWVuU2hhcmluZyAmJiBjdXJyZW50RmlsdGVyUmVmLmN1cnJlbnQgPT09ICdub25lJykge1xuICAgICAgICAgICAgICAgIHNldExvY2FsU3RyZWFtKHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgIC8vIEFkZCB0cmFja3MgdG8gcGVlciBjb25uZWN0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgaWYgKHBlZXJDb25uZWN0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtnZXRVc2VyTWVkaWFdIEFkZGluZyAke3RyYWNrLmtpbmR9IHRyYWNrIHRvIHBlZXIgY29ubmVjdGlvbmApO1xuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvblJlZi5jdXJyZW50Py5hZGRUcmFjayh0cmFjaywgc3RyZWFtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNTY3JlZW5TaGFyaW5nICYmIGN1cnJlbnRGaWx0ZXJSZWYuY3VycmVudCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRGaWx0ZXJQcm9jZXNzaW5nKGN1cnJlbnRGaWx0ZXJSZWYuY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUdldFVzZXJNZWRpYUVycm9yKGVycik7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfSwgW2hhbmRsZUdldFVzZXJNZWRpYUVycm9yLCBpc1NjcmVlblNoYXJpbmcsIHN0YXJ0RmlsdGVyUHJvY2Vzc2luZ10pO1xuICAgIC8vIFVwZGF0ZSBnZXRVc2VyTWVkaWEgcmVmXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZ2V0VXNlck1lZGlhUmVmLmN1cnJlbnQgPSBnZXRVc2VyTWVkaWE7XG4gICAgfSwgW2dldFVzZXJNZWRpYV0pO1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBJTklUSUFMSVpFIFBFRVIgQ09OTkVDVElPTlxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjb25zdCBpbml0UGVlckNvbm5lY3Rpb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbUGVlckNvbm5lY3Rpb25dIEluaXRpYWxpemluZy4uLicpO1xuICAgICAgICBpZiAocGVlckNvbm5lY3Rpb25SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQZWVyQ29ubmVjdGlvbl0gQ2xvc2luZyBleGlzdGluZyBjb25uZWN0aW9uJyk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvblJlZi5jdXJyZW50LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oeyBpY2VTZXJ2ZXJzOiBJQ0VfU0VSVkVSUyB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tQZWVyQ29ubmVjdGlvbl0gQ3JlYXRlZCBuZXcgUlRDUGVlckNvbm5lY3Rpb24nKTtcbiAgICAgICAgLy8gSGFuZGxlIElDRSBjYW5kaWRhdGVzXG4gICAgICAgIHBjLm9uaWNlY2FuZGlkYXRlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQZWVyQ29ubmVjdGlvbl0gSUNFIGNhbmRpZGF0ZTonLCBldmVudC5jYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IHNvY2tldFJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoJ3dlYnJ0YzppY2UtY2FuZGlkYXRlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlOiBldmVudC5jYW5kaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRVc2VySWQ6IHJlbW90ZVVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQZWVyQ29ubmVjdGlvbl0gSUNFIGdhdGhlcmluZyBjb21wbGV0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIYW5kbGUgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgIHBjLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBwYy5jb25uZWN0aW9uU3RhdGU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW1BlZXJDb25uZWN0aW9uXSBDb25uZWN0aW9uIHN0YXRlOiAke3N0YXRlfWApO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgICAgIHNldElzQ29ubmVjdGVkKHRydWUpO1xuICAgICAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdkaXNjb25uZWN0ZWQnIHx8IHN0YXRlID09PSAnZmFpbGVkJyB8fCBzdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgICAgICAgICBzZXRJc0Nvbm5lY3RlZChmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIEhhbmRsZSByZW1vdGUgc3RyZWFtXG4gICAgICAgIHBjLm9udHJhY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUGVlckNvbm5lY3Rpb25dIFJlY2VpdmVkIHJlbW90ZSB0cmFjazonLCBldmVudC50cmFjay5raW5kKTtcbiAgICAgICAgICAgIGlmIChldmVudC5zdHJlYW1zICYmIGV2ZW50LnN0cmVhbXNbMF0pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1BlZXJDb25uZWN0aW9uXSBTZXR0aW5nIHJlbW90ZSBzdHJlYW0nKTtcbiAgICAgICAgICAgICAgICBzZXRSZW1vdGVTdHJlYW0oZXZlbnQuc3RyZWFtc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIEhhbmRsZSBJQ0UgY29ubmVjdGlvbiBzdGF0ZVxuICAgICAgICBwYy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gcGMuaWNlQ29ubmVjdGlvblN0YXRlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtQZWVyQ29ubmVjdGlvbl0gSUNFIGNvbm5lY3Rpb24gc3RhdGU6ICR7c3RhdGV9YCk7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09ICdmYWlsZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1BlZXJDb25uZWN0aW9uXSBJQ0UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcignQ29ubmVjdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBlZXJDb25uZWN0aW9uUmVmLmN1cnJlbnQgPSBwYztcbiAgICAgICAgcmV0dXJuIHBjO1xuICAgIH0sIFtjYWxsSWQsIHJlbW90ZVVzZXJJZF0pO1xuICAgIC8vIFVwZGF0ZSBpbml0UGVlckNvbm5lY3Rpb24gcmVmXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaW5pdFBlZXJDb25uZWN0aW9uUmVmLmN1cnJlbnQgPSBpbml0UGVlckNvbm5lY3Rpb247XG4gICAgfSwgW2luaXRQZWVyQ29ubmVjdGlvbl0pO1xuICAgIGNvbnN0IHJlcXVlc3RPZmZlciA9IHVzZUNhbGxiYWNrKChyZWFzb24pID0+IHtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gc29ja2V0UmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tTb2NrZXRdIENhbm5vdCByZXF1ZXN0IG9mZmVyIC0gc29ja2V0IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgW1NvY2tldF0gUmVxdWVzdGluZyBvZmZlciAoJHtyZWFzb259KSBmb3IgY2FsbElkICR7Y2FsbElkfWApO1xuICAgICAgICBzb2NrZXQuZW1pdCgnd2VicnRjOnJlcXVlc3Qtb2ZmZXInLCB7XG4gICAgICAgICAgICBjYWxsSWQsXG4gICAgICAgICAgICBmcm9tVXNlcklkOiBfbG9jYWxVc2VySWQsXG4gICAgICAgICAgICB0YXJnZXRVc2VySWQ6IHJlbW90ZVVzZXJJZCxcbiAgICAgICAgfSk7XG4gICAgfSwgW2NhbGxJZCwgX2xvY2FsVXNlcklkLCByZW1vdGVVc2VySWRdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG9mZmVyUmV0cnlUaW1lclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChvZmZlclJldHJ5VGltZXJSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgb2ZmZXJSZXRyeVRpbWVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gU1RBUlQgQ0FMTFxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjb25zdCBzdGFydENhbGwgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtzdGFydENhbGxdICR7dGltZXN0YW1wfSAtIFN0YXJ0aW5nIGNhbGxgKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtzdGFydENhbGxdIENhbGwgSUQ6ICR7Y2FsbElkfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW3N0YXJ0Q2FsbF0gSXMgaW5pdGlhdG9yOiAke2lzSW5pdGlhdG9yfWApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgICAgICBjb25zdCBzb2NrZXQgPSBzb2NrZXRSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb2NrZXQgbm90IGNvbm5lY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBwZWVyIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IHBjID0gaW5pdFBlZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAvLyBHZXQgdXNlciBtZWRpYSAoYm90aCBpbml0aWF0b3IgYW5kIG5vbi1pbml0aWF0b3IgbmVlZCB0aGlzKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzdGFydENhbGxdIFJlcXVlc3RpbmcgdXNlciBtZWRpYS4uLicpO1xuICAgICAgICAgICAgYXdhaXQgZ2V0VXNlck1lZGlhKGlzVmlkZW9FbmFibGVkLCBpc0F1ZGlvRW5hYmxlZCk7XG4gICAgICAgICAgICBpZiAoaXNJbml0aWF0b3IpIHtcbiAgICAgICAgICAgICAgICAvLyBJbml0aWF0b3I6IENyZWF0ZSBhbmQgc2VuZCBvZmZlclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3RhcnRDYWxsXSBDcmVhdGluZyBvZmZlci4uLicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3RhcnRDYWxsXSBJbml0aWF0b3IgZGV0YWlsczonLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlVXNlcklkLFxuICAgICAgICAgICAgICAgICAgICBzb2NrZXRDb25uZWN0ZWQ6IHNvY2tldC5jb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHBjLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzdGFydENhbGxdIE9mZmVyIGNyZWF0ZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBvZmZlci50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzZHBMZW5ndGg6IG9mZmVyLnNkcD8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGMuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzdGFydENhbGxdIExvY2FsIGRlc2NyaXB0aW9uIHNldCwgc2lnbmFsaW5nU3RhdGU6JywgcGMuc2lnbmFsaW5nU3RhdGUpO1xuICAgICAgICAgICAgICAgIC8vIFNlbmQgb2ZmZXJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW3N0YXJ0Q2FsbF0gU2VuZGluZyBvZmZlciB2aWEgc29ja2V0Li4uJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2ZmZXJEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIG9mZmVyOiBvZmZlcixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VXNlcklkOiByZW1vdGVVc2VySWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW3N0YXJ0Q2FsbF0gT2ZmZXIgZGF0YSB0byBzZW5kOicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiBvZmZlckRhdGEuY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRVc2VySWQ6IG9mZmVyRGF0YS50YXJnZXRVc2VySWQsXG4gICAgICAgICAgICAgICAgICAgIG9mZmVyVHlwZTogb2ZmZXJEYXRhLm9mZmVyLnR5cGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdCgnd2VicnRjOm9mZmVyJywgb2ZmZXJEYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW3N0YXJ0Q2FsbF0g4pyFIE9mZmVyIGVtaXR0ZWQgdG8gc29ja2V0Jyk7XG4gICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHNvY2tldCBpcyBjb25uZWN0ZWRcbiAgICAgICAgICAgICAgICBpZiAoIXNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3N0YXJ0Q2FsbF0g4pqg77iPIFNvY2tldCBub3QgY29ubmVjdGVkIHdoZW4gc2VuZGluZyBvZmZlciEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBOb24taW5pdGlhdG9yOiBKdXN0IHNldHVwIHBlZXIgY29ubmVjdGlvbiBhbmQgd2FpdCBmb3Igb2ZmZXJcbiAgICAgICAgICAgICAgICAvLyBUaGUgb2ZmZXIgaGFuZGxlciB3aWxsIGNyZWF0ZSBhbnN3ZXIgd2hlbiBvZmZlciBpcyByZWNlaXZlZFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3RhcnRDYWxsXSBOb24taW5pdGlhdG9yOiBQZWVyIGNvbm5lY3Rpb24gcmVhZHksIHdhaXRpbmcgZm9yIG9mZmVyLi4uJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzdGFydENhbGxdIFNvY2tldCBsaXN0ZW5lcnMgc2hvdWxkIGJlIHNldCB1cCB0byByZWNlaXZlIG9mZmVyJyk7XG4gICAgICAgICAgICAgICAgaGFzUmVjZWl2ZWRPZmZlclJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmVxdWVzdE9mZmVyKCdzdGFydCcpO1xuICAgICAgICAgICAgICAgIGlmIChvZmZlclJldHJ5VGltZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKG9mZmVyUmV0cnlUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2ZmZXJSZXRyeVRpbWVyUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNSZWNlaXZlZE9mZmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZlclJldHJ5VGltZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwob2ZmZXJSZXRyeVRpbWVyUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyUmV0cnlUaW1lclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0T2ZmZXIoJ3JldHJ5Jyk7XG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3N0YXJ0Q2FsbF0gRXJyb3I6JywgZXJyKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gc3RhcnQgY2FsbCc7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfSwgW2NhbGxJZCwgaXNJbml0aWF0b3IsIHJlbW90ZVVzZXJJZCwgaXNWaWRlb0VuYWJsZWQsIGlzQXVkaW9FbmFibGVkLCBpbml0UGVlckNvbm5lY3Rpb24sIGdldFVzZXJNZWRpYSwgcmVxdWVzdE9mZmVyXSk7XG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIEVORCBDQUxMXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGNvbnN0IGVuZENhbGwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbZW5kQ2FsbF0gRW5kaW5nIGNhbGwuLi4nKTtcbiAgICAgICAgc3RvcEZpbHRlclByb2Nlc3NpbmcoKTtcbiAgICAgICAgc3RvcFNjcmVlblNoYXJlKCkuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgLy8gU3RvcCBsb2NhbCBzdHJlYW0gdHJhY2tzXG4gICAgICAgIGlmIChsb2NhbFN0cmVhbSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tlbmRDYWxsXSBTdG9wcGluZyBsb2NhbCBzdHJlYW0gdHJhY2tzJyk7XG4gICAgICAgICAgICBsb2NhbFN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW2VuZENhbGxdIFN0b3BwZWQgJHt0cmFjay5raW5kfSB0cmFja2ApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXRMb2NhbFN0cmVhbShudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmF3Q2FtZXJhU3RyZWFtUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJhd0NhbWVyYVN0cmVhbVJlZi5jdXJyZW50LmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgICAgICAgcmF3Q2FtZXJhU3RyZWFtUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIFN0b3AgcmVtb3RlIHN0cmVhbSB0cmFja3NcbiAgICAgICAgaWYgKHJlbW90ZVN0cmVhbSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tlbmRDYWxsXSBTdG9wcGluZyByZW1vdGUgc3RyZWFtIHRyYWNrcycpO1xuICAgICAgICAgICAgcmVtb3RlU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXRSZW1vdGVTdHJlYW0obnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xvc2UgcGVlciBjb25uZWN0aW9uXG4gICAgICAgIGlmIChwZWVyQ29ubmVjdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW2VuZENhbGxdIENsb3NpbmcgcGVlciBjb25uZWN0aW9uJyk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvblJlZi5jdXJyZW50LmNsb3NlKCk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvblJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBzZXRJc0Nvbm5lY3RlZChmYWxzZSk7XG4gICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICBjb25zb2xlLmxvZygnW2VuZENhbGxdIENhbGwgZW5kZWQnKTtcbiAgICB9LCBbbG9jYWxTdHJlYW0sIHJlbW90ZVN0cmVhbSwgc3RvcEZpbHRlclByb2Nlc3NpbmcsIHN0b3BTY3JlZW5TaGFyZV0pO1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBUT0dHTEUgVklERU8vQVVESU9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY29uc3QgdG9nZ2xlVmlkZW8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbdG9nZ2xlVmlkZW9dIEN1cnJlbnQgc3RhdGU6ICR7aXNWaWRlb0VuYWJsZWR9LCB0b2dnbGluZy4uLmApO1xuICAgICAgICBzZXRJc1ZpZGVvRW5hYmxlZCghaXNWaWRlb0VuYWJsZWQpO1xuICAgICAgICBpZiAobG9jYWxTdHJlYW0pIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvVHJhY2tzID0gbG9jYWxTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICAgICAgICAgIHZpZGVvVHJhY2tzLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJhY2suZW5hYmxlZCA9ICFpc1ZpZGVvRW5hYmxlZDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW3RvZ2dsZVZpZGVvXSBWaWRlbyB0cmFjayAke3RyYWNrLmlkfSBlbmFibGVkOiAke3RyYWNrLmVuYWJsZWR9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtpc1ZpZGVvRW5hYmxlZCwgbG9jYWxTdHJlYW1dKTtcbiAgICBjb25zdCB0b2dnbGVBdWRpbyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFt0b2dnbGVBdWRpb10gQ3VycmVudCBzdGF0ZTogJHtpc0F1ZGlvRW5hYmxlZH0sIHRvZ2dsaW5nLi4uYCk7XG4gICAgICAgIHNldElzQXVkaW9FbmFibGVkKCFpc0F1ZGlvRW5hYmxlZCk7XG4gICAgICAgIGlmIChsb2NhbFN0cmVhbSkge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9UcmFja3MgPSBsb2NhbFN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgICAgICAgICAgYXVkaW9UcmFja3MuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICAgICAgICB0cmFjay5lbmFibGVkID0gIWlzQXVkaW9FbmFibGVkO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbdG9nZ2xlQXVkaW9dIEF1ZGlvIHRyYWNrICR7dHJhY2suaWR9IGVuYWJsZWQ6ICR7dHJhY2suZW5hYmxlZH1gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgW2lzQXVkaW9FbmFibGVkLCBsb2NhbFN0cmVhbV0pO1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBTRVRVUCBTT0NLRVQgTElTVEVORVJTXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNvY2tldCA9IHNvY2tldFJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoIXNvY2tldCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdIFNvY2tldCBub3QgYXZhaWxhYmxlLCBza2lwcGluZyBsaXN0ZW5lciBzZXR1cCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldHVwIGxpc3RlbmVycyBldmVuIGlmIHBlZXIgY29ubmVjdGlvbiBub3QgcmVhZHkgeWV0XG4gICAgICAgIC8vIFBlZXIgY29ubmVjdGlvbiB3aWxsIGJlIGNyZWF0ZWQgaW4gc3RhcnRDYWxsKClcbiAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdIFNldHRpbmcgdXAgV2ViUlRDIGxpc3RlbmVycyBmb3IgY2FsbElkOicsIGNhbGxJZCk7XG4gICAgICAgIGNvbnN0IGhhbmRsZU9mZmVyID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSA9PT09PSBPRkZFUiBSRUNFSVZFRCA9PT09PScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdIE9mZmVyIGRhdGE6Jywge1xuICAgICAgICAgICAgICAgIGNhbGxJZDogZGF0YS5jYWxsSWQsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRDYWxsSWQ6IGNhbGxJZCxcbiAgICAgICAgICAgICAgICBmcm9tVXNlcklkOiBkYXRhLmZyb21Vc2VySWQsXG4gICAgICAgICAgICAgICAgb2ZmZXJUeXBlOiBkYXRhLm9mZmVyPy50eXBlLFxuICAgICAgICAgICAgICAgIG9mZmVyU2RwTGVuZ3RoOiBkYXRhLm9mZmVyPy5zZHA/Lmxlbmd0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoYXNSZWNlaXZlZE9mZmVyUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKG9mZmVyUmV0cnlUaW1lclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChvZmZlclJldHJ5VGltZXJSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgb2ZmZXJSZXRyeVRpbWVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuY2FsbElkICE9PSBjYWxsSWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NvY2tldF0g4p2MIE9mZmVyIGNhbGxJZCBtaXNtYXRjaDonLCBkYXRhLmNhbGxJZCwgJ2V4cGVjdGVkOicsIGNhbGxJZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdIOKchSBPZmZlciBjYWxsSWQgbWF0Y2hlcywgcHJvY2Vzc2luZy4uLicpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgcGMgPSBwZWVyQ29ubmVjdGlvblJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgIC8vIElmIHBlZXIgY29ubmVjdGlvbiBkb2Vzbid0IGV4aXN0IG9yIGlzIGNsb3NlZCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2xvc2VkID0gIXBjIHx8IHBjLnNpZ25hbGluZ1N0YXRlID09PSAnY2xvc2VkJyB8fCBwYy5jb25uZWN0aW9uU3RhdGUgPT09ICdjbG9zZWQnO1xuICAgICAgICAgICAgICAgIGlmIChpc0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NvY2tldF0gUGVlciBjb25uZWN0aW9uIG5vdCBmb3VuZCBvciBjbG9zZWQsIGNyZWF0aW5nIG5ldyBvbmUuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbml0UGVlckNvbm5lY3Rpb25SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NvY2tldF0gaW5pdFBlZXJDb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYyA9IGluaXRQZWVyQ29ubmVjdGlvblJlZi5jdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB1c2VyIG1lZGlhIGlmIG5vdCBhbHJlYWR5IG9idGFpbmVkXG4gICAgICAgICAgICAgICAgICAgIGlmICghbG9jYWxTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBHZXR0aW5nIHVzZXIgbWVkaWEgZm9yIGFuc3dlci4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRVc2VyTWVkaWFSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTb2NrZXRdIGdldFVzZXJNZWRpYSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZ2V0VXNlck1lZGlhUmVmLmN1cnJlbnQoaXNWaWRlb0VuYWJsZWQsIGlzQXVkaW9FbmFibGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBEb3VibGUgY2hlY2sgYWZ0ZXIgY3JlYXRpbmcgLSBpZiBzdGlsbCBjbG9zZWQsIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2Nsb3NlZCcgfHwgcGMuY29ubmVjdGlvblN0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NvY2tldF0gUGVlciBjb25uZWN0aW9uIHdhcyBjbG9zZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY3JlYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGaW5hbCBjaGVjayAtIGVuc3VyZSBwYyBpcyBub3QgbnVsbFxuICAgICAgICAgICAgICAgIGlmICghcGMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NvY2tldF0gUGVlciBjb25uZWN0aW9uIGlzIG51bGwgYWZ0ZXIgY3JlYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGaW5hbCBjaGVjayBzaWduYWxpbmcgc3RhdGUgYmVmb3JlIHNldHRpbmcgcmVtb3RlIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgaWYgKHBjLnNpZ25hbGluZ1N0YXRlID09PSAnY2xvc2VkJyB8fCBwYy5jb25uZWN0aW9uU3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTb2NrZXRdIENhbm5vdCBzZXQgcmVtb3RlIGRlc2NyaXB0aW9uOiBwZWVyIGNvbm5lY3Rpb24gaXMgY2xvc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTb2NrZXRdIFNpZ25hbGluZyBzdGF0ZTonLCBwYy5zaWduYWxpbmdTdGF0ZSwgJ0Nvbm5lY3Rpb24gc3RhdGU6JywgcGMuY29ubmVjdGlvblN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBwYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEub2ZmZXIpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NvY2tldF0gUmVtb3RlIGRlc2NyaXB0aW9uIHNldCcpO1xuICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgcXVldWVkIElDRSBjYW5kaWRhdGVzIG5vdyB0aGF0IHJlbW90ZSBkZXNjcmlwdGlvbiBpcyBzZXRcbiAgICAgICAgICAgICAgICBpZiAoaWNlQ2FuZGlkYXRlUXVldWVSZWYuY3VycmVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU29ja2V0XSBQcm9jZXNzaW5nICR7aWNlQ2FuZGlkYXRlUXVldWVSZWYuY3VycmVudC5sZW5ndGh9IHF1ZXVlZCBJQ0UgY2FuZGlkYXRlc2ApO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBpY2VDYW5kaWRhdGVRdWV1ZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBjLmFkZEljZUNhbmRpZGF0ZShuZXcgUlRDSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBRdWV1ZWQgSUNFIGNhbmRpZGF0ZSBhZGRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTb2NrZXRdIEVycm9yIGFkZGluZyBxdWV1ZWQgSUNFIGNhbmRpZGF0ZTonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGljZUNhbmRpZGF0ZVF1ZXVlUmVmLmN1cnJlbnQgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgcGMuY3JlYXRlQW5zd2VyKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGMuc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBBbnN3ZXIgY3JlYXRlZCBhbmQgc2V0LCBzaWduYWxpbmdTdGF0ZTonLCBwYy5zaWduYWxpbmdTdGF0ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBhbnN3ZXI6IGFuc3dlcixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VXNlcklkOiBkYXRhLmZyb21Vc2VySWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NvY2tldF0gU2VuZGluZyBhbnN3ZXI6Jywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IGFuc3dlckRhdGEuY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRVc2VySWQ6IGFuc3dlckRhdGEudGFyZ2V0VXNlcklkLFxuICAgICAgICAgICAgICAgICAgICBhbnN3ZXJUeXBlOiBhbnN3ZXJEYXRhLmFuc3dlci50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzb2NrZXRDb25uZWN0ZWQ6IHNvY2tldC5jb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdCgnd2VicnRjOmFuc3dlcicsIGFuc3dlckRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSDinIUgQW5zd2VyIGVtaXR0ZWQgdG8gc29ja2V0Jyk7XG4gICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHNvY2tldCBpcyBjb25uZWN0ZWRcbiAgICAgICAgICAgICAgICBpZiAoIXNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NvY2tldF0g4pqg77iPIFNvY2tldCBub3QgY29ubmVjdGVkIHdoZW4gc2VuZGluZyBhbnN3ZXIhJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTb2NrZXRdIEVycm9yIGhhbmRsaW5nIG9mZmVyOicsIGVycik7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBoYW5kbGUgaW5jb21pbmcgY2FsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVBbnN3ZXIgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdID09PT09IEFOU1dFUiBSRUNFSVZFRCA9PT09PScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdIEFuc3dlciBkYXRhOicsIHtcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IGRhdGEuY2FsbElkLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkQ2FsbElkOiBjYWxsSWQsXG4gICAgICAgICAgICAgICAgZnJvbVVzZXJJZDogZGF0YS5mcm9tVXNlcklkLFxuICAgICAgICAgICAgICAgIGFuc3dlclR5cGU6IGRhdGEuYW5zd2VyPy50eXBlLFxuICAgICAgICAgICAgICAgIGFuc3dlclNkcExlbmd0aDogZGF0YS5hbnN3ZXI/LnNkcD8ubGVuZ3RoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChkYXRhLmNhbGxJZCAhPT0gY2FsbElkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdIOKdjCBBbnN3ZXIgY2FsbElkIG1pc21hdGNoOicsIGRhdGEuY2FsbElkLCAnZXhwZWN0ZWQ6JywgY2FsbElkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NvY2tldF0g4pyFIEFuc3dlciBjYWxsSWQgbWF0Y2hlcywgcHJvY2Vzc2luZy4uLicpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYyA9IHBlZXJDb25uZWN0aW9uUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCFwYylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBjLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oZGF0YS5hbnN3ZXIpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NvY2tldF0gUmVtb3RlIGRlc2NyaXB0aW9uIHNldCBmcm9tIGFuc3dlcicpO1xuICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgcXVldWVkIElDRSBjYW5kaWRhdGVzIG5vdyB0aGF0IHJlbW90ZSBkZXNjcmlwdGlvbiBpcyBzZXRcbiAgICAgICAgICAgICAgICBpZiAoaWNlQ2FuZGlkYXRlUXVldWVSZWYuY3VycmVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU29ja2V0XSBQcm9jZXNzaW5nICR7aWNlQ2FuZGlkYXRlUXVldWVSZWYuY3VycmVudC5sZW5ndGh9IHF1ZXVlZCBJQ0UgY2FuZGlkYXRlc2ApO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBpY2VDYW5kaWRhdGVRdWV1ZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBjLmFkZEljZUNhbmRpZGF0ZShuZXcgUlRDSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBRdWV1ZWQgSUNFIGNhbmRpZGF0ZSBhZGRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTb2NrZXRdIEVycm9yIGFkZGluZyBxdWV1ZWQgSUNFIGNhbmRpZGF0ZTonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGljZUNhbmRpZGF0ZVF1ZXVlUmVmLmN1cnJlbnQgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NvY2tldF0gRXJyb3IgaGFuZGxpbmcgYW5zd2VyOicsIGVycik7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBoYW5kbGUgY2FsbCBhbnN3ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlSWNlQ2FuZGlkYXRlID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLmNhbGxJZCAhPT0gY2FsbElkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBSZWNlaXZlZCBJQ0UgY2FuZGlkYXRlOicsIGRhdGEpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYyA9IHBlZXJDb25uZWN0aW9uUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCFwYykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NvY2tldF0gUGVlciBjb25uZWN0aW9uIG5vdCByZWFkeSwgcXVldWVpbmcgSUNFIGNhbmRpZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBpY2VDYW5kaWRhdGVRdWV1ZVJlZi5jdXJyZW50LnB1c2goZGF0YS5jYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHJlbW90ZSBkZXNjcmlwdGlvbiBpcyBzZXRcbiAgICAgICAgICAgICAgICBpZiAoIXBjLnJlbW90ZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBSZW1vdGUgZGVzY3JpcHRpb24gbm90IHNldCB5ZXQsIHF1ZXVlaW5nIElDRSBjYW5kaWRhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgaWNlQ2FuZGlkYXRlUXVldWVSZWYuY3VycmVudC5wdXNoKGRhdGEuY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBwYy5hZGRJY2VDYW5kaWRhdGUobmV3IFJUQ0ljZUNhbmRpZGF0ZShkYXRhLmNhbmRpZGF0ZSkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBJQ0UgY2FuZGlkYXRlIGFkZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZXJyb3IgaXMgYmVjYXVzZSByZW1vdGUgZGVzY3JpcHRpb24gaXMgbnVsbCwgcXVldWUgaXRcbiAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3JlbW90ZSBkZXNjcmlwdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU29ja2V0XSBSZW1vdGUgZGVzY3JpcHRpb24gbm90IHNldCwgcXVldWVpbmcgSUNFIGNhbmRpZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBpY2VDYW5kaWRhdGVRdWV1ZVJlZi5jdXJyZW50LnB1c2goZGF0YS5jYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NvY2tldF0gRXJyb3IgaGFuZGxpbmcgSUNFIGNhbmRpZGF0ZTonLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc29ja2V0Lm9uKCd3ZWJydGM6b2ZmZXInLCBoYW5kbGVPZmZlcik7XG4gICAgICAgIHNvY2tldC5vbignd2VicnRjOmFuc3dlcicsIGhhbmRsZUFuc3dlcik7XG4gICAgICAgIHNvY2tldC5vbignd2VicnRjOmljZS1jYW5kaWRhdGUnLCBoYW5kbGVJY2VDYW5kaWRhdGUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTb2NrZXRdIENsZWFuaW5nIHVwIFdlYlJUQyBsaXN0ZW5lcnMnKTtcbiAgICAgICAgICAgIHNvY2tldC5vZmYoJ3dlYnJ0YzpvZmZlcicsIGhhbmRsZU9mZmVyKTtcbiAgICAgICAgICAgIHNvY2tldC5vZmYoJ3dlYnJ0YzphbnN3ZXInLCBoYW5kbGVBbnN3ZXIpO1xuICAgICAgICAgICAgc29ja2V0Lm9mZignd2VicnRjOmljZS1jYW5kaWRhdGUnLCBoYW5kbGVJY2VDYW5kaWRhdGUpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBOb3RlOiBXZSBpbnRlbnRpb25hbGx5IGRvbid0IGluY2x1ZGUgaW5pdFBlZXJDb25uZWN0aW9uLCBnZXRVc2VyTWVkaWEsIGV0Yy4gaW4gZGVwc1xuICAgICAgICAvLyB0byBhdm9pZCByZS1zZXR0aW5nIHVwIGxpc3RlbmVycy4gVGhlc2UgZnVuY3Rpb25zIGFyZSBzdGFibGUgKHVzZUNhbGxiYWNrKS5cbiAgICAgICAgLy8gVGhlIGhhbmRsZXJzIHVzZSByZWZzL2N1cnJlbnQgdmFsdWVzIHdoZW4gbmVlZGVkLlxuICAgIH0sIFtjYWxsSWRdKTtcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gQVRUQUNIIFNUUkVBTVMgVE8gVklERU8gRUxFTUVOVFNcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGxvY2FsVmlkZW9SZWYuY3VycmVudCAmJiBsb2NhbFN0cmVhbSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tWaWRlb10gQXR0YWNoaW5nIGxvY2FsIHN0cmVhbSB0byB2aWRlbyBlbGVtZW50Jyk7XG4gICAgICAgICAgICBsb2NhbFZpZGVvUmVmLmN1cnJlbnQuc3JjT2JqZWN0ID0gbG9jYWxTdHJlYW07XG4gICAgICAgIH1cbiAgICB9LCBbbG9jYWxTdHJlYW1dKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAocmVtb3RlVmlkZW9SZWYuY3VycmVudCAmJiByZW1vdGVTdHJlYW0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbVmlkZW9dIEF0dGFjaGluZyByZW1vdGUgc3RyZWFtIHRvIHZpZGVvIGVsZW1lbnQnKTtcbiAgICAgICAgICAgIHJlbW90ZVZpZGVvUmVmLmN1cnJlbnQuc3JjT2JqZWN0ID0gcmVtb3RlU3RyZWFtO1xuICAgICAgICB9XG4gICAgfSwgW3JlbW90ZVN0cmVhbV0pO1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBDTEVBTlVQIE9OIFVOTU9VTlRcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gVXNlIHJlZiB0byBzdG9yZSBsYXRlc3QgZW5kQ2FsbCBmdW5jdGlvbiB0byBhdm9pZCBjbGVhbnVwIHJlLXJ1bm5pbmdcbiAgICBjb25zdCBlbmRDYWxsUmVmID0gdXNlUmVmKGVuZENhbGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGVuZENhbGxSZWYuY3VycmVudCA9IGVuZENhbGw7XG4gICAgfSwgW2VuZENhbGxdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDbGVhbnVwXSBDb21wb25lbnQgdW5tb3VudGluZywgY2xlYW5pbmcgdXAuLi4nKTtcbiAgICAgICAgICAgIC8vIFVzZSByZWYgdG8gY2FsbCBsYXRlc3QgZW5kQ2FsbCB3aXRob3V0IHRyaWdnZXJpbmcgcmUtcnVuc1xuICAgICAgICAgICAgZW5kQ2FsbFJlZi5jdXJyZW50KCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIEVtcHR5IGRlcHMgLSBvbmx5IHJ1biBvbiB1bm1vdW50XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGxvY2FsU3RyZWFtLFxuICAgICAgICByZW1vdGVTdHJlYW0sXG4gICAgICAgIGlzQ29ubmVjdGVkLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgc3RhcnRDYWxsLFxuICAgICAgICBlbmRDYWxsLFxuICAgICAgICB0b2dnbGVWaWRlbyxcbiAgICAgICAgdG9nZ2xlQXVkaW8sXG4gICAgICAgIGlzVmlkZW9FbmFibGVkLFxuICAgICAgICBpc0F1ZGlvRW5hYmxlZCxcbiAgICAgICAgYXBwbHlGaWx0ZXIsXG4gICAgICAgIGN1cnJlbnRGaWx0ZXIsXG4gICAgICAgIHN0YXJ0U2NyZWVuU2hhcmUsXG4gICAgICAgIHN0b3BTY3JlZW5TaGFyZSxcbiAgICAgICAgaXNTY3JlZW5TaGFyaW5nLFxuICAgICAgICBsb2NhbFZpZGVvUmVmLFxuICAgICAgICByZW1vdGVWaWRlb1JlZixcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJnZXRTb2NrZXQiLCJGSUxURVJfQ09ORklHIiwibm9uZSIsImxhYmVsIiwiZW1vamkiLCJiZWF1dHkiLCJjc3NGaWx0ZXIiLCJ3YXJtIiwiY29vbCIsInBhcnR5Iiwib3ZlcmxheSIsImN0eCIsIndpZHRoIiwiaGVpZ2h0IiwidGltZSIsInNhdmUiLCJnbG9iYWxBbHBoYSIsImkiLCJ4IiwieSIsInNpemUiLCJmaWxsU3R5bGUiLCJiZWdpblBhdGgiLCJhcmMiLCJNYXRoIiwiUEkiLCJmaWxsIiwicmVzdG9yZSIsImJpcnRoZGF5IiwiYmFsbG9vbkNvbG9ycyIsImZvckVhY2giLCJjb2xvciIsImluZGV4IiwiYngiLCJieSIsInJhZGl1cyIsImdyYWRpZW50IiwiY3JlYXRlUmFkaWFsR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJlbGxpcHNlIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJtb3ZlVG8iLCJxdWFkcmF0aWNDdXJ2ZVRvIiwic3Ryb2tlIiwibGluZVRvIiwiY2xvc2VQYXRoIiwiY2FrZUhlaWdodCIsImZpbGxSZWN0IiwiY3giLCJJQ0VfU0VSVkVSUyIsInVybHMiLCJ1c2VybmFtZSIsImNyZWRlbnRpYWwiLCJ1c2VXZWJSVEMiLCJjYWxsSWQiLCJjb252ZXJzYXRpb25JZCIsIl9jb252ZXJzYXRpb25JZCIsImlzSW5pdGlhdG9yIiwibG9jYWxVc2VySWQiLCJfbG9jYWxVc2VySWQiLCJyZW1vdGVVc2VySWQiLCJ2aWRlb0RldmljZUlkIiwiYXVkaW9EZXZpY2VJZCIsImxvY2FsU3RyZWFtIiwic2V0TG9jYWxTdHJlYW0iLCJyZW1vdGVTdHJlYW0iLCJzZXRSZW1vdGVTdHJlYW0iLCJpc0Nvbm5lY3RlZCIsInNldElzQ29ubmVjdGVkIiwiZXJyb3IiLCJzZXRFcnJvciIsImlzVmlkZW9FbmFibGVkIiwic2V0SXNWaWRlb0VuYWJsZWQiLCJpc0F1ZGlvRW5hYmxlZCIsInNldElzQXVkaW9FbmFibGVkIiwiY3VycmVudEZpbHRlciIsInNldEN1cnJlbnRGaWx0ZXIiLCJpc1NjcmVlblNoYXJpbmciLCJzZXRJc1NjcmVlblNoYXJpbmciLCJwZWVyQ29ubmVjdGlvblJlZiIsInNvY2tldFJlZiIsImxvY2FsVmlkZW9SZWYiLCJyZW1vdGVWaWRlb1JlZiIsImljZUNhbmRpZGF0ZVF1ZXVlUmVmIiwiaGFzUmVjZWl2ZWRPZmZlclJlZiIsIm9mZmVyUmV0cnlUaW1lclJlZiIsInJhd0NhbWVyYVN0cmVhbVJlZiIsInNjcmVlblNoYXJlU3RyZWFtUmVmIiwicHJvY2Vzc2VkRmlsdGVyU3RyZWFtUmVmIiwiZmlsdGVyQ2FudmFzUmVmIiwiZmlsdGVyVmlkZW9SZWYiLCJmaWx0ZXJBbmltYXRpb25GcmFtZVJlZiIsImN1cnJlbnRGaWx0ZXJSZWYiLCJpbml0UGVlckNvbm5lY3Rpb25SZWYiLCJnZXRVc2VyTWVkaWFSZWYiLCJzeW5jU29ja2V0IiwiY3VycmVudFNvY2tldCIsImNvbm5lY3RlZCIsImN1cnJlbnQiLCJjb25zb2xlIiwibG9nIiwiaWQiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInJlcGxhY2VWaWRlb1RyYWNrIiwidHJhY2siLCJwYyIsInNlbmRlciIsImdldFNlbmRlcnMiLCJmaW5kIiwicyIsImtpbmQiLCJyZXBsYWNlVHJhY2siLCJzdG9wRmlsdGVyUHJvY2Vzc2luZyIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiZ2V0VHJhY2tzIiwic3RvcCIsInBhdXNlIiwiZXJyIiwic3JjT2JqZWN0Iiwic3RhcnRGaWx0ZXJQcm9jZXNzaW5nIiwiZmlsdGVyIiwicmF3U3RyZWFtIiwidmlkZW9FbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm11dGVkIiwicGxheXNJbmxpbmUiLCJhdXRvcGxheSIsInBsYXkiLCJjYXRjaCIsImNhbnZhcyIsImdldENvbnRleHQiLCJyZW5kZXIiLCJ2aWRlbyIsInZpZGVvV2lkdGgiLCJ2aWRlb0hlaWdodCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNsZWFyUmVjdCIsImNvbmZpZyIsImRyYXdJbWFnZSIsInBlcmZvcm1hbmNlIiwibm93IiwicHJvY2Vzc2VkU3RyZWFtIiwiY2FwdHVyZVN0cmVhbSIsInByb2Nlc3NlZFRyYWNrIiwiZ2V0VmlkZW9UcmFja3MiLCJzdG9wU2NyZWVuU2hhcmUiLCJjYW1lcmFTdHJlYW0iLCJjYW1lcmFUcmFjayIsInN0YXJ0U2NyZWVuU2hhcmUiLCJlbGVjdHJvbkFQSSIsIndpbmRvdyIsInVuZGVmaW5lZCIsInNoYXJlU3RyZWFtIiwic2VsZWN0U2NyZWVuU291cmNlIiwic291cmNlSWQiLCJlbGVjdHJvbkNvbnN0cmFpbnRzIiwiYXVkaW8iLCJtYW5kYXRvcnkiLCJjaHJvbWVNZWRpYVNvdXJjZSIsImNocm9tZU1lZGlhU291cmNlSWQiLCJtYXhGcmFtZVJhdGUiLCJtaW5GcmFtZVJhdGUiLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJnZXREaXNwbGF5TWVkaWEiLCJmcmFtZVJhdGUiLCJpZGVhbCIsImRpc3BsYXlTdXJmYWNlIiwiRXJyb3IiLCJvbmVuZGVkIiwibmFtZSIsImFwcGx5RmlsdGVyIiwid2FybiIsImhhbmRsZUdldFVzZXJNZWRpYUVycm9yIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWVzc2FnZSIsImVycm9yTXNnIiwibG9jYXRpb24iLCJvcmlnaW4iLCJocmVmIiwiaXNTZWN1cmVDb250ZXh0IiwiY29uc3RyYWludHMiLCJkZXZpY2VJZCIsImV4YWN0IiwiZmFjaW5nTW9kZSIsImVjaG9DYW5jZWxsYXRpb24iLCJub2lzZVN1cHByZXNzaW9uIiwiYXV0b0dhaW5Db250cm9sIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0cmVhbSIsImFjdGl2ZSIsIm1hcCIsImVuYWJsZWQiLCJyZWFkeVN0YXRlIiwiYWRkVHJhY2siLCJlcnJvck1lc3NhZ2UiLCJpbml0UGVlckNvbm5lY3Rpb24iLCJjbG9zZSIsIlJUQ1BlZXJDb25uZWN0aW9uIiwiaWNlU2VydmVycyIsIm9uaWNlY2FuZGlkYXRlIiwiZXZlbnQiLCJjYW5kaWRhdGUiLCJzb2NrZXQiLCJlbWl0IiwidGFyZ2V0VXNlcklkIiwib25jb25uZWN0aW9uc3RhdGVjaGFuZ2UiLCJzdGF0ZSIsImNvbm5lY3Rpb25TdGF0ZSIsIm9udHJhY2siLCJzdHJlYW1zIiwib25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UiLCJpY2VDb25uZWN0aW9uU3RhdGUiLCJyZXF1ZXN0T2ZmZXIiLCJyZWFzb24iLCJmcm9tVXNlcklkIiwic3RhcnRDYWxsIiwic29ja2V0Q29ubmVjdGVkIiwic29ja2V0SWQiLCJvZmZlciIsImNyZWF0ZU9mZmVyIiwidHlwZSIsInNkcExlbmd0aCIsInNkcCIsImxlbmd0aCIsInNldExvY2FsRGVzY3JpcHRpb24iLCJzaWduYWxpbmdTdGF0ZSIsIm9mZmVyRGF0YSIsIm9mZmVyVHlwZSIsImVuZENhbGwiLCJ0b2dnbGVWaWRlbyIsInZpZGVvVHJhY2tzIiwidG9nZ2xlQXVkaW8iLCJhdWRpb1RyYWNrcyIsImdldEF1ZGlvVHJhY2tzIiwiaGFuZGxlT2ZmZXIiLCJkYXRhIiwiZXhwZWN0ZWRDYWxsSWQiLCJvZmZlclNkcExlbmd0aCIsImlzQ2xvc2VkIiwic2V0UmVtb3RlRGVzY3JpcHRpb24iLCJSVENTZXNzaW9uRGVzY3JpcHRpb24iLCJhZGRJY2VDYW5kaWRhdGUiLCJSVENJY2VDYW5kaWRhdGUiLCJhbnN3ZXIiLCJjcmVhdGVBbnN3ZXIiLCJhbnN3ZXJEYXRhIiwiYW5zd2VyVHlwZSIsImhhbmRsZUFuc3dlciIsImFuc3dlclNkcExlbmd0aCIsImhhbmRsZUljZUNhbmRpZGF0ZSIsInB1c2giLCJyZW1vdGVEZXNjcmlwdGlvbiIsImluY2x1ZGVzIiwib24iLCJvZmYiLCJlbmRDYWxsUmVmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/hooks/useWebRTC.js\n");

/***/ }),

/***/ "(ssr)/../../packages/app/socket.js":
/*!************************************!*\
  !*** ../../packages/app/socket.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectSocket: () => (/* binding */ connectSocket),\n/* harmony export */   disconnectSocket: () => (/* binding */ disconnectSocket),\n/* harmony export */   getSocket: () => (/* binding */ getSocket),\n/* harmony export */   reconnectSocket: () => (/* binding */ reconnectSocket)\n/* harmony export */ });\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ \"(ssr)/../../../node_modules/socket.io-client/build/esm-debug/index.js\");\n\n// Simplified socket configuration - always use VPS server\nconst isWeb = \"undefined\" !== \"undefined\";\n// Check if using ngrok tunnel\nconst isNgrok = isWeb && window?.location?.hostname && window.location.hostname.includes(\"ngrok\");\n// Use HTTP for now since backend doesn't support HTTPS/WSS\nconst SOCKET_BASE_URL = \"https://backend36.dev\";\nconsole.log(\"\\uD83D\\uDD0D Platform detection:\", {\n    isWeb\n});\nconsole.log(\"\\uD83D\\uDD0D Socket URL:\", SOCKET_BASE_URL);\nconsole.log(\"\\uD83D\\uDD0D App Version: 1.1.0\");\nconsole.log(\"\\uD83D\\uDD0D Build Number: 017\");\nconsole.log(\"\\uD83D\\uDD0D Cache busting timestamp:\", Date.now());\nconsole.log(\"\\uD83D\\uDD0D Force refresh required - clear browser cache!\");\nconsole.log(\"\\uD83D\\uDD0D Current URL:\",  false ? 0 : \"N/A\");\nlet socket = null;\nlet isConnecting = false;\nlet connectionPromise = null;\n// \n// WEBSOCKET CONNECTION - TCP-based, Full-Duplex\n// \nconst connectSocket = (token)=>{\n    if (socket?.connected) {\n        console.log(\"\\uD83D\\uDD0D Socket already connected, returning existing socket\");\n        console.log(\"\\uD83D\\uDD0D Current socket ID:\", socket.id);\n        return socket;\n    }\n    if (isConnecting && connectionPromise) {\n        console.log(\"\\uD83D\\uDD0D Socket connection already in progress, waiting...\");\n        return connectionPromise;\n    }\n    // Clear any existing socket before creating new one\n    if (socket) {\n        console.log(\"\\uD83D\\uDD27 Clearing existing socket before creating new one\");\n        socket.disconnect();\n        socket = null;\n    }\n    isConnecting = true;\n    // Create connection promise to avoid multiple simultaneous connections\n    connectionPromise = new Promise(async (resolve)=>{\n        console.log(\"\\uD83D\\uDD0D Creating new socket connection to:\", SOCKET_BASE_URL || \"same-origin\");\n        console.log(\"\\uD83D\\uDD0D Using token:\", token ? \"Present\" : \"Missing\");\n        console.log(\"\\uD83D\\uDD0D Platform:\", isWeb ? \"Web\" : \"Mobile\");\n        // Clear any existing socket first (both web and mobile)\n        if (socket) {\n            console.log(\"\\uD83D\\uDD27 Clearing existing socket before creating new connection\");\n            socket.disconnect();\n            socket = null;\n        }\n        // Try to connect with retry logic\n        let connectionAttempts = 0;\n        const maxAttempts = 3;\n        const tryConnect = (url)=>{\n            connectionAttempts++;\n            console.log(` Connection attempt ${connectionAttempts}/${maxAttempts} to:`, url);\n            //  SOCKET TO  Y - Ln th connect\n            return new Promise((resolve, reject)=>{\n                const testSocket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(url, {\n                    transports: isWeb ? [\n                        \"polling\"\n                    ] : [\n                        \"websocket\",\n                        \"polling\"\n                    ],\n                    upgrade: isWeb ? false : true,\n                    timeout: 10000,\n                    auth: {\n                        token\n                    },\n                    path: \"/socket.io\",\n                    // Add debug options\n                    forceNew: true,\n                    rememberUpgrade: false,\n                    // Add connection debugging\n                    autoConnect: true,\n                    withCredentials: true\n                });\n                // Add debug listeners to test socket\n                testSocket.on(\"connect\", ()=>{\n                    console.log(\"\\uD83D\\uDD27 Test socket connected to:\", url);\n                });\n                testSocket.on(\"disconnect\", (reason)=>{\n                    console.log(\"\\uD83D\\uDD27 Test socket disconnected from:\", url, \"reason:\", reason);\n                });\n                testSocket.on(\"connect_error\", (error)=>{\n                    console.log(\"\\uD83D\\uDD27 Test socket connect error:\", url, error.message);\n                });\n                // Handle connection success\n                testSocket.on(\"connect\", ()=>{\n                    console.log(\" Connection successful to:\", url);\n                    // Don't disconnect the test socket - use it as the main socket\n                    resolve(testSocket);\n                });\n                // Handle connection error\n                testSocket.on(\"connect_error\", (error)=>{\n                    console.log(\" Connection failed to:\", url, error.message);\n                    testSocket.disconnect();\n                    reject(error);\n                });\n                // Timeout after 10 seconds - only if not connected\n                setTimeout(()=>{\n                    if (!testSocket.connected) {\n                        console.log(\" Connection timeout to:\", url);\n                        testSocket.disconnect();\n                        reject(new Error(\"Connection timeout\"));\n                    }\n                }, 10000);\n            });\n        };\n        // Simple connection to VPS server\n        const connectToServer = async ()=>{\n            try {\n                console.log(` Connecting to: ${SOCKET_BASE_URL}`);\n                socket = await tryConnect(SOCKET_BASE_URL);\n                console.log(\" Successfully connected to:\", SOCKET_BASE_URL);\n            } catch (error) {\n                console.error(\" Failed to connect to server:\", error);\n                console.error(\" Backend server may be down or unreachable\");\n                console.error(\" Please check if backend server is running\");\n                //  SOCKET TO  Y - Fallback khi tryConnect() fail\n                // Create a fallback socket with Netlify-compatible settings\n                socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(SOCKET_BASE_URL, {\n                    transports: isWeb ? [\n                        \"polling\"\n                    ] : [\n                        \"websocket\",\n                        \"polling\"\n                    ],\n                    upgrade: isWeb ? false : true,\n                    timeout: 10000,\n                    auth: {\n                        token\n                    },\n                    path: \"/socket.io\",\n                    // Netlify-specific options\n                    forceNew: true,\n                    rememberUpgrade: false,\n                    autoConnect: true,\n                    withCredentials: true\n                });\n            }\n        };\n        // Try multiple connection strategies\n        const connectionOptions = {\n            // Use polling first for Netlify to avoid Mixed Content Error\n            transports: isWeb ? [\n                \"polling\"\n            ] : [\n                \"websocket\",\n                \"polling\"\n            ],\n            upgrade: isWeb ? false : true,\n            reconnection: true,\n            reconnectionAttempts: 15,\n            reconnectionDelay: 1000,\n            reconnectionDelayMax: 15000,\n            timeout: 30000,\n            withCredentials: true,\n            auth: {\n                token\n            },\n            path: \"/socket.io\",\n            // Add extra options for better connection\n            forceNew: true,\n            rememberUpgrade: false,\n            // Add extra options for better reliability\n            autoConnect: true,\n            reconnectionDelayFactor: 1.5,\n            maxReconnectionAttempts: 15\n        };\n        // Connect to VPS server\n        //  SOCKET TO  Y - Fallback nu khng c socket\n        connectToServer().then(()=>{\n            if (!socket) {\n                console.log(\"\\uD83D\\uDD27 Creating fallback socket connection\");\n                socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(SOCKET_BASE_URL, connectionOptions);\n                // Add immediate debug listeners\n                socket.on(\"connect\", ()=>{\n                    console.log(\"\\uD83D\\uDD27 Fallback socket connected\");\n                });\n                socket.on(\"disconnect\", (reason)=>{\n                    console.log(\"\\uD83D\\uDD27 Fallback socket disconnected:\", reason);\n                });\n                socket.on(\"connect_error\", (error)=>{\n                    console.log(\"\\uD83D\\uDD27 Fallback socket connect error:\", error.message);\n                });\n                setupSocketListeners(token);\n            } else {\n                console.log(\"\\uD83D\\uDD27 Socket already connected, setting up listeners\");\n                setupSocketListeners(token);\n            }\n            // Wait for socket to be fully connected\n            const waitForConnection = ()=>{\n                if (socket && socket.connected) {\n                    console.log(\"\\uD83D\\uDD27 Socket fully connected, resolving...\");\n                    isConnecting = false;\n                    resolve(socket);\n                } else {\n                    console.log(\"\\uD83D\\uDD27 Waiting for socket to be fully connected...\");\n                    setTimeout(waitForConnection, 100);\n                }\n            };\n            waitForConnection();\n        }).catch((error)=>{\n            console.log(\"\\uD83D\\uDD27 Connection failed, creating fallback socket\");\n            console.log(\"\\uD83D\\uDD27 Connection error:\", error);\n            socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(SOCKET_BASE_URL, connectionOptions);\n            // Add immediate debug listeners for fallback\n            socket.on(\"connect\", ()=>{\n                console.log(\"\\uD83D\\uDD27 Catch fallback socket connected\");\n            });\n            socket.on(\"disconnect\", (reason)=>{\n                console.log(\"\\uD83D\\uDD27 Catch fallback socket disconnected:\", reason);\n            });\n            socket.on(\"connect_error\", (error)=>{\n                console.log(\"\\uD83D\\uDD27 Catch fallback socket connect error:\", error.message);\n            });\n            setupSocketListeners(token);\n            // Wait for fallback socket to be connected\n            const waitForFallback = ()=>{\n                if (socket && socket.connected) {\n                    console.log(\"\\uD83D\\uDD27 Fallback socket connected, resolving...\");\n                    isConnecting = false;\n                    resolve(socket);\n                } else {\n                    console.log(\"\\uD83D\\uDD27 Waiting for fallback socket to be connected...\");\n                    setTimeout(waitForFallback, 100);\n                }\n            };\n            waitForFallback();\n        });\n    });\n    return connectionPromise;\n};\n// Setup socket listeners\nconst setupSocketListeners = (token)=>{\n    if (!socket) return;\n    // Add debug logs\n    socket.on(\"connect\", ()=>{\n        console.log(\" WebSocket connected successfully\");\n        console.log(\"\\uD83D\\uDD0D Socket ID:\", socket?.id);\n        console.log(\"\\uD83D\\uDD0D Socket URL:\", SOCKET_BASE_URL);\n        console.log(\"\\uD83D\\uDD0D Socket transport:\", socket?.io?.engine?.transport?.name);\n        console.log(\"\\uD83D\\uDD0D Platform:\", isWeb ? \"Web\" : \"Mobile\");\n        console.log(\"\\uD83D\\uDD0D Token present:\", !!token);\n        console.log(\"\\uD83D\\uDD0D Socket connected state:\", socket?.connected);\n        console.log(\"\\uD83D\\uDD0D Socket io engine:\", socket?.io?.engine?.readyState);\n        // Check JWT token expiration\n        if (token) {\n            try {\n                const payload = JSON.parse(atob(token.split(\".\")[1]));\n                const now = Math.floor(Date.now() / 1000);\n                const exp = payload.exp;\n                console.log(\"\\uD83D\\uDD0D JWT Token expires at:\", new Date(exp * 1000));\n                console.log(\"\\uD83D\\uDD0D Current time:\", new Date(now * 1000));\n                console.log(\"\\uD83D\\uDD0D Token valid for:\", Math.floor((exp - now) / 60), \"minutes\");\n                if (exp < now) {\n                    console.error(\" JWT Token expired!\");\n                    socket?.disconnect();\n                    return;\n                }\n            } catch (error) {\n                console.error(\" JWT Token invalid:\", error);\n            }\n        }\n        // Emit a test event to verify connection\n        socket?.emit(\"test-connection\", {\n            platform: isWeb ? \"web\" : \"mobile\",\n            timestamp: Date.now()\n        });\n    // Don't auto-join conversation - let Chat component handle this\n    });\n    socket.on(\"disconnect\", (reason)=>{\n        console.log(\" WebSocket disconnected, reason:\", reason);\n        console.log(\" Socket ID before disconnect:\", socket?.id);\n        console.log(\" Socket connected state before disconnect:\", socket?.connected);\n        console.log(\" Socket transport before disconnect:\", socket?.io?.engine?.transport?.name);\n        // Don't auto-reconnect for client disconnect to avoid loops\n        if (reason === \"io client disconnect\") {\n            console.log(\"\\uD83D\\uDD0D Client initiated disconnect - not auto-reconnecting to avoid loops\");\n            return;\n        }\n        // Auto-reconnect for server disconnect\n        console.log(\"\\uD83D\\uDD27 Auto-reconnecting for server disconnect...\");\n        setTimeout(()=>{\n            if (socket && !socket.connected) {\n                console.log(\"\\uD83D\\uDD27 Attempting reconnection...\");\n                socket.connect();\n            }\n        }, 2000);\n    });\n    socket.on(\"connect_error\", (error)=>{\n        console.log(\" WebSocket connection error:\", error);\n        console.log(\" Error details:\", error.message);\n        console.log(\" Platform:\", isWeb ? \"Web\" : \"Mobile\");\n        console.log(\" Transport:\", socket?.io?.engine?.transport?.name);\n        // Mobile-specific error handling\n        if (!isWeb) {\n            console.log(\"\\uD83D\\uDD27 Mobile: Attempting alternative connection...\");\n            // Try to reconnect with different options\n            setTimeout(()=>{\n                if (socket && !socket.connected) {\n                    console.log(\"\\uD83D\\uDD27 Mobile: Force reconnection...\");\n                    socket.connect();\n                }\n            }, 2000);\n        }\n    });\n    // Add periodic connection check\n    setInterval(()=>{\n        console.log(\"\\uD83D\\uDD0D Socket status check:\", {\n            connected: socket?.connected,\n            id: socket?.id,\n            transport: socket?.io?.engine?.transport?.name,\n            platform: isWeb ? \"Web\" : \"Mobile\"\n        });\n        // Mobile-specific: Force reconnection if disconnected\n        if (!isWeb && socket && !socket.connected) {\n            console.log(\"\\uD83D\\uDD27 Mobile: Socket disconnected, attempting reconnection...\");\n            socket.connect();\n        }\n        // Check token expiration and refresh if needed\n        if (token) {\n            try {\n                const payload = JSON.parse(atob(token.split(\".\")[1]));\n                const now = Math.floor(Date.now() / 1000);\n                const exp = payload.exp;\n                // If token expires in less than 5 minutes, warn user\n                if (exp - now < 300) {\n                    console.warn(\" JWT Token expires soon:\", Math.floor((exp - now) / 60), \"minutes\");\n                    console.warn(\" Consider refreshing token to maintain connection\");\n                    // If token expires in less than 2 minutes, warn but don't disconnect\n                    if (exp - now < 120) {\n                        console.warn(\" Token expires very soon, but keeping connection alive\");\n                        console.warn(\" Consider refreshing token in the background\");\n                    }\n                }\n            } catch (error) {\n                console.error(\" JWT Token invalid:\", error);\n            }\n        }\n    }, 10000); // Check every 10 seconds\n    // Add event listener debug\n    const originalEmit = socket.emit;\n    socket.emit = function(event, ...args) {\n        console.log(\"\\uD83D\\uDD0D [SOCKET] Emitting event:\", event, args);\n        return originalEmit.call(this, event, ...args);\n    };\n    // Track disconnect calls\n    const originalDisconnect = socket.disconnect;\n    socket.disconnect = function() {\n        console.log(\"\\uD83D\\uDD0D [SOCKET] Disconnect called\");\n        console.trace(\"\\uD83D\\uDD0D [SOCKET] Disconnect call stack:\");\n        return originalDisconnect.call(this);\n    };\n    const originalOn = socket.on;\n    socket.on = function(event, listener) {\n        console.log(\"\\uD83D\\uDD0D [SOCKET] Setting up listener for event:\", event);\n        return originalOn.call(this, event, listener);\n    };\n    // Listen for any events to debug\n    socket.onAny((event, ...args)=>{\n        console.log(\"\\uD83D\\uDD0D Socket received event:\", event, args);\n    });\n    // Add more debug listeners\n    socket.on(\"connect_error\", (error)=>{\n        console.log(\" Socket connect_error:\", error);\n    });\n    socket.on(\"error\", (error)=>{\n        console.log(\" Socket error:\", error);\n    });\n    socket.on(\"reconnect\", (attemptNumber)=>{\n        console.log(\" Socket reconnected after\", attemptNumber, \"attempts\");\n    });\n    socket.on(\"reconnect_attempt\", (attemptNumber)=>{\n        console.log(\"\\uD83D\\uDD27 Socket reconnection attempt:\", attemptNumber);\n    });\n    socket.on(\"reconnect_error\", (error)=>{\n        console.log(\" Socket reconnection error:\", error);\n    });\n    socket.on(\"reconnect_failed\", ()=>{\n        console.log(\" Socket reconnection failed\");\n    });\n};\n// Lazy getter for socket - for web we create the connection on first use\nconst getSocket = ()=>{\n    if (socket) return socket;\n    if (!isWeb || \"undefined\" === \"undefined\") {\n        console.warn(\" getSocket called in non-web environment without existing socket\");\n        return socket;\n    }\n    // Try to read token from localStorage (kept in sync with api.ts)\n    let token = \"\";\n    try {\n        token = window.localStorage.getItem(\"auth_token\") || \"\";\n    } catch (err) {\n        console.warn(\" Unable to read auth_token from localStorage for socket auth\", err);\n    }\n    console.log(\"\\uD83D\\uDD27 Creating socket from getSocket()\", {\n        hasToken: !!token,\n        url: SOCKET_BASE_URL\n    });\n    // Simple, synchronous socket creation for web\n    socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(SOCKET_BASE_URL, {\n        transports: [\n            \"polling\"\n        ],\n        upgrade: false,\n        timeout: 10000,\n        withCredentials: true,\n        auth: {\n            token\n        },\n        path: \"/socket.io\",\n        forceNew: true,\n        rememberUpgrade: false,\n        autoConnect: true\n    });\n    setupSocketListeners(token);\n    return socket;\n};\nconst disconnectSocket = ()=>{\n    if (socket) {\n        socket.disconnect();\n        socket = null;\n    }\n    isConnecting = false;\n};\nconst reconnectSocket = (token)=>{\n    console.log(\"\\uD83D\\uDD27 Force reconnecting socket with new token...\");\n    disconnectSocket();\n    return connectSocket(token);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0EseUVBQXlFO0FBQ2xFLE1BQU00RSxZQUFZO0lBQ3JCLElBQUl4RSxRQUNBLE9BQU9BO0lBQ1gsSUFBSSxDQUFDWixTQUFTLGdCQUFrQixhQUFhO1FBQ3pDTyxRQUFRa0UsSUFBSSxDQUFDO1FBQ2IsT0FBTzdEO0lBQ1g7SUFDQSxpRUFBaUU7SUFDakUsSUFBSUksUUFBUTtJQUNaLElBQUk7UUFDQUEsUUFBUWQsT0FBT21GLFlBQVksQ0FBQ0MsT0FBTyxDQUFDLGlCQUFpQjtJQUN6RCxFQUNBLE9BQU9DLEtBQUs7UUFDUmhGLFFBQVFrRSxJQUFJLENBQUMsa0VBQWtFYztJQUNuRjtJQUNBaEYsUUFBUUMsR0FBRyxDQUFDLGlEQUF1QztRQUMvQ2dGLFVBQVUsQ0FBQyxDQUFDeEU7UUFDWlMsS0FBS25CO0lBQ1Q7SUFDQSw4Q0FBOEM7SUFDOUNNLFNBQVNiLG9EQUFFQSxDQUFDTyxpQkFBaUI7UUFDekJzQixZQUFZO1lBQUM7U0FBVTtRQUN2QkMsU0FBUztRQUNUQyxTQUFTO1FBQ1RNLGlCQUFpQjtRQUNqQkwsTUFBTTtZQUFFZjtRQUFNO1FBQ2RnQixNQUFNO1FBQ05DLFVBQVU7UUFDVkMsaUJBQWlCO1FBQ2pCQyxhQUFhO0lBQ2pCO0lBQ0FpQixxQkFBcUJwQztJQUNyQixPQUFPSjtBQUNYLEVBQUU7QUFDSyxNQUFNNkUsbUJBQW1CO0lBQzVCLElBQUk3RSxRQUFRO1FBQ1JBLE9BQU9PLFVBQVU7UUFDakJQLFNBQVM7SUFDYjtJQUNBQyxlQUFlO0FBQ25CLEVBQUU7QUFDSyxNQUFNNkUsa0JBQWtCLENBQUMxRTtJQUM1QlQsUUFBUUMsR0FBRyxDQUFDO0lBQ1ppRjtJQUNBLE9BQU8xRSxjQUFjQztBQUN6QixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9sYS13ZWIvLi4vLi4vcGFja2FnZXMvYXBwL3NvY2tldC5qcz9mMTg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlvIH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG4vLyBTaW1wbGlmaWVkIHNvY2tldCBjb25maWd1cmF0aW9uIC0gYWx3YXlzIHVzZSBWUFMgc2VydmVyXG5jb25zdCBpc1dlYiA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuLy8gQ2hlY2sgaWYgdXNpbmcgbmdyb2sgdHVubmVsXG5jb25zdCBpc05ncm9rID0gaXNXZWIgJiYgd2luZG93Py5sb2NhdGlvbj8uaG9zdG5hbWUgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmluY2x1ZGVzKCduZ3JvaycpO1xuLy8gVXNlIEhUVFAgZm9yIG5vdyBzaW5jZSBiYWNrZW5kIGRvZXNuJ3Qgc3VwcG9ydCBIVFRQUy9XU1NcbmNvbnN0IFNPQ0tFVF9CQVNFX1VSTCA9ICdodHRwczovL2JhY2tlbmQzNi5kZXYnO1xuY29uc29sZS5sb2coJ/CflI0gUGxhdGZvcm0gZGV0ZWN0aW9uOicsIHsgaXNXZWIgfSk7XG5jb25zb2xlLmxvZygn8J+UjSBTb2NrZXQgVVJMOicsIFNPQ0tFVF9CQVNFX1VSTCk7XG5jb25zb2xlLmxvZygn8J+UjSBBcHAgVmVyc2lvbjogMS4xLjAnKTtcbmNvbnNvbGUubG9nKCfwn5SNIEJ1aWxkIE51bWJlcjogMDE3Jyk7XG5jb25zb2xlLmxvZygn8J+UjSBDYWNoZSBidXN0aW5nIHRpbWVzdGFtcDonLCBEYXRlLm5vdygpKTtcbmNvbnNvbGUubG9nKCfwn5SNIEZvcmNlIHJlZnJlc2ggcmVxdWlyZWQgLSBjbGVhciBicm93c2VyIGNhY2hlIScpO1xuY29uc29sZS5sb2coJ/CflI0gQ3VycmVudCBVUkw6JywgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Py5sb2NhdGlvbiA/IHdpbmRvdy5sb2NhdGlvbi5ocmVmIDogJ04vQScpO1xubGV0IHNvY2tldCA9IG51bGw7XG5sZXQgaXNDb25uZWN0aW5nID0gZmFsc2U7XG5sZXQgY29ubmVjdGlvblByb21pc2UgPSBudWxsO1xuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4vLyBXRUJTT0NLRVQgQ09OTkVDVElPTiAtIFRDUC1iYXNlZCwgRnVsbC1EdXBsZXhcbi8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuZXhwb3J0IGNvbnN0IGNvbm5lY3RTb2NrZXQgPSAodG9rZW4pID0+IHtcbiAgICBpZiAoc29ja2V0Py5jb25uZWN0ZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gU29ja2V0IGFscmVhZHkgY29ubmVjdGVkLCByZXR1cm5pbmcgZXhpc3Rpbmcgc29ja2V0Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEN1cnJlbnQgc29ja2V0IElEOicsIHNvY2tldC5pZCk7XG4gICAgICAgIHJldHVybiBzb2NrZXQ7XG4gICAgfVxuICAgIGlmIChpc0Nvbm5lY3RpbmcgJiYgY29ubmVjdGlvblByb21pc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gU29ja2V0IGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcywgd2FpdGluZy4uLicpO1xuICAgICAgICByZXR1cm4gY29ubmVjdGlvblByb21pc2U7XG4gICAgfVxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBzb2NrZXQgYmVmb3JlIGNyZWF0aW5nIG5ldyBvbmVcbiAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIENsZWFyaW5nIGV4aXN0aW5nIHNvY2tldCBiZWZvcmUgY3JlYXRpbmcgbmV3IG9uZScpO1xuICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICBzb2NrZXQgPSBudWxsO1xuICAgIH1cbiAgICBpc0Nvbm5lY3RpbmcgPSB0cnVlO1xuICAgIC8vIENyZWF0ZSBjb25uZWN0aW9uIHByb21pc2UgdG8gYXZvaWQgbXVsdGlwbGUgc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zXG4gICAgY29ubmVjdGlvblByb21pc2UgPSBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBDcmVhdGluZyBuZXcgc29ja2V0IGNvbm5lY3Rpb24gdG86JywgU09DS0VUX0JBU0VfVVJMIHx8ICdzYW1lLW9yaWdpbicpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBVc2luZyB0b2tlbjonLCB0b2tlbiA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFBsYXRmb3JtOicsIGlzV2ViID8gJ1dlYicgOiAnTW9iaWxlJyk7XG4gICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBzb2NrZXQgZmlyc3QgKGJvdGggd2ViIGFuZCBtb2JpbGUpXG4gICAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIENsZWFyaW5nIGV4aXN0aW5nIHNvY2tldCBiZWZvcmUgY3JlYXRpbmcgbmV3IGNvbm5lY3Rpb24nKTtcbiAgICAgICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBzb2NrZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRyeSB0byBjb25uZWN0IHdpdGggcmV0cnkgbG9naWNcbiAgICAgICAgbGV0IGNvbm5lY3Rpb25BdHRlbXB0cyA9IDA7XG4gICAgICAgIGNvbnN0IG1heEF0dGVtcHRzID0gMztcbiAgICAgICAgY29uc3QgdHJ5Q29ubmVjdCA9ICh1cmwpID0+IHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25BdHRlbXB0cysrO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYPCflKcgQ29ubmVjdGlvbiBhdHRlbXB0ICR7Y29ubmVjdGlvbkF0dGVtcHRzfS8ke21heEF0dGVtcHRzfSB0bzpgLCB1cmwpO1xuICAgICAgICAgICAgLy8g8J+Pl++4jyBTT0NLRVQgVOG6oE8g4bueIMSQw4JZIC0gTOG6p24gdGjhu60gY29ubmVjdFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0U29ja2V0ID0gaW8odXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydHM6IGlzV2ViID8gWydwb2xsaW5nJ10gOiBbJ3dlYnNvY2tldCcsICdwb2xsaW5nJ10sXG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGU6IGlzV2ViID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAxMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aDogeyB0b2tlbiB9LFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiAnL3NvY2tldC5pbycsXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBkZWJ1ZyBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIGZvcmNlTmV3OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZW1lbWJlclVwZ3JhZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY29ubmVjdGlvbiBkZWJ1Z2dpbmdcbiAgICAgICAgICAgICAgICAgICAgYXV0b0Nvbm5lY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBBZGQgZGVidWcgbGlzdGVuZXJzIHRvIHRlc3Qgc29ja2V0XG4gICAgICAgICAgICAgICAgdGVzdFNvY2tldC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgVGVzdCBzb2NrZXQgY29ubmVjdGVkIHRvOicsIHVybCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGVzdFNvY2tldC5vbignZGlzY29ubmVjdCcsIChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgVGVzdCBzb2NrZXQgZGlzY29ubmVjdGVkIGZyb206JywgdXJsLCAncmVhc29uOicsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGVzdFNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpyBUZXN0IHNvY2tldCBjb25uZWN0IGVycm9yOicsIHVybCwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGNvbm5lY3Rpb24gc3VjY2Vzc1xuICAgICAgICAgICAgICAgIHRlc3RTb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29ubmVjdGlvbiBzdWNjZXNzZnVsIHRvOicsIHVybCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGRpc2Nvbm5lY3QgdGhlIHRlc3Qgc29ja2V0IC0gdXNlIGl0IGFzIHRoZSBtYWluIHNvY2tldFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRlc3RTb2NrZXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBjb25uZWN0aW9uIGVycm9yXG4gICAgICAgICAgICAgICAgdGVzdFNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4p2MIENvbm5lY3Rpb24gZmFpbGVkIHRvOicsIHVybCwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHRlc3RTb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgYWZ0ZXIgMTAgc2Vjb25kcyAtIG9ubHkgaWYgbm90IGNvbm5lY3RlZFxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRlc3RTb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4o+wIENvbm5lY3Rpb24gdGltZW91dCB0bzonLCB1cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVzdFNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdDb25uZWN0aW9uIHRpbWVvdXQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxMDAwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gU2ltcGxlIGNvbm5lY3Rpb24gdG8gVlBTIHNlcnZlclxuICAgICAgICBjb25zdCBjb25uZWN0VG9TZXJ2ZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SnIENvbm5lY3RpbmcgdG86ICR7U09DS0VUX0JBU0VfVVJMfWApO1xuICAgICAgICAgICAgICAgIHNvY2tldCA9IGF3YWl0IHRyeUNvbm5lY3QoU09DS0VUX0JBU0VfVVJMKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG86JywgU09DS0VUX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY29ubmVjdCB0byBzZXJ2ZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBCYWNrZW5kIHNlcnZlciBtYXkgYmUgZG93biBvciB1bnJlYWNoYWJsZScpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBQbGVhc2UgY2hlY2sgaWYgYmFja2VuZCBzZXJ2ZXIgaXMgcnVubmluZycpO1xuICAgICAgICAgICAgICAgIC8vIPCfj5fvuI8gU09DS0VUIFThuqBPIOG7niDEkMOCWSAtIEZhbGxiYWNrIGtoaSB0cnlDb25uZWN0KCkgZmFpbFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGZhbGxiYWNrIHNvY2tldCB3aXRoIE5ldGxpZnktY29tcGF0aWJsZSBzZXR0aW5nc1xuICAgICAgICAgICAgICAgIHNvY2tldCA9IGlvKFNPQ0tFVF9CQVNFX1VSTCwge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRzOiBpc1dlYiA/IFsncG9sbGluZyddIDogWyd3ZWJzb2NrZXQnLCAncG9sbGluZyddLFxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlOiBpc1dlYiA/IGZhbHNlIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICAgICAgICAgICAgICAgIGF1dGg6IHsgdG9rZW4gfSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogJy9zb2NrZXQuaW8nLFxuICAgICAgICAgICAgICAgICAgICAvLyBOZXRsaWZ5LXNwZWNpZmljIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VOZXc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlbWVtYmVyVXBncmFkZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9Db25uZWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRyeSBtdWx0aXBsZSBjb25uZWN0aW9uIHN0cmF0ZWdpZXNcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgICAgICAvLyBVc2UgcG9sbGluZyBmaXJzdCBmb3IgTmV0bGlmeSB0byBhdm9pZCBNaXhlZCBDb250ZW50IEVycm9yXG4gICAgICAgICAgICB0cmFuc3BvcnRzOiBpc1dlYiA/IFsncG9sbGluZyddIDogWyd3ZWJzb2NrZXQnLCAncG9sbGluZyddLFxuICAgICAgICAgICAgdXBncmFkZTogaXNXZWIgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICByZWNvbm5lY3Rpb246IHRydWUsXG4gICAgICAgICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogMTUsXG4gICAgICAgICAgICByZWNvbm5lY3Rpb25EZWxheTogMTAwMCxcbiAgICAgICAgICAgIHJlY29ubmVjdGlvbkRlbGF5TWF4OiAxNTAwMCxcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgYXV0aDogeyB0b2tlbiB9LFxuICAgICAgICAgICAgcGF0aDogJy9zb2NrZXQuaW8nLFxuICAgICAgICAgICAgLy8gQWRkIGV4dHJhIG9wdGlvbnMgZm9yIGJldHRlciBjb25uZWN0aW9uXG4gICAgICAgICAgICBmb3JjZU5ldzogdHJ1ZSxcbiAgICAgICAgICAgIHJlbWVtYmVyVXBncmFkZTogZmFsc2UsXG4gICAgICAgICAgICAvLyBBZGQgZXh0cmEgb3B0aW9ucyBmb3IgYmV0dGVyIHJlbGlhYmlsaXR5XG4gICAgICAgICAgICBhdXRvQ29ubmVjdDogdHJ1ZSxcbiAgICAgICAgICAgIHJlY29ubmVjdGlvbkRlbGF5RmFjdG9yOiAxLjUsXG4gICAgICAgICAgICBtYXhSZWNvbm5lY3Rpb25BdHRlbXB0czogMTUsXG4gICAgICAgIH07XG4gICAgICAgIC8vIENvbm5lY3QgdG8gVlBTIHNlcnZlclxuICAgICAgICAvLyDwn4+X77iPIFNPQ0tFVCBU4bqgTyDhu54gxJDDglkgLSBGYWxsYmFjayBu4bq/dSBraMO0bmcgY8OzIHNvY2tldFxuICAgICAgICBjb25uZWN0VG9TZXJ2ZXIoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgQ3JlYXRpbmcgZmFsbGJhY2sgc29ja2V0IGNvbm5lY3Rpb24nKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQgPSBpbyhTT0NLRVRfQkFTRV9VUkwsIGNvbm5lY3Rpb25PcHRpb25zKTtcbiAgICAgICAgICAgICAgICAvLyBBZGQgaW1tZWRpYXRlIGRlYnVnIGxpc3RlbmVyc1xuICAgICAgICAgICAgICAgIHNvY2tldC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgRmFsbGJhY2sgc29ja2V0IGNvbm5lY3RlZCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvY2tldC5vbignZGlzY29ubmVjdCcsIChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgRmFsbGJhY2sgc29ja2V0IGRpc2Nvbm5lY3RlZDonLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpyBGYWxsYmFjayBzb2NrZXQgY29ubmVjdCBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZXR1cFNvY2tldExpc3RlbmVycyh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpyBTb2NrZXQgYWxyZWFkeSBjb25uZWN0ZWQsIHNldHRpbmcgdXAgbGlzdGVuZXJzJyk7XG4gICAgICAgICAgICAgICAgc2V0dXBTb2NrZXRMaXN0ZW5lcnModG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2FpdCBmb3Igc29ja2V0IHRvIGJlIGZ1bGx5IGNvbm5lY3RlZFxuICAgICAgICAgICAgY29uc3Qgd2FpdEZvckNvbm5lY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNvY2tldCAmJiBzb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIFNvY2tldCBmdWxseSBjb25uZWN0ZWQsIHJlc29sdmluZy4uLicpO1xuICAgICAgICAgICAgICAgICAgICBpc0Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzb2NrZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgV2FpdGluZyBmb3Igc29ja2V0IHRvIGJlIGZ1bGx5IGNvbm5lY3RlZC4uLicpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHdhaXRGb3JDb25uZWN0aW9uLCAxMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3YWl0Rm9yQ29ubmVjdGlvbigpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIENvbm5lY3Rpb24gZmFpbGVkLCBjcmVhdGluZyBmYWxsYmFjayBzb2NrZXQnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIENvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgc29ja2V0ID0gaW8oU09DS0VUX0JBU0VfVVJMLCBjb25uZWN0aW9uT3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBBZGQgaW1tZWRpYXRlIGRlYnVnIGxpc3RlbmVycyBmb3IgZmFsbGJhY2tcbiAgICAgICAgICAgIHNvY2tldC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpyBDYXRjaCBmYWxsYmFjayBzb2NrZXQgY29ubmVjdGVkJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNvY2tldC5vbignZGlzY29ubmVjdCcsIChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpyBDYXRjaCBmYWxsYmFjayBzb2NrZXQgZGlzY29ubmVjdGVkOicsIHJlYXNvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIENhdGNoIGZhbGxiYWNrIHNvY2tldCBjb25uZWN0IGVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXR1cFNvY2tldExpc3RlbmVycyh0b2tlbik7XG4gICAgICAgICAgICAvLyBXYWl0IGZvciBmYWxsYmFjayBzb2NrZXQgdG8gYmUgY29ubmVjdGVkXG4gICAgICAgICAgICBjb25zdCB3YWl0Rm9yRmFsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNvY2tldCAmJiBzb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIEZhbGxiYWNrIHNvY2tldCBjb25uZWN0ZWQsIHJlc29sdmluZy4uLicpO1xuICAgICAgICAgICAgICAgICAgICBpc0Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzb2NrZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgV2FpdGluZyBmb3IgZmFsbGJhY2sgc29ja2V0IHRvIGJlIGNvbm5lY3RlZC4uLicpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHdhaXRGb3JGYWxsYmFjaywgMTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2FpdEZvckZhbGxiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBjb25uZWN0aW9uUHJvbWlzZTtcbn07XG4vLyBTZXR1cCBzb2NrZXQgbGlzdGVuZXJzXG5jb25zdCBzZXR1cFNvY2tldExpc3RlbmVycyA9ICh0b2tlbikgPT4ge1xuICAgIGlmICghc29ja2V0KVxuICAgICAgICByZXR1cm47XG4gICAgLy8gQWRkIGRlYnVnIGxvZ3NcbiAgICBzb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgV2ViU29ja2V0IGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gU29ja2V0IElEOicsIHNvY2tldD8uaWQpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBTb2NrZXQgVVJMOicsIFNPQ0tFVF9CQVNFX1VSTCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFNvY2tldCB0cmFuc3BvcnQ6Jywgc29ja2V0Py5pbz8uZW5naW5lPy50cmFuc3BvcnQ/Lm5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBQbGF0Zm9ybTonLCBpc1dlYiA/ICdXZWInIDogJ01vYmlsZScpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBUb2tlbiBwcmVzZW50OicsICEhdG9rZW4pO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBTb2NrZXQgY29ubmVjdGVkIHN0YXRlOicsIHNvY2tldD8uY29ubmVjdGVkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gU29ja2V0IGlvIGVuZ2luZTonLCBzb2NrZXQ/LmlvPy5lbmdpbmU/LnJlYWR5U3RhdGUpO1xuICAgICAgICAvLyBDaGVjayBKV1QgdG9rZW4gZXhwaXJhdGlvblxuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoYXRvYih0b2tlbi5zcGxpdCgnLicpWzFdKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwID0gcGF5bG9hZC5leHA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gSldUIFRva2VuIGV4cGlyZXMgYXQ6JywgbmV3IERhdGUoZXhwICogMTAwMCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEN1cnJlbnQgdGltZTonLCBuZXcgRGF0ZShub3cgKiAxMDAwKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gVG9rZW4gdmFsaWQgZm9yOicsIE1hdGguZmxvb3IoKGV4cCAtIG5vdykgLyA2MCksICdtaW51dGVzJyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4cCA8IG5vdykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgSldUIFRva2VuIGV4cGlyZWQhJyk7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldD8uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEpXVCBUb2tlbiBpbnZhbGlkOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbWl0IGEgdGVzdCBldmVudCB0byB2ZXJpZnkgY29ubmVjdGlvblxuICAgICAgICBzb2NrZXQ/LmVtaXQoJ3Rlc3QtY29ubmVjdGlvbicsIHtcbiAgICAgICAgICAgIHBsYXRmb3JtOiBpc1dlYiA/ICd3ZWInIDogJ21vYmlsZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIERvbid0IGF1dG8tam9pbiBjb252ZXJzYXRpb24gLSBsZXQgQ2hhdCBjb21wb25lbnQgaGFuZGxlIHRoaXNcbiAgICB9KTtcbiAgICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAocmVhc29uKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCwgcmVhc29uOicsIHJlYXNvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IElEIGJlZm9yZSBkaXNjb25uZWN0OicsIHNvY2tldD8uaWQpO1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCBjb25uZWN0ZWQgc3RhdGUgYmVmb3JlIGRpc2Nvbm5lY3Q6Jywgc29ja2V0Py5jb25uZWN0ZWQpO1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCB0cmFuc3BvcnQgYmVmb3JlIGRpc2Nvbm5lY3Q6Jywgc29ja2V0Py5pbz8uZW5naW5lPy50cmFuc3BvcnQ/Lm5hbWUpO1xuICAgICAgICAvLyBEb24ndCBhdXRvLXJlY29ubmVjdCBmb3IgY2xpZW50IGRpc2Nvbm5lY3QgdG8gYXZvaWQgbG9vcHNcbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gJ2lvIGNsaWVudCBkaXNjb25uZWN0Jykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2xpZW50IGluaXRpYXRlZCBkaXNjb25uZWN0IC0gbm90IGF1dG8tcmVjb25uZWN0aW5nIHRvIGF2b2lkIGxvb3BzJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXV0by1yZWNvbm5lY3QgZm9yIHNlcnZlciBkaXNjb25uZWN0XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIEF1dG8tcmVjb25uZWN0aW5nIGZvciBzZXJ2ZXIgZGlzY29ubmVjdC4uLicpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzb2NrZXQgJiYgIXNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpyBBdHRlbXB0aW5nIHJlY29ubmVjdGlvbi4uLicpO1xuICAgICAgICAgICAgICAgIHNvY2tldC5jb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH0pO1xuICAgIHNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFdlYlNvY2tldCBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCBFcnJvciBkZXRhaWxzOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFBsYXRmb3JtOicsIGlzV2ViID8gJ1dlYicgOiAnTW9iaWxlJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgVHJhbnNwb3J0OicsIHNvY2tldD8uaW8/LmVuZ2luZT8udHJhbnNwb3J0Py5uYW1lKTtcbiAgICAgICAgLy8gTW9iaWxlLXNwZWNpZmljIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIGlmICghaXNXZWIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIE1vYmlsZTogQXR0ZW1wdGluZyBhbHRlcm5hdGl2ZSBjb25uZWN0aW9uLi4uJyk7XG4gICAgICAgICAgICAvLyBUcnkgdG8gcmVjb25uZWN0IHdpdGggZGlmZmVyZW50IG9wdGlvbnNcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzb2NrZXQgJiYgIXNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKcgTW9iaWxlOiBGb3JjZSByZWNvbm5lY3Rpb24uLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEFkZCBwZXJpb2RpYyBjb25uZWN0aW9uIGNoZWNrXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBTb2NrZXQgc3RhdHVzIGNoZWNrOicsIHtcbiAgICAgICAgICAgIGNvbm5lY3RlZDogc29ja2V0Py5jb25uZWN0ZWQsXG4gICAgICAgICAgICBpZDogc29ja2V0Py5pZCxcbiAgICAgICAgICAgIHRyYW5zcG9ydDogc29ja2V0Py5pbz8uZW5naW5lPy50cmFuc3BvcnQ/Lm5hbWUsXG4gICAgICAgICAgICBwbGF0Zm9ybTogaXNXZWIgPyAnV2ViJyA6ICdNb2JpbGUnXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBNb2JpbGUtc3BlY2lmaWM6IEZvcmNlIHJlY29ubmVjdGlvbiBpZiBkaXNjb25uZWN0ZWRcbiAgICAgICAgaWYgKCFpc1dlYiAmJiBzb2NrZXQgJiYgIXNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIE1vYmlsZTogU29ja2V0IGRpc2Nvbm5lY3RlZCwgYXR0ZW1wdGluZyByZWNvbm5lY3Rpb24uLi4nKTtcbiAgICAgICAgICAgIHNvY2tldC5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgdG9rZW4gZXhwaXJhdGlvbiBhbmQgcmVmcmVzaCBpZiBuZWVkZWRcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnBhcnNlKGF0b2IodG9rZW4uc3BsaXQoJy4nKVsxXSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cCA9IHBheWxvYWQuZXhwO1xuICAgICAgICAgICAgICAgIC8vIElmIHRva2VuIGV4cGlyZXMgaW4gbGVzcyB0aGFuIDUgbWludXRlcywgd2FybiB1c2VyXG4gICAgICAgICAgICAgICAgaWYgKGV4cCAtIG5vdyA8IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBKV1QgVG9rZW4gZXhwaXJlcyBzb29uOicsIE1hdGguZmxvb3IoKGV4cCAtIG5vdykgLyA2MCksICdtaW51dGVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIENvbnNpZGVyIHJlZnJlc2hpbmcgdG9rZW4gdG8gbWFpbnRhaW4gY29ubmVjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0b2tlbiBleHBpcmVzIGluIGxlc3MgdGhhbiAyIG1pbnV0ZXMsIHdhcm4gYnV0IGRvbid0IGRpc2Nvbm5lY3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cCAtIG5vdyA8IDEyMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gVG9rZW4gZXhwaXJlcyB2ZXJ5IHNvb24sIGJ1dCBrZWVwaW5nIGNvbm5lY3Rpb24gYWxpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIENvbnNpZGVyIHJlZnJlc2hpbmcgdG9rZW4gaW4gdGhlIGJhY2tncm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBKV1QgVG9rZW4gaW52YWxpZDonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCAxMDAwMCk7IC8vIENoZWNrIGV2ZXJ5IDEwIHNlY29uZHNcbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgZGVidWdcbiAgICBjb25zdCBvcmlnaW5hbEVtaXQgPSBzb2NrZXQuZW1pdDtcbiAgICBzb2NrZXQuZW1pdCA9IGZ1bmN0aW9uIChldmVudCwgLi4uYXJncykge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbU09DS0VUXSBFbWl0dGluZyBldmVudDonLCBldmVudCwgYXJncyk7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbEVtaXQuY2FsbCh0aGlzLCBldmVudCwgLi4uYXJncyk7XG4gICAgfTtcbiAgICAvLyBUcmFjayBkaXNjb25uZWN0IGNhbGxzXG4gICAgY29uc3Qgb3JpZ2luYWxEaXNjb25uZWN0ID0gc29ja2V0LmRpc2Nvbm5lY3Q7XG4gICAgc29ja2V0LmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtTT0NLRVRdIERpc2Nvbm5lY3QgY2FsbGVkJyk7XG4gICAgICAgIGNvbnNvbGUudHJhY2UoJ/CflI0gW1NPQ0tFVF0gRGlzY29ubmVjdCBjYWxsIHN0YWNrOicpO1xuICAgICAgICByZXR1cm4gb3JpZ2luYWxEaXNjb25uZWN0LmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBjb25zdCBvcmlnaW5hbE9uID0gc29ja2V0Lm9uO1xuICAgIHNvY2tldC5vbiA9IGZ1bmN0aW9uIChldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gW1NPQ0tFVF0gU2V0dGluZyB1cCBsaXN0ZW5lciBmb3IgZXZlbnQ6JywgZXZlbnQpO1xuICAgICAgICByZXR1cm4gb3JpZ2luYWxPbi5jYWxsKHRoaXMsIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICAvLyBMaXN0ZW4gZm9yIGFueSBldmVudHMgdG8gZGVidWdcbiAgICBzb2NrZXQub25BbnkoKGV2ZW50LCAuLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFNvY2tldCByZWNlaXZlZCBldmVudDonLCBldmVudCwgYXJncyk7XG4gICAgfSk7XG4gICAgLy8gQWRkIG1vcmUgZGVidWcgbGlzdGVuZXJzXG4gICAgc29ja2V0Lm9uKCdjb25uZWN0X2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IGNvbm5lY3RfZXJyb3I6JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHNvY2tldC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCBTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHNvY2tldC5vbigncmVjb25uZWN0JywgKGF0dGVtcHROdW1iZXIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBTb2NrZXQgcmVjb25uZWN0ZWQgYWZ0ZXInLCBhdHRlbXB0TnVtYmVyLCAnYXR0ZW1wdHMnKTtcbiAgICB9KTtcbiAgICBzb2NrZXQub24oJ3JlY29ubmVjdF9hdHRlbXB0JywgKGF0dGVtcHROdW1iZXIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflKcgU29ja2V0IHJlY29ubmVjdGlvbiBhdHRlbXB0OicsIGF0dGVtcHROdW1iZXIpO1xuICAgIH0pO1xuICAgIHNvY2tldC5vbigncmVjb25uZWN0X2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgU29ja2V0IHJlY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgfSk7XG4gICAgc29ja2V0Lm9uKCdyZWNvbm5lY3RfZmFpbGVkJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFNvY2tldCByZWNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgfSk7XG59O1xuLy8gTGF6eSBnZXR0ZXIgZm9yIHNvY2tldCAtIGZvciB3ZWIgd2UgY3JlYXRlIHRoZSBjb25uZWN0aW9uIG9uIGZpcnN0IHVzZVxuZXhwb3J0IGNvbnN0IGdldFNvY2tldCA9ICgpID0+IHtcbiAgICBpZiAoc29ja2V0KVxuICAgICAgICByZXR1cm4gc29ja2V0O1xuICAgIGlmICghaXNXZWIgfHwgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gZ2V0U29ja2V0IGNhbGxlZCBpbiBub24td2ViIGVudmlyb25tZW50IHdpdGhvdXQgZXhpc3Rpbmcgc29ja2V0Jyk7XG4gICAgICAgIHJldHVybiBzb2NrZXQ7XG4gICAgfVxuICAgIC8vIFRyeSB0byByZWFkIHRva2VuIGZyb20gbG9jYWxTdG9yYWdlIChrZXB0IGluIHN5bmMgd2l0aCBhcGkudHMpXG4gICAgbGV0IHRva2VuID0gJyc7XG4gICAgdHJ5IHtcbiAgICAgICAgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKSB8fCAnJztcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBVbmFibGUgdG8gcmVhZCBhdXRoX3Rva2VuIGZyb20gbG9jYWxTdG9yYWdlIGZvciBzb2NrZXQgYXV0aCcsIGVycik7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCfwn5SnIENyZWF0aW5nIHNvY2tldCBmcm9tIGdldFNvY2tldCgpJywge1xuICAgICAgICBoYXNUb2tlbjogISF0b2tlbixcbiAgICAgICAgdXJsOiBTT0NLRVRfQkFTRV9VUkwsXG4gICAgfSk7XG4gICAgLy8gU2ltcGxlLCBzeW5jaHJvbm91cyBzb2NrZXQgY3JlYXRpb24gZm9yIHdlYlxuICAgIHNvY2tldCA9IGlvKFNPQ0tFVF9CQVNFX1VSTCwge1xuICAgICAgICB0cmFuc3BvcnRzOiBbJ3BvbGxpbmcnXSxcbiAgICAgICAgdXBncmFkZTogZmFsc2UsXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgIGF1dGg6IHsgdG9rZW4gfSxcbiAgICAgICAgcGF0aDogJy9zb2NrZXQuaW8nLFxuICAgICAgICBmb3JjZU5ldzogdHJ1ZSxcbiAgICAgICAgcmVtZW1iZXJVcGdyYWRlOiBmYWxzZSxcbiAgICAgICAgYXV0b0Nvbm5lY3Q6IHRydWUsXG4gICAgfSk7XG4gICAgc2V0dXBTb2NrZXRMaXN0ZW5lcnModG9rZW4pO1xuICAgIHJldHVybiBzb2NrZXQ7XG59O1xuZXhwb3J0IGNvbnN0IGRpc2Nvbm5lY3RTb2NrZXQgPSAoKSA9PiB7XG4gICAgaWYgKHNvY2tldCkge1xuICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICBzb2NrZXQgPSBudWxsO1xuICAgIH1cbiAgICBpc0Nvbm5lY3RpbmcgPSBmYWxzZTtcbn07XG5leHBvcnQgY29uc3QgcmVjb25uZWN0U29ja2V0ID0gKHRva2VuKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CflKcgRm9yY2UgcmVjb25uZWN0aW5nIHNvY2tldCB3aXRoIG5ldyB0b2tlbi4uLicpO1xuICAgIGRpc2Nvbm5lY3RTb2NrZXQoKTtcbiAgICByZXR1cm4gY29ubmVjdFNvY2tldCh0b2tlbik7XG59O1xuIl0sIm5hbWVzIjpbImlvIiwiaXNXZWIiLCJpc05ncm9rIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsImluY2x1ZGVzIiwiU09DS0VUX0JBU0VfVVJMIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJub3ciLCJocmVmIiwic29ja2V0IiwiaXNDb25uZWN0aW5nIiwiY29ubmVjdGlvblByb21pc2UiLCJjb25uZWN0U29ja2V0IiwidG9rZW4iLCJjb25uZWN0ZWQiLCJpZCIsImRpc2Nvbm5lY3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNvbm5lY3Rpb25BdHRlbXB0cyIsIm1heEF0dGVtcHRzIiwidHJ5Q29ubmVjdCIsInVybCIsInJlamVjdCIsInRlc3RTb2NrZXQiLCJ0cmFuc3BvcnRzIiwidXBncmFkZSIsInRpbWVvdXQiLCJhdXRoIiwicGF0aCIsImZvcmNlTmV3IiwicmVtZW1iZXJVcGdyYWRlIiwiYXV0b0Nvbm5lY3QiLCJ3aXRoQ3JlZGVudGlhbHMiLCJvbiIsInJlYXNvbiIsImVycm9yIiwibWVzc2FnZSIsInNldFRpbWVvdXQiLCJFcnJvciIsImNvbm5lY3RUb1NlcnZlciIsImNvbm5lY3Rpb25PcHRpb25zIiwicmVjb25uZWN0aW9uIiwicmVjb25uZWN0aW9uQXR0ZW1wdHMiLCJyZWNvbm5lY3Rpb25EZWxheSIsInJlY29ubmVjdGlvbkRlbGF5TWF4IiwicmVjb25uZWN0aW9uRGVsYXlGYWN0b3IiLCJtYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyIsInRoZW4iLCJzZXR1cFNvY2tldExpc3RlbmVycyIsIndhaXRGb3JDb25uZWN0aW9uIiwiY2F0Y2giLCJ3YWl0Rm9yRmFsbGJhY2siLCJlbmdpbmUiLCJ0cmFuc3BvcnQiLCJuYW1lIiwicmVhZHlTdGF0ZSIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwic3BsaXQiLCJNYXRoIiwiZmxvb3IiLCJleHAiLCJlbWl0IiwicGxhdGZvcm0iLCJ0aW1lc3RhbXAiLCJjb25uZWN0Iiwic2V0SW50ZXJ2YWwiLCJ3YXJuIiwib3JpZ2luYWxFbWl0IiwiZXZlbnQiLCJhcmdzIiwiY2FsbCIsIm9yaWdpbmFsRGlzY29ubmVjdCIsInRyYWNlIiwib3JpZ2luYWxPbiIsImxpc3RlbmVyIiwib25BbnkiLCJhdHRlbXB0TnVtYmVyIiwiZ2V0U29ja2V0IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImVyciIsImhhc1Rva2VuIiwiZGlzY29ubmVjdFNvY2tldCIsInJlY29ubmVjdFNvY2tldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/socket.js\n");

/***/ }),

/***/ "(rsc)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"485ed1fd4808\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvZ2xvYmFscy5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96b2xhLXdlYi8uL2FwcC9nbG9iYWxzLmNzcz8yNDdlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiNDg1ZWQxZmQ0ODA4XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/globals.css\n");

/***/ }),

/***/ "(ssr)/../../packages/app/styles/call.css":
/*!******************************************!*\
  !*** ../../packages/app/styles/call.css ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"b51bab7970b0\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL3N0eWxlcy9jYWxsLmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvbGEtd2ViLy4uLy4uL3BhY2thZ2VzL2FwcC9zdHlsZXMvY2FsbC5jc3M/NmVkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcImI1MWJhYjc5NzBiMFwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/styles/call.css\n");

/***/ }),

/***/ "(ssr)/../../packages/app/styles/floating-chat.css":
/*!***************************************************!*\
  !*** ../../packages/app/styles/floating-chat.css ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"832a44a26200\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL3N0eWxlcy9mbG9hdGluZy1jaGF0LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvbGEtd2ViLy4uLy4uL3BhY2thZ2VzL2FwcC9zdHlsZXMvZmxvYXRpbmctY2hhdC5jc3M/ZmZlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjgzMmE0NGEyNjIwMFwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/styles/floating-chat.css\n");

/***/ }),

/***/ "(ssr)/../../packages/app/styles/group-call-grid.css":
/*!*****************************************************!*\
  !*** ../../packages/app/styles/group-call-grid.css ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"ea673d32b183\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vcGFja2FnZXMvYXBwL3N0eWxlcy9ncm91cC1jYWxsLWdyaWQuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9sYS13ZWIvLi4vLi4vcGFja2FnZXMvYXBwL3N0eWxlcy9ncm91cC1jYWxsLWdyaWQuY3NzPzE4YzMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJlYTY3M2QzMmIxODNcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../packages/app/styles/group-call-grid.css\n");

/***/ }),

/***/ "(rsc)/./app/call/page.tsx":
/*!***************************!*\
  !*** ./app/call/page.tsx ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Page)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _zola_app_features_call_screens_CallScreen_web__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @zola/app/features/call/screens/CallScreen.web */ \"(rsc)/../../packages/app/features/call/screens/CallScreen.web.js\");\n\n\nfunction Page() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_zola_app_features_call_screens_CallScreen_web__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {}, void 0, false, {\n        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\apps\\\\next\\\\app\\\\call\\\\page.tsx\",\n        lineNumber: 4,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvY2FsbC9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3RTtBQUV6RCxTQUFTQztJQUN0QixxQkFBTyw4REFBQ0Qsc0ZBQVVBOzs7OztBQUNwQiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvbGEtd2ViLy4vYXBwL2NhbGwvcGFnZS50c3g/ZDUwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FsbFNjcmVlbiBmcm9tIFwiQHpvbGEvYXBwL2ZlYXR1cmVzL2NhbGwvc2NyZWVucy9DYWxsU2NyZWVuLndlYlwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnZSgpIHtcclxuICByZXR1cm4gPENhbGxTY3JlZW4gLz47XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhbGxTY3JlZW4iLCJQYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/call/page.tsx\n");

/***/ }),

/***/ "(rsc)/./app/layout.tsx":
/*!************************!*\
  !*** ./app/layout.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./app/globals.css\");\n/* harmony import */ var _zola_app_components_GlobalIncomingCall_web__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @zola/app/components/GlobalIncomingCall.web */ \"(rsc)/../../packages/app/components/GlobalIncomingCall.web.js\");\n\n\n\nconst metadata = {\n    title: \"Zola Web\",\n    description: \"Next.js shell that consumes @zola/app\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_zola_app_components_GlobalIncomingCall_web__WEBPACK_IMPORTED_MODULE_2__.GlobalIncomingCall, {}, void 0, false, {\n                    fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\apps\\\\next\\\\app\\\\layout.tsx\",\n                    lineNumber: 14,\n                    columnNumber: 9\n                }, this),\n                children\n            ]\n        }, void 0, true, {\n            fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\apps\\\\next\\\\app\\\\layout.tsx\",\n            lineNumber: 13,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\apps\\\\next\\\\app\\\\layout.tsx\",\n        lineNumber: 12,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGF5b3V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ3VCO0FBQzBEO0FBRTFFLE1BQU1DLFdBQVc7SUFDdEJDLE9BQU87SUFDUEMsYUFBYTtBQUNmLEVBQUU7QUFFYSxTQUFTQyxXQUFXLEVBQUVDLFFBQVEsRUFBMkI7SUFDdEUscUJBQ0UsOERBQUNDO1FBQUtDLE1BQUs7a0JBQ1QsNEVBQUNDOzs4QkFDQyw4REFBQ1IsMkZBQWtCQTs7Ozs7Z0JBQ2xCSzs7Ozs7Ozs7Ozs7O0FBSVQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96b2xhLXdlYi8uL2FwcC9sYXlvdXQudHN4Pzk5ODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBcIi4vZ2xvYmFscy5jc3NcIjtcclxuaW1wb3J0IHsgR2xvYmFsSW5jb21pbmdDYWxsIH0gZnJvbSBcIkB6b2xhL2FwcC9jb21wb25lbnRzL0dsb2JhbEluY29taW5nQ2FsbC53ZWJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBtZXRhZGF0YSA9IHtcclxuICB0aXRsZTogXCJab2xhIFdlYlwiLFxyXG4gIGRlc2NyaXB0aW9uOiBcIk5leHQuanMgc2hlbGwgdGhhdCBjb25zdW1lcyBAem9sYS9hcHBcIlxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vdExheW91dCh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9KSB7XHJcbiAgcmV0dXJuIChcclxuICAgIDxodG1sIGxhbmc9XCJlblwiPlxyXG4gICAgICA8Ym9keT5cclxuICAgICAgICA8R2xvYmFsSW5jb21pbmdDYWxsIC8+XHJcbiAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICA8L2JvZHk+XHJcbiAgICA8L2h0bWw+XHJcbiAgKTtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIkdsb2JhbEluY29taW5nQ2FsbCIsIm1ldGFkYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIlJvb3RMYXlvdXQiLCJjaGlsZHJlbiIsImh0bWwiLCJsYW5nIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/../../packages/app/components/GlobalIncomingCall.web.js":
/*!***************************************************************!*\
  !*** ../../packages/app/components/GlobalIncomingCall.web.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalIncomingCall: () => (/* binding */ e0)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`E:\Code\Nodejs\Zola\packages\app\components\GlobalIncomingCall.web.js`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;

const e0 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`E:\Code\Nodejs\Zola\packages\app\components\GlobalIncomingCall.web.js#GlobalIncomingCall`);


/***/ }),

/***/ "(rsc)/../../packages/app/features/call/screens/CallScreen.web.js":
/*!******************************************************************!*\
  !*** ../../packages/app/features/call/screens/CallScreen.web.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`E:\Code\Nodejs\Zola\packages\app\features\call\screens\CallScreen.web.js`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6","vendor-chunks/engine.io-client","vendor-chunks/form-data","vendor-chunks/axios","vendor-chunks/socket.io-client","vendor-chunks/socket.io-parser","vendor-chunks/xmlhttprequest-ssl","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/get-intrinsic","vendor-chunks/engine.io-parser","vendor-chunks/asynckit","vendor-chunks/ms","vendor-chunks/combined-stream","vendor-chunks/supports-color@8.1.1","vendor-chunks/proxy-from-env","vendor-chunks/@socket.io","vendor-chunks/supports-color","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/@swc+helpers@0.5.2","vendor-chunks/function-bind","vendor-chunks/es-set-tostringtag","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/has-flag@4.0.0","vendor-chunks/es-define-property","vendor-chunks/gopd","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/livekit-client@2.16.0_@types+dom-mediacapture-record@1.0.22"], () => (__webpack_exec__("(rsc)/../../node_modules/.pnpm/next@14.0.4_@babel+core@7.2_e51c94e397bd2e219e1912d446a17ff6/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fcall%2Fpage&page=%2Fcall%2Fpage&appPaths=%2Fcall%2Fpage&pagePath=private-next-app-dir%2Fcall%2Fpage.tsx&appDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CCode%5CNodejs%5CZola%5Capps%5Cnext&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();