"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/call/page",{

/***/ "(app-pages-browser)/../../packages/app/hooks/useLiveKit.ts":
/*!**********************************************!*\
  !*** ../../packages/app/hooks/useLiveKit.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLiveKit: function() { return /* binding */ useLiveKit; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/.pnpm/next@14.0.4_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(app-pages-browser)/../../node_modules/.pnpm/livekit-client@2.16.0_@types+dom-mediacapture-record@1.0.22/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\nfunction useLiveKit(param) {\n    let { roomName, token, url, autoSubscribe = true } = param;\n    const [room, setRoom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [localStream, setLocalStream] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [remoteStreams, setRemoteStreams] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Map());\n    const [remoteTracks, setRemoteTracks] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Map());\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isVideoEnabled, setIsVideoEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [isAudioEnabled, setIsAudioEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const roomRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const connectPromiseRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const latestOptionsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        roomName,\n        token,\n        url\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        latestOptionsRef.current = {\n            roomName,\n            token,\n            url\n        };\n    }, [\n        roomName,\n        token,\n        url\n    ]);\n    const buildMediaStreamFromLocal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((currentRoom)=>{\n        try {\n            const publications = Array.from(currentRoom.localParticipant.trackPublications.values());\n            const tracks = [];\n            publications.forEach((pub)=>{\n                const lkTrack = pub.track;\n                if (lkTrack && (lkTrack instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalVideoTrack || lkTrack instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalAudioTrack)) {\n                    const mediaTrack = lkTrack.mediaStreamTrack;\n                    if (mediaTrack) {\n                        tracks.push(mediaTrack);\n                    }\n                }\n            });\n            if (tracks.length > 0) {\n                const stream = new MediaStream(tracks);\n                setLocalStream(stream);\n            }\n        } catch (err) {\n            console.warn(\"[LiveKit] Failed to build local stream:\", err);\n        }\n    }, []);\n    const addRemoteTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((participantId, mediaTrack)=>{\n        setRemoteStreams((prev)=>{\n            const next = new Map(prev);\n            const existing = next.get(participantId);\n            // Create a NEW MediaStream with all existing tracks + new track\n            // This ensures React detects the state change\n            const allTracks = [];\n            if (existing) {\n                existing.getTracks().forEach((t)=>{\n                    if (t.id !== mediaTrack.id) {\n                        allTracks.push(t);\n                    }\n                });\n            }\n            allTracks.push(mediaTrack);\n            const newStream = new MediaStream(allTracks);\n            next.set(participantId, newStream);\n            return next;\n        });\n    }, []);\n    const removeRemoteTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((participantId, mediaTrack)=>{\n        setRemoteStreams((prev)=>{\n            const next = new Map(prev);\n            const existing = next.get(participantId);\n            if (!existing) return prev;\n            if (mediaTrack) {\n                existing.removeTrack(mediaTrack);\n            }\n            if (existing.getTracks().length === 0) {\n                next.delete(participantId);\n            } else {\n                next.set(participantId, existing);\n            }\n            return next;\n        });\n    }, []);\n    const disconnect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (roomRef.current) {\n            roomRef.current.disconnect();\n            roomRef.current = null;\n        }\n        connectPromiseRef.current = null;\n        setRoom(null);\n        setIsConnected(false);\n        setLocalStream(null);\n        setRemoteStreams(new Map());\n        setError(null);\n    }, []);\n    const connect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        const { roomName: currentRoomName, token: currentToken, url: currentUrl } = latestOptionsRef.current;\n        if (!currentRoomName || !currentToken || !currentUrl) {\n            setError(\"Thiếu th\\xf4ng tin LiveKit (room/token/url)\");\n            return;\n        }\n        if (roomRef.current && roomRef.current.state === \"connected\") {\n            return;\n        }\n        if (connectPromiseRef.current) {\n            return connectPromiseRef.current;\n        }\n        const promise = (async ()=>{\n            try {\n                setError(null);\n                // Optimized room options for better performance\n                const roomOptions = {\n                    adaptiveStream: true,\n                    dynacast: true,\n                    // Video capture settings - use 720p for better performance\n                    videoCaptureDefaults: {\n                        resolution: livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h720.resolution,\n                        facingMode: \"user\"\n                    },\n                    // Video publish settings - lower bitrate for smoother streaming\n                    publishDefaults: {\n                        videoSimulcastLayers: [\n                            livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h180,\n                            livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h360\n                        ],\n                        videoCodec: \"vp8\",\n                        dtx: true,\n                        red: true,\n                        stopMicTrackOnMute: false\n                    }\n                };\n                const newRoom = new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(roomOptions);\n                roomRef.current = newRoom;\n                setRoom(newRoom);\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Connected, ()=>{\n                    setIsConnected(true);\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Disconnected, ()=>{\n                    setIsConnected(false);\n                    setLocalStream(null);\n                    setRemoteStreams(new Map());\n                    setRemoteTracks(new Map());\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackSubscribed, (track, publication, participant)=>{\n                    if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        // Store the RemoteTrack for direct attachment in components\n                        setRemoteTracks((prev)=>{\n                            const next = new Map(prev);\n                            const existing = next.get(participant.identity) || {};\n                            if (track.kind === \"video\") {\n                                next.set(participant.identity, {\n                                    ...existing,\n                                    videoTrack: track\n                                });\n                            } else if (track.kind === \"audio\") {\n                                next.set(participant.identity, {\n                                    ...existing,\n                                    audioTrack: track\n                                });\n                            }\n                            return next;\n                        });\n                        // Also add to remoteStreams for backward compatibility\n                        const mediaTrack = track.mediaStreamTrack;\n                        if (mediaTrack) {\n                            addRemoteTrack(participant.identity, mediaTrack);\n                        }\n                    }\n                });\n                // Handle track unmuted events - re-add track when unmuted\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackUnmuted, (publication, participant)=>{\n                    if (publication.track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        const mediaTrack = publication.track.mediaStreamTrack;\n                        if (mediaTrack) {\n                            addRemoteTrack(participant.identity, mediaTrack);\n                        }\n                    }\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantConnected, ()=>{\n                // Participant connected - tracks will be handled by TrackSubscribed event\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackUnsubscribed, (track, publication, participant)=>{\n                    if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        // Remove from remoteTracks\n                        setRemoteTracks((prev)=>{\n                            const next = new Map(prev);\n                            const existing = next.get(participant.identity);\n                            if (existing) {\n                                if (track.kind === \"video\") {\n                                    next.set(participant.identity, {\n                                        ...existing,\n                                        videoTrack: undefined\n                                    });\n                                } else if (track.kind === \"audio\") {\n                                    next.set(participant.identity, {\n                                        ...existing,\n                                        audioTrack: undefined\n                                    });\n                                }\n                            }\n                            return next;\n                        });\n                        const mediaTrack = track.mediaStreamTrack;\n                        removeRemoteTrack(participant.identity, mediaTrack);\n                    }\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantDisconnected, (participant)=>{\n                    setRemoteStreams((prev)=>{\n                        const next = new Map(prev);\n                        next.delete(participant.identity);\n                        return next;\n                    });\n                    setRemoteTracks((prev)=>{\n                        const next = new Map(prev);\n                        next.delete(participant.identity);\n                        return next;\n                    });\n                });\n                console.log(\"[LiveKit] Connecting to room:\", currentRoomName, \"at URL:\", currentUrl);\n                await newRoom.connect(currentUrl, currentToken);\n                console.log(\"[LiveKit] Connected! Room state:\", newRoom.state);\n                console.log(\"[LiveKit] Remote participants:\", newRoom.remoteParticipants.size);\n                // Log existing remote participants\n                newRoom.remoteParticipants.forEach((participant, sid)=>{\n                    console.log(\"[LiveKit] Existing remote participant:\", {\n                        identity: participant.identity,\n                        sid: sid,\n                        trackCount: participant.trackPublications.size\n                    });\n                    // Subscribe to any existing tracks\n                    participant.trackPublications.forEach((pub)=>{\n                        if (pub.track && pub.track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                            const mediaTrack = pub.track.mediaStreamTrack;\n                            if (mediaTrack) {\n                                console.log(\"[LiveKit] Found existing remote track:\", {\n                                    participantId: participant.identity,\n                                    trackId: mediaTrack.id,\n                                    trackKind: mediaTrack.kind\n                                });\n                                addRemoteTrack(participant.identity, mediaTrack);\n                            }\n                        }\n                    });\n                });\n                await newRoom.localParticipant.enableCameraAndMicrophone();\n                console.log(\"[LiveKit] Camera and microphone enabled\");\n                buildMediaStreamFromLocal(newRoom);\n            } catch (err) {\n                console.error(\"[LiveKit] Error connecting:\", err);\n                setError((err === null || err === void 0 ? void 0 : err.message) || \"Kh\\xf4ng thể kết nối LiveKit\");\n                disconnect();\n            } finally{\n                connectPromiseRef.current = null;\n            }\n        })();\n        connectPromiseRef.current = promise;\n        return promise;\n    }, [\n        addRemoteTrack,\n        autoSubscribe,\n        buildMediaStreamFromLocal,\n        disconnect,\n        removeRemoteTrack\n    ]);\n    const toggleVideo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!roomRef.current) return;\n        const enabled = !isVideoEnabled;\n        roomRef.current.localParticipant.setCameraEnabled(enabled);\n        setIsVideoEnabled(enabled);\n    }, [\n        isVideoEnabled\n    ]);\n    const toggleAudio = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!roomRef.current) return;\n        const enabled = !isAudioEnabled;\n        roomRef.current.localParticipant.setMicrophoneEnabled(enabled);\n        setIsAudioEnabled(enabled);\n    }, [\n        isAudioEnabled\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        return ()=>{\n            disconnect();\n        };\n    }, [\n        disconnect\n    ]);\n    return {\n        room,\n        localStream,\n        remoteStreams,\n        remoteTracks,\n        isConnected,\n        error,\n        connect,\n        disconnect,\n        toggleVideo,\n        toggleAudio,\n        isVideoEnabled,\n        isAudioEnabled\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi8uLi9wYWNrYWdlcy9hcHAvaG9va3MvdXNlTGl2ZUtpdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlFO0FBVXpDO0FBaUNqQixTQUFTVSxXQUFXLEtBS1A7UUFMTyxFQUN6QkMsUUFBUSxFQUNSQyxLQUFLLEVBQ0xDLEdBQUcsRUFDSEMsZ0JBQWdCLElBQUksRUFDRixHQUxPO0lBTXpCLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHYiwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNjLGFBQWFDLGVBQWUsR0FBR2YsK0NBQVFBLENBQXFCO0lBQ25FLE1BQU0sQ0FBQ2dCLGVBQWVDLGlCQUFpQixHQUFHakIsK0NBQVFBLENBQTJCLElBQUlrQjtJQUNqRixNQUFNLENBQUNDLGNBQWNDLGdCQUFnQixHQUFHcEIsK0NBQVFBLENBQXVDLElBQUlrQjtJQUMzRixNQUFNLENBQUNHLGFBQWFDLGVBQWUsR0FBR3RCLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ3VCLE9BQU9DLFNBQVMsR0FBR3hCLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUN5QixnQkFBZ0JDLGtCQUFrQixHQUFHMUIsK0NBQVFBLENBQUM7SUFDckQsTUFBTSxDQUFDMkIsZ0JBQWdCQyxrQkFBa0IsR0FBRzVCLCtDQUFRQSxDQUFDO0lBRXJELE1BQU02QixVQUFVOUIsNkNBQU1BLENBQWM7SUFDcEMsTUFBTStCLG9CQUFvQi9CLDZDQUFNQSxDQUF1QjtJQUN2RCxNQUFNZ0MsbUJBQW1CaEMsNkNBQU1BLENBQUM7UUFBRVM7UUFBVUM7UUFBT0M7SUFBSTtJQUV2RFosZ0RBQVNBLENBQUM7UUFDUmlDLGlCQUFpQkMsT0FBTyxHQUFHO1lBQUV4QjtZQUFVQztZQUFPQztRQUFJO0lBQ3BELEdBQUc7UUFBQ0Y7UUFBVUM7UUFBT0M7S0FBSTtJQUV6QixNQUFNdUIsNEJBQTRCcEMsa0RBQVdBLENBQUMsQ0FBQ3FDO1FBQzdDLElBQUk7WUFDRixNQUFNQyxl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QzdGO1FBQ2pCSSxRQUFRRyxPQUFPLENBQUNNLGdCQUFnQixDQUFDaUYsZ0JBQWdCLENBQUNEO1FBQ2xENUYsa0JBQWtCNEY7SUFDcEIsR0FBRztRQUFDN0Y7S0FBZTtJQUVuQixNQUFNK0YsY0FBYzNILGtEQUFXQSxDQUFDO1FBQzlCLElBQUksQ0FBQ2dDLFFBQVFHLE9BQU8sRUFBRTtRQUN0QixNQUFNc0YsVUFBVSxDQUFDM0Y7UUFDakJFLFFBQVFHLE9BQU8sQ0FBQ00sZ0JBQWdCLENBQUNtRixvQkFBb0IsQ0FBQ0g7UUFDdEQxRixrQkFBa0IwRjtJQUNwQixHQUFHO1FBQUMzRjtLQUFlO0lBRW5CN0IsZ0RBQVNBLENBQUM7UUFDUixPQUFPO1lBQ0x3RTtRQUNGO0lBQ0YsR0FBRztRQUFDQTtLQUFXO0lBRWYsT0FBTztRQUNMMUQ7UUFDQUU7UUFDQUU7UUFDQUc7UUFDQUU7UUFDQUU7UUFDQWdEO1FBQ0FEO1FBQ0ErQztRQUNBRztRQUNBL0Y7UUFDQUU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi9wYWNrYWdlcy9hcHAvaG9va3MvdXNlTGl2ZUtpdC50cz8xZTIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBcbiAgUm9vbSwgXG4gIFJvb21FdmVudCwgXG4gIFJlbW90ZVRyYWNrLCBcbiAgTG9jYWxWaWRlb1RyYWNrLCBcbiAgTG9jYWxBdWRpb1RyYWNrLFxuICBWaWRlb1ByZXNldHMsXG4gIFJvb21PcHRpb25zLFxuICBWaWRlb0NvZGVjXG59IGZyb20gJ2xpdmVraXQtY2xpZW50JztcblxuLy8gTk9URTogVGhpcyBob29rIGlzIG5vdyB3ZWItZmlyc3QuIFJlYWN0IE5hdGl2ZSBnbG9iYWxzIHJlZ2lzdHJhdGlvbiBoYXMgYmVlblxuLy8gcmVtb3ZlZCB0byBhdm9pZCBidW5kbGluZyAncmVhY3QtbmF0aXZlJyBpbiBOZXh0LmpzLiBJZiB5b3UgbmVlZCBuYXRpdmVcbi8vIHN1cHBvcnQgbGF0ZXIsIGNyZWF0ZSBhIHNlcGFyYXRlICd1c2VMaXZlS2l0Lm5hdGl2ZS50cycgaW1wbGVtZW50YXRpb24uXG5cbmludGVyZmFjZSBVc2VMaXZlS2l0T3B0aW9ucyB7XG4gIHJvb21OYW1lPzogc3RyaW5nO1xuICB0b2tlbj86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBhdXRvU3Vic2NyaWJlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZW1vdGVQYXJ0aWNpcGFudFRyYWNrcyB7XG4gIGF1ZGlvVHJhY2s/OiBSZW1vdGVUcmFjaztcbiAgdmlkZW9UcmFjaz86IFJlbW90ZVRyYWNrO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZUxpdmVLaXRSZXN1bHQge1xuICByb29tOiBSb29tIHwgbnVsbDtcbiAgbG9jYWxTdHJlYW06IE1lZGlhU3RyZWFtIHwgbnVsbDtcbiAgcmVtb3RlU3RyZWFtczogTWFwPHN0cmluZywgTWVkaWFTdHJlYW0+O1xuICByZW1vdGVUcmFja3M6IE1hcDxzdHJpbmcsIFJlbW90ZVBhcnRpY2lwYW50VHJhY2tzPjsgLy8gTmV3OiBmb3IgZGlyZWN0IHRyYWNrIGF0dGFjaG1lbnRcbiAgaXNDb25uZWN0ZWQ6IGJvb2xlYW47XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xuICBjb25uZWN0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBkaXNjb25uZWN0OiAoKSA9PiB2b2lkO1xuICB0b2dnbGVWaWRlbzogKCkgPT4gdm9pZDtcbiAgdG9nZ2xlQXVkaW86ICgpID0+IHZvaWQ7XG4gIGlzVmlkZW9FbmFibGVkOiBib29sZWFuO1xuICBpc0F1ZGlvRW5hYmxlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUxpdmVLaXQoe1xuICByb29tTmFtZSxcbiAgdG9rZW4sXG4gIHVybCxcbiAgYXV0b1N1YnNjcmliZSA9IHRydWUsXG59OiBVc2VMaXZlS2l0T3B0aW9ucyk6IFVzZUxpdmVLaXRSZXN1bHQge1xuICBjb25zdCBbcm9vbSwgc2V0Um9vbV0gPSB1c2VTdGF0ZTxSb29tIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2NhbFN0cmVhbSwgc2V0TG9jYWxTdHJlYW1dID0gdXNlU3RhdGU8TWVkaWFTdHJlYW0gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3JlbW90ZVN0cmVhbXMsIHNldFJlbW90ZVN0cmVhbXNdID0gdXNlU3RhdGU8TWFwPHN0cmluZywgTWVkaWFTdHJlYW0+PihuZXcgTWFwKCkpO1xuICBjb25zdCBbcmVtb3RlVHJhY2tzLCBzZXRSZW1vdGVUcmFja3NdID0gdXNlU3RhdGU8TWFwPHN0cmluZywgUmVtb3RlUGFydGljaXBhbnRUcmFja3M+PihuZXcgTWFwKCkpO1xuICBjb25zdCBbaXNDb25uZWN0ZWQsIHNldElzQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzVmlkZW9FbmFibGVkLCBzZXRJc1ZpZGVvRW5hYmxlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2lzQXVkaW9FbmFibGVkLCBzZXRJc0F1ZGlvRW5hYmxlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcblxuICBjb25zdCByb29tUmVmID0gdXNlUmVmPFJvb20gfCBudWxsPihudWxsKTtcbiAgY29uc3QgY29ubmVjdFByb21pc2VSZWYgPSB1c2VSZWY8UHJvbWlzZTx2b2lkPiB8IG51bGw+KG51bGwpO1xuICBjb25zdCBsYXRlc3RPcHRpb25zUmVmID0gdXNlUmVmKHsgcm9vbU5hbWUsIHRva2VuLCB1cmwgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsYXRlc3RPcHRpb25zUmVmLmN1cnJlbnQgPSB7IHJvb21OYW1lLCB0b2tlbiwgdXJsIH07XG4gIH0sIFtyb29tTmFtZSwgdG9rZW4sIHVybF0pO1xuXG4gIGNvbnN0IGJ1aWxkTWVkaWFTdHJlYW1Gcm9tTG9jYWwgPSB1c2VDYWxsYmFjaygoY3VycmVudFJvb206IFJvb20pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHVibGljYXRpb25zID0gQXJyYXkuZnJvbShjdXJyZW50Um9vbS5sb2NhbFBhcnRpY2lwYW50LnRyYWNrUHVibGljYXRpb25zLnZhbHVlcygpKTtcbiAgICAgIGNvbnN0IHRyYWNrczogTWVkaWFTdHJlYW1UcmFja1tdID0gW107XG4gICAgICBwdWJsaWNhdGlvbnMuZm9yRWFjaCgocHViKSA9PiB7XG4gICAgICAgIGNvbnN0IGxrVHJhY2sgPSBwdWIudHJhY2s7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBsa1RyYWNrICYmXG4gICAgICAgICAgKGxrVHJhY2sgaW5zdGFuY2VvZiBMb2NhbFZpZGVvVHJhY2sgfHwgbGtUcmFjayBpbnN0YW5jZW9mIExvY2FsQXVkaW9UcmFjaylcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgbWVkaWFUcmFjayA9IChsa1RyYWNrIGFzIGFueSkubWVkaWFTdHJlYW1UcmFjayBhcyBNZWRpYVN0cmVhbVRyYWNrIHwgdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChtZWRpYVRyYWNrKSB7XG4gICAgICAgICAgICB0cmFja3MucHVzaChtZWRpYVRyYWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHRyYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbSh0cmFja3MpO1xuICAgICAgICBzZXRMb2NhbFN0cmVhbShzdHJlYW0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKCdbTGl2ZUtpdF0gRmFpbGVkIHRvIGJ1aWxkIGxvY2FsIHN0cmVhbTonLCBlcnIpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGFkZFJlbW90ZVRyYWNrID0gdXNlQ2FsbGJhY2soKHBhcnRpY2lwYW50SWQ6IHN0cmluZywgbWVkaWFUcmFjazogTWVkaWFTdHJlYW1UcmFjaykgPT4ge1xuICAgIHNldFJlbW90ZVN0cmVhbXMoKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBuZXh0LmdldChwYXJ0aWNpcGFudElkKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGEgTkVXIE1lZGlhU3RyZWFtIHdpdGggYWxsIGV4aXN0aW5nIHRyYWNrcyArIG5ldyB0cmFja1xuICAgICAgLy8gVGhpcyBlbnN1cmVzIFJlYWN0IGRldGVjdHMgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAgY29uc3QgYWxsVHJhY2tzOiBNZWRpYVN0cmVhbVRyYWNrW10gPSBbXTtcbiAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICBleGlzdGluZy5nZXRUcmFja3MoKS5mb3JFYWNoKHQgPT4ge1xuICAgICAgICAgIGlmICh0LmlkICE9PSBtZWRpYVRyYWNrLmlkKSB7XG4gICAgICAgICAgICBhbGxUcmFja3MucHVzaCh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYWxsVHJhY2tzLnB1c2gobWVkaWFUcmFjayk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1N0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbShhbGxUcmFja3MpO1xuICAgICAgbmV4dC5zZXQocGFydGljaXBhbnRJZCwgbmV3U3RyZWFtKTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcmVtb3ZlUmVtb3RlVHJhY2sgPSB1c2VDYWxsYmFjaygocGFydGljaXBhbnRJZDogc3RyaW5nLCBtZWRpYVRyYWNrPzogTWVkaWFTdHJlYW1UcmFjaykgPT4ge1xuICAgIHNldFJlbW90ZVN0cmVhbXMoKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBuZXh0LmdldChwYXJ0aWNpcGFudElkKTtcbiAgICAgIGlmICghZXhpc3RpbmcpIHJldHVybiBwcmV2O1xuICAgICAgaWYgKG1lZGlhVHJhY2spIHtcbiAgICAgICAgZXhpc3RpbmcucmVtb3ZlVHJhY2sobWVkaWFUcmFjayk7XG4gICAgICB9XG4gICAgICBpZiAoZXhpc3RpbmcuZ2V0VHJhY2tzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5leHQuZGVsZXRlKHBhcnRpY2lwYW50SWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dC5zZXQocGFydGljaXBhbnRJZCwgZXhpc3RpbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBkaXNjb25uZWN0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChyb29tUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJvb21SZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICByb29tUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBjb25uZWN0UHJvbWlzZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICBzZXRSb29tKG51bGwpO1xuICAgIHNldElzQ29ubmVjdGVkKGZhbHNlKTtcbiAgICBzZXRMb2NhbFN0cmVhbShudWxsKTtcbiAgICBzZXRSZW1vdGVTdHJlYW1zKG5ldyBNYXAoKSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjb25uZWN0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcm9vbU5hbWU6IGN1cnJlbnRSb29tTmFtZSwgdG9rZW46IGN1cnJlbnRUb2tlbiwgdXJsOiBjdXJyZW50VXJsIH0gPVxuICAgICAgbGF0ZXN0T3B0aW9uc1JlZi5jdXJyZW50O1xuXG4gICAgaWYgKCFjdXJyZW50Um9vbU5hbWUgfHwgIWN1cnJlbnRUb2tlbiB8fCAhY3VycmVudFVybCkge1xuICAgICAgc2V0RXJyb3IoJ1RoaeG6v3UgdGjDtG5nIHRpbiBMaXZlS2l0IChyb29tL3Rva2VuL3VybCknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocm9vbVJlZi5jdXJyZW50ICYmIHJvb21SZWYuY3VycmVudC5zdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29ubmVjdFByb21pc2VSZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuIGNvbm5lY3RQcm9taXNlUmVmLmN1cnJlbnQ7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9wdGltaXplZCByb29tIG9wdGlvbnMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgICBjb25zdCByb29tT3B0aW9uczogUm9vbU9wdGlvbnMgPSB7XG4gICAgICAgICAgYWRhcHRpdmVTdHJlYW06IHRydWUsXG4gICAgICAgICAgZHluYWNhc3Q6IHRydWUsXG4gICAgICAgICAgLy8gVmlkZW8gY2FwdHVyZSBzZXR0aW5ncyAtIHVzZSA3MjBwIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICAgICAgICB2aWRlb0NhcHR1cmVEZWZhdWx0czoge1xuICAgICAgICAgICAgcmVzb2x1dGlvbjogVmlkZW9QcmVzZXRzLmg3MjAucmVzb2x1dGlvbixcbiAgICAgICAgICAgIGZhY2luZ01vZGU6ICd1c2VyJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIFZpZGVvIHB1Ymxpc2ggc2V0dGluZ3MgLSBsb3dlciBiaXRyYXRlIGZvciBzbW9vdGhlciBzdHJlYW1pbmdcbiAgICAgICAgICBwdWJsaXNoRGVmYXVsdHM6IHtcbiAgICAgICAgICAgIHZpZGVvU2ltdWxjYXN0TGF5ZXJzOiBbVmlkZW9QcmVzZXRzLmgxODAsIFZpZGVvUHJlc2V0cy5oMzYwXSxcbiAgICAgICAgICAgIHZpZGVvQ29kZWM6ICd2cDgnIGFzIFZpZGVvQ29kZWMsIC8vIFZQOCBoYXMgYmV0dGVyIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIGR0eDogdHJ1ZSwgLy8gRGlzY29udGludW91cyB0cmFuc21pc3Npb24gZm9yIGF1ZGlvIC0gc2F2ZXMgYmFuZHdpZHRoXG4gICAgICAgICAgICByZWQ6IHRydWUsIC8vIFJlZHVuZGFudCBlbmNvZGluZyBmb3IgYXVkaW8gLSBiZXR0ZXIgcXVhbGl0eVxuICAgICAgICAgICAgc3RvcE1pY1RyYWNrT25NdXRlOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV3Um9vbSA9IG5ldyBSb29tKHJvb21PcHRpb25zKTtcblxuICAgICAgICByb29tUmVmLmN1cnJlbnQgPSBuZXdSb29tO1xuICAgICAgICBzZXRSb29tKG5ld1Jvb20pO1xuXG4gICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LkNvbm5lY3RlZCwgKCkgPT4ge1xuICAgICAgICAgIHNldElzQ29ubmVjdGVkKHRydWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZXdSb29tLm9uKFJvb21FdmVudC5EaXNjb25uZWN0ZWQsICgpID0+IHtcbiAgICAgICAgICBzZXRJc0Nvbm5lY3RlZChmYWxzZSk7XG4gICAgICAgICAgc2V0TG9jYWxTdHJlYW0obnVsbCk7XG4gICAgICAgICAgc2V0UmVtb3RlU3RyZWFtcyhuZXcgTWFwKCkpO1xuICAgICAgICAgIHNldFJlbW90ZVRyYWNrcyhuZXcgTWFwKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZXdSb29tLm9uKFJvb21FdmVudC5UcmFja1N1YnNjcmliZWQsICh0cmFjaywgcHVibGljYXRpb24sIHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgICAgaWYgKHRyYWNrIGluc3RhbmNlb2YgUmVtb3RlVHJhY2spIHtcbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBSZW1vdGVUcmFjayBmb3IgZGlyZWN0IGF0dGFjaG1lbnQgaW4gY29tcG9uZW50c1xuICAgICAgICAgICAgc2V0UmVtb3RlVHJhY2tzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IG5leHQuZ2V0KHBhcnRpY2lwYW50LmlkZW50aXR5KSB8fCB7fTtcbiAgICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICBuZXh0LnNldChwYXJ0aWNpcGFudC5pZGVudGl0eSwgeyAuLi5leGlzdGluZywgdmlkZW9UcmFjazogdHJhY2sgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgIG5leHQuc2V0KHBhcnRpY2lwYW50LmlkZW50aXR5LCB7IC4uLmV4aXN0aW5nLCBhdWRpb1RyYWNrOiB0cmFjayB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBbHNvIGFkZCB0byByZW1vdGVTdHJlYW1zIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICBjb25zdCBtZWRpYVRyYWNrID0gKHRyYWNrIGFzIGFueSkubWVkaWFTdHJlYW1UcmFjayBhcyBNZWRpYVN0cmVhbVRyYWNrIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKG1lZGlhVHJhY2spIHtcbiAgICAgICAgICAgICAgYWRkUmVtb3RlVHJhY2socGFydGljaXBhbnQuaWRlbnRpdHksIG1lZGlhVHJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgdHJhY2sgdW5tdXRlZCBldmVudHMgLSByZS1hZGQgdHJhY2sgd2hlbiB1bm11dGVkXG4gICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LlRyYWNrVW5tdXRlZCwgKHB1YmxpY2F0aW9uLCBwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAgIGlmIChwdWJsaWNhdGlvbi50cmFjayBpbnN0YW5jZW9mIFJlbW90ZVRyYWNrKSB7XG4gICAgICAgICAgICBjb25zdCBtZWRpYVRyYWNrID0gKHB1YmxpY2F0aW9uLnRyYWNrIGFzIGFueSkubWVkaWFTdHJlYW1UcmFjayBhcyBNZWRpYVN0cmVhbVRyYWNrIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKG1lZGlhVHJhY2spIHtcbiAgICAgICAgICAgICAgYWRkUmVtb3RlVHJhY2socGFydGljaXBhbnQuaWRlbnRpdHksIG1lZGlhVHJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBuZXdSb29tLm9uKFJvb21FdmVudC5QYXJ0aWNpcGFudENvbm5lY3RlZCwgKCkgPT4ge1xuICAgICAgICAgIC8vIFBhcnRpY2lwYW50IGNvbm5lY3RlZCAtIHRyYWNrcyB3aWxsIGJlIGhhbmRsZWQgYnkgVHJhY2tTdWJzY3JpYmVkIGV2ZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LlRyYWNrVW5zdWJzY3JpYmVkLCAodHJhY2ssIHB1YmxpY2F0aW9uLCBwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAgIGlmICh0cmFjayBpbnN0YW5jZW9mIFJlbW90ZVRyYWNrKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSByZW1vdGVUcmFja3NcbiAgICAgICAgICAgIHNldFJlbW90ZVRyYWNrcygocHJldikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBuZXh0LmdldChwYXJ0aWNpcGFudC5pZGVudGl0eSk7XG4gICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgIGlmICh0cmFjay5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgICAgICBuZXh0LnNldChwYXJ0aWNpcGFudC5pZGVudGl0eSwgeyAuLi5leGlzdGluZywgdmlkZW9UcmFjazogdW5kZWZpbmVkIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgbmV4dC5zZXQocGFydGljaXBhbnQuaWRlbnRpdHksIHsgLi4uZXhpc3RpbmcsIGF1ZGlvVHJhY2s6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbWVkaWFUcmFjayA9ICh0cmFjayBhcyBhbnkpLm1lZGlhU3RyZWFtVHJhY2sgYXMgTWVkaWFTdHJlYW1UcmFjayB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJlbW92ZVJlbW90ZVRyYWNrKHBhcnRpY2lwYW50LmlkZW50aXR5LCBtZWRpYVRyYWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLCAocGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgICBzZXRSZW1vdGVTdHJlYW1zKChwcmV2KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgIG5leHQuZGVsZXRlKHBhcnRpY2lwYW50LmlkZW50aXR5KTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldFJlbW90ZVRyYWNrcygocHJldikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgICBuZXh0LmRlbGV0ZShwYXJ0aWNpcGFudC5pZGVudGl0eSk7XG4gICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tMaXZlS2l0XSBDb25uZWN0aW5nIHRvIHJvb206JywgY3VycmVudFJvb21OYW1lLCAnYXQgVVJMOicsIGN1cnJlbnRVcmwpO1xuICAgICAgICBhd2FpdCBuZXdSb29tLmNvbm5lY3QoY3VycmVudFVybCwgY3VycmVudFRva2VuKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tMaXZlS2l0XSBDb25uZWN0ZWQhIFJvb20gc3RhdGU6JywgbmV3Um9vbS5zdGF0ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTGl2ZUtpdF0gUmVtb3RlIHBhcnRpY2lwYW50czonLCBuZXdSb29tLnJlbW90ZVBhcnRpY2lwYW50cy5zaXplKTtcbiAgICAgICAgXG4gICAgICAgIC8vIExvZyBleGlzdGluZyByZW1vdGUgcGFydGljaXBhbnRzXG4gICAgICAgIG5ld1Jvb20ucmVtb3RlUGFydGljaXBhbnRzLmZvckVhY2goKHBhcnRpY2lwYW50LCBzaWQpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0xpdmVLaXRdIEV4aXN0aW5nIHJlbW90ZSBwYXJ0aWNpcGFudDonLCB7XG4gICAgICAgICAgICBpZGVudGl0eTogcGFydGljaXBhbnQuaWRlbnRpdHksXG4gICAgICAgICAgICBzaWQ6IHNpZCxcbiAgICAgICAgICAgIHRyYWNrQ291bnQ6IHBhcnRpY2lwYW50LnRyYWNrUHVibGljYXRpb25zLnNpemVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBTdWJzY3JpYmUgdG8gYW55IGV4aXN0aW5nIHRyYWNrc1xuICAgICAgICAgIHBhcnRpY2lwYW50LnRyYWNrUHVibGljYXRpb25zLmZvckVhY2goKHB1YikgPT4ge1xuICAgICAgICAgICAgaWYgKHB1Yi50cmFjayAmJiBwdWIudHJhY2sgaW5zdGFuY2VvZiBSZW1vdGVUcmFjaykge1xuICAgICAgICAgICAgICBjb25zdCBtZWRpYVRyYWNrID0gKHB1Yi50cmFjayBhcyBhbnkpLm1lZGlhU3RyZWFtVHJhY2sgYXMgTWVkaWFTdHJlYW1UcmFjayB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgaWYgKG1lZGlhVHJhY2spIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0xpdmVLaXRdIEZvdW5kIGV4aXN0aW5nIHJlbW90ZSB0cmFjazonLCB7XG4gICAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudElkOiBwYXJ0aWNpcGFudC5pZGVudGl0eSxcbiAgICAgICAgICAgICAgICAgIHRyYWNrSWQ6IG1lZGlhVHJhY2suaWQsXG4gICAgICAgICAgICAgICAgICB0cmFja0tpbmQ6IG1lZGlhVHJhY2sua2luZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFkZFJlbW90ZVRyYWNrKHBhcnRpY2lwYW50LmlkZW50aXR5LCBtZWRpYVRyYWNrKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IG5ld1Jvb20ubG9jYWxQYXJ0aWNpcGFudC5lbmFibGVDYW1lcmFBbmRNaWNyb3Bob25lKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTGl2ZUtpdF0gQ2FtZXJhIGFuZCBtaWNyb3Bob25lIGVuYWJsZWQnKTtcbiAgICAgICAgYnVpbGRNZWRpYVN0cmVhbUZyb21Mb2NhbChuZXdSb29tKTtcbiAgICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tMaXZlS2l0XSBFcnJvciBjb25uZWN0aW5nOicsIGVycik7XG4gICAgICAgIHNldEVycm9yKGVycj8ubWVzc2FnZSB8fCAnS2jDtG5nIHRo4buDIGvhur90IG7hu5FpIExpdmVLaXQnKTtcbiAgICAgICAgZGlzY29ubmVjdCgpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY29ubmVjdFByb21pc2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIGNvbm5lY3RQcm9taXNlUmVmLmN1cnJlbnQgPSBwcm9taXNlO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9LCBbYWRkUmVtb3RlVHJhY2ssIGF1dG9TdWJzY3JpYmUsIGJ1aWxkTWVkaWFTdHJlYW1Gcm9tTG9jYWwsIGRpc2Nvbm5lY3QsIHJlbW92ZVJlbW90ZVRyYWNrXSk7XG5cbiAgY29uc3QgdG9nZ2xlVmlkZW8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFyb29tUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBjb25zdCBlbmFibGVkID0gIWlzVmlkZW9FbmFibGVkO1xuICAgIHJvb21SZWYuY3VycmVudC5sb2NhbFBhcnRpY2lwYW50LnNldENhbWVyYUVuYWJsZWQoZW5hYmxlZCk7XG4gICAgc2V0SXNWaWRlb0VuYWJsZWQoZW5hYmxlZCk7XG4gIH0sIFtpc1ZpZGVvRW5hYmxlZF0pO1xuXG4gIGNvbnN0IHRvZ2dsZUF1ZGlvID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghcm9vbVJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgY29uc3QgZW5hYmxlZCA9ICFpc0F1ZGlvRW5hYmxlZDtcbiAgICByb29tUmVmLmN1cnJlbnQubG9jYWxQYXJ0aWNpcGFudC5zZXRNaWNyb3Bob25lRW5hYmxlZChlbmFibGVkKTtcbiAgICBzZXRJc0F1ZGlvRW5hYmxlZChlbmFibGVkKTtcbiAgfSwgW2lzQXVkaW9FbmFibGVkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH0sIFtkaXNjb25uZWN0XSk7XG5cbiAgcmV0dXJuIHtcbiAgICByb29tLFxuICAgIGxvY2FsU3RyZWFtLFxuICAgIHJlbW90ZVN0cmVhbXMsXG4gICAgcmVtb3RlVHJhY2tzLFxuICAgIGlzQ29ubmVjdGVkLFxuICAgIGVycm9yLFxuICAgIGNvbm5lY3QsXG4gICAgZGlzY29ubmVjdCxcbiAgICB0b2dnbGVWaWRlbyxcbiAgICB0b2dnbGVBdWRpbyxcbiAgICBpc1ZpZGVvRW5hYmxlZCxcbiAgICBpc0F1ZGlvRW5hYmxlZCxcbiAgfTtcbn1cblxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJSb29tIiwiUm9vbUV2ZW50IiwiUmVtb3RlVHJhY2siLCJMb2NhbFZpZGVvVHJhY2siLCJMb2NhbEF1ZGlvVHJhY2siLCJWaWRlb1ByZXNldHMiLCJ1c2VMaXZlS2l0Iiwicm9vbU5hbWUiLCJ0b2tlbiIsInVybCIsImF1dG9TdWJzY3JpYmUiLCJyb29tIiwic2V0Um9vbSIsImxvY2FsU3RyZWFtIiwic2V0TG9jYWxTdHJlYW0iLCJyZW1vdGVTdHJlYW1zIiwic2V0UmVtb3RlU3RyZWFtcyIsIk1hcCIsInJlbW90ZVRyYWNrcyIsInNldFJlbW90ZVRyYWNrcyIsImlzQ29ubmVjdGVkIiwic2V0SXNDb25uZWN0ZWQiLCJlcnJvciIsInNldEVycm9yIiwiaXNWaWRlb0VuYWJsZWQiLCJzZXRJc1ZpZGVvRW5hYmxlZCIsImlzQXVkaW9FbmFibGVkIiwic2V0SXNBdWRpb0VuYWJsZWQiLCJyb29tUmVmIiwiY29ubmVjdFByb21pc2VSZWYiLCJsYXRlc3RPcHRpb25zUmVmIiwiY3VycmVudCIsImJ1aWxkTWVkaWFTdHJlYW1Gcm9tTG9jYWwiLCJjdXJyZW50Um9vbSIsInB1YmxpY2F0aW9ucyIsIkFycmF5IiwiZnJvbSIsImxvY2FsUGFydGljaXBhbnQiLCJ0cmFja1B1YmxpY2F0aW9ucyIsInZhbHVlcyIsInRyYWNrcyIsImZvckVhY2giLCJwdWIiLCJsa1RyYWNrIiwidHJhY2siLCJtZWRpYVRyYWNrIiwibWVkaWFTdHJlYW1UcmFjayIsInB1c2giLCJsZW5ndGgiLCJzdHJlYW0iLCJNZWRpYVN0cmVhbSIsImVyciIsImNvbnNvbGUiLCJ3YXJuIiwiYWRkUmVtb3RlVHJhY2siLCJwYXJ0aWNpcGFudElkIiwicHJldiIsIm5leHQiLCJleGlzdGluZyIsImdldCIsImFsbFRyYWNrcyIsImdldFRyYWNrcyIsInQiLCJpZCIsIm5ld1N0cmVhbSIsInNldCIsInJlbW92ZVJlbW90ZVRyYWNrIiwicmVtb3ZlVHJhY2siLCJkZWxldGUiLCJkaXNjb25uZWN0IiwiY29ubmVjdCIsImN1cnJlbnRSb29tTmFtZSIsImN1cnJlbnRUb2tlbiIsImN1cnJlbnRVcmwiLCJzdGF0ZSIsInByb21pc2UiLCJyb29tT3B0aW9ucyIsImFkYXB0aXZlU3RyZWFtIiwiZHluYWNhc3QiLCJ2aWRlb0NhcHR1cmVEZWZhdWx0cyIsInJlc29sdXRpb24iLCJoNzIwIiwiZmFjaW5nTW9kZSIsInB1Ymxpc2hEZWZhdWx0cyIsInZpZGVvU2ltdWxjYXN0TGF5ZXJzIiwiaDE4MCIsImgzNjAiLCJ2aWRlb0NvZGVjIiwiZHR4IiwicmVkIiwic3RvcE1pY1RyYWNrT25NdXRlIiwibmV3Um9vbSIsIm9uIiwiQ29ubmVjdGVkIiwiRGlzY29ubmVjdGVkIiwiVHJhY2tTdWJzY3JpYmVkIiwicHVibGljYXRpb24iLCJwYXJ0aWNpcGFudCIsImlkZW50aXR5Iiwia2luZCIsInZpZGVvVHJhY2siLCJhdWRpb1RyYWNrIiwiVHJhY2tVbm11dGVkIiwiUGFydGljaXBhbnRDb25uZWN0ZWQiLCJUcmFja1Vuc3Vic2NyaWJlZCIsInVuZGVmaW5lZCIsIlBhcnRpY2lwYW50RGlzY29ubmVjdGVkIiwibG9nIiwicmVtb3RlUGFydGljaXBhbnRzIiwic2l6ZSIsInNpZCIsInRyYWNrQ291bnQiLCJ0cmFja0lkIiwidHJhY2tLaW5kIiwiZW5hYmxlQ2FtZXJhQW5kTWljcm9waG9uZSIsIm1lc3NhZ2UiLCJ0b2dnbGVWaWRlbyIsImVuYWJsZWQiLCJzZXRDYW1lcmFFbmFibGVkIiwidG9nZ2xlQXVkaW8iLCJzZXRNaWNyb3Bob25lRW5hYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/../../packages/app/hooks/useLiveKit.ts\n"));

/***/ })

});