"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/call/page",{

/***/ "(app-pages-browser)/../../packages/app/hooks/useLiveKit.ts":
/*!**********************************************!*\
  !*** ../../packages/app/hooks/useLiveKit.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLiveKit: function() { return /* binding */ useLiveKit; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/.pnpm/next@14.0.4_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(app-pages-browser)/../../node_modules/.pnpm/livekit-client@2.16.0_@types+dom-mediacapture-record@1.0.22/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\nfunction useLiveKit(param) {\n    let { roomName, token, url, autoSubscribe = true } = param;\n    const [room, setRoom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [localStream, setLocalStream] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [remoteStreams, setRemoteStreams] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Map());\n    const [remoteTracks, setRemoteTracks] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Map());\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isVideoEnabled, setIsVideoEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [isAudioEnabled, setIsAudioEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const roomRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const connectPromiseRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const latestOptionsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        roomName,\n        token,\n        url\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        latestOptionsRef.current = {\n            roomName,\n            token,\n            url\n        };\n    }, [\n        roomName,\n        token,\n        url\n    ]);\n    const buildMediaStreamFromLocal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((currentRoom)=>{\n        try {\n            const publications = Array.from(currentRoom.localParticipant.trackPublications.values());\n            const tracks = [];\n            publications.forEach((pub)=>{\n                const lkTrack = pub.track;\n                if (lkTrack && (lkTrack instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalVideoTrack || lkTrack instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalAudioTrack)) {\n                    const mediaTrack = lkTrack.mediaStreamTrack;\n                    if (mediaTrack) {\n                        tracks.push(mediaTrack);\n                    }\n                }\n            });\n            if (tracks.length > 0) {\n                const stream = new MediaStream(tracks);\n                setLocalStream(stream);\n            }\n        } catch (err) {\n            console.warn(\"[LiveKit] Failed to build local stream:\", err);\n        }\n    }, []);\n    const addRemoteTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((participantId, mediaTrack)=>{\n        setRemoteStreams((prev)=>{\n            const next = new Map(prev);\n            const existing = next.get(participantId);\n            // Create a NEW MediaStream with all existing tracks + new track\n            // This ensures React detects the state change\n            const allTracks = [];\n            if (existing) {\n                existing.getTracks().forEach((t)=>{\n                    if (t.id !== mediaTrack.id) {\n                        allTracks.push(t);\n                    }\n                });\n            }\n            allTracks.push(mediaTrack);\n            const newStream = new MediaStream(allTracks);\n            next.set(participantId, newStream);\n            console.log(\"[LiveKit] Remote streams updated:\", {\n                participantId,\n                newTrackKind: mediaTrack.kind,\n                totalTracks: newStream.getTracks().length,\n                mapSize: next.size\n            });\n            return next;\n        });\n    }, []);\n    const removeRemoteTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((participantId, mediaTrack)=>{\n        setRemoteStreams((prev)=>{\n            const next = new Map(prev);\n            const existing = next.get(participantId);\n            if (!existing) return prev;\n            if (mediaTrack) {\n                existing.removeTrack(mediaTrack);\n            }\n            if (existing.getTracks().length === 0) {\n                next.delete(participantId);\n            } else {\n                next.set(participantId, existing);\n            }\n            return next;\n        });\n    }, []);\n    const disconnect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (roomRef.current) {\n            roomRef.current.disconnect();\n            roomRef.current = null;\n        }\n        connectPromiseRef.current = null;\n        setRoom(null);\n        setIsConnected(false);\n        setLocalStream(null);\n        setRemoteStreams(new Map());\n        setError(null);\n    }, []);\n    const connect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        const { roomName: currentRoomName, token: currentToken, url: currentUrl } = latestOptionsRef.current;\n        if (!currentRoomName || !currentToken || !currentUrl) {\n            setError(\"Thiếu th\\xf4ng tin LiveKit (room/token/url)\");\n            return;\n        }\n        if (roomRef.current && roomRef.current.state === \"connected\") {\n            return;\n        }\n        if (connectPromiseRef.current) {\n            return connectPromiseRef.current;\n        }\n        const promise = (async ()=>{\n            try {\n                setError(null);\n                // Optimized room options for better performance\n                const roomOptions = {\n                    adaptiveStream: true,\n                    dynacast: true,\n                    // Video capture settings - use 720p for better performance\n                    videoCaptureDefaults: {\n                        resolution: livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h720.resolution,\n                        facingMode: \"user\"\n                    },\n                    // Video publish settings - lower bitrate for smoother streaming\n                    publishDefaults: {\n                        videoSimulcastLayers: [\n                            livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h180,\n                            livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h360\n                        ],\n                        videoCodec: \"vp8\",\n                        dtx: true,\n                        red: true,\n                        stopMicTrackOnMute: false\n                    }\n                };\n                const newRoom = new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(roomOptions);\n                roomRef.current = newRoom;\n                setRoom(newRoom);\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Connected, ()=>{\n                    setIsConnected(true);\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Disconnected, ()=>{\n                    setIsConnected(false);\n                    setLocalStream(null);\n                    setRemoteStreams(new Map());\n                    setRemoteTracks(new Map());\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackSubscribed, (track, publication, participant)=>{\n                    if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        // Store the RemoteTrack for direct attachment in components\n                        setRemoteTracks((prev)=>{\n                            const next = new Map(prev);\n                            const existing = next.get(participant.identity) || {};\n                            if (track.kind === \"video\") {\n                                next.set(participant.identity, {\n                                    ...existing,\n                                    videoTrack: track\n                                });\n                            } else if (track.kind === \"audio\") {\n                                next.set(participant.identity, {\n                                    ...existing,\n                                    audioTrack: track\n                                });\n                            }\n                            return next;\n                        });\n                        // Also add to remoteStreams for backward compatibility\n                        const mediaTrack = track.mediaStreamTrack;\n                        if (mediaTrack) {\n                            addRemoteTrack(participant.identity, mediaTrack);\n                        }\n                    }\n                });\n                // Handle track unmuted events - re-add track when unmuted\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackUnmuted, (publication, participant)=>{\n                    if (publication.track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        const mediaTrack = publication.track.mediaStreamTrack;\n                        if (mediaTrack) {\n                            addRemoteTrack(participant.identity, mediaTrack);\n                        }\n                    }\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantConnected, (participant)=>{\n                    console.log(\"[LiveKit] ParticipantConnected:\", {\n                        participantId: participant.identity,\n                        participantSid: participant.sid,\n                        trackCount: participant.trackPublications.size\n                    });\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.TrackUnsubscribed, (track, publication, participant)=>{\n                    if (track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                        // Remove from remoteTracks\n                        setRemoteTracks((prev)=>{\n                            const next = new Map(prev);\n                            const existing = next.get(participant.identity);\n                            if (existing) {\n                                if (track.kind === \"video\") {\n                                    next.set(participant.identity, {\n                                        ...existing,\n                                        videoTrack: undefined\n                                    });\n                                } else if (track.kind === \"audio\") {\n                                    next.set(participant.identity, {\n                                        ...existing,\n                                        audioTrack: undefined\n                                    });\n                                }\n                            }\n                            return next;\n                        });\n                        const mediaTrack = track.mediaStreamTrack;\n                        removeRemoteTrack(participant.identity, mediaTrack);\n                    }\n                });\n                newRoom.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ParticipantDisconnected, (participant)=>{\n                    setRemoteStreams((prev)=>{\n                        const next = new Map(prev);\n                        next.delete(participant.identity);\n                        return next;\n                    });\n                    setRemoteTracks((prev)=>{\n                        const next = new Map(prev);\n                        next.delete(participant.identity);\n                        return next;\n                    });\n                });\n                console.log(\"[LiveKit] Connecting to room:\", currentRoomName, \"at URL:\", currentUrl);\n                await newRoom.connect(currentUrl, currentToken);\n                console.log(\"[LiveKit] Connected! Room state:\", newRoom.state);\n                console.log(\"[LiveKit] Remote participants:\", newRoom.remoteParticipants.size);\n                // Log existing remote participants\n                newRoom.remoteParticipants.forEach((participant, sid)=>{\n                    console.log(\"[LiveKit] Existing remote participant:\", {\n                        identity: participant.identity,\n                        sid: sid,\n                        trackCount: participant.trackPublications.size\n                    });\n                    // Subscribe to any existing tracks\n                    participant.trackPublications.forEach((pub)=>{\n                        if (pub.track && pub.track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrack) {\n                            const mediaTrack = pub.track.mediaStreamTrack;\n                            if (mediaTrack) {\n                                console.log(\"[LiveKit] Found existing remote track:\", {\n                                    participantId: participant.identity,\n                                    trackId: mediaTrack.id,\n                                    trackKind: mediaTrack.kind\n                                });\n                                addRemoteTrack(participant.identity, mediaTrack);\n                            }\n                        }\n                    });\n                });\n                await newRoom.localParticipant.enableCameraAndMicrophone();\n                console.log(\"[LiveKit] Camera and microphone enabled\");\n                buildMediaStreamFromLocal(newRoom);\n            } catch (err) {\n                console.error(\"[LiveKit] Error connecting:\", err);\n                setError((err === null || err === void 0 ? void 0 : err.message) || \"Kh\\xf4ng thể kết nối LiveKit\");\n                disconnect();\n            } finally{\n                connectPromiseRef.current = null;\n            }\n        })();\n        connectPromiseRef.current = promise;\n        return promise;\n    }, [\n        addRemoteTrack,\n        autoSubscribe,\n        buildMediaStreamFromLocal,\n        disconnect,\n        removeRemoteTrack\n    ]);\n    const toggleVideo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!roomRef.current) return;\n        const enabled = !isVideoEnabled;\n        roomRef.current.localParticipant.setCameraEnabled(enabled);\n        setIsVideoEnabled(enabled);\n    }, [\n        isVideoEnabled\n    ]);\n    const toggleAudio = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!roomRef.current) return;\n        const enabled = !isAudioEnabled;\n        roomRef.current.localParticipant.setMicrophoneEnabled(enabled);\n        setIsAudioEnabled(enabled);\n    }, [\n        isAudioEnabled\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        return ()=>{\n            disconnect();\n        };\n    }, [\n        disconnect\n    ]);\n    return {\n        room,\n        localStream,\n        remoteStreams,\n        remoteTracks,\n        isConnected,\n        error,\n        connect,\n        disconnect,\n        toggleVideo,\n        toggleAudio,\n        isVideoEnabled,\n        isAudioEnabled\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi8uLi9wYWNrYWdlcy9hcHAvaG9va3MvdXNlTGl2ZUtpdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlFO0FBVXpDO0FBaUNqQixTQUFTVSxXQUFXLEtBS1A7UUFMTyxFQUN6QkMsUUFBUSxFQUNSQyxLQUFLLEVBQ0xDLEdBQUcsRUFDSEMsZ0JBQWdCLElBQUksRUFDRixHQUxPO0lBTXpCLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHYiwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNjLGFBQWFDLGVBQWUsR0FBR2YsK0NBQVFBLENBQXFCO0lBQ25FLE1BQU0sQ0FBQ2dCLGVBQWVDLGlCQUFpQixHQUFHakIsK0NBQVFBLENBQTJCLElBQUlrQjtJQUNqRixNQUFNLENBQUNDLGNBQWNDLGdCQUFnQixHQUFHcEIsK0NBQVFBLENBQXVDLElBQUlrQjtJQUMzRixNQUFNLENBQUNHLGFBQWFDLGVBQWUsR0FBR3RCLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ3VCLE9BQU9DLFNBQVMsR0FBR3hCLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUN5QixnQkFBZ0JDLGtCQUFrQixHQUFHMUIsK0NBQVFBLENBQUM7SUFDckQsTUFBTSxDQUFDMkIsZ0JBQWdCQyxrQkFBa0IsR0FBRzVCLCtDQUFRQSxDQUFDO0lBRXJELE1BQU02QixVQUFVOUIsNkNBQU1BLENBQWM7SUFDcEMsTUFBTStCLG9CQUFvQi9CLDZDQUFNQSxDQUF1QjtJQUN2RCxNQUFNZ0MsbUJBQW1CaEMsNkNBQU1BLENBQUM7UUFBRVM7UUFBVUM7UUFBT0M7SUFBSTtJQUV2RFosZ0RBQVNBLENBQUM7UUFDUmlDLGlCQUFpQkMsT0FBTyxHQUFHO1lBQUV4QjtZQUFVQztZQUFPQztRQUFJO0lBQ3BELEdBQUc7UUFBQ0Y7UUFBVUM7UUFBT0M7S0FBSTtJQUV6QixNQUFNdUIsNEJBQTRCcEMsa0RBQVdBLENBQUMsQ0FBQ3FDO1FBQzdDLElBQUk7WUFDRixNQUFNQyxl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SUFBS29FLE9BQU8sS0FBSTtnQkFDekI1QztZQUNGLFNBQVU7Z0JBQ1I5QyxrQkFBa0JFLE9BQU8sR0FBRztZQUM5QjtRQUNGO1FBRUFGLGtCQUFrQkUsT0FBTyxHQUFHa0Q7UUFDNUIsT0FBT0E7SUFDVCxHQUFHO1FBQUMzQjtRQUFnQjVDO1FBQWVzQjtRQUEyQjJDO1FBQVlIO0tBQWtCO0lBRTVGLE1BQU1nRCxjQUFjNUgsa0RBQVdBLENBQUM7UUFDOUIsSUFBSSxDQUFDZ0MsUUFBUUcsT0FBTyxFQUFFO1FBQ3RCLE1BQU0wRixVQUFVLENBQUNqRztRQUNqQkksUUFBUUcsT0FBTyxDQUFDTSxnQkFBZ0IsQ0FBQ3FGLGdCQUFnQixDQUFDRDtRQUNsRGhHLGtCQUFrQmdHO0lBQ3BCLEdBQUc7UUFBQ2pHO0tBQWU7SUFFbkIsTUFBTW1HLGNBQWMvSCxrREFBV0EsQ0FBQztRQUM5QixJQUFJLENBQUNnQyxRQUFRRyxPQUFPLEVBQUU7UUFDdEIsTUFBTTBGLFVBQVUsQ0FBQy9GO1FBQ2pCRSxRQUFRRyxPQUFPLENBQUNNLGdCQUFnQixDQUFDdUYsb0JBQW9CLENBQUNIO1FBQ3REOUYsa0JBQWtCOEY7SUFDcEIsR0FBRztRQUFDL0Y7S0FBZTtJQUVuQjdCLGdEQUFTQSxDQUFDO1FBQ1IsT0FBTztZQUNMOEU7UUFDRjtJQUNGLEdBQUc7UUFBQ0E7S0FBVztJQUVmLE9BQU87UUFDTGhFO1FBQ0FFO1FBQ0FFO1FBQ0FHO1FBQ0FFO1FBQ0FFO1FBQ0FzRDtRQUNBRDtRQUNBNkM7UUFDQUc7UUFDQW5HO1FBQ0FFO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vcGFja2FnZXMvYXBwL2hvb2tzL3VzZUxpdmVLaXQudHM/MWUyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgXG4gIFJvb20sIFxuICBSb29tRXZlbnQsIFxuICBSZW1vdGVUcmFjaywgXG4gIExvY2FsVmlkZW9UcmFjaywgXG4gIExvY2FsQXVkaW9UcmFjayxcbiAgVmlkZW9QcmVzZXRzLFxuICBSb29tT3B0aW9ucyxcbiAgVmlkZW9Db2RlY1xufSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5cbi8vIE5PVEU6IFRoaXMgaG9vayBpcyBub3cgd2ViLWZpcnN0LiBSZWFjdCBOYXRpdmUgZ2xvYmFscyByZWdpc3RyYXRpb24gaGFzIGJlZW5cbi8vIHJlbW92ZWQgdG8gYXZvaWQgYnVuZGxpbmcgJ3JlYWN0LW5hdGl2ZScgaW4gTmV4dC5qcy4gSWYgeW91IG5lZWQgbmF0aXZlXG4vLyBzdXBwb3J0IGxhdGVyLCBjcmVhdGUgYSBzZXBhcmF0ZSAndXNlTGl2ZUtpdC5uYXRpdmUudHMnIGltcGxlbWVudGF0aW9uLlxuXG5pbnRlcmZhY2UgVXNlTGl2ZUtpdE9wdGlvbnMge1xuICByb29tTmFtZT86IHN0cmluZztcbiAgdG9rZW4/OiBzdHJpbmc7XG4gIHVybD86IHN0cmluZztcbiAgYXV0b1N1YnNjcmliZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVtb3RlUGFydGljaXBhbnRUcmFja3Mge1xuICBhdWRpb1RyYWNrPzogUmVtb3RlVHJhY2s7XG4gIHZpZGVvVHJhY2s/OiBSZW1vdGVUcmFjaztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VMaXZlS2l0UmVzdWx0IHtcbiAgcm9vbTogUm9vbSB8IG51bGw7XG4gIGxvY2FsU3RyZWFtOiBNZWRpYVN0cmVhbSB8IG51bGw7XG4gIHJlbW90ZVN0cmVhbXM6IE1hcDxzdHJpbmcsIE1lZGlhU3RyZWFtPjtcbiAgcmVtb3RlVHJhY2tzOiBNYXA8c3RyaW5nLCBSZW1vdGVQYXJ0aWNpcGFudFRyYWNrcz47IC8vIE5ldzogZm9yIGRpcmVjdCB0cmFjayBhdHRhY2htZW50XG4gIGlzQ29ubmVjdGVkOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgY29ubmVjdDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgZGlzY29ubmVjdDogKCkgPT4gdm9pZDtcbiAgdG9nZ2xlVmlkZW86ICgpID0+IHZvaWQ7XG4gIHRvZ2dsZUF1ZGlvOiAoKSA9PiB2b2lkO1xuICBpc1ZpZGVvRW5hYmxlZDogYm9vbGVhbjtcbiAgaXNBdWRpb0VuYWJsZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VMaXZlS2l0KHtcbiAgcm9vbU5hbWUsXG4gIHRva2VuLFxuICB1cmwsXG4gIGF1dG9TdWJzY3JpYmUgPSB0cnVlLFxufTogVXNlTGl2ZUtpdE9wdGlvbnMpOiBVc2VMaXZlS2l0UmVzdWx0IHtcbiAgY29uc3QgW3Jvb20sIHNldFJvb21dID0gdXNlU3RhdGU8Um9vbSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbG9jYWxTdHJlYW0sIHNldExvY2FsU3RyZWFtXSA9IHVzZVN0YXRlPE1lZGlhU3RyZWFtIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtyZW1vdGVTdHJlYW1zLCBzZXRSZW1vdGVTdHJlYW1zXSA9IHVzZVN0YXRlPE1hcDxzdHJpbmcsIE1lZGlhU3RyZWFtPj4obmV3IE1hcCgpKTtcbiAgY29uc3QgW3JlbW90ZVRyYWNrcywgc2V0UmVtb3RlVHJhY2tzXSA9IHVzZVN0YXRlPE1hcDxzdHJpbmcsIFJlbW90ZVBhcnRpY2lwYW50VHJhY2tzPj4obmV3IE1hcCgpKTtcbiAgY29uc3QgW2lzQ29ubmVjdGVkLCBzZXRJc0Nvbm5lY3RlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc1ZpZGVvRW5hYmxlZCwgc2V0SXNWaWRlb0VuYWJsZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpc0F1ZGlvRW5hYmxlZCwgc2V0SXNBdWRpb0VuYWJsZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgY29uc3Qgcm9vbVJlZiA9IHVzZVJlZjxSb29tIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGNvbm5lY3RQcm9taXNlUmVmID0gdXNlUmVmPFByb21pc2U8dm9pZD4gfCBudWxsPihudWxsKTtcbiAgY29uc3QgbGF0ZXN0T3B0aW9uc1JlZiA9IHVzZVJlZih7IHJvb21OYW1lLCB0b2tlbiwgdXJsIH0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGF0ZXN0T3B0aW9uc1JlZi5jdXJyZW50ID0geyByb29tTmFtZSwgdG9rZW4sIHVybCB9O1xuICB9LCBbcm9vbU5hbWUsIHRva2VuLCB1cmxdKTtcblxuICBjb25zdCBidWlsZE1lZGlhU3RyZWFtRnJvbUxvY2FsID0gdXNlQ2FsbGJhY2soKGN1cnJlbnRSb29tOiBSb29tKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHB1YmxpY2F0aW9ucyA9IEFycmF5LmZyb20oY3VycmVudFJvb20ubG9jYWxQYXJ0aWNpcGFudC50cmFja1B1YmxpY2F0aW9ucy52YWx1ZXMoKSk7XG4gICAgICBjb25zdCB0cmFja3M6IE1lZGlhU3RyZWFtVHJhY2tbXSA9IFtdO1xuICAgICAgcHVibGljYXRpb25zLmZvckVhY2goKHB1YikgPT4ge1xuICAgICAgICBjb25zdCBsa1RyYWNrID0gcHViLnRyYWNrO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbGtUcmFjayAmJlxuICAgICAgICAgIChsa1RyYWNrIGluc3RhbmNlb2YgTG9jYWxWaWRlb1RyYWNrIHx8IGxrVHJhY2sgaW5zdGFuY2VvZiBMb2NhbEF1ZGlvVHJhY2spXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IG1lZGlhVHJhY2sgPSAobGtUcmFjayBhcyBhbnkpLm1lZGlhU3RyZWFtVHJhY2sgYXMgTWVkaWFTdHJlYW1UcmFjayB8IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAobWVkaWFUcmFjaykge1xuICAgICAgICAgICAgdHJhY2tzLnB1c2gobWVkaWFUcmFjayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0odHJhY2tzKTtcbiAgICAgICAgc2V0TG9jYWxTdHJlYW0oc3RyZWFtKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0xpdmVLaXRdIEZhaWxlZCB0byBidWlsZCBsb2NhbCBzdHJlYW06JywgZXJyKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBhZGRSZW1vdGVUcmFjayA9IHVzZUNhbGxiYWNrKChwYXJ0aWNpcGFudElkOiBzdHJpbmcsIG1lZGlhVHJhY2s6IE1lZGlhU3RyZWFtVHJhY2spID0+IHtcbiAgICBzZXRSZW1vdGVTdHJlYW1zKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCBuZXh0ID0gbmV3IE1hcChwcmV2KTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gbmV4dC5nZXQocGFydGljaXBhbnRJZCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhIE5FVyBNZWRpYVN0cmVhbSB3aXRoIGFsbCBleGlzdGluZyB0cmFja3MgKyBuZXcgdHJhY2tcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBSZWFjdCBkZXRlY3RzIHRoZSBzdGF0ZSBjaGFuZ2VcbiAgICAgIGNvbnN0IGFsbFRyYWNrczogTWVkaWFTdHJlYW1UcmFja1tdID0gW107XG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgZXhpc3RpbmcuZ2V0VHJhY2tzKCkuZm9yRWFjaCh0ID0+IHtcbiAgICAgICAgICBpZiAodC5pZCAhPT0gbWVkaWFUcmFjay5pZCkge1xuICAgICAgICAgICAgYWxsVHJhY2tzLnB1c2godCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGFsbFRyYWNrcy5wdXNoKG1lZGlhVHJhY2spO1xuICAgICAgXG4gICAgICBjb25zdCBuZXdTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oYWxsVHJhY2tzKTtcbiAgICAgIG5leHQuc2V0KHBhcnRpY2lwYW50SWQsIG5ld1N0cmVhbSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdbTGl2ZUtpdF0gUmVtb3RlIHN0cmVhbXMgdXBkYXRlZDonLCB7XG4gICAgICAgIHBhcnRpY2lwYW50SWQsXG4gICAgICAgIG5ld1RyYWNrS2luZDogbWVkaWFUcmFjay5raW5kLFxuICAgICAgICB0b3RhbFRyYWNrczogbmV3U3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCxcbiAgICAgICAgbWFwU2l6ZTogbmV4dC5zaXplXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCByZW1vdmVSZW1vdGVUcmFjayA9IHVzZUNhbGxiYWNrKChwYXJ0aWNpcGFudElkOiBzdHJpbmcsIG1lZGlhVHJhY2s/OiBNZWRpYVN0cmVhbVRyYWNrKSA9PiB7XG4gICAgc2V0UmVtb3RlU3RyZWFtcygocHJldikgPT4ge1xuICAgICAgY29uc3QgbmV4dCA9IG5ldyBNYXAocHJldik7XG4gICAgICBjb25zdCBleGlzdGluZyA9IG5leHQuZ2V0KHBhcnRpY2lwYW50SWQpO1xuICAgICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHByZXY7XG4gICAgICBpZiAobWVkaWFUcmFjaykge1xuICAgICAgICBleGlzdGluZy5yZW1vdmVUcmFjayhtZWRpYVRyYWNrKTtcbiAgICAgIH1cbiAgICAgIGlmIChleGlzdGluZy5nZXRUcmFja3MoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV4dC5kZWxldGUocGFydGljaXBhbnRJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0LnNldChwYXJ0aWNpcGFudElkLCBleGlzdGluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9KTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGRpc2Nvbm5lY3QgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHJvb21SZWYuY3VycmVudCkge1xuICAgICAgcm9vbVJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgIHJvb21SZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIGNvbm5lY3RQcm9taXNlUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIHNldFJvb20obnVsbCk7XG4gICAgc2V0SXNDb25uZWN0ZWQoZmFsc2UpO1xuICAgIHNldExvY2FsU3RyZWFtKG51bGwpO1xuICAgIHNldFJlbW90ZVN0cmVhbXMobmV3IE1hcCgpKTtcbiAgICBzZXRFcnJvcihudWxsKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNvbm5lY3QgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyByb29tTmFtZTogY3VycmVudFJvb21OYW1lLCB0b2tlbjogY3VycmVudFRva2VuLCB1cmw6IGN1cnJlbnRVcmwgfSA9XG4gICAgICBsYXRlc3RPcHRpb25zUmVmLmN1cnJlbnQ7XG5cbiAgICBpZiAoIWN1cnJlbnRSb29tTmFtZSB8fCAhY3VycmVudFRva2VuIHx8ICFjdXJyZW50VXJsKSB7XG4gICAgICBzZXRFcnJvcignVGhp4bq/dSB0aMO0bmcgdGluIExpdmVLaXQgKHJvb20vdG9rZW4vdXJsKScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChyb29tUmVmLmN1cnJlbnQgJiYgcm9vbVJlZi5jdXJyZW50LnN0YXRlID09PSAnY29ubmVjdGVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjb25uZWN0UHJvbWlzZVJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm4gY29ubmVjdFByb21pc2VSZWYuY3VycmVudDtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICBcbiAgICAgICAgLy8gT3B0aW1pemVkIHJvb20gb3B0aW9ucyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgICAgIGNvbnN0IHJvb21PcHRpb25zOiBSb29tT3B0aW9ucyA9IHtcbiAgICAgICAgICBhZGFwdGl2ZVN0cmVhbTogdHJ1ZSxcbiAgICAgICAgICBkeW5hY2FzdDogdHJ1ZSxcbiAgICAgICAgICAvLyBWaWRlbyBjYXB0dXJlIHNldHRpbmdzIC0gdXNlIDcyMHAgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgICAgIHZpZGVvQ2FwdHVyZURlZmF1bHRzOiB7XG4gICAgICAgICAgICByZXNvbHV0aW9uOiBWaWRlb1ByZXNldHMuaDcyMC5yZXNvbHV0aW9uLFxuICAgICAgICAgICAgZmFjaW5nTW9kZTogJ3VzZXInLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8gVmlkZW8gcHVibGlzaCBzZXR0aW5ncyAtIGxvd2VyIGJpdHJhdGUgZm9yIHNtb290aGVyIHN0cmVhbWluZ1xuICAgICAgICAgIHB1Ymxpc2hEZWZhdWx0czoge1xuICAgICAgICAgICAgdmlkZW9TaW11bGNhc3RMYXllcnM6IFtWaWRlb1ByZXNldHMuaDE4MCwgVmlkZW9QcmVzZXRzLmgzNjBdLFxuICAgICAgICAgICAgdmlkZW9Db2RlYzogJ3ZwOCcgYXMgVmlkZW9Db2RlYywgLy8gVlA4IGhhcyBiZXR0ZXIgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgZHR4OiB0cnVlLCAvLyBEaXNjb250aW51b3VzIHRyYW5zbWlzc2lvbiBmb3IgYXVkaW8gLSBzYXZlcyBiYW5kd2lkdGhcbiAgICAgICAgICAgIHJlZDogdHJ1ZSwgLy8gUmVkdW5kYW50IGVuY29kaW5nIGZvciBhdWRpbyAtIGJldHRlciBxdWFsaXR5XG4gICAgICAgICAgICBzdG9wTWljVHJhY2tPbk11dGU6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBuZXdSb29tID0gbmV3IFJvb20ocm9vbU9wdGlvbnMpO1xuXG4gICAgICAgIHJvb21SZWYuY3VycmVudCA9IG5ld1Jvb207XG4gICAgICAgIHNldFJvb20obmV3Um9vbSk7XG5cbiAgICAgICAgbmV3Um9vbS5vbihSb29tRXZlbnQuQ29ubmVjdGVkLCAoKSA9PiB7XG4gICAgICAgICAgc2V0SXNDb25uZWN0ZWQodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LkRpc2Nvbm5lY3RlZCwgKCkgPT4ge1xuICAgICAgICAgIHNldElzQ29ubmVjdGVkKGZhbHNlKTtcbiAgICAgICAgICBzZXRMb2NhbFN0cmVhbShudWxsKTtcbiAgICAgICAgICBzZXRSZW1vdGVTdHJlYW1zKG5ldyBNYXAoKSk7XG4gICAgICAgICAgc2V0UmVtb3RlVHJhY2tzKG5ldyBNYXAoKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LlRyYWNrU3Vic2NyaWJlZCwgKHRyYWNrLCBwdWJsaWNhdGlvbiwgcGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgICBpZiAodHJhY2sgaW5zdGFuY2VvZiBSZW1vdGVUcmFjaykge1xuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIFJlbW90ZVRyYWNrIGZvciBkaXJlY3QgYXR0YWNobWVudCBpbiBjb21wb25lbnRzXG4gICAgICAgICAgICBzZXRSZW1vdGVUcmFja3MoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gbmV4dC5nZXQocGFydGljaXBhbnQuaWRlbnRpdHkpIHx8IHt9O1xuICAgICAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgICAgIG5leHQuc2V0KHBhcnRpY2lwYW50LmlkZW50aXR5LCB7IC4uLmV4aXN0aW5nLCB2aWRlb1RyYWNrOiB0cmFjayB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFjay5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgbmV4dC5zZXQocGFydGljaXBhbnQuaWRlbnRpdHksIHsgLi4uZXhpc3RpbmcsIGF1ZGlvVHJhY2s6IHRyYWNrIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFsc28gYWRkIHRvIHJlbW90ZVN0cmVhbXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhVHJhY2sgPSAodHJhY2sgYXMgYW55KS5tZWRpYVN0cmVhbVRyYWNrIGFzIE1lZGlhU3RyZWFtVHJhY2sgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAobWVkaWFUcmFjaykge1xuICAgICAgICAgICAgICBhZGRSZW1vdGVUcmFjayhwYXJ0aWNpcGFudC5pZGVudGl0eSwgbWVkaWFUcmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSB0cmFjayB1bm11dGVkIGV2ZW50cyAtIHJlLWFkZCB0cmFjayB3aGVuIHVubXV0ZWRcbiAgICAgICAgbmV3Um9vbS5vbihSb29tRXZlbnQuVHJhY2tVbm11dGVkLCAocHVibGljYXRpb24sIHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgICAgaWYgKHB1YmxpY2F0aW9uLnRyYWNrIGluc3RhbmNlb2YgUmVtb3RlVHJhY2spIHtcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhVHJhY2sgPSAocHVibGljYXRpb24udHJhY2sgYXMgYW55KS5tZWRpYVN0cmVhbVRyYWNrIGFzIE1lZGlhU3RyZWFtVHJhY2sgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAobWVkaWFUcmFjaykge1xuICAgICAgICAgICAgICBhZGRSZW1vdGVUcmFjayhwYXJ0aWNpcGFudC5pZGVudGl0eSwgbWVkaWFUcmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG5ld1Jvb20ub24oUm9vbUV2ZW50LlBhcnRpY2lwYW50Q29ubmVjdGVkLCAocGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0xpdmVLaXRdIFBhcnRpY2lwYW50Q29ubmVjdGVkOicsIHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHBhcnRpY2lwYW50LmlkZW50aXR5LFxuICAgICAgICAgICAgcGFydGljaXBhbnRTaWQ6IHBhcnRpY2lwYW50LnNpZCxcbiAgICAgICAgICAgIHRyYWNrQ291bnQ6IHBhcnRpY2lwYW50LnRyYWNrUHVibGljYXRpb25zLnNpemVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3Um9vbS5vbihSb29tRXZlbnQuVHJhY2tVbnN1YnNjcmliZWQsICh0cmFjaywgcHVibGljYXRpb24sIHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgICAgaWYgKHRyYWNrIGluc3RhbmNlb2YgUmVtb3RlVHJhY2spIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIHJlbW90ZVRyYWNrc1xuICAgICAgICAgICAgc2V0UmVtb3RlVHJhY2tzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IG5leHQuZ2V0KHBhcnRpY2lwYW50LmlkZW50aXR5KTtcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICAgIG5leHQuc2V0KHBhcnRpY2lwYW50LmlkZW50aXR5LCB7IC4uLmV4aXN0aW5nLCB2aWRlb1RyYWNrOiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFjay5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICBuZXh0LnNldChwYXJ0aWNpcGFudC5pZGVudGl0eSwgeyAuLi5leGlzdGluZywgYXVkaW9UcmFjazogdW5kZWZpbmVkIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtZWRpYVRyYWNrID0gKHRyYWNrIGFzIGFueSkubWVkaWFTdHJlYW1UcmFjayBhcyBNZWRpYVN0cmVhbVRyYWNrIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmVtb3ZlUmVtb3RlVHJhY2socGFydGljaXBhbnQuaWRlbnRpdHksIG1lZGlhVHJhY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3Um9vbS5vbihSb29tRXZlbnQuUGFydGljaXBhbnREaXNjb25uZWN0ZWQsIChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAgIHNldFJlbW90ZVN0cmVhbXMoKHByZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgbmV4dC5kZWxldGUocGFydGljaXBhbnQuaWRlbnRpdHkpO1xuICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0UmVtb3RlVHJhY2tzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgIG5leHQuZGVsZXRlKHBhcnRpY2lwYW50LmlkZW50aXR5KTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnW0xpdmVLaXRdIENvbm5lY3RpbmcgdG8gcm9vbTonLCBjdXJyZW50Um9vbU5hbWUsICdhdCBVUkw6JywgY3VycmVudFVybCk7XG4gICAgICAgIGF3YWl0IG5ld1Jvb20uY29ubmVjdChjdXJyZW50VXJsLCBjdXJyZW50VG9rZW4pO1xuICAgICAgICBjb25zb2xlLmxvZygnW0xpdmVLaXRdIENvbm5lY3RlZCEgUm9vbSBzdGF0ZTonLCBuZXdSb29tLnN0YXRlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tMaXZlS2l0XSBSZW1vdGUgcGFydGljaXBhbnRzOicsIG5ld1Jvb20ucmVtb3RlUGFydGljaXBhbnRzLnNpemUpO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9nIGV4aXN0aW5nIHJlbW90ZSBwYXJ0aWNpcGFudHNcbiAgICAgICAgbmV3Um9vbS5yZW1vdGVQYXJ0aWNpcGFudHMuZm9yRWFjaCgocGFydGljaXBhbnQsIHNpZCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbTGl2ZUtpdF0gRXhpc3RpbmcgcmVtb3RlIHBhcnRpY2lwYW50OicsIHtcbiAgICAgICAgICAgIGlkZW50aXR5OiBwYXJ0aWNpcGFudC5pZGVudGl0eSxcbiAgICAgICAgICAgIHNpZDogc2lkLFxuICAgICAgICAgICAgdHJhY2tDb3VudDogcGFydGljaXBhbnQudHJhY2tQdWJsaWNhdGlvbnMuc2l6ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIFN1YnNjcmliZSB0byBhbnkgZXhpc3RpbmcgdHJhY2tzXG4gICAgICAgICAgcGFydGljaXBhbnQudHJhY2tQdWJsaWNhdGlvbnMuZm9yRWFjaCgocHViKSA9PiB7XG4gICAgICAgICAgICBpZiAocHViLnRyYWNrICYmIHB1Yi50cmFjayBpbnN0YW5jZW9mIFJlbW90ZVRyYWNrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHJhY2sgPSAocHViLnRyYWNrIGFzIGFueSkubWVkaWFTdHJlYW1UcmFjayBhcyBNZWRpYVN0cmVhbVRyYWNrIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICBpZiAobWVkaWFUcmFjaykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTGl2ZUtpdF0gRm91bmQgZXhpc3RpbmcgcmVtb3RlIHRyYWNrOicsIHtcbiAgICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHBhcnRpY2lwYW50LmlkZW50aXR5LFxuICAgICAgICAgICAgICAgICAgdHJhY2tJZDogbWVkaWFUcmFjay5pZCxcbiAgICAgICAgICAgICAgICAgIHRyYWNrS2luZDogbWVkaWFUcmFjay5raW5kXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWRkUmVtb3RlVHJhY2socGFydGljaXBhbnQuaWRlbnRpdHksIG1lZGlhVHJhY2spO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgbmV3Um9vbS5sb2NhbFBhcnRpY2lwYW50LmVuYWJsZUNhbWVyYUFuZE1pY3JvcGhvbmUoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tMaXZlS2l0XSBDYW1lcmEgYW5kIG1pY3JvcGhvbmUgZW5hYmxlZCcpO1xuICAgICAgICBidWlsZE1lZGlhU3RyZWFtRnJvbUxvY2FsKG5ld1Jvb20pO1xuICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0xpdmVLaXRdIEVycm9yIGNvbm5lY3Rpbmc6JywgZXJyKTtcbiAgICAgICAgc2V0RXJyb3IoZXJyPy5tZXNzYWdlIHx8ICdLaMO0bmcgdGjhu4Mga+G6v3QgbuG7kWkgTGl2ZUtpdCcpO1xuICAgICAgICBkaXNjb25uZWN0KCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjb25uZWN0UHJvbWlzZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KSgpO1xuXG4gICAgY29ubmVjdFByb21pc2VSZWYuY3VycmVudCA9IHByb21pc2U7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH0sIFthZGRSZW1vdGVUcmFjaywgYXV0b1N1YnNjcmliZSwgYnVpbGRNZWRpYVN0cmVhbUZyb21Mb2NhbCwgZGlzY29ubmVjdCwgcmVtb3ZlUmVtb3RlVHJhY2tdKTtcblxuICBjb25zdCB0b2dnbGVWaWRlbyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIXJvb21SZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIGNvbnN0IGVuYWJsZWQgPSAhaXNWaWRlb0VuYWJsZWQ7XG4gICAgcm9vbVJlZi5jdXJyZW50LmxvY2FsUGFydGljaXBhbnQuc2V0Q2FtZXJhRW5hYmxlZChlbmFibGVkKTtcbiAgICBzZXRJc1ZpZGVvRW5hYmxlZChlbmFibGVkKTtcbiAgfSwgW2lzVmlkZW9FbmFibGVkXSk7XG5cbiAgY29uc3QgdG9nZ2xlQXVkaW8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFyb29tUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBjb25zdCBlbmFibGVkID0gIWlzQXVkaW9FbmFibGVkO1xuICAgIHJvb21SZWYuY3VycmVudC5sb2NhbFBhcnRpY2lwYW50LnNldE1pY3JvcGhvbmVFbmFibGVkKGVuYWJsZWQpO1xuICAgIHNldElzQXVkaW9FbmFibGVkKGVuYWJsZWQpO1xuICB9LCBbaXNBdWRpb0VuYWJsZWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgfSwgW2Rpc2Nvbm5lY3RdKTtcblxuICByZXR1cm4ge1xuICAgIHJvb20sXG4gICAgbG9jYWxTdHJlYW0sXG4gICAgcmVtb3RlU3RyZWFtcyxcbiAgICByZW1vdGVUcmFja3MsXG4gICAgaXNDb25uZWN0ZWQsXG4gICAgZXJyb3IsXG4gICAgY29ubmVjdCxcbiAgICBkaXNjb25uZWN0LFxuICAgIHRvZ2dsZVZpZGVvLFxuICAgIHRvZ2dsZUF1ZGlvLFxuICAgIGlzVmlkZW9FbmFibGVkLFxuICAgIGlzQXVkaW9FbmFibGVkLFxuICB9O1xufVxuXG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIlJvb20iLCJSb29tRXZlbnQiLCJSZW1vdGVUcmFjayIsIkxvY2FsVmlkZW9UcmFjayIsIkxvY2FsQXVkaW9UcmFjayIsIlZpZGVvUHJlc2V0cyIsInVzZUxpdmVLaXQiLCJyb29tTmFtZSIsInRva2VuIiwidXJsIiwiYXV0b1N1YnNjcmliZSIsInJvb20iLCJzZXRSb29tIiwibG9jYWxTdHJlYW0iLCJzZXRMb2NhbFN0cmVhbSIsInJlbW90ZVN0cmVhbXMiLCJzZXRSZW1vdGVTdHJlYW1zIiwiTWFwIiwicmVtb3RlVHJhY2tzIiwic2V0UmVtb3RlVHJhY2tzIiwiaXNDb25uZWN0ZWQiLCJzZXRJc0Nvbm5lY3RlZCIsImVycm9yIiwic2V0RXJyb3IiLCJpc1ZpZGVvRW5hYmxlZCIsInNldElzVmlkZW9FbmFibGVkIiwiaXNBdWRpb0VuYWJsZWQiLCJzZXRJc0F1ZGlvRW5hYmxlZCIsInJvb21SZWYiLCJjb25uZWN0UHJvbWlzZVJlZiIsImxhdGVzdE9wdGlvbnNSZWYiLCJjdXJyZW50IiwiYnVpbGRNZWRpYVN0cmVhbUZyb21Mb2NhbCIsImN1cnJlbnRSb29tIiwicHVibGljYXRpb25zIiwiQXJyYXkiLCJmcm9tIiwibG9jYWxQYXJ0aWNpcGFudCIsInRyYWNrUHVibGljYXRpb25zIiwidmFsdWVzIiwidHJhY2tzIiwiZm9yRWFjaCIsInB1YiIsImxrVHJhY2siLCJ0cmFjayIsIm1lZGlhVHJhY2siLCJtZWRpYVN0cmVhbVRyYWNrIiwicHVzaCIsImxlbmd0aCIsInN0cmVhbSIsIk1lZGlhU3RyZWFtIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJhZGRSZW1vdGVUcmFjayIsInBhcnRpY2lwYW50SWQiLCJwcmV2IiwibmV4dCIsImV4aXN0aW5nIiwiZ2V0IiwiYWxsVHJhY2tzIiwiZ2V0VHJhY2tzIiwidCIsImlkIiwibmV3U3RyZWFtIiwic2V0IiwibG9nIiwibmV3VHJhY2tLaW5kIiwia2luZCIsInRvdGFsVHJhY2tzIiwibWFwU2l6ZSIsInNpemUiLCJyZW1vdmVSZW1vdGVUcmFjayIsInJlbW92ZVRyYWNrIiwiZGVsZXRlIiwiZGlzY29ubmVjdCIsImNvbm5lY3QiLCJjdXJyZW50Um9vbU5hbWUiLCJjdXJyZW50VG9rZW4iLCJjdXJyZW50VXJsIiwic3RhdGUiLCJwcm9taXNlIiwicm9vbU9wdGlvbnMiLCJhZGFwdGl2ZVN0cmVhbSIsImR5bmFjYXN0IiwidmlkZW9DYXB0dXJlRGVmYXVsdHMiLCJyZXNvbHV0aW9uIiwiaDcyMCIsImZhY2luZ01vZGUiLCJwdWJsaXNoRGVmYXVsdHMiLCJ2aWRlb1NpbXVsY2FzdExheWVycyIsImgxODAiLCJoMzYwIiwidmlkZW9Db2RlYyIsImR0eCIsInJlZCIsInN0b3BNaWNUcmFja09uTXV0ZSIsIm5ld1Jvb20iLCJvbiIsIkNvbm5lY3RlZCIsIkRpc2Nvbm5lY3RlZCIsIlRyYWNrU3Vic2NyaWJlZCIsInB1YmxpY2F0aW9uIiwicGFydGljaXBhbnQiLCJpZGVudGl0eSIsInZpZGVvVHJhY2siLCJhdWRpb1RyYWNrIiwiVHJhY2tVbm11dGVkIiwiUGFydGljaXBhbnRDb25uZWN0ZWQiLCJwYXJ0aWNpcGFudFNpZCIsInNpZCIsInRyYWNrQ291bnQiLCJUcmFja1Vuc3Vic2NyaWJlZCIsInVuZGVmaW5lZCIsIlBhcnRpY2lwYW50RGlzY29ubmVjdGVkIiwicmVtb3RlUGFydGljaXBhbnRzIiwidHJhY2tJZCIsInRyYWNrS2luZCIsImVuYWJsZUNhbWVyYUFuZE1pY3JvcGhvbmUiLCJtZXNzYWdlIiwidG9nZ2xlVmlkZW8iLCJlbmFibGVkIiwic2V0Q2FtZXJhRW5hYmxlZCIsInRvZ2dsZUF1ZGlvIiwic2V0TWljcm9waG9uZUVuYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/../../packages/app/hooks/useLiveKit.ts\n"));

/***/ })

});