"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/feed/page",{

/***/ "(app-pages-browser)/../../packages/app/components/FloatingChatWindow.tsx":
/*!************************************************************!*\
  !*** ../../packages/app/components/FloatingChatWindow.tsx ***!
  \************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FloatingChatWindow: function() { return /* binding */ FloatingChatWindow; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/../../node_modules/.pnpm/next@14.0.4_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/.pnpm/next@14.0.4_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"(app-pages-browser)/../../node_modules/.pnpm/next@14.0.4_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/compiled/react-dom/index.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api */ \"(app-pages-browser)/../../packages/app/api.ts\");\n/* harmony import */ var _socket__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../socket */ \"(app-pages-browser)/../../packages/app/socket.ts\");\n/* harmony import */ var _services_chatSocket__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/chatSocket */ \"(app-pages-browser)/../../packages/app/services/chatSocket.ts\");\n/* harmony import */ var _services_callPopup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/callPopup */ \"(app-pages-browser)/../../packages/app/services/callPopup.ts\");\n/* harmony import */ var _styles_floating_chat_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../styles/floating-chat.css */ \"(app-pages-browser)/../../packages/app/styles/floating-chat.css\");\n/* __next_internal_client_entry_do_not_use__ FloatingChatWindow auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nconst FloatingChatWindow = (param)=>{\n    let { userId, userName, userAvatar, isOnline, onClose, onMinimize } = param;\n    var _displayName_charAt;\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [conversationId, setConversationId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isSending, setIsSending] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isUploading, setIsUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [opponentInfo, setOpponentInfo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentUserId, setCurrentUserId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mediaInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Load current user ID\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        (0,_api__WEBPACK_IMPORTED_MODULE_3__.getCurrentUserId)().then(setCurrentUserId).catch(()=>setCurrentUserId(null));\n    }, []);\n    // Sort messages by time\n    const sortMessages = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((msgs)=>{\n        return [\n            ...msgs\n        ].sort((a, b)=>new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n    }, []);\n    // Load or create conversation\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadConversation = async ()=>{\n            try {\n                setIsLoading(true);\n                // Try to create or get conversation\n                const conversation = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.createConversationWithUser)(userId);\n                setConversationId(conversation._id);\n                // Get opponent info\n                const opponent = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.getOpponentInfo)(conversation._id);\n                setOpponentInfo(opponent.user);\n                // Load messages\n                const msgs = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.getMessages)(conversation._id);\n                const messagesArray = Array.isArray(msgs) ? msgs : (msgs === null || msgs === void 0 ? void 0 : msgs.messages) || [];\n                setMessages(sortMessages(messagesArray));\n                // Mark as read after loading messages\n                try {\n                    console.log(\"\\uD83D\\uDCD6 FloatingChat: Marking conversation as read:\", conversation._id);\n                    await (0,_api__WEBPACK_IMPORTED_MODULE_3__.markAsRead)(conversation._id);\n                    console.log(\"✅ FloatingChat: Marked as read successfully\");\n                } catch (err) {\n                    console.error(\"❌ FloatingChat: Failed to mark as read:\", err);\n                }\n            } catch (error) {\n                console.error(\"Failed to load conversation:\", error);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        loadConversation();\n    }, [\n        userId,\n        sortMessages\n    ]);\n    // Socket integration for realtime messages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!conversationId) return;\n        const socket = (0,_socket__WEBPACK_IMPORTED_MODULE_4__.getSocket)();\n        if (!socket) {\n            console.warn(\"Socket not available for floating chat\");\n            return;\n        }\n        // Join conversation room\n        const joinRoom = ()=>{\n            console.log(\"\\uD83D\\uDCF1 FloatingChat: Joining conversation room: conv:\".concat(conversationId));\n            socket.emit(\"conversation:join\", conversationId);\n        };\n        if (socket.connected) {\n            joinRoom();\n        } else {\n            const onConnect = ()=>{\n                joinRoom();\n                socket.off(\"connect\", onConnect);\n            };\n            socket.on(\"connect\", onConnect);\n        }\n        // Register socket handlers\n        const unsubscribe = (0,_services_chatSocket__WEBPACK_IMPORTED_MODULE_5__.registerChatSocket)(socket, conversationId, {\n            onMessageCreated: (message)=>{\n                console.log(\"\\uD83D\\uDCE8 FloatingChat: New message received:\", message._id);\n                setMessages((prev)=>{\n                    const exists = prev.some((item)=>item._id === message._id);\n                    if (exists) return prev;\n                    const newMessages = sortMessages([\n                        ...prev,\n                        message\n                    ]);\n                    // Force scroll after state update\n                    setTimeout(()=>{\n                        if (messagesContainerRef.current) {\n                            messagesContainerRef.current.scrollTop = messagesContainerRef.current.scrollHeight;\n                        }\n                        if (messagesEndRef.current) {\n                            messagesEndRef.current.scrollIntoView({\n                                behavior: \"smooth\",\n                                block: \"end\"\n                            });\n                        }\n                    }, 50);\n                    return newMessages;\n                });\n                // Mark as read when new message arrives (only if message is from opponent)\n                if (message.senderId !== currentUserId) {\n                    console.log(\"\\uD83D\\uDCD6 FloatingChat: Marking as read (new message from opponent)\");\n                    (0,_api__WEBPACK_IMPORTED_MODULE_3__.markAsRead)(conversationId, message._id).then(()=>console.log(\"✅ FloatingChat: Marked as read successfully\")).catch((err)=>console.error(\"❌ FloatingChat: Failed to mark as read:\", err));\n                }\n            },\n            onMessageUpdated: (message)=>{\n                setMessages((prev)=>sortMessages(prev.map((item)=>item._id === message._id ? message : item)));\n            },\n            onMessageDeleted: (messageId)=>{\n                setMessages((prev)=>prev.filter((item)=>item._id !== messageId));\n            }\n        });\n        return ()=>{\n            unsubscribe();\n            if (socket.connected) {\n                socket.emit(\"conversation:leave\", conversationId);\n            }\n        };\n    }, [\n        conversationId,\n        sortMessages,\n        currentUserId\n    ]);\n    // Mark as read when window becomes visible/focused\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!conversationId) return;\n        const handleVisibilityChange = ()=>{\n            if (!document.hidden && conversationId) {\n                console.log(\"\\uD83D\\uDCD6 FloatingChat: Window visible, marking as read\");\n                (0,_api__WEBPACK_IMPORTED_MODULE_3__.markAsRead)(conversationId).then(()=>console.log(\"✅ FloatingChat: Marked as read (visibility change)\")).catch((err)=>console.error(\"❌ FloatingChat: Failed to mark as read:\", err));\n            }\n        };\n        document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n        // Also mark as read when component mounts (window is visible)\n        if (!document.hidden) {\n            (0,_api__WEBPACK_IMPORTED_MODULE_3__.markAsRead)(conversationId).then(()=>console.log(\"✅ FloatingChat: Marked as read (mount)\")).catch((err)=>console.error(\"❌ FloatingChat: Failed to mark as read:\", err));\n        }\n        return ()=>{\n            document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n        };\n    }, [\n        conversationId\n    ]);\n    // Auto scroll to bottom when messages change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (messages.length === 0) return;\n        // Use requestAnimationFrame to ensure DOM is updated\n        requestAnimationFrame(()=>{\n            setTimeout(()=>{\n                if (messagesContainerRef.current) {\n                    const container = messagesContainerRef.current;\n                    const isNearBottom = container.scrollHeight - container.scrollTop - container.clientHeight < 100;\n                    // Only auto-scroll if user is near bottom (not scrolled up)\n                    if (isNearBottom || messages.length <= 5) {\n                        container.scrollTop = container.scrollHeight;\n                    }\n                }\n                if (messagesEndRef.current) {\n                    messagesEndRef.current.scrollIntoView({\n                        behavior: \"smooth\",\n                        block: \"end\"\n                    });\n                }\n            }, 100);\n        });\n    }, [\n        messages\n    ]);\n    // Also scroll when conversation loads or when window opens\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isLoading && messages.length > 0 && messagesContainerRef.current) {\n            requestAnimationFrame(()=>{\n                setTimeout(()=>{\n                    if (messagesContainerRef.current) {\n                        messagesContainerRef.current.scrollTop = messagesContainerRef.current.scrollHeight;\n                    }\n                }, 300);\n            });\n        }\n    }, [\n        isLoading,\n        conversationId\n    ]);\n    const handleSendMessage = async ()=>{\n        if (!inputText.trim() || !conversationId || isSending) return;\n        const text = inputText.trim();\n        setInputText(\"\");\n        setIsSending(true);\n        try {\n            const newMessage = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.createMessage)(conversationId, text);\n            setMessages((prev)=>{\n                const exists = prev.some((msg)=>msg._id === newMessage._id);\n                if (exists) return prev;\n                return sortMessages([\n                    ...prev,\n                    newMessage\n                ]);\n            });\n            // Mark as read after sending (to update read receipts)\n            (0,_api__WEBPACK_IMPORTED_MODULE_3__.markAsRead)(conversationId).then(()=>console.log(\"✅ FloatingChat: Marked as read after sending\")).catch((err)=>console.error(\"❌ FloatingChat: Failed to mark as read:\", err));\n        } catch (error) {\n            console.error(\"Failed to send message:\", error);\n            setInputText(text); // Restore text on error\n        } finally{\n            setIsSending(false);\n        }\n    };\n    const handleUploadMedia = async (event)=>{\n        var _event_target_files;\n        const file = (_event_target_files = event.target.files) === null || _event_target_files === void 0 ? void 0 : _event_target_files[0];\n        event.target.value = \"\";\n        if (!file || !conversationId) return;\n        try {\n            var _baseFile_mime, _baseFile_mime1;\n            setIsUploading(true);\n            const uploaded = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.uploadChatFile)(file);\n            if (!(uploaded === null || uploaded === void 0 ? void 0 : uploaded.url)) {\n                console.warn(\"FloatingChat: Upload did not return URL\");\n                return;\n            }\n            var _uploaded_name, _uploaded_mime, _uploaded_size;\n            const baseFile = {\n                url: uploaded.url,\n                name: (_uploaded_name = uploaded.name) !== null && _uploaded_name !== void 0 ? _uploaded_name : file.name,\n                mime: (_uploaded_mime = uploaded.mime) !== null && _uploaded_mime !== void 0 ? _uploaded_mime : file.type,\n                size: (_uploaded_size = uploaded.size) !== null && _uploaded_size !== void 0 ? _uploaded_size : file.size\n            };\n            const isImageOrVideo = ((_baseFile_mime = baseFile.mime) === null || _baseFile_mime === void 0 ? void 0 : _baseFile_mime.startsWith(\"image/\")) || ((_baseFile_mime1 = baseFile.mime) === null || _baseFile_mime1 === void 0 ? void 0 : _baseFile_mime1.startsWith(\"video/\")) || file.type.startsWith(\"image/\") || file.type.startsWith(\"video/\");\n            const payload = {\n                type: isImageOrVideo ? \"image\" : \"file\",\n                file: baseFile\n            };\n            const newMessage = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.createMessageWithPayload)(conversationId, payload);\n            setMessages((prev)=>{\n                const exists = prev.some((msg)=>msg._id === newMessage._id);\n                if (exists) return prev;\n                return sortMessages([\n                    ...prev,\n                    newMessage\n                ]);\n            });\n        } catch (error) {\n            console.error(\"FloatingChat: Failed to upload/send media:\", error);\n        } finally{\n            setIsUploading(false);\n        }\n    };\n    const handleVideoCall = async ()=>{\n        if (!conversationId) return;\n        try {\n            var _result_call;\n            console.log(\"[FloatingChat] Initiating video call...\", {\n                conversationId,\n                userId\n            });\n            const result = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.initiateCall)(conversationId, \"video\", userId);\n            if (!((_result_call = result.call) === null || _result_call === void 0 ? void 0 : _result_call.id)) {\n                console.error(\"[FloatingChat] No call ID in response:\", result);\n                return;\n            }\n            const callType = result.call.callType === \"sfu\" ? \"sfu\" : \"p2p\";\n            const livekitRoomName = result.call.livekitRoomName;\n            const popup = new _services_callPopup__WEBPACK_IMPORTED_MODULE_6__.CallPopupManager();\n            popup.openCallWindow(result.call.id, conversationId, false, {\n                callType,\n                livekitRoomName\n            });\n        } catch (error) {\n            console.error(\"[FloatingChat] Error initiating video call:\", error);\n        }\n    };\n    const handleAudioCall = async ()=>{\n        if (!conversationId) return;\n        try {\n            var _result_call;\n            console.log(\"[FloatingChat] Initiating audio call...\", {\n                conversationId,\n                userId\n            });\n            const result = await (0,_api__WEBPACK_IMPORTED_MODULE_3__.initiateCall)(conversationId, \"audio\", userId);\n            if (!((_result_call = result.call) === null || _result_call === void 0 ? void 0 : _result_call.id)) {\n                console.error(\"[FloatingChat] No call ID in response:\", result);\n                return;\n            }\n            const callType = result.call.callType === \"sfu\" ? \"sfu\" : \"p2p\";\n            const livekitRoomName = result.call.livekitRoomName;\n            const popup = new _services_callPopup__WEBPACK_IMPORTED_MODULE_6__.CallPopupManager();\n            popup.openCallWindow(result.call.id, conversationId, false, {\n                callType,\n                livekitRoomName\n            });\n        } catch (error) {\n            console.error(\"[FloatingChat] Error initiating audio call:\", error);\n        }\n    };\n    const handleKeyPress = (e)=>{\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            handleSendMessage();\n        }\n    };\n    const displayName = (opponentInfo === null || opponentInfo === void 0 ? void 0 : opponentInfo.name) || userName;\n    const displayAvatar = (opponentInfo === null || opponentInfo === void 0 ? void 0 : opponentInfo.avatar) || userAvatar;\n    return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"floating-chat-window\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"floating-chat-header\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"floating-chat-header-left\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"floating-chat-avatar\",\n                                children: [\n                                    displayAvatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: displayAvatar,\n                                        alt: displayName\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 373,\n                                        columnNumber: 15\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"floating-chat-avatar-fallback\",\n                                        children: (displayName === null || displayName === void 0 ? void 0 : (_displayName_charAt = displayName.charAt(0)) === null || _displayName_charAt === void 0 ? void 0 : _displayName_charAt.toUpperCase()) || \"U\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 375,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    isOnline && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"floating-chat-online-dot\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 379,\n                                        columnNumber: 26\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                lineNumber: 371,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"floating-chat-header-info\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"floating-chat-header-name\",\n                                        children: displayName\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 382,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"floating-chat-header-status\",\n                                        children: isOnline ? \"Đang hoạt động\" : \"Kh\\xf4ng hoạt động\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 383,\n                                        columnNumber: 13\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                lineNumber: 381,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 370,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"floating-chat-header-actions\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"floating-chat-header-btn\",\n                                onClick: onMinimize,\n                                title: \"Thu nhỏ\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    width: \"16\",\n                                    height: \"16\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        d: \"M19 13H5v-2h14v2z\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 395,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                    lineNumber: 394,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                lineNumber: 389,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"floating-chat-header-btn\",\n                                onClick: onClose,\n                                title: \"Đ\\xf3ng\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    width: \"16\",\n                                    height: \"16\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 404,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                    lineNumber: 403,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                lineNumber: 398,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 388,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                lineNumber: 369,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"floating-chat-messages\",\n                ref: messagesContainerRef,\n                children: [\n                    isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"floating-chat-loading\",\n                        children: \"Đang tải...\"\n                    }, void 0, false, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 413,\n                        columnNumber: 11\n                    }, undefined) : !messages || messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"floating-chat-empty\",\n                        children: \"Chưa c\\xf3 tin nhắn n\\xe0o\"\n                    }, void 0, false, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 415,\n                        columnNumber: 11\n                    }, undefined) : (messages || []).map((message)=>{\n                        const isOwn = message.senderId === currentUserId;\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"floating-chat-message \".concat(isOwn ? \"floating-chat-message--own\" : \"\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"floating-chat-message-bubble\",\n                                    children: message.text\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                    lineNumber: 426,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"floating-chat-message-time\",\n                                    children: new Date(message.createdAt).toLocaleTimeString(\"vi-VN\", {\n                                        hour: \"2-digit\",\n                                        minute: \"2-digit\"\n                                    })\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                    lineNumber: 429,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, message._id, true, {\n                            fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                            lineNumber: 420,\n                            columnNumber: 15\n                        }, undefined);\n                    }),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: messagesEndRef\n                    }, void 0, false, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 439,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                lineNumber: 411,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"floating-chat-input-wrapper\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"floating-chat-input-actions\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"floating-chat-input-btn\",\n                                title: \"Th\\xeam ảnh\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    width: \"20\",\n                                    height: \"20\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        d: \"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 447,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                    lineNumber: 446,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                lineNumber: 445,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"floating-chat-input-btn\",\n                                title: \"Th\\xeam emoji\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    width: \"20\",\n                                    height: \"20\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                        lineNumber: 452,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                    lineNumber: 451,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                lineNumber: 450,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 444,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                        className: \"floating-chat-input\",\n                        placeholder: \"Aa\",\n                        value: inputText,\n                        onChange: (e)=>setInputText(e.target.value),\n                        onKeyPress: handleKeyPress,\n                        rows: 1\n                    }, void 0, false, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 456,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"floating-chat-send-btn\",\n                        onClick: handleSendMessage,\n                        disabled: !inputText.trim() || isSending,\n                        title: \"Gửi\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            width: \"20\",\n                            height: \"20\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                d: \"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"\n                            }, void 0, false, {\n                                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                                lineNumber: 471,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                            lineNumber: 470,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                        lineNumber: 464,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n                lineNumber: 443,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"E:\\\\Code\\\\Nodejs\\\\Zola\\\\packages\\\\app\\\\components\\\\FloatingChatWindow.tsx\",\n        lineNumber: 367,\n        columnNumber: 5\n    }, undefined), document.body);\n};\n_s(FloatingChatWindow, \"NQP4l6TG91hDdqLF4mMC2MfobuU=\");\n_c = FloatingChatWindow;\nvar _c;\n$RefreshReg$(_c, \"FloatingChatWindow\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi8uLi9wYWNrYWdlcy9hcHAvY29tcG9uZW50cy9GbG9hdGluZ0NoYXRXaW5kb3cudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUU4RTtBQUNyQztBQWV6QjtBQUNzQjtBQUNzQjtBQUNIO0FBQ3BCO0FBVzlCLE1BQU1pQixxQkFBcUI7UUFBQyxFQUNqQ0MsTUFBTSxFQUNOQyxRQUFRLEVBQ1JDLFVBQVUsRUFDVkMsUUFBUSxFQUNSQyxPQUFPLEVBQ1BDLFVBQVUsRUFDYztRQStVVEM7O0lBOVVmLE1BQU0sQ0FBQ0MsVUFBVUMsWUFBWSxHQUFHekIsK0NBQVFBLENBQVksRUFBRTtJQUN0RCxNQUFNLENBQUMwQixnQkFBZ0JDLGtCQUFrQixHQUFHM0IsK0NBQVFBLENBQWdCO0lBQ3BFLE1BQU0sQ0FBQzRCLFdBQVdDLGFBQWEsR0FBRzdCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQzhCLFdBQVdDLGFBQWEsR0FBRy9CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ2dDLFdBQVdDLGFBQWEsR0FBR2pDLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ2tDLGFBQWFDLGVBQWUsR0FBR25DLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ29DLGNBQWNDLGdCQUFnQixHQUFHckMsK0NBQVFBLENBQXNDO0lBQ3RGLE1BQU0sQ0FBQ3NDLGVBQWVDLGlCQUFpQixHQUFHdkMsK0NBQVFBLENBQWdCO0lBQ2xFLE1BQU13QyxpQkFBaUJ2Qyw2Q0FBTUEsQ0FBaUI7SUFDOUMsTUFBTXdDLHVCQUF1QnhDLDZDQUFNQSxDQUFpQjtJQUNwRCxNQUFNeUMsZ0JBQWdCekMsNkNBQU1BLENBQTBCO0lBRXRELHVCQUF1QjtJQUN2QkYsZ0RBQVNBLENBQUM7UUFDUlUsc0RBQWdCQSxHQUFHa0MsSUFBSSxDQUFDSixrQkFBa0JLLEtBQUssQ0FBQyxJQUFNTCxpQkFBaUI7SUFDekUsR0FBRyxFQUFFO0lBRUwsd0JBQXdCO0lBQ3hC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InNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vcGFja2FnZXMvYXBwL2NvbXBvbmVudHMvRmxvYXRpbmdDaGF0V2luZG93LnRzeD9jMTIxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xyXG5cclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjaywgQ2hhbmdlRXZlbnQgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgY3JlYXRlUG9ydGFsIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xyXG5pbXBvcnQge1xyXG4gIGdldE1lc3NhZ2VzLFxyXG4gIGNyZWF0ZU1lc3NhZ2UsXHJcbiAgY3JlYXRlTWVzc2FnZVdpdGhQYXlsb2FkLFxyXG4gIGNyZWF0ZUNvbnZlcnNhdGlvbldpdGhVc2VyLFxyXG4gIGdldE9wcG9uZW50SW5mbyxcclxuICBnZXRDdXJyZW50VXNlcklkLFxyXG4gIG1hcmtBc1JlYWQsXHJcbiAgTWVzc2FnZSxcclxuICBDb252ZXJzYXRpb24sXHJcbiAgT3Bwb25lbnRJbmZvUmVzcG9uc2UsXHJcbiAgdXBsb2FkQ2hhdEZpbGUsXHJcbiAgaW5pdGlhdGVDYWxsLFxyXG4gIENyZWF0ZU1lc3NhZ2VQYXlsb2FkLFxyXG59IGZyb20gXCIuLi9hcGlcIjtcclxuaW1wb3J0IHsgZ2V0U29ja2V0IH0gZnJvbSBcIi4uL3NvY2tldFwiO1xyXG5pbXBvcnQgeyByZWdpc3RlckNoYXRTb2NrZXQgfSBmcm9tIFwiLi4vc2VydmljZXMvY2hhdFNvY2tldFwiO1xyXG5pbXBvcnQgeyBDYWxsUG9wdXBNYW5hZ2VyIH0gZnJvbSBcIi4uL3NlcnZpY2VzL2NhbGxQb3B1cFwiO1xyXG5pbXBvcnQgXCIuLi9zdHlsZXMvZmxvYXRpbmctY2hhdC5jc3NcIjtcclxuXHJcbmludGVyZmFjZSBGbG9hdGluZ0NoYXRXaW5kb3dQcm9wcyB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgdXNlck5hbWU6IHN0cmluZztcclxuICB1c2VyQXZhdGFyPzogc3RyaW5nO1xyXG4gIGlzT25saW5lPzogYm9vbGVhbjtcclxuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xyXG4gIG9uTWluaW1pemU/OiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRmxvYXRpbmdDaGF0V2luZG93ID0gKHtcclxuICB1c2VySWQsXHJcbiAgdXNlck5hbWUsXHJcbiAgdXNlckF2YXRhcixcclxuICBpc09ubGluZSxcclxuICBvbkNsb3NlLFxyXG4gIG9uTWluaW1pemUsXHJcbn06IEZsb2F0aW5nQ2hhdFdpbmRvd1Byb3BzKSA9PiB7XHJcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcclxuICBjb25zdCBbY29udmVyc2F0aW9uSWQsIHNldENvbnZlcnNhdGlvbklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtpbnB1dFRleHQsIHNldElucHV0VGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2lzU2VuZGluZywgc2V0SXNTZW5kaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNVcGxvYWRpbmcsIHNldElzVXBsb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbb3Bwb25lbnRJbmZvLCBzZXRPcHBvbmVudEluZm9dID0gdXNlU3RhdGU8T3Bwb25lbnRJbmZvUmVzcG9uc2VbXCJ1c2VyXCJdIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW2N1cnJlbnRVc2VySWQsIHNldEN1cnJlbnRVc2VySWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xyXG4gIGNvbnN0IG1lc3NhZ2VzQ29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcclxuICBjb25zdCBtZWRpYUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsPihudWxsKTtcclxuXHJcbiAgLy8gTG9hZCBjdXJyZW50IHVzZXIgSURcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZ2V0Q3VycmVudFVzZXJJZCgpLnRoZW4oc2V0Q3VycmVudFVzZXJJZCkuY2F0Y2goKCkgPT4gc2V0Q3VycmVudFVzZXJJZChudWxsKSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBTb3J0IG1lc3NhZ2VzIGJ5IHRpbWVcclxuICBjb25zdCBzb3J0TWVzc2FnZXMgPSB1c2VDYWxsYmFjaygobXNnczogTWVzc2FnZVtdKSA9PiB7XHJcbiAgICByZXR1cm4gWy4uLm1zZ3NdLnNvcnQoXHJcbiAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKVxyXG4gICAgKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIExvYWQgb3IgY3JlYXRlIGNvbnZlcnNhdGlvblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBsb2FkQ29udmVyc2F0aW9uID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIG9yIGdldCBjb252ZXJzYXRpb25cclxuICAgICAgICBjb25zdCBjb252ZXJzYXRpb24gPSBhd2FpdCBjcmVhdGVDb252ZXJzYXRpb25XaXRoVXNlcih1c2VySWQpO1xyXG4gICAgICAgIHNldENvbnZlcnNhdGlvbklkKGNvbnZlcnNhdGlvbi5faWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdldCBvcHBvbmVudCBpbmZvXHJcbiAgICAgICAgY29uc3Qgb3Bwb25lbnQgPSBhd2FpdCBnZXRPcHBvbmVudEluZm8oY29udmVyc2F0aW9uLl9pZCk7XHJcbiAgICAgICAgc2V0T3Bwb25lbnRJbmZvKG9wcG9uZW50LnVzZXIpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIG1lc3NhZ2VzXHJcbiAgICAgICAgY29uc3QgbXNncyA9IGF3YWl0IGdldE1lc3NhZ2VzKGNvbnZlcnNhdGlvbi5faWQpO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzQXJyYXkgPSBBcnJheS5pc0FycmF5KG1zZ3MpID8gbXNncyA6IChtc2dzIGFzIGFueSk/Lm1lc3NhZ2VzIHx8IFtdO1xyXG4gICAgICAgIHNldE1lc3NhZ2VzKHNvcnRNZXNzYWdlcyhtZXNzYWdlc0FycmF5KSk7XHJcblxyXG4gICAgICAgIC8vIE1hcmsgYXMgcmVhZCBhZnRlciBsb2FkaW5nIG1lc3NhZ2VzXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+TliBGbG9hdGluZ0NoYXQ6IE1hcmtpbmcgY29udmVyc2F0aW9uIGFzIHJlYWQ6XCIsIGNvbnZlcnNhdGlvbi5faWQpO1xyXG4gICAgICAgICAgYXdhaXQgbWFya0FzUmVhZChjb252ZXJzYXRpb24uX2lkKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEZsb2F0aW5nQ2hhdDogTWFya2VkIGFzIHJlYWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBGbG9hdGluZ0NoYXQ6IEZhaWxlZCB0byBtYXJrIGFzIHJlYWQ6XCIsIGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxvYWRDb252ZXJzYXRpb24oKTtcclxuICB9LCBbdXNlcklkLCBzb3J0TWVzc2FnZXNdKTtcclxuXHJcbiAgLy8gU29ja2V0IGludGVncmF0aW9uIGZvciByZWFsdGltZSBtZXNzYWdlc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWNvbnZlcnNhdGlvbklkKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IHNvY2tldCA9IGdldFNvY2tldCgpO1xyXG4gICAgaWYgKCFzb2NrZXQpIHtcclxuICAgICAgY29uc29sZS53YXJuKFwiU29ja2V0IG5vdCBhdmFpbGFibGUgZm9yIGZsb2F0aW5nIGNoYXRcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBKb2luIGNvbnZlcnNhdGlvbiByb29tXHJcbiAgICBjb25zdCBqb2luUm9vbSA9ICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYPCfk7EgRmxvYXRpbmdDaGF0OiBKb2luaW5nIGNvbnZlcnNhdGlvbiByb29tOiBjb252OiR7Y29udmVyc2F0aW9uSWR9YCk7XHJcbiAgICAgIHNvY2tldC5lbWl0KFwiY29udmVyc2F0aW9uOmpvaW5cIiwgY29udmVyc2F0aW9uSWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoc29ja2V0LmNvbm5lY3RlZCkge1xyXG4gICAgICBqb2luUm9vbSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgb25Db25uZWN0ID0gKCkgPT4ge1xyXG4gICAgICAgIGpvaW5Sb29tKCk7XHJcbiAgICAgICAgc29ja2V0Lm9mZihcImNvbm5lY3RcIiwgb25Db25uZWN0KTtcclxuICAgICAgfTtcclxuICAgICAgc29ja2V0Lm9uKFwiY29ubmVjdFwiLCBvbkNvbm5lY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlZ2lzdGVyIHNvY2tldCBoYW5kbGVyc1xyXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSByZWdpc3RlckNoYXRTb2NrZXQoc29ja2V0LCBjb252ZXJzYXRpb25JZCwge1xyXG4gICAgICBvbk1lc3NhZ2VDcmVhdGVkOiAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TqCBGbG9hdGluZ0NoYXQ6IE5ldyBtZXNzYWdlIHJlY2VpdmVkOlwiLCBtZXNzYWdlLl9pZCk7XHJcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IHByZXYuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IG1lc3NhZ2UuX2lkKTtcclxuICAgICAgICAgIGlmIChleGlzdHMpIHJldHVybiBwcmV2O1xyXG4gICAgICAgICAgY29uc3QgbmV3TWVzc2FnZXMgPSBzb3J0TWVzc2FnZXMoWy4uLnByZXYsIG1lc3NhZ2VdKTtcclxuICAgICAgICAgIC8vIEZvcmNlIHNjcm9sbCBhZnRlciBzdGF0ZSB1cGRhdGVcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZXNDb250YWluZXJSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIsIGJsb2NrOiBcImVuZFwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgICByZXR1cm4gbmV3TWVzc2FnZXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gTWFyayBhcyByZWFkIHdoZW4gbmV3IG1lc3NhZ2UgYXJyaXZlcyAob25seSBpZiBtZXNzYWdlIGlzIGZyb20gb3Bwb25lbnQpXHJcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVySWQgIT09IGN1cnJlbnRVc2VySWQpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+TliBGbG9hdGluZ0NoYXQ6IE1hcmtpbmcgYXMgcmVhZCAobmV3IG1lc3NhZ2UgZnJvbSBvcHBvbmVudClcIik7XHJcbiAgICAgICAgICBtYXJrQXNSZWFkKGNvbnZlcnNhdGlvbklkLCBtZXNzYWdlLl9pZClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coXCLinIUgRmxvYXRpbmdDaGF0OiBNYXJrZWQgYXMgcmVhZCBzdWNjZXNzZnVsbHlcIikpXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwi4p2MIEZsb2F0aW5nQ2hhdDogRmFpbGVkIHRvIG1hcmsgYXMgcmVhZDpcIiwgZXJyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBvbk1lc3NhZ2VVcGRhdGVkOiAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PlxyXG4gICAgICAgICAgc29ydE1lc3NhZ2VzKFxyXG4gICAgICAgICAgICBwcmV2Lm1hcCgoaXRlbSkgPT4gKGl0ZW0uX2lkID09PSBtZXNzYWdlLl9pZCA/IG1lc3NhZ2UgOiBpdGVtKSlcclxuICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICB9LFxyXG4gICAgICBvbk1lc3NhZ2VEZWxldGVkOiAobWVzc2FnZUlkKSA9PiB7XHJcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHByZXYuZmlsdGVyKChpdGVtKSA9PiBpdGVtLl9pZCAhPT0gbWVzc2FnZUlkKSk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgICBpZiAoc29ja2V0LmNvbm5lY3RlZCkge1xyXG4gICAgICAgIHNvY2tldC5lbWl0KFwiY29udmVyc2F0aW9uOmxlYXZlXCIsIGNvbnZlcnNhdGlvbklkKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbY29udmVyc2F0aW9uSWQsIHNvcnRNZXNzYWdlcywgY3VycmVudFVzZXJJZF0pO1xyXG5cclxuICAvLyBNYXJrIGFzIHJlYWQgd2hlbiB3aW5kb3cgYmVjb21lcyB2aXNpYmxlL2ZvY3VzZWRcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFjb252ZXJzYXRpb25JZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuICYmIGNvbnZlcnNhdGlvbklkKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5OWIEZsb2F0aW5nQ2hhdDogV2luZG93IHZpc2libGUsIG1hcmtpbmcgYXMgcmVhZFwiKTtcclxuICAgICAgICBtYXJrQXNSZWFkKGNvbnZlcnNhdGlvbklkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coXCLinIUgRmxvYXRpbmdDaGF0OiBNYXJrZWQgYXMgcmVhZCAodmlzaWJpbGl0eSBjaGFuZ2UpXCIpKVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCLinYwgRmxvYXRpbmdDaGF0OiBGYWlsZWQgdG8gbWFyayBhcyByZWFkOlwiLCBlcnIpKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcclxuICAgIC8vIEFsc28gbWFyayBhcyByZWFkIHdoZW4gY29tcG9uZW50IG1vdW50cyAod2luZG93IGlzIHZpc2libGUpXHJcbiAgICBpZiAoIWRvY3VtZW50LmhpZGRlbikge1xyXG4gICAgICBtYXJrQXNSZWFkKGNvbnZlcnNhdGlvbklkKVxyXG4gICAgICAgIC50aGVuKCgpID0+IGNvbnNvbGUubG9nKFwi4pyFIEZsb2F0aW5nQ2hhdDogTWFya2VkIGFzIHJlYWQgKG1vdW50KVwiKSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIuKdjCBGbG9hdGluZ0NoYXQ6IEZhaWxlZCB0byBtYXJrIGFzIHJlYWQ6XCIsIGVycikpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xyXG4gICAgfTtcclxuICB9LCBbY29udmVyc2F0aW9uSWRdKTtcclxuXHJcbiAgLy8gQXV0byBzY3JvbGwgdG8gYm90dG9tIHdoZW4gbWVzc2FnZXMgY2hhbmdlXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgIFxyXG4gICAgLy8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSB0byBlbnN1cmUgRE9NIGlzIHVwZGF0ZWRcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGlmIChtZXNzYWdlc0NvbnRhaW5lclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBtZXNzYWdlc0NvbnRhaW5lclJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgY29uc3QgaXNOZWFyQm90dG9tID0gY29udGFpbmVyLnNjcm9sbEhlaWdodCAtIGNvbnRhaW5lci5zY3JvbGxUb3AgLSBjb250YWluZXIuY2xpZW50SGVpZ2h0IDwgMTAwO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBPbmx5IGF1dG8tc2Nyb2xsIGlmIHVzZXIgaXMgbmVhciBib3R0b20gKG5vdCBzY3JvbGxlZCB1cClcclxuICAgICAgICAgIGlmIChpc05lYXJCb3R0b20gfHwgbWVzc2FnZXMubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtZXNzYWdlc0VuZFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIsIGJsb2NrOiBcImVuZFwiIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgMTAwKTtcclxuICAgIH0pO1xyXG4gIH0sIFttZXNzYWdlc10pO1xyXG5cclxuICAvLyBBbHNvIHNjcm9sbCB3aGVuIGNvbnZlcnNhdGlvbiBsb2FkcyBvciB3aGVuIHdpbmRvdyBvcGVuc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWlzTG9hZGluZyAmJiBtZXNzYWdlcy5sZW5ndGggPiAwICYmIG1lc3NhZ2VzQ29udGFpbmVyUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGlmIChtZXNzYWdlc0NvbnRhaW5lclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSwgW2lzTG9hZGluZywgY29udmVyc2F0aW9uSWRdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWlucHV0VGV4dC50cmltKCkgfHwgIWNvbnZlcnNhdGlvbklkIHx8IGlzU2VuZGluZykgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHRleHQgPSBpbnB1dFRleHQudHJpbSgpO1xyXG4gICAgc2V0SW5wdXRUZXh0KFwiXCIpO1xyXG4gICAgc2V0SXNTZW5kaW5nKHRydWUpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG5ld01lc3NhZ2UgPSBhd2FpdCBjcmVhdGVNZXNzYWdlKGNvbnZlcnNhdGlvbklkLCB0ZXh0KTtcclxuICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcclxuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2LnNvbWUoKG1zZykgPT4gbXNnLl9pZCA9PT0gbmV3TWVzc2FnZS5faWQpO1xyXG4gICAgICAgIGlmIChleGlzdHMpIHJldHVybiBwcmV2O1xyXG4gICAgICAgIHJldHVybiBzb3J0TWVzc2FnZXMoWy4uLnByZXYsIG5ld01lc3NhZ2VdKTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIE1hcmsgYXMgcmVhZCBhZnRlciBzZW5kaW5nICh0byB1cGRhdGUgcmVhZCByZWNlaXB0cylcclxuICAgICAgbWFya0FzUmVhZChjb252ZXJzYXRpb25JZClcclxuICAgICAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZyhcIuKchSBGbG9hdGluZ0NoYXQ6IE1hcmtlZCBhcyByZWFkIGFmdGVyIHNlbmRpbmdcIikpXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCLinYwgRmxvYXRpbmdDaGF0OiBGYWlsZWQgdG8gbWFyayBhcyByZWFkOlwiLCBlcnIpKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc2VuZCBtZXNzYWdlOlwiLCBlcnJvcik7XHJcbiAgICAgIHNldElucHV0VGV4dCh0ZXh0KTsgLy8gUmVzdG9yZSB0ZXh0IG9uIGVycm9yXHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc1NlbmRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVVwbG9hZE1lZGlhID0gYXN5bmMgKGV2ZW50OiBDaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xyXG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlcz8uWzBdO1xyXG4gICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gXCJcIjtcclxuICAgIGlmICghZmlsZSB8fCAhY29udmVyc2F0aW9uSWQpIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRJc1VwbG9hZGluZyh0cnVlKTtcclxuICAgICAgY29uc3QgdXBsb2FkZWQgPSBhd2FpdCB1cGxvYWRDaGF0RmlsZShmaWxlKTtcclxuICAgICAgaWYgKCF1cGxvYWRlZD8udXJsKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFwiRmxvYXRpbmdDaGF0OiBVcGxvYWQgZGlkIG5vdCByZXR1cm4gVVJMXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYmFzZUZpbGUgPSB7XHJcbiAgICAgICAgdXJsOiB1cGxvYWRlZC51cmwsXHJcbiAgICAgICAgbmFtZTogdXBsb2FkZWQubmFtZSA/PyBmaWxlLm5hbWUsXHJcbiAgICAgICAgbWltZTogdXBsb2FkZWQubWltZSA/PyBmaWxlLnR5cGUsXHJcbiAgICAgICAgc2l6ZTogdXBsb2FkZWQuc2l6ZSA/PyBmaWxlLnNpemUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBpc0ltYWdlT3JWaWRlbyA9XHJcbiAgICAgICAgYmFzZUZpbGUubWltZT8uc3RhcnRzV2l0aChcImltYWdlL1wiKSB8fFxyXG4gICAgICAgIGJhc2VGaWxlLm1pbWU/LnN0YXJ0c1dpdGgoXCJ2aWRlby9cIikgfHxcclxuICAgICAgICBmaWxlLnR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKSB8fFxyXG4gICAgICAgIGZpbGUudHlwZS5zdGFydHNXaXRoKFwidmlkZW8vXCIpO1xyXG5cclxuICAgICAgY29uc3QgcGF5bG9hZDogQ3JlYXRlTWVzc2FnZVBheWxvYWQgPSB7XHJcbiAgICAgICAgdHlwZTogaXNJbWFnZU9yVmlkZW8gPyBcImltYWdlXCIgOiBcImZpbGVcIixcclxuICAgICAgICBmaWxlOiBiYXNlRmlsZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG5ld01lc3NhZ2UgPSBhd2FpdCBjcmVhdGVNZXNzYWdlV2l0aFBheWxvYWQoY29udmVyc2F0aW9uSWQsIHBheWxvYWQpO1xyXG5cclxuICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcclxuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2LnNvbWUoKG1zZykgPT4gbXNnLl9pZCA9PT0gbmV3TWVzc2FnZS5faWQpO1xyXG4gICAgICAgIGlmIChleGlzdHMpIHJldHVybiBwcmV2O1xyXG4gICAgICAgIHJldHVybiBzb3J0TWVzc2FnZXMoWy4uLnByZXYsIG5ld01lc3NhZ2VdKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRmxvYXRpbmdDaGF0OiBGYWlsZWQgdG8gdXBsb2FkL3NlbmQgbWVkaWE6XCIsIGVycm9yKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzVXBsb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVWaWRlb0NhbGwgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWNvbnZlcnNhdGlvbklkKSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coXCJbRmxvYXRpbmdDaGF0XSBJbml0aWF0aW5nIHZpZGVvIGNhbGwuLi5cIiwgeyBjb252ZXJzYXRpb25JZCwgdXNlcklkIH0pO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbml0aWF0ZUNhbGwoY29udmVyc2F0aW9uSWQsIFwidmlkZW9cIiwgdXNlcklkKTtcclxuICAgICAgaWYgKCFyZXN1bHQuY2FsbD8uaWQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiW0Zsb2F0aW5nQ2hhdF0gTm8gY2FsbCBJRCBpbiByZXNwb25zZTpcIiwgcmVzdWx0KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNhbGxUeXBlID0gcmVzdWx0LmNhbGwuY2FsbFR5cGUgPT09IFwic2Z1XCIgPyBcInNmdVwiIDogXCJwMnBcIjtcclxuICAgICAgY29uc3QgbGl2ZWtpdFJvb21OYW1lID0gcmVzdWx0LmNhbGwubGl2ZWtpdFJvb21OYW1lO1xyXG5cclxuICAgICAgY29uc3QgcG9wdXAgPSBuZXcgQ2FsbFBvcHVwTWFuYWdlcigpO1xyXG4gICAgICBwb3B1cC5vcGVuQ2FsbFdpbmRvdyhyZXN1bHQuY2FsbC5pZCwgY29udmVyc2F0aW9uSWQsIGZhbHNlLCB7XHJcbiAgICAgICAgY2FsbFR5cGUsXHJcbiAgICAgICAgbGl2ZWtpdFJvb21OYW1lLFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbRmxvYXRpbmdDaGF0XSBFcnJvciBpbml0aWF0aW5nIHZpZGVvIGNhbGw6XCIsIGVycm9yKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVBdWRpb0NhbGwgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWNvbnZlcnNhdGlvbklkKSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coXCJbRmxvYXRpbmdDaGF0XSBJbml0aWF0aW5nIGF1ZGlvIGNhbGwuLi5cIiwgeyBjb252ZXJzYXRpb25JZCwgdXNlcklkIH0pO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbml0aWF0ZUNhbGwoY29udmVyc2F0aW9uSWQsIFwiYXVkaW9cIiwgdXNlcklkKTtcclxuICAgICAgaWYgKCFyZXN1bHQuY2FsbD8uaWQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiW0Zsb2F0aW5nQ2hhdF0gTm8gY2FsbCBJRCBpbiByZXNwb25zZTpcIiwgcmVzdWx0KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNhbGxUeXBlID0gcmVzdWx0LmNhbGwuY2FsbFR5cGUgPT09IFwic2Z1XCIgPyBcInNmdVwiIDogXCJwMnBcIjtcclxuICAgICAgY29uc3QgbGl2ZWtpdFJvb21OYW1lID0gcmVzdWx0LmNhbGwubGl2ZWtpdFJvb21OYW1lO1xyXG5cclxuICAgICAgY29uc3QgcG9wdXAgPSBuZXcgQ2FsbFBvcHVwTWFuYWdlcigpO1xyXG4gICAgICBwb3B1cC5vcGVuQ2FsbFdpbmRvdyhyZXN1bHQuY2FsbC5pZCwgY29udmVyc2F0aW9uSWQsIGZhbHNlLCB7XHJcbiAgICAgICAgY2FsbFR5cGUsXHJcbiAgICAgICAgbGl2ZWtpdFJvb21OYW1lLFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbRmxvYXRpbmdDaGF0XSBFcnJvciBpbml0aWF0aW5nIGF1ZGlvIGNhbGw6XCIsIGVycm9yKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxUZXh0QXJlYUVsZW1lbnQ+KSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGhhbmRsZVNlbmRNZXNzYWdlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGlzcGxheU5hbWUgPSBvcHBvbmVudEluZm8/Lm5hbWUgfHwgdXNlck5hbWU7XHJcbiAgY29uc3QgZGlzcGxheUF2YXRhciA9IG9wcG9uZW50SW5mbz8uYXZhdGFyIHx8IHVzZXJBdmF0YXI7XHJcblxyXG4gIHJldHVybiBjcmVhdGVQb3J0YWwoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtd2luZG93XCI+XHJcbiAgICAgIHsvKiBIZWFkZXIgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxvYXRpbmctY2hhdC1oZWFkZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtaGVhZGVyLWxlZnRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxvYXRpbmctY2hhdC1hdmF0YXJcIj5cclxuICAgICAgICAgICAge2Rpc3BsYXlBdmF0YXIgPyAoXHJcbiAgICAgICAgICAgICAgPGltZyBzcmM9e2Rpc3BsYXlBdmF0YXJ9IGFsdD17ZGlzcGxheU5hbWV9IC8+XHJcbiAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG9hdGluZy1jaGF0LWF2YXRhci1mYWxsYmFja1wiPlxyXG4gICAgICAgICAgICAgICAge2Rpc3BsYXlOYW1lPy5jaGFyQXQoMCk/LnRvVXBwZXJDYXNlKCkgfHwgXCJVXCJ9XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIHtpc09ubGluZSAmJiA8c3BhbiBjbGFzc05hbWU9XCJmbG9hdGluZy1jaGF0LW9ubGluZS1kb3RcIiAvPn1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG9hdGluZy1jaGF0LWhlYWRlci1pbmZvXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtaGVhZGVyLW5hbWVcIj57ZGlzcGxheU5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbG9hdGluZy1jaGF0LWhlYWRlci1zdGF0dXNcIj5cclxuICAgICAgICAgICAgICB7aXNPbmxpbmUgPyBcIsSQYW5nIGhv4bqhdCDEkeG7mW5nXCIgOiBcIktow7RuZyBob+G6oXQgxJHhu5luZ1wifVxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtaGVhZGVyLWFjdGlvbnNcIj5cclxuICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxvYXRpbmctY2hhdC1oZWFkZXItYnRuXCJcclxuICAgICAgICAgICAgb25DbGljaz17b25NaW5pbWl6ZX1cclxuICAgICAgICAgICAgdGl0bGU9XCJUaHUgbmjhu49cIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XHJcbiAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOSAxM0g1di0yaDE0djJ6XCIgLz5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxvYXRpbmctY2hhdC1oZWFkZXItYnRuXCJcclxuICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cclxuICAgICAgICAgICAgdGl0bGU9XCLEkMOzbmdcIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XHJcbiAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOSA2LjQxTDE3LjU5IDUgMTIgMTAuNTkgNi40MSA1IDUgNi40MSAxMC41OSAxMiA1IDE3LjU5IDYuNDEgMTkgMTIgMTMuNDEgMTcuNTkgMTkgMTkgMTcuNTkgMTMuNDEgMTJ6XCIgLz5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7LyogTWVzc2FnZXMgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxvYXRpbmctY2hhdC1tZXNzYWdlc1wiIHJlZj17bWVzc2FnZXNDb250YWluZXJSZWZ9PlxyXG4gICAgICAgIHtpc0xvYWRpbmcgPyAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtbG9hZGluZ1wiPsSQYW5nIHThuqNpLi4uPC9kaXY+XHJcbiAgICAgICAgKSA6ICFtZXNzYWdlcyB8fCBtZXNzYWdlcy5sZW5ndGggPT09IDAgPyAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtZW1wdHlcIj5DaMawYSBjw7MgdGluIG5o4bqvbiBuw6BvPC9kaXY+XHJcbiAgICAgICAgKSA6IChcclxuICAgICAgICAgIChtZXNzYWdlcyB8fCBbXSkubWFwKChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzT3duID0gbWVzc2FnZS5zZW5kZXJJZCA9PT0gY3VycmVudFVzZXJJZDtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBrZXk9e21lc3NhZ2UuX2lkfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxvYXRpbmctY2hhdC1tZXNzYWdlICR7XHJcbiAgICAgICAgICAgICAgICAgIGlzT3duID8gXCJmbG9hdGluZy1jaGF0LW1lc3NhZ2UtLW93blwiIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG9hdGluZy1jaGF0LW1lc3NhZ2UtYnViYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnRleHR9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxvYXRpbmctY2hhdC1tZXNzYWdlLXRpbWVcIj5cclxuICAgICAgICAgICAgICAgICAge25ldyBEYXRlKG1lc3NhZ2UuY3JlYXRlZEF0KS50b0xvY2FsZVRpbWVTdHJpbmcoXCJ2aS1WTlwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcclxuICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKX1cclxuICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgey8qIElucHV0ICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtaW5wdXQtd3JhcHBlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxvYXRpbmctY2hhdC1pbnB1dC1hY3Rpb25zXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtaW5wdXQtYnRuXCIgdGl0bGU9XCJUaMOqbSDhuqNuaFwiPlxyXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XHJcbiAgICAgICAgICAgICAgPHBhdGggZD1cIk0yMSAxOVY1YzAtMS4xLS45LTItMi0ySDVjLTEuMSAwLTIgLjktMiAydjE0YzAgMS4xLjkgMiAyIDJoMTRjMS4xIDAgMi0uOSAyLTJ6TTguNSAxMy41bDIuNSAzLjAxTDE0LjUgMTJsNC41IDZINWwzLjUtNC41elwiIC8+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtaW5wdXQtYnRuXCIgdGl0bGU9XCJUaMOqbSBlbW9qaVwiPlxyXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XHJcbiAgICAgICAgICAgICAgPHBhdGggZD1cIk0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0tMiAxNWwtNS01IDEuNDEtMS40MUwxMCAxNC4xN2w3LjU5LTcuNTlMMTkgOGwtOSA5elwiIC8+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHRleHRhcmVhXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJmbG9hdGluZy1jaGF0LWlucHV0XCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQWFcIlxyXG4gICAgICAgICAgdmFsdWU9e2lucHV0VGV4dH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SW5wdXRUZXh0KGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgIG9uS2V5UHJlc3M9e2hhbmRsZUtleVByZXNzfVxyXG4gICAgICAgICAgcm93cz17MX1cclxuICAgICAgICAvPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImZsb2F0aW5nLWNoYXQtc2VuZC1idG5cIlxyXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlU2VuZE1lc3NhZ2V9XHJcbiAgICAgICAgICBkaXNhYmxlZD17IWlucHV0VGV4dC50cmltKCkgfHwgaXNTZW5kaW5nfVxyXG4gICAgICAgICAgdGl0bGU9XCJH4butaVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxyXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTIuMDEgMjFMMjMgMTIgMi4wMSAzIDIgMTBsMTUgMi0xNSAyelwiIC8+XHJcbiAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj4sXHJcbiAgICBkb2N1bWVudC5ib2R5XHJcbiAgKTtcclxufTtcclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUNhbGxiYWNrIiwiY3JlYXRlUG9ydGFsIiwiZ2V0TWVzc2FnZXMiLCJjcmVhdGVNZXNzYWdlIiwiY3JlYXRlTWVzc2FnZVdpdGhQYXlsb2FkIiwiY3JlYXRlQ29udmVyc2F0aW9uV2l0aFVzZXIiLCJnZXRPcHBvbmVudEluZm8iLCJnZXRDdXJyZW50VXNlcklkIiwibWFya0FzUmVhZCIsInVwbG9hZENoYXRGaWxlIiwiaW5pdGlhdGVDYWxsIiwiZ2V0U29ja2V0IiwicmVnaXN0ZXJDaGF0U29ja2V0IiwiQ2FsbFBvcHVwTWFuYWdlciIsIkZsb2F0aW5nQ2hhdFdpbmRvdyIsInVzZXJJZCIsInVzZXJOYW1lIiwidXNlckF2YXRhciIsImlzT25saW5lIiwib25DbG9zZSIsIm9uTWluaW1pemUiLCJkaXNwbGF5TmFtZSIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJjb252ZXJzYXRpb25JZCIsInNldENvbnZlcnNhdGlvbklkIiwiaW5wdXRUZXh0Iiwic2V0SW5wdXRUZXh0IiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiaXNTZW5kaW5nIiwic2V0SXNTZW5kaW5nIiwiaXNVcGxvYWRpbmciLCJzZXRJc1VwbG9hZGluZyIsIm9wcG9uZW50SW5mbyIsInNldE9wcG9uZW50SW5mbyIsImN1cnJlbnRVc2VySWQiLCJzZXRDdXJyZW50VXNlcklkIiwibWVzc2FnZXNFbmRSZWYiLCJtZXNzYWdlc0NvbnRhaW5lclJlZiIsIm1lZGlhSW5wdXRSZWYiLCJ0aGVuIiwiY2F0Y2giLCJzb3J0TWVzc2FnZXMiLCJtc2dzIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsImNyZWF0ZWRBdCIsImdldFRpbWUiLCJsb2FkQ29udmVyc2F0aW9uIiwiY29udmVyc2F0aW9uIiwiX2lkIiwib3Bwb25lbnQiLCJ1c2VyIiwibWVzc2FnZXNBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJlcnJvciIsInNvY2tldCIsIndhcm4iLCJqb2luUm9vbSIsImVtaXQiLCJjb25uZWN0ZWQiLCJvbkNvbm5lY3QiLCJvZmYiLCJvbiIsInVuc3Vic2NyaWJlIiwib25NZXNzYWdlQ3JlYXRlZCIsIm1lc3NhZ2UiLCJwcmV2IiwiZXhpc3RzIiwic29tZSIsIml0ZW0iLCJuZXdNZXNzYWdlcyIsInNldFRpbWVvdXQiLCJjdXJyZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImJsb2NrIiwic2VuZGVySWQiLCJvbk1lc3NhZ2VVcGRhdGVkIiwibWFwIiwib25NZXNzYWdlRGVsZXRlZCIsIm1lc3NhZ2VJZCIsImZpbHRlciIsImhhbmRsZVZpc2liaWxpdHlDaGFuZ2UiLCJkb2N1bWVudCIsImhpZGRlbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibGVuZ3RoIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY29udGFpbmVyIiwiaXNOZWFyQm90dG9tIiwiY2xpZW50SGVpZ2h0IiwiaGFuZGxlU2VuZE1lc3NhZ2UiLCJ0cmltIiwidGV4dCIsIm5ld01lc3NhZ2UiLCJtc2ciLCJoYW5kbGVVcGxvYWRNZWRpYSIsImV2ZW50IiwiZmlsZSIsInRhcmdldCIsImZpbGVzIiwidmFsdWUiLCJiYXNlRmlsZSIsInVwbG9hZGVkIiwidXJsIiwibmFtZSIsIm1pbWUiLCJ0eXBlIiwic2l6ZSIsImlzSW1hZ2VPclZpZGVvIiwic3RhcnRzV2l0aCIsInBheWxvYWQiLCJoYW5kbGVWaWRlb0NhbGwiLCJyZXN1bHQiLCJjYWxsIiwiaWQiLCJjYWxsVHlwZSIsImxpdmVraXRSb29tTmFtZSIsInBvcHVwIiwib3BlbkNhbGxXaW5kb3ciLCJoYW5kbGVBdWRpb0NhbGwiLCJoYW5kbGVLZXlQcmVzcyIsImUiLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiZGlzcGxheUF2YXRhciIsImF2YXRhciIsImRpdiIsImNsYXNzTmFtZSIsImltZyIsInNyYyIsImFsdCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3BhbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJ0aXRsZSIsInN2ZyIsIndpZHRoIiwiaGVpZ2h0Iiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZCIsInJlZiIsImlzT3duIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsInRleHRhcmVhIiwicGxhY2Vob2xkZXIiLCJvbkNoYW5nZSIsIm9uS2V5UHJlc3MiLCJyb3dzIiwiZGlzYWJsZWQiLCJib2R5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/../../packages/app/components/FloatingChatWindow.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/../../packages/app/services/callPopup.ts":
/*!************************************************!*\
  !*** ../../packages/app/services/callPopup.ts ***!
  \************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CallPopupManager: function() { return /* binding */ CallPopupManager; }\n/* harmony export */ });\nclass CallPopupManager {\n    openCallWindow(callId, conversationId) {\n        let isIncoming = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false, options = arguments.length > 3 ? arguments[3] : void 0;\n        // Service này chỉ dùng cho web; nếu không có window thì bỏ qua\n        if (false) {}\n        const callParams = new URLSearchParams({\n            callId,\n            conversationId,\n            isIncoming: isIncoming.toString()\n        });\n        if (options === null || options === void 0 ? void 0 : options.callType) {\n            callParams.set(\"callType\", options.callType);\n        }\n        if (options === null || options === void 0 ? void 0 : options.livekitRoomName) {\n            callParams.set(\"livekitRoomName\", options.livekitRoomName);\n        }\n        const fullUrl = \"\".concat(this.callUrl, \"?\").concat(callParams);\n        console.log(\"\\uD83D\\uDCDE [CALLPOPUP] Navigating to call URL in same tab:\", fullUrl);\n        // Đơn giản: mở màn hình call ngay trong tab hiện tại để tránh popup bị chặn\n        window.location.href = fullUrl;\n        return window;\n    }\n    closeCallWindow() {\n        if (this.callWindow && !this.callWindow.closed) {\n            this.callWindow.close();\n        }\n        this.callWindow = null;\n    }\n    endCall() {\n        // Emit end call event to parent window\n        if ( true && window.opener) {\n            window.opener.postMessage({\n                type: \"CALL_ENDED\"\n            }, \"*\");\n        }\n    }\n    constructor(){\n        this.callWindow = null;\n        this.callUrl =  true ? \"\".concat(window.location.origin, \"/call\") : 0;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uLi8uLi9wYWNrYWdlcy9hcHAvc2VydmljZXMvY2FsbFBvcHVwLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQTtJQVFYQyxlQUNFQyxNQUFjLEVBQ2RDLGNBQXNCLEVBR3RCO1lBRkFDLGFBQUFBLGlFQUFzQixPQUN0QkM7UUFFQSwrREFBK0Q7UUFDL0QsSUFBSSxLQUE2QixFQUFFLEVBR2xDO1FBRUQsTUFBTUcsYUFBYSxJQUFJQyxnQkFBZ0I7WUFDckNQO1lBQ0FDO1lBQ0FDLFlBQVlBLFdBQVdNLFFBQVE7UUFDakM7UUFDQSxJQUFJTCxvQkFBQUEsOEJBQUFBLFFBQVNNLFFBQVEsRUFBRTtZQUNyQkgsV0FBV0ksR0FBRyxDQUFDLFlBQVlQLFFBQVFNLFFBQVE7UUFDN0M7UUFDQSxJQUFJTixvQkFBQUEsOEJBQUFBLFFBQVNRLGVBQWUsRUFBRTtZQUM1QkwsV0FBV0ksR0FBRyxDQUFDLG1CQUFtQlAsUUFBUVEsZUFBZTtRQUMzRDtRQUVBLE1BQU1DLFVBQVUsR0FBbUJOLE9BQWhCLElBQUksQ0FBQ08sT0FBTyxFQUFDLEtBQWMsT0FBWFA7UUFDbkNGLFFBQVFDLEdBQUcsQ0FBQyxnRUFBc0RPO1FBRWxFLDRFQUE0RTtRQUM1RUUsT0FBT0MsUUFBUSxDQUFDQyxJQUFJLEdBQUdKO1FBRXZCLE9BQU9FO0lBQ1Q7SUFFQUcsa0JBQWtCO1FBQ2hCLElBQUksSUFBSSxDQUFDQyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUNBLFVBQVUsQ0FBQ0MsTUFBTSxFQUFFO1lBQzlDLElBQUksQ0FBQ0QsVUFBVSxDQUFDRSxLQUFLO1FBQ3ZCO1FBQ0EsSUFBSSxDQUFDRixVQUFVLEdBQUc7SUFDcEI7SUFFUUcsVUFBVTtRQUNoQix1Q0FBdUM7UUFDdkMsSUFBSSxLQUFrQixJQUFlUCxPQUFPUSxNQUFNLEVBQUU7WUFDbERSLE9BQU9RLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDO2dCQUFFQyxNQUFNO1lBQWEsR0FBRztRQUNwRDtJQUNGO0lBakRBQyxhQUFjO2FBSE5QLGFBQTRCO1FBSWxDLElBQUksQ0FBQ0wsT0FBTyxHQUFHLEtBQWtCLEdBQWMsR0FBMEIsT0FBdkJDLE9BQU9DLFFBQVEsQ0FBQ1csTUFBTSxFQUFDLFdBQVM7SUFDcEY7QUFnREYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uLy4uL3BhY2thZ2VzL2FwcC9zZXJ2aWNlcy9jYWxsUG9wdXAudHM/YzE0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FsbFBvcHVwTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBjYWxsV2luZG93OiBXaW5kb3cgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGNhbGxVcmw6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNhbGxVcmwgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2NhbGxgIDogJyc7XHJcbiAgfVxyXG5cclxuICBvcGVuQ2FsbFdpbmRvdyhcclxuICAgIGNhbGxJZDogc3RyaW5nLFxyXG4gICAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcclxuICAgIGlzSW5jb21pbmc6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgIG9wdGlvbnM/OiB7IGNhbGxUeXBlPzogJ3AycCcgfCAnc2Z1JzsgbGl2ZWtpdFJvb21OYW1lPzogc3RyaW5nIH1cclxuICApIHtcclxuICAgIC8vIFNlcnZpY2UgbsOgeSBjaOG7iSBkw7luZyBjaG8gd2ViOyBu4bq/dSBraMO0bmcgY8OzIHdpbmRvdyB0aMOsIGLhu48gcXVhXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2FsbCBwb3B1cCBvbmx5IHdvcmtzIGluIGJyb3dzZXIgZW52aXJvbm1lbnQnKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2FsbFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICBjYWxsSWQsXHJcbiAgICAgIGNvbnZlcnNhdGlvbklkLFxyXG4gICAgICBpc0luY29taW5nOiBpc0luY29taW5nLnRvU3RyaW5nKClcclxuICAgIH0pO1xyXG4gICAgaWYgKG9wdGlvbnM/LmNhbGxUeXBlKSB7XHJcbiAgICAgIGNhbGxQYXJhbXMuc2V0KCdjYWxsVHlwZScsIG9wdGlvbnMuY2FsbFR5cGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnM/LmxpdmVraXRSb29tTmFtZSkge1xyXG4gICAgICBjYWxsUGFyYW1zLnNldCgnbGl2ZWtpdFJvb21OYW1lJywgb3B0aW9ucy5saXZla2l0Um9vbU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZ1bGxVcmwgPSBgJHt0aGlzLmNhbGxVcmx9PyR7Y2FsbFBhcmFtc31gO1xyXG4gICAgY29uc29sZS5sb2coJ/Cfk54gW0NBTExQT1BVUF0gTmF2aWdhdGluZyB0byBjYWxsIFVSTCBpbiBzYW1lIHRhYjonLCBmdWxsVXJsKTtcclxuXHJcbiAgICAvLyDEkMahbiBnaeG6o246IG3hu58gbcOgbiBow6xuaCBjYWxsIG5nYXkgdHJvbmcgdGFiIGhp4buHbiB04bqhaSDEkeG7gyB0csOhbmggcG9wdXAgYuG7iyBjaOG6t25cclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZnVsbFVybDtcclxuXHJcbiAgICByZXR1cm4gd2luZG93O1xyXG4gIH1cclxuXHJcbiAgY2xvc2VDYWxsV2luZG93KCkge1xyXG4gICAgaWYgKHRoaXMuY2FsbFdpbmRvdyAmJiAhdGhpcy5jYWxsV2luZG93LmNsb3NlZCkge1xyXG4gICAgICB0aGlzLmNhbGxXaW5kb3cuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIHRoaXMuY2FsbFdpbmRvdyA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVuZENhbGwoKSB7XHJcbiAgICAvLyBFbWl0IGVuZCBjYWxsIGV2ZW50IHRvIHBhcmVudCB3aW5kb3dcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cub3BlbmVyKSB7XHJcbiAgICAgIHdpbmRvdy5vcGVuZXIucG9zdE1lc3NhZ2UoeyB0eXBlOiAnQ0FMTF9FTkRFRCcgfSwgJyonKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhbGxQb3B1cE1hbmFnZXIiLCJvcGVuQ2FsbFdpbmRvdyIsImNhbGxJZCIsImNvbnZlcnNhdGlvbklkIiwiaXNJbmNvbWluZyIsIm9wdGlvbnMiLCJjb25zb2xlIiwibG9nIiwiY2FsbFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwiY2FsbFR5cGUiLCJzZXQiLCJsaXZla2l0Um9vbU5hbWUiLCJmdWxsVXJsIiwiY2FsbFVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNsb3NlQ2FsbFdpbmRvdyIsImNhbGxXaW5kb3ciLCJjbG9zZWQiLCJjbG9zZSIsImVuZENhbGwiLCJvcGVuZXIiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJjb25zdHJ1Y3RvciIsIm9yaWdpbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/../../packages/app/services/callPopup.ts\n"));

/***/ })

});